(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function rm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Vc={exports:{}},qo={},Dc={exports:{}},je={};var Jd;function jy(){if(Jd)return je;Jd=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),P=Symbol.iterator;function j(V){return V===null||typeof V!="object"?null:(V=P&&V[P]||V["@@iterator"],typeof V=="function"?V:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,te={};function q(V,$,ue){this.props=V,this.context=$,this.refs=te,this.updater=ue||z}q.prototype.isReactComponent={},q.prototype.setState=function(V,$){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,$,"setState")},q.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function oe(){}oe.prototype=q.prototype;function ke(V,$,ue){this.props=V,this.context=$,this.refs=te,this.updater=ue||z}var ae=ke.prototype=new oe;ae.constructor=ke,J(ae,q.prototype),ae.isPureReactComponent=!0;var Ae=Array.isArray,Xe=Object.prototype.hasOwnProperty,Pe={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function S(V,$,ue){var Re,xe={},Te=null,Ce=null;if($!=null)for(Re in $.ref!==void 0&&(Ce=$.ref),$.key!==void 0&&(Te=""+$.key),$)Xe.call($,Re)&&!C.hasOwnProperty(Re)&&(xe[Re]=$[Re]);var Ee=arguments.length-2;if(Ee===1)xe.children=ue;else if(1<Ee){for(var Qe=Array(Ee),mt=0;mt<Ee;mt++)Qe[mt]=arguments[mt+2];xe.children=Qe}if(V&&V.defaultProps)for(Re in Ee=V.defaultProps,Ee)xe[Re]===void 0&&(xe[Re]=Ee[Re]);return{$$typeof:i,type:V,key:Te,ref:Ce,props:xe,_owner:Pe.current}}function E(V,$){return{$$typeof:i,type:V.type,key:$,ref:V.ref,props:V.props,_owner:V._owner}}function k(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function x(V){var $={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ue){return $[ue]})}var D=/\/+/g;function I(V,$){return typeof V=="object"&&V!==null&&V.key!=null?x(""+V.key):$.toString(36)}function qe(V,$,ue,Re,xe){var Te=typeof V;(Te==="undefined"||Te==="boolean")&&(V=null);var Ce=!1;if(V===null)Ce=!0;else switch(Te){case"string":case"number":Ce=!0;break;case"object":switch(V.$$typeof){case i:case e:Ce=!0}}if(Ce)return Ce=V,xe=xe(Ce),V=Re===""?"."+I(Ce,0):Re,Ae(xe)?(ue="",V!=null&&(ue=V.replace(D,"$&/")+"/"),qe(xe,$,ue,"",function(mt){return mt})):xe!=null&&(k(xe)&&(xe=E(xe,ue+(!xe.key||Ce&&Ce.key===xe.key?"":(""+xe.key).replace(D,"$&/")+"/")+V)),$.push(xe)),1;if(Ce=0,Re=Re===""?".":Re+":",Ae(V))for(var Ee=0;Ee<V.length;Ee++){Te=V[Ee];var Qe=Re+I(Te,Ee);Ce+=qe(Te,$,ue,Qe,xe)}else if(Qe=j(V),typeof Qe=="function")for(V=Qe.call(V),Ee=0;!(Te=V.next()).done;)Te=Te.value,Qe=Re+I(Te,Ee++),Ce+=qe(Te,$,ue,Qe,xe);else if(Te==="object")throw $=String(V),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Ce}function Oe(V,$,ue){if(V==null)return V;var Re=[],xe=0;return qe(V,Re,"","",function(Te){return $.call(ue,Te,xe++)}),Re}function Et(V){if(V._status===-1){var $=V._result;$=$(),$.then(function(ue){(V._status===0||V._status===-1)&&(V._status=1,V._result=ue)},function(ue){(V._status===0||V._status===-1)&&(V._status=2,V._result=ue)}),V._status===-1&&(V._status=0,V._result=$)}if(V._status===1)return V._result.default;throw V._result}var Le={current:null},ne={transition:null},fe={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:ne,ReactCurrentOwner:Pe};function se(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:Oe,forEach:function(V,$,ue){Oe(V,function(){$.apply(this,arguments)},ue)},count:function(V){var $=0;return Oe(V,function(){$++}),$},toArray:function(V){return Oe(V,function($){return $})||[]},only:function(V){if(!k(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},je.Component=q,je.Fragment=r,je.Profiler=l,je.PureComponent=ke,je.StrictMode=s,je.Suspense=y,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,je.act=se,je.cloneElement=function(V,$,ue){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Re=J({},V.props),xe=V.key,Te=V.ref,Ce=V._owner;if($!=null){if($.ref!==void 0&&(Te=$.ref,Ce=Pe.current),$.key!==void 0&&(xe=""+$.key),V.type&&V.type.defaultProps)var Ee=V.type.defaultProps;for(Qe in $)Xe.call($,Qe)&&!C.hasOwnProperty(Qe)&&(Re[Qe]=$[Qe]===void 0&&Ee!==void 0?Ee[Qe]:$[Qe])}var Qe=arguments.length-2;if(Qe===1)Re.children=ue;else if(1<Qe){Ee=Array(Qe);for(var mt=0;mt<Qe;mt++)Ee[mt]=arguments[mt+2];Re.children=Ee}return{$$typeof:i,type:V.type,key:xe,ref:Te,props:Re,_owner:Ce}},je.createContext=function(V){return V={$$typeof:f,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:c,_context:V},V.Consumer=V},je.createElement=S,je.createFactory=function(V){var $=S.bind(null,V);return $.type=V,$},je.createRef=function(){return{current:null}},je.forwardRef=function(V){return{$$typeof:m,render:V}},je.isValidElement=k,je.lazy=function(V){return{$$typeof:A,_payload:{_status:-1,_result:V},_init:Et}},je.memo=function(V,$){return{$$typeof:_,type:V,compare:$===void 0?null:$}},je.startTransition=function(V){var $=ne.transition;ne.transition={};try{V()}finally{ne.transition=$}},je.unstable_act=se,je.useCallback=function(V,$){return Le.current.useCallback(V,$)},je.useContext=function(V){return Le.current.useContext(V)},je.useDebugValue=function(){},je.useDeferredValue=function(V){return Le.current.useDeferredValue(V)},je.useEffect=function(V,$){return Le.current.useEffect(V,$)},je.useId=function(){return Le.current.useId()},je.useImperativeHandle=function(V,$,ue){return Le.current.useImperativeHandle(V,$,ue)},je.useInsertionEffect=function(V,$){return Le.current.useInsertionEffect(V,$)},je.useLayoutEffect=function(V,$){return Le.current.useLayoutEffect(V,$)},je.useMemo=function(V,$){return Le.current.useMemo(V,$)},je.useReducer=function(V,$,ue){return Le.current.useReducer(V,$,ue)},je.useRef=function(V){return Le.current.useRef(V)},je.useState=function(V){return Le.current.useState(V)},je.useSyncExternalStore=function(V,$,ue){return Le.current.useSyncExternalStore(V,$,ue)},je.useTransition=function(){return Le.current.useTransition()},je.version="18.3.1",je}var Zd;function ph(){return Zd||(Zd=1,Dc.exports=jy()),Dc.exports}var ep;function by(){if(ep)return qo;ep=1;var i=ph(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(m,y,_){var A,P={},j=null,z=null;_!==void 0&&(j=""+_),y.key!==void 0&&(j=""+y.key),y.ref!==void 0&&(z=y.ref);for(A in y)s.call(y,A)&&!c.hasOwnProperty(A)&&(P[A]=y[A]);if(m&&m.defaultProps)for(A in y=m.defaultProps,y)P[A]===void 0&&(P[A]=y[A]);return{$$typeof:e,type:m,key:j,ref:z,props:P,_owner:l.current}}return qo.Fragment=r,qo.jsx=f,qo.jsxs=f,qo}var tp;function Uy(){return tp||(tp=1,Vc.exports=by()),Vc.exports}var L=Uy(),Z=ph();const By=rm(Z);var Al={},Lc={exports:{}},kn={},Oc={exports:{}},Mc={};var np;function zy(){return np||(np=1,(function(i){function e(ne,fe){var se=ne.length;ne.push(fe);e:for(;0<se;){var V=se-1>>>1,$=ne[V];if(0<l($,fe))ne[V]=fe,ne[se]=$,se=V;else break e}}function r(ne){return ne.length===0?null:ne[0]}function s(ne){if(ne.length===0)return null;var fe=ne[0],se=ne.pop();if(se!==fe){ne[0]=se;e:for(var V=0,$=ne.length,ue=$>>>1;V<ue;){var Re=2*(V+1)-1,xe=ne[Re],Te=Re+1,Ce=ne[Te];if(0>l(xe,se))Te<$&&0>l(Ce,xe)?(ne[V]=Ce,ne[Te]=se,V=Te):(ne[V]=xe,ne[Re]=se,V=Re);else if(Te<$&&0>l(Ce,se))ne[V]=Ce,ne[Te]=se,V=Te;else break e}}return fe}function l(ne,fe){var se=ne.sortIndex-fe.sortIndex;return se!==0?se:ne.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var y=[],_=[],A=1,P=null,j=3,z=!1,J=!1,te=!1,q=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,ke=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ae(ne){for(var fe=r(_);fe!==null;){if(fe.callback===null)s(_);else if(fe.startTime<=ne)s(_),fe.sortIndex=fe.expirationTime,e(y,fe);else break;fe=r(_)}}function Ae(ne){if(te=!1,ae(ne),!J)if(r(y)!==null)J=!0,Et(Xe);else{var fe=r(_);fe!==null&&Le(Ae,fe.startTime-ne)}}function Xe(ne,fe){J=!1,te&&(te=!1,oe(S),S=-1),z=!0;var se=j;try{for(ae(fe),P=r(y);P!==null&&(!(P.expirationTime>fe)||ne&&!x());){var V=P.callback;if(typeof V=="function"){P.callback=null,j=P.priorityLevel;var $=V(P.expirationTime<=fe);fe=i.unstable_now(),typeof $=="function"?P.callback=$:P===r(y)&&s(y),ae(fe)}else s(y);P=r(y)}if(P!==null)var ue=!0;else{var Re=r(_);Re!==null&&Le(Ae,Re.startTime-fe),ue=!1}return ue}finally{P=null,j=se,z=!1}}var Pe=!1,C=null,S=-1,E=5,k=-1;function x(){return!(i.unstable_now()-k<E)}function D(){if(C!==null){var ne=i.unstable_now();k=ne;var fe=!0;try{fe=C(!0,ne)}finally{fe?I():(Pe=!1,C=null)}}else Pe=!1}var I;if(typeof ke=="function")I=function(){ke(D)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,Oe=qe.port2;qe.port1.onmessage=D,I=function(){Oe.postMessage(null)}}else I=function(){q(D,0)};function Et(ne){C=ne,Pe||(Pe=!0,I())}function Le(ne,fe){S=q(function(){ne(i.unstable_now())},fe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ne){ne.callback=null},i.unstable_continueExecution=function(){J||z||(J=!0,Et(Xe))},i.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<ne?Math.floor(1e3/ne):5},i.unstable_getCurrentPriorityLevel=function(){return j},i.unstable_getFirstCallbackNode=function(){return r(y)},i.unstable_next=function(ne){switch(j){case 1:case 2:case 3:var fe=3;break;default:fe=j}var se=j;j=fe;try{return ne()}finally{j=se}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ne,fe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var se=j;j=ne;try{return fe()}finally{j=se}},i.unstable_scheduleCallback=function(ne,fe,se){var V=i.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?V+se:V):se=V,ne){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=se+$,ne={id:A++,callback:fe,priorityLevel:ne,startTime:se,expirationTime:$,sortIndex:-1},se>V?(ne.sortIndex=se,e(_,ne),r(y)===null&&ne===r(_)&&(te?(oe(S),S=-1):te=!0,Le(Ae,se-V))):(ne.sortIndex=$,e(y,ne),J||z||(J=!0,Et(Xe))),ne},i.unstable_shouldYield=x,i.unstable_wrapCallback=function(ne){var fe=j;return function(){var se=j;j=fe;try{return ne.apply(this,arguments)}finally{j=se}}}})(Mc)),Mc}var rp;function $y(){return rp||(rp=1,Oc.exports=zy()),Oc.exports}var ip;function Wy(){if(ip)return kn;ip=1;var i=ph(),e=$y();function r(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,l={};function c(t,n){f(t,n),f(t+"Capture",n)}function f(t,n){for(l[t]=n,t=0;t<n.length;t++)s.add(n[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},P={};function j(t){return y.call(P,t)?!0:y.call(A,t)?!1:_.test(t)?P[t]=!0:(A[t]=!0,!1)}function z(t,n,o,u){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function J(t,n,o,u){if(n===null||typeof n>"u"||z(t,n,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function te(t,n,o,u,h,p,v){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=n,this.sanitizeURL=p,this.removeEmptyString=v}var q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){q[t]=new te(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];q[n]=new te(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){q[t]=new te(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){q[t]=new te(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){q[t]=new te(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){q[t]=new te(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){q[t]=new te(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){q[t]=new te(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){q[t]=new te(t,5,!1,t.toLowerCase(),null,!1,!1)});var oe=/[\-:]([a-z])/g;function ke(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(oe,ke);q[n]=new te(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(oe,ke);q[n]=new te(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(oe,ke);q[n]=new te(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){q[t]=new te(t,1,!1,t.toLowerCase(),null,!1,!1)}),q.xlinkHref=new te("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){q[t]=new te(t,1,!1,t.toLowerCase(),null,!0,!0)});function ae(t,n,o,u){var h=q.hasOwnProperty(n)?q[n]:null;(h!==null?h.type!==0:u||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(J(n,o,h,u)&&(o=null),u||h===null?j(n)&&(o===null?t.removeAttribute(n):t.setAttribute(n,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(n=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(n):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,n,o):t.setAttribute(n,o))))}var Ae=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xe=Symbol.for("react.element"),Pe=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),x=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),qe=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),Et=Symbol.for("react.lazy"),Le=Symbol.for("react.offscreen"),ne=Symbol.iterator;function fe(t){return t===null||typeof t!="object"?null:(t=ne&&t[ne]||t["@@iterator"],typeof t=="function"?t:null)}var se=Object.assign,V;function $(t){if(V===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);V=n&&n[1]||""}return`
`+V+t}var ue=!1;function Re(t,n){if(!t||ue)return"";ue=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(b){var u=b}Reflect.construct(t,[],n)}else{try{n.call()}catch(b){u=b}t.call(n.prototype)}else{try{throw Error()}catch(b){u=b}t()}}catch(b){if(b&&u&&typeof b.stack=="string"){for(var h=b.stack.split(`
`),p=u.stack.split(`
`),v=h.length-1,T=p.length-1;1<=v&&0<=T&&h[v]!==p[T];)T--;for(;1<=v&&0<=T;v--,T--)if(h[v]!==p[T]){if(v!==1||T!==1)do if(v--,T--,0>T||h[v]!==p[T]){var R=`
`+h[v].replace(" at new "," at ");return t.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",t.displayName)),R}while(1<=v&&0<=T);break}}}finally{ue=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?$(t):""}function xe(t){switch(t.tag){case 5:return $(t.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return t=Re(t.type,!1),t;case 11:return t=Re(t.type.render,!1),t;case 1:return t=Re(t.type,!0),t;default:return""}}function Te(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case Pe:return"Portal";case E:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case qe:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case x:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case D:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Oe:return n=t.displayName||null,n!==null?n:Te(t.type)||"Memo";case Et:n=t._payload,t=t._init;try{return Te(t(n))}catch{}}return null}function Ce(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(n);case 8:return n===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Ee(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qe(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function mt(t){var n=Qe(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),u=""+t[n];if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){u=""+v,p.call(this,v)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Ue(t){t._valueTracker||(t._valueTracker=mt(t))}function W(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var o=n.getValue(),u="";return t&&(u=Qe(t)?t.checked?"true":"false":t.value),t=u,t!==o?(n.setValue(t),!0):!1}function $t(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ht(t,n){var o=n.checked;return se({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function it(t,n){var o=n.defaultValue==null?"":n.defaultValue,u=n.checked!=null?n.checked:n.defaultChecked;o=Ee(n.value!=null?n.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function st(t,n){n=n.checked,n!=null&&ae(t,"checked",n,!1)}function Zt(t,n){st(t,n);var o=Ee(n.value),u=n.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?rr(t,n.type,o):n.hasOwnProperty("defaultValue")&&rr(t,n.type,Ee(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function en(t,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var u=n.type;if(!(u!=="submit"&&u!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,o||n===t.value||(t.value=n),t.defaultValue=n}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function rr(t,n,o){(n!=="number"||$t(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var tn=Array.isArray;function dn(t,n,o,u){if(t=t.options,n){n={};for(var h=0;h<o.length;h++)n["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=n.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Ee(o),n=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function nn(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return se({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _r(t,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(r(92));if(tn(o)){if(1<o.length)throw Error(r(93));o=o[0]}n=o}n==null&&(n=""),o=n}t._wrapperState={initialValue:Ee(o)}}function Wt(t,n){var o=Ee(n.value),u=Ee(n.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),n.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function ir(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function Je(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ot(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?Je(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var At,Mr=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(n,o,u,h)})}:t})(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(At=At||document.createElement("div"),At.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=At.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function rn(t,n){if(n){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=n;return}}t.textContent=n}var wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vn=["Webkit","ms","Moz","O"];Object.keys(wr).forEach(function(t){vn.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),wr[n]=wr[t]})});function ni(t,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||wr.hasOwnProperty(t)&&wr[t]?(""+n).trim():n+"px"}function zn(t,n){t=t.style;for(var o in n)if(n.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=ni(o,n[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var bi=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sr(t,n){if(n){if(bi[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function ri(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $n=null;function Ui(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wn=null,_n=null,Pn=null;function ii(t){if(t=xo(t)){if(typeof Wn!="function")throw Error(r(280));var n=t.stateNode;n&&(n=Ua(n),Wn(t.stateNode,t.type,n))}}function pn(t){_n?Pn?Pn.push(t):Pn=[t]:_n=t}function Bi(){if(_n){var t=_n,n=Pn;if(Pn=_n=null,ii(t),n)for(t=0;t<n.length;t++)ii(n[t])}}function qn(t,n){return t(n)}function zi(){}var Tt=!1;function xn(t,n,o){if(Tt)return t(n,o);Tt=!0;try{return qn(t,n,o)}finally{Tt=!1,(_n!==null||Pn!==null)&&(zi(),Bi())}}function gt(t,n){var o=t.stateNode;if(o===null)return null;var u=Ua(o);if(u===null)return null;o=u[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(r(231,n,typeof o));return o}var si=!1;if(m)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){si=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{si=!1}function Hn(t,n,o,u,h,p,v,T,R){var b=Array.prototype.slice.call(arguments,3);try{n.apply(o,b)}catch(Q){this.onError(Q)}}var Er=!1,Vn=null,Mt=!1,tt=null,or={onError:function(t){Er=!0,Vn=t}};function Fr(t,n,o,u,h,p,v,T,R){Er=!1,Vn=null,Hn.apply(or,arguments)}function ms(t,n,o,u,h,p,v,T,R){if(Fr.apply(this,arguments),Er){if(Er){var b=Vn;Er=!1,Vn=null}else throw Error(r(198));Mt||(Mt=!0,tt=b)}}function wn(t){var n=t,o=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(o=n.return),t=n.return;while(t)}return n.tag===3?o:null}function Tr(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function Dn(t){if(wn(t)!==t)throw Error(r(188))}function oi(t){var n=t.alternate;if(!n){if(n=wn(t),n===null)throw Error(r(188));return n!==t?null:t}for(var o=t,u=n;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return Dn(h),t;if(p===u)return Dn(h),n;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=h,u=p;else{for(var v=!1,T=h.child;T;){if(T===o){v=!0,o=h,u=p;break}if(T===u){v=!0,u=h,o=p;break}T=T.sibling}if(!v){for(T=p.child;T;){if(T===o){v=!0,o=p,u=h;break}if(T===u){v=!0,u=p,o=h;break}T=T.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?t:n}function ai(t){return t=oi(t),t!==null?li(t):null}function li(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=li(t);if(n!==null)return n;t=t.sibling}return null}var H=e.unstable_scheduleCallback,U=e.unstable_cancelCallback,Ne=e.unstable_shouldYield,me=e.unstable_requestPaint,re=e.unstable_now,Be=e.unstable_getCurrentPriorityLevel,Ze=e.unstable_ImmediatePriority,Me=e.unstable_UserBlockingPriority,et=e.unstable_NormalPriority,Ft=e.unstable_LowPriority,Fe=e.unstable_IdlePriority,sn=null,yt=null;function Ln(t){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(sn,t,void 0,(t.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:va,jr=Math.log,gs=Math.LN2;function va(t){return t>>>=0,t===0?32:31-(jr(t)/gs|0)|0}var ys=64,vs=4194304;function ui(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $i(t,n){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,v=o&268435455;if(v!==0){var T=v&~h;T!==0?u=ui(T):(p&=v,p!==0&&(u=ui(p)))}else v=o&~h,v!==0?u=ui(v):p!==0&&(u=ui(p));if(u===0)return 0;if(n!==0&&n!==u&&(n&h)===0&&(h=u&-u,p=n&-n,h>=p||h===16&&(p&4194240)!==0))return n;if((u&4)!==0&&(u|=o&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=u;0<n;)o=31-St(n),h=1<<o,u|=t[o],n&=~h;return u}function lu(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function br(t,n){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var v=31-St(p),T=1<<v,R=h[v];R===-1?((T&o)===0||(T&u)!==0)&&(h[v]=lu(T,n)):R<=n&&(t.expiredLanes|=T),p&=~T}}function On(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Wi(){var t=ys;return ys<<=1,(ys&4194240)===0&&(ys=64),t}function ci(t){for(var n=[],o=0;31>o;o++)n.push(t);return n}function hi(t,n,o){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-St(n),t[n]=o}function at(t,n){var o=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-St(o),p=1<<h;n[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function fi(t,n){var o=t.entangledLanes|=n;for(t=t.entanglements;o;){var u=31-St(o),h=1<<u;h&n|t[u]&n&&(t[u]|=n),o&=~h}}var ze=0;function di(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var _a,_s,wa,Ea,Ta,mo=!1,Sr=[],qt=null,ar=null,lr=null,pi=new Map,Kn=new Map,Ir=[],uu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sa(t,n){switch(t){case"focusin":case"focusout":qt=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":pi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kn.delete(n.pointerId)}}function En(t,n,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:n,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},n!==null&&(n=xo(n),n!==null&&_s(n)),t):(t.eventSystemFlags|=u,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function cu(t,n,o,u,h){switch(n){case"focusin":return qt=En(qt,t,n,o,u,h),!0;case"dragenter":return ar=En(ar,t,n,o,u,h),!0;case"mouseover":return lr=En(lr,t,n,o,u,h),!0;case"pointerover":var p=h.pointerId;return pi.set(p,En(pi.get(p)||null,t,n,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,Kn.set(p,En(Kn.get(p)||null,t,n,o,u,h)),!0}return!1}function Ia(t){var n=Gi(t.target);if(n!==null){var o=wn(n);if(o!==null){if(n=o.tag,n===13){if(n=Tr(o),n!==null){t.blockedOn=n,Ta(t.priority,function(){wa(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ur(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var o=ws(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);$n=u,o.target.dispatchEvent(u),$n=null}else return n=xo(o),n!==null&&_s(n),t.blockedOn=o,!1;n.shift()}return!0}function qi(t,n,o){Ur(t)&&o.delete(n)}function Aa(){mo=!1,qt!==null&&Ur(qt)&&(qt=null),ar!==null&&Ur(ar)&&(ar=null),lr!==null&&Ur(lr)&&(lr=null),pi.forEach(qi),Kn.forEach(qi)}function ur(t,n){t.blockedOn===n&&(t.blockedOn=null,mo||(mo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Aa)))}function cr(t){function n(h){return ur(h,t)}if(0<Sr.length){ur(Sr[0],t);for(var o=1;o<Sr.length;o++){var u=Sr[o];u.blockedOn===t&&(u.blockedOn=null)}}for(qt!==null&&ur(qt,t),ar!==null&&ur(ar,t),lr!==null&&ur(lr,t),pi.forEach(n),Kn.forEach(n),o=0;o<Ir.length;o++)u=Ir[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Ir.length&&(o=Ir[0],o.blockedOn===null);)Ia(o),o.blockedOn===null&&Ir.shift()}var Br=Ae.ReactCurrentBatchConfig,mi=!0;function ft(t,n,o,u){var h=ze,p=Br.transition;Br.transition=null;try{ze=1,go(t,n,o,u)}finally{ze=h,Br.transition=p}}function hu(t,n,o,u){var h=ze,p=Br.transition;Br.transition=null;try{ze=4,go(t,n,o,u)}finally{ze=h,Br.transition=p}}function go(t,n,o,u){if(mi){var h=ws(t,n,o,u);if(h===null)Tu(t,n,u,Hi,o),Sa(t,u);else if(cu(h,t,n,o,u))u.stopPropagation();else if(Sa(t,u),n&4&&-1<uu.indexOf(t)){for(;h!==null;){var p=xo(h);if(p!==null&&_a(p),p=ws(t,n,o,u),p===null&&Tu(t,n,u,Hi,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Tu(t,n,u,null,o)}}var Hi=null;function ws(t,n,o,u){if(Hi=null,t=Ui(u),t=Gi(t),t!==null)if(n=wn(t),n===null)t=null;else if(o=n.tag,o===13){if(t=Tr(n),t!==null)return t;t=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Hi=t,null}function yo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Be()){case Ze:return 1;case Me:return 4;case et:case Ft:return 16;case Fe:return 536870912;default:return 16}default:return 16}}var Mn=null,Es=null,Tn=null;function vo(){if(Tn)return Tn;var t,n=Es,o=n.length,u,h="value"in Mn?Mn.value:Mn.textContent,p=h.length;for(t=0;t<o&&n[t]===h[t];t++);var v=o-t;for(u=1;u<=v&&n[o-u]===h[p-u];u++);return Tn=h.slice(t,1<u?1-u:void 0)}function Ts(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ar(){return!0}function _o(){return!1}function Ht(t){function n(o,u,h,p,v){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ar:_o,this.isPropagationStopped=_o,this}return se(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ar)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ar)},persist:function(){},isPersistent:Ar}),n}var hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ss=Ht(hr),Rr=se({},hr,{view:0,detail:0}),fu=Ht(Rr),Is,zr,gi,Ki=se({},Rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gi&&(gi&&t.type==="mousemove"?(Is=t.screenX-gi.screenX,zr=t.screenY-gi.screenY):zr=Is=0,gi=t),Is)},movementY:function(t){return"movementY"in t?t.movementY:zr}}),As=Ht(Ki),wo=se({},Ki,{dataTransfer:0}),Ra=Ht(wo),Rs=se({},Rr,{relatedTarget:0}),Cs=Ht(Rs),Ca=se({},hr,{animationName:0,elapsedTime:0,pseudoElement:0}),$r=Ht(Ca),ka=se({},hr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pa=Ht(ka),xa=se({},hr,{data:0}),Eo=Ht(xa),ks={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Na={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Va(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Na[t])?!!n[t]:!1}function Cr(){return Va}var a=se({},Rr,{key:function(t){if(t.key){var n=ks[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ts(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cr,charCode:function(t){return t.type==="keypress"?Ts(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ts(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=Ht(a),g=se({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=Ht(g),O=se({},Rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cr}),B=Ht(O),ie=se({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),nt=Ht(ie),Nt=se({},Ki,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$e=Ht(Nt),jt=[9,13,27,32],kt=m&&"CompositionEvent"in window,Qn=null;m&&"documentMode"in document&&(Qn=document.documentMode);var Fn=m&&"TextEvent"in window&&!Qn,Qi=m&&(!kt||Qn&&8<Qn&&11>=Qn),Ps=" ",qh=!1;function Hh(t,n){switch(t){case"keyup":return jt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xs=!1;function Og(t,n){switch(t){case"compositionend":return Kh(n);case"keypress":return n.which!==32?null:(qh=!0,Ps);case"textInput":return t=n.data,t===Ps&&qh?null:t;default:return null}}function Mg(t,n){if(xs)return t==="compositionend"||!kt&&Hh(t,n)?(t=vo(),Tn=Es=Mn=null,xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Qi&&n.locale!=="ko"?null:n.data;default:return null}}var Fg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Fg[t.type]:n==="textarea"}function Gh(t,n,o,u){pn(u),n=Fa(n,"onChange"),0<n.length&&(o=new Ss("onChange","change",null,o,u),t.push({event:o,listeners:n}))}var To=null,So=null;function jg(t){pf(t,0)}function Da(t){var n=Os(t);if(W(n))return t}function bg(t,n){if(t==="change")return n}var Yh=!1;if(m){var du;if(m){var pu="oninput"in document;if(!pu){var Xh=document.createElement("div");Xh.setAttribute("oninput","return;"),pu=typeof Xh.oninput=="function"}du=pu}else du=!1;Yh=du&&(!document.documentMode||9<document.documentMode)}function Jh(){To&&(To.detachEvent("onpropertychange",Zh),So=To=null)}function Zh(t){if(t.propertyName==="value"&&Da(So)){var n=[];Gh(n,So,t,Ui(t)),xn(jg,n)}}function Ug(t,n,o){t==="focusin"?(Jh(),To=n,So=o,To.attachEvent("onpropertychange",Zh)):t==="focusout"&&Jh()}function Bg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Da(So)}function zg(t,n){if(t==="click")return Da(n)}function $g(t,n){if(t==="input"||t==="change")return Da(n)}function Wg(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var fr=typeof Object.is=="function"?Object.is:Wg;function Io(t,n){if(fr(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var o=Object.keys(t),u=Object.keys(n);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!y.call(n,h)||!fr(t[h],n[h]))return!1}return!0}function ef(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tf(t,n){var o=ef(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=n&&u>=n)return{node:o,offset:n-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ef(o)}}function nf(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?nf(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function rf(){for(var t=window,n=$t();n instanceof t.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)t=n.contentWindow;else break;n=$t(t.document)}return n}function mu(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function qg(t){var n=rf(),o=t.focusedElem,u=t.selectionRange;if(n!==o&&o&&o.ownerDocument&&nf(o.ownerDocument.documentElement,o)){if(u!==null&&mu(o)){if(n=u.start,t=u.end,t===void 0&&(t=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(t,o.value.length);else if(t=(n=o.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=tf(o,p);var v=tf(o,u);h&&v&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(n=n.createRange(),n.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(n),t.extend(v.node,v.offset)):(n.setEnd(v.node,v.offset),t.addRange(n)))}}for(n=[],t=o;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)t=n[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Hg=m&&"documentMode"in document&&11>=document.documentMode,Ns=null,gu=null,Ao=null,yu=!1;function sf(t,n,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;yu||Ns==null||Ns!==$t(u)||(u=Ns,"selectionStart"in u&&mu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ao&&Io(Ao,u)||(Ao=u,u=Fa(gu,"onSelect"),0<u.length&&(n=new Ss("onSelect","select",null,n,o),t.push({event:n,listeners:u}),n.target=Ns)))}function La(t,n){var o={};return o[t.toLowerCase()]=n.toLowerCase(),o["Webkit"+t]="webkit"+n,o["Moz"+t]="moz"+n,o}var Vs={animationend:La("Animation","AnimationEnd"),animationiteration:La("Animation","AnimationIteration"),animationstart:La("Animation","AnimationStart"),transitionend:La("Transition","TransitionEnd")},vu={},of={};m&&(of=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function Oa(t){if(vu[t])return vu[t];if(!Vs[t])return t;var n=Vs[t],o;for(o in n)if(n.hasOwnProperty(o)&&o in of)return vu[t]=n[o];return t}var af=Oa("animationend"),lf=Oa("animationiteration"),uf=Oa("animationstart"),cf=Oa("transitionend"),hf=new Map,ff="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yi(t,n){hf.set(t,n),c(n,[t])}for(var _u=0;_u<ff.length;_u++){var wu=ff[_u],Kg=wu.toLowerCase(),Qg=wu[0].toUpperCase()+wu.slice(1);yi(Kg,"on"+Qg)}yi(af,"onAnimationEnd"),yi(lf,"onAnimationIteration"),yi(uf,"onAnimationStart"),yi("dblclick","onDoubleClick"),yi("focusin","onFocus"),yi("focusout","onBlur"),yi(cf,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ro));function df(t,n,o){var u=t.type||"unknown-event";t.currentTarget=o,ms(u,n,void 0,t),t.currentTarget=null}function pf(t,n){n=(n&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(n)for(var v=u.length-1;0<=v;v--){var T=u[v],R=T.instance,b=T.currentTarget;if(T=T.listener,R!==p&&h.isPropagationStopped())break e;df(h,T,b),p=R}else for(v=0;v<u.length;v++){if(T=u[v],R=T.instance,b=T.currentTarget,T=T.listener,R!==p&&h.isPropagationStopped())break e;df(h,T,b),p=R}}}if(Mt)throw t=tt,Mt=!1,tt=null,t}function ut(t,n){var o=n[ku];o===void 0&&(o=n[ku]=new Set);var u=t+"__bubble";o.has(u)||(mf(n,t,2,!1),o.add(u))}function Eu(t,n,o){var u=0;n&&(u|=4),mf(o,t,u,n)}var Ma="_reactListening"+Math.random().toString(36).slice(2);function Co(t){if(!t[Ma]){t[Ma]=!0,s.forEach(function(o){o!=="selectionchange"&&(Gg.has(o)||Eu(o,!1,t),Eu(o,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ma]||(n[Ma]=!0,Eu("selectionchange",!1,n))}}function mf(t,n,o,u){switch(yo(n)){case 1:var h=ft;break;case 4:h=hu;break;default:h=go}o=h.bind(null,n,o,t),h=void 0,!si||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(n,o,{capture:!0,passive:h}):t.addEventListener(n,o,!0):h!==void 0?t.addEventListener(n,o,{passive:h}):t.addEventListener(n,o,!1)}function Tu(t,n,o,u,h){var p=u;if((n&1)===0&&(n&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var T=u.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(v===4)for(v=u.return;v!==null;){var R=v.tag;if((R===3||R===4)&&(R=v.stateNode.containerInfo,R===h||R.nodeType===8&&R.parentNode===h))return;v=v.return}for(;T!==null;){if(v=Gi(T),v===null)return;if(R=v.tag,R===5||R===6){u=p=v;continue e}T=T.parentNode}}u=u.return}xn(function(){var b=p,Q=Ui(o),X=[];e:{var K=hf.get(t);if(K!==void 0){var le=Ss,he=t;switch(t){case"keypress":if(Ts(o)===0)break e;case"keydown":case"keyup":le=d;break;case"focusin":he="focus",le=Cs;break;case"focusout":he="blur",le=Cs;break;case"beforeblur":case"afterblur":le=Cs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=As;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Ra;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=B;break;case af:case lf:case uf:le=$r;break;case cf:le=nt;break;case"scroll":le=fu;break;case"wheel":le=$e;break;case"copy":case"cut":case"paste":le=Pa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=w}var de=(n&4)!==0,Rt=!de&&t==="scroll",M=de?K!==null?K+"Capture":null:K;de=[];for(var N=b,F;N!==null;){F=N;var ee=F.stateNode;if(F.tag===5&&ee!==null&&(F=ee,M!==null&&(ee=gt(N,M),ee!=null&&de.push(ko(N,ee,F)))),Rt)break;N=N.return}0<de.length&&(K=new le(K,he,null,o,Q),X.push({event:K,listeners:de}))}}if((n&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",le=t==="mouseout"||t==="pointerout",K&&o!==$n&&(he=o.relatedTarget||o.fromElement)&&(Gi(he)||he[Wr]))break e;if((le||K)&&(K=Q.window===Q?Q:(K=Q.ownerDocument)?K.defaultView||K.parentWindow:window,le?(he=o.relatedTarget||o.toElement,le=b,he=he?Gi(he):null,he!==null&&(Rt=wn(he),he!==Rt||he.tag!==5&&he.tag!==6)&&(he=null)):(le=null,he=b),le!==he)){if(de=As,ee="onMouseLeave",M="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(de=w,ee="onPointerLeave",M="onPointerEnter",N="pointer"),Rt=le==null?K:Os(le),F=he==null?K:Os(he),K=new de(ee,N+"leave",le,o,Q),K.target=Rt,K.relatedTarget=F,ee=null,Gi(Q)===b&&(de=new de(M,N+"enter",he,o,Q),de.target=F,de.relatedTarget=Rt,ee=de),Rt=ee,le&&he)t:{for(de=le,M=he,N=0,F=de;F;F=Ds(F))N++;for(F=0,ee=M;ee;ee=Ds(ee))F++;for(;0<N-F;)de=Ds(de),N--;for(;0<F-N;)M=Ds(M),F--;for(;N--;){if(de===M||M!==null&&de===M.alternate)break t;de=Ds(de),M=Ds(M)}de=null}else de=null;le!==null&&gf(X,K,le,de,!1),he!==null&&Rt!==null&&gf(X,Rt,he,de,!0)}}e:{if(K=b?Os(b):window,le=K.nodeName&&K.nodeName.toLowerCase(),le==="select"||le==="input"&&K.type==="file")var ge=bg;else if(Qh(K))if(Yh)ge=$g;else{ge=Bg;var ve=Ug}else(le=K.nodeName)&&le.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(ge=zg);if(ge&&(ge=ge(t,b))){Gh(X,ge,o,Q);break e}ve&&ve(t,K,b),t==="focusout"&&(ve=K._wrapperState)&&ve.controlled&&K.type==="number"&&rr(K,"number",K.value)}switch(ve=b?Os(b):window,t){case"focusin":(Qh(ve)||ve.contentEditable==="true")&&(Ns=ve,gu=b,Ao=null);break;case"focusout":Ao=gu=Ns=null;break;case"mousedown":yu=!0;break;case"contextmenu":case"mouseup":case"dragend":yu=!1,sf(X,o,Q);break;case"selectionchange":if(Hg)break;case"keydown":case"keyup":sf(X,o,Q)}var _e;if(kt)e:{switch(t){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else xs?Hh(t,o)&&(Se="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Se="onCompositionStart");Se&&(Qi&&o.locale!=="ko"&&(xs||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&xs&&(_e=vo()):(Mn=Q,Es="value"in Mn?Mn.value:Mn.textContent,xs=!0)),ve=Fa(b,Se),0<ve.length&&(Se=new Eo(Se,t,null,o,Q),X.push({event:Se,listeners:ve}),_e?Se.data=_e:(_e=Kh(o),_e!==null&&(Se.data=_e)))),(_e=Fn?Og(t,o):Mg(t,o))&&(b=Fa(b,"onBeforeInput"),0<b.length&&(Q=new Eo("onBeforeInput","beforeinput",null,o,Q),X.push({event:Q,listeners:b}),Q.data=_e))}pf(X,n)})}function ko(t,n,o){return{instance:t,listener:n,currentTarget:o}}function Fa(t,n){for(var o=n+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=gt(t,o),p!=null&&u.unshift(ko(t,p,h)),p=gt(t,n),p!=null&&u.push(ko(t,p,h))),t=t.return}return u}function Ds(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gf(t,n,o,u,h){for(var p=n._reactName,v=[];o!==null&&o!==u;){var T=o,R=T.alternate,b=T.stateNode;if(R!==null&&R===u)break;T.tag===5&&b!==null&&(T=b,h?(R=gt(o,p),R!=null&&v.unshift(ko(o,R,T))):h||(R=gt(o,p),R!=null&&v.push(ko(o,R,T)))),o=o.return}v.length!==0&&t.push({event:n,listeners:v})}var Yg=/\r\n?/g,Xg=/\u0000|\uFFFD/g;function yf(t){return(typeof t=="string"?t:""+t).replace(Yg,`
`).replace(Xg,"")}function ja(t,n,o){if(n=yf(n),yf(t)!==n&&o)throw Error(r(425))}function ba(){}var Su=null,Iu=null;function Au(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ru=typeof setTimeout=="function"?setTimeout:void 0,Jg=typeof clearTimeout=="function"?clearTimeout:void 0,vf=typeof Promise=="function"?Promise:void 0,Zg=typeof queueMicrotask=="function"?queueMicrotask:typeof vf<"u"?function(t){return vf.resolve(null).then(t).catch(ey)}:Ru;function ey(t){setTimeout(function(){throw t})}function Cu(t,n){var o=n,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),cr(n);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);cr(n)}function vi(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function _f(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return t;n--}else o==="/$"&&n++}t=t.previousSibling}return null}var Ls=Math.random().toString(36).slice(2),kr="__reactFiber$"+Ls,Po="__reactProps$"+Ls,Wr="__reactContainer$"+Ls,ku="__reactEvents$"+Ls,ty="__reactListeners$"+Ls,ny="__reactHandles$"+Ls;function Gi(t){var n=t[kr];if(n)return n;for(var o=t.parentNode;o;){if(n=o[Wr]||o[kr]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(t=_f(t);t!==null;){if(o=t[kr])return o;t=_f(t)}return n}t=o,o=t.parentNode}return null}function xo(t){return t=t[kr]||t[Wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Os(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function Ua(t){return t[Po]||null}var Pu=[],Ms=-1;function _i(t){return{current:t}}function ct(t){0>Ms||(t.current=Pu[Ms],Pu[Ms]=null,Ms--)}function lt(t,n){Ms++,Pu[Ms]=t.current,t.current=n}var wi={},on=_i(wi),Sn=_i(!1),Yi=wi;function Fs(t,n){var o=t.type.contextTypes;if(!o)return wi;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===n)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=n[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=h),h}function In(t){return t=t.childContextTypes,t!=null}function Ba(){ct(Sn),ct(on)}function wf(t,n,o){if(on.current!==wi)throw Error(r(168));lt(on,n),lt(Sn,o)}function Ef(t,n,o){var u=t.stateNode;if(n=n.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in n))throw Error(r(108,Ce(t)||"Unknown",h));return se({},o,u)}function za(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wi,Yi=on.current,lt(on,t),lt(Sn,Sn.current),!0}function Tf(t,n,o){var u=t.stateNode;if(!u)throw Error(r(169));o?(t=Ef(t,n,Yi),u.__reactInternalMemoizedMergedChildContext=t,ct(Sn),ct(on),lt(on,t)):ct(Sn),lt(Sn,o)}var qr=null,$a=!1,xu=!1;function Sf(t){qr===null?qr=[t]:qr.push(t)}function ry(t){$a=!0,Sf(t)}function Ei(){if(!xu&&qr!==null){xu=!0;var t=0,n=ze;try{var o=qr;for(ze=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}qr=null,$a=!1}catch(h){throw qr!==null&&(qr=qr.slice(t+1)),H(Ze,Ei),h}finally{ze=n,xu=!1}}return null}var js=[],bs=0,Wa=null,qa=0,Gn=[],Yn=0,Xi=null,Hr=1,Kr="";function Ji(t,n){js[bs++]=qa,js[bs++]=Wa,Wa=t,qa=n}function If(t,n,o){Gn[Yn++]=Hr,Gn[Yn++]=Kr,Gn[Yn++]=Xi,Xi=t;var u=Hr;t=Kr;var h=32-St(u)-1;u&=~(1<<h),o+=1;var p=32-St(n)+h;if(30<p){var v=h-h%5;p=(u&(1<<v)-1).toString(32),u>>=v,h-=v,Hr=1<<32-St(n)+h|o<<h|u,Kr=p+t}else Hr=1<<p|o<<h|u,Kr=t}function Nu(t){t.return!==null&&(Ji(t,1),If(t,1,0))}function Vu(t){for(;t===Wa;)Wa=js[--bs],js[bs]=null,qa=js[--bs],js[bs]=null;for(;t===Xi;)Xi=Gn[--Yn],Gn[Yn]=null,Kr=Gn[--Yn],Gn[Yn]=null,Hr=Gn[--Yn],Gn[Yn]=null}var jn=null,bn=null,dt=!1,dr=null;function Af(t,n){var o=er(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=t,n=t.deletions,n===null?(t.deletions=[o],t.flags|=16):n.push(o)}function Rf(t,n){switch(t.tag){case 5:var o=t.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,jn=t,bn=vi(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,jn=t,bn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=Xi!==null?{id:Hr,overflow:Kr}:null,t.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=er(18,null,null,0),o.stateNode=n,o.return=t,t.child=o,jn=t,bn=null,!0):!1;default:return!1}}function Du(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lu(t){if(dt){var n=bn;if(n){var o=n;if(!Rf(t,n)){if(Du(t))throw Error(r(418));n=vi(o.nextSibling);var u=jn;n&&Rf(t,n)?Af(u,o):(t.flags=t.flags&-4097|2,dt=!1,jn=t)}}else{if(Du(t))throw Error(r(418));t.flags=t.flags&-4097|2,dt=!1,jn=t}}}function Cf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jn=t}function Ha(t){if(t!==jn)return!1;if(!dt)return Cf(t),dt=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!Au(t.type,t.memoizedProps)),n&&(n=bn)){if(Du(t))throw kf(),Error(r(418));for(;n;)Af(t,n),n=vi(n.nextSibling)}if(Cf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(n===0){bn=vi(t.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}t=t.nextSibling}bn=null}}else bn=jn?vi(t.stateNode.nextSibling):null;return!0}function kf(){for(var t=bn;t;)t=vi(t.nextSibling)}function Us(){bn=jn=null,dt=!1}function Ou(t){dr===null?dr=[t]:dr.push(t)}var iy=Ae.ReactCurrentBatchConfig;function No(t,n,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(r(309));var u=o.stateNode}if(!u)throw Error(r(147,t));var h=u,p=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===p?n.ref:(n=function(v){var T=h.refs;v===null?delete T[p]:T[p]=v},n._stringRef=p,n)}if(typeof t!="string")throw Error(r(284));if(!o._owner)throw Error(r(290,t))}return t}function Ka(t,n){throw t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function Pf(t){var n=t._init;return n(t._payload)}function xf(t){function n(M,N){if(t){var F=M.deletions;F===null?(M.deletions=[N],M.flags|=16):F.push(N)}}function o(M,N){if(!t)return null;for(;N!==null;)n(M,N),N=N.sibling;return null}function u(M,N){for(M=new Map;N!==null;)N.key!==null?M.set(N.key,N):M.set(N.index,N),N=N.sibling;return M}function h(M,N){return M=Pi(M,N),M.index=0,M.sibling=null,M}function p(M,N,F){return M.index=F,t?(F=M.alternate,F!==null?(F=F.index,F<N?(M.flags|=2,N):F):(M.flags|=2,N)):(M.flags|=1048576,N)}function v(M){return t&&M.alternate===null&&(M.flags|=2),M}function T(M,N,F,ee){return N===null||N.tag!==6?(N=Rc(F,M.mode,ee),N.return=M,N):(N=h(N,F),N.return=M,N)}function R(M,N,F,ee){var ge=F.type;return ge===C?Q(M,N,F.props.children,ee,F.key):N!==null&&(N.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Et&&Pf(ge)===N.type)?(ee=h(N,F.props),ee.ref=No(M,N,F),ee.return=M,ee):(ee=yl(F.type,F.key,F.props,null,M.mode,ee),ee.ref=No(M,N,F),ee.return=M,ee)}function b(M,N,F,ee){return N===null||N.tag!==4||N.stateNode.containerInfo!==F.containerInfo||N.stateNode.implementation!==F.implementation?(N=Cc(F,M.mode,ee),N.return=M,N):(N=h(N,F.children||[]),N.return=M,N)}function Q(M,N,F,ee,ge){return N===null||N.tag!==7?(N=os(F,M.mode,ee,ge),N.return=M,N):(N=h(N,F),N.return=M,N)}function X(M,N,F){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Rc(""+N,M.mode,F),N.return=M,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Xe:return F=yl(N.type,N.key,N.props,null,M.mode,F),F.ref=No(M,null,N),F.return=M,F;case Pe:return N=Cc(N,M.mode,F),N.return=M,N;case Et:var ee=N._init;return X(M,ee(N._payload),F)}if(tn(N)||fe(N))return N=os(N,M.mode,F,null),N.return=M,N;Ka(M,N)}return null}function K(M,N,F,ee){var ge=N!==null?N.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return ge!==null?null:T(M,N,""+F,ee);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Xe:return F.key===ge?R(M,N,F,ee):null;case Pe:return F.key===ge?b(M,N,F,ee):null;case Et:return ge=F._init,K(M,N,ge(F._payload),ee)}if(tn(F)||fe(F))return ge!==null?null:Q(M,N,F,ee,null);Ka(M,F)}return null}function le(M,N,F,ee,ge){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return M=M.get(F)||null,T(N,M,""+ee,ge);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case Xe:return M=M.get(ee.key===null?F:ee.key)||null,R(N,M,ee,ge);case Pe:return M=M.get(ee.key===null?F:ee.key)||null,b(N,M,ee,ge);case Et:var ve=ee._init;return le(M,N,F,ve(ee._payload),ge)}if(tn(ee)||fe(ee))return M=M.get(F)||null,Q(N,M,ee,ge,null);Ka(N,ee)}return null}function he(M,N,F,ee){for(var ge=null,ve=null,_e=N,Se=N=0,Bt=null;_e!==null&&Se<F.length;Se++){_e.index>Se?(Bt=_e,_e=null):Bt=_e.sibling;var Ge=K(M,_e,F[Se],ee);if(Ge===null){_e===null&&(_e=Bt);break}t&&_e&&Ge.alternate===null&&n(M,_e),N=p(Ge,N,Se),ve===null?ge=Ge:ve.sibling=Ge,ve=Ge,_e=Bt}if(Se===F.length)return o(M,_e),dt&&Ji(M,Se),ge;if(_e===null){for(;Se<F.length;Se++)_e=X(M,F[Se],ee),_e!==null&&(N=p(_e,N,Se),ve===null?ge=_e:ve.sibling=_e,ve=_e);return dt&&Ji(M,Se),ge}for(_e=u(M,_e);Se<F.length;Se++)Bt=le(_e,M,Se,F[Se],ee),Bt!==null&&(t&&Bt.alternate!==null&&_e.delete(Bt.key===null?Se:Bt.key),N=p(Bt,N,Se),ve===null?ge=Bt:ve.sibling=Bt,ve=Bt);return t&&_e.forEach(function(xi){return n(M,xi)}),dt&&Ji(M,Se),ge}function de(M,N,F,ee){var ge=fe(F);if(typeof ge!="function")throw Error(r(150));if(F=ge.call(F),F==null)throw Error(r(151));for(var ve=ge=null,_e=N,Se=N=0,Bt=null,Ge=F.next();_e!==null&&!Ge.done;Se++,Ge=F.next()){_e.index>Se?(Bt=_e,_e=null):Bt=_e.sibling;var xi=K(M,_e,Ge.value,ee);if(xi===null){_e===null&&(_e=Bt);break}t&&_e&&xi.alternate===null&&n(M,_e),N=p(xi,N,Se),ve===null?ge=xi:ve.sibling=xi,ve=xi,_e=Bt}if(Ge.done)return o(M,_e),dt&&Ji(M,Se),ge;if(_e===null){for(;!Ge.done;Se++,Ge=F.next())Ge=X(M,Ge.value,ee),Ge!==null&&(N=p(Ge,N,Se),ve===null?ge=Ge:ve.sibling=Ge,ve=Ge);return dt&&Ji(M,Se),ge}for(_e=u(M,_e);!Ge.done;Se++,Ge=F.next())Ge=le(_e,M,Se,Ge.value,ee),Ge!==null&&(t&&Ge.alternate!==null&&_e.delete(Ge.key===null?Se:Ge.key),N=p(Ge,N,Se),ve===null?ge=Ge:ve.sibling=Ge,ve=Ge);return t&&_e.forEach(function(Fy){return n(M,Fy)}),dt&&Ji(M,Se),ge}function Rt(M,N,F,ee){if(typeof F=="object"&&F!==null&&F.type===C&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Xe:e:{for(var ge=F.key,ve=N;ve!==null;){if(ve.key===ge){if(ge=F.type,ge===C){if(ve.tag===7){o(M,ve.sibling),N=h(ve,F.props.children),N.return=M,M=N;break e}}else if(ve.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Et&&Pf(ge)===ve.type){o(M,ve.sibling),N=h(ve,F.props),N.ref=No(M,ve,F),N.return=M,M=N;break e}o(M,ve);break}else n(M,ve);ve=ve.sibling}F.type===C?(N=os(F.props.children,M.mode,ee,F.key),N.return=M,M=N):(ee=yl(F.type,F.key,F.props,null,M.mode,ee),ee.ref=No(M,N,F),ee.return=M,M=ee)}return v(M);case Pe:e:{for(ve=F.key;N!==null;){if(N.key===ve)if(N.tag===4&&N.stateNode.containerInfo===F.containerInfo&&N.stateNode.implementation===F.implementation){o(M,N.sibling),N=h(N,F.children||[]),N.return=M,M=N;break e}else{o(M,N);break}else n(M,N);N=N.sibling}N=Cc(F,M.mode,ee),N.return=M,M=N}return v(M);case Et:return ve=F._init,Rt(M,N,ve(F._payload),ee)}if(tn(F))return he(M,N,F,ee);if(fe(F))return de(M,N,F,ee);Ka(M,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,N!==null&&N.tag===6?(o(M,N.sibling),N=h(N,F),N.return=M,M=N):(o(M,N),N=Rc(F,M.mode,ee),N.return=M,M=N),v(M)):o(M,N)}return Rt}var Bs=xf(!0),Nf=xf(!1),Qa=_i(null),Ga=null,zs=null,Mu=null;function Fu(){Mu=zs=Ga=null}function ju(t){var n=Qa.current;ct(Qa),t._currentValue=n}function bu(t,n,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,u!==null&&(u.childLanes|=n)):u!==null&&(u.childLanes&n)!==n&&(u.childLanes|=n),t===o)break;t=t.return}}function $s(t,n){Ga=t,Mu=zs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(An=!0),t.firstContext=null)}function Xn(t){var n=t._currentValue;if(Mu!==t)if(t={context:t,memoizedValue:n,next:null},zs===null){if(Ga===null)throw Error(r(308));zs=t,Ga.dependencies={lanes:0,firstContext:t}}else zs=zs.next=t;return n}var Zi=null;function Uu(t){Zi===null?Zi=[t]:Zi.push(t)}function Vf(t,n,o,u){var h=n.interleaved;return h===null?(o.next=o,Uu(n)):(o.next=h.next,h.next=o),n.interleaved=o,Qr(t,u)}function Qr(t,n){t.lanes|=n;var o=t.alternate;for(o!==null&&(o.lanes|=n),o=t,t=t.return;t!==null;)t.childLanes|=n,o=t.alternate,o!==null&&(o.childLanes|=n),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Ti=!1;function Bu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Df(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gr(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Si(t,n,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(He&2)!==0){var h=u.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),u.pending=n,Qr(t,o)}return h=u.interleaved,h===null?(n.next=n,Uu(u)):(n.next=h.next,h.next=n),u.interleaved=n,Qr(t,o)}function Ya(t,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var u=n.lanes;u&=t.pendingLanes,o|=u,n.lanes=o,fi(t,o)}}function Lf(t,n){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?h=p=n:p=p.next=n}else h=p=n;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=n:t.next=n,o.lastBaseUpdate=n}function Xa(t,n,o,u){var h=t.updateQueue;Ti=!1;var p=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var R=T,b=R.next;R.next=null,v===null?p=b:v.next=b,v=R;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==v&&(T===null?Q.firstBaseUpdate=b:T.next=b,Q.lastBaseUpdate=R))}if(p!==null){var X=h.baseState;v=0,Q=b=R=null,T=p;do{var K=T.lane,le=T.eventTime;if((u&K)===K){Q!==null&&(Q=Q.next={eventTime:le,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var he=t,de=T;switch(K=n,le=o,de.tag){case 1:if(he=de.payload,typeof he=="function"){X=he.call(le,X,K);break e}X=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=de.payload,K=typeof he=="function"?he.call(le,X,K):he,K==null)break e;X=se({},X,K);break e;case 2:Ti=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,K=h.effects,K===null?h.effects=[T]:K.push(T))}else le={eventTime:le,lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(b=Q=le,R=X):Q=Q.next=le,v|=K;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;K=T,T=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);if(Q===null&&(R=X),h.baseState=R,h.firstBaseUpdate=b,h.lastBaseUpdate=Q,n=h.shared.interleaved,n!==null){h=n;do v|=h.lane,h=h.next;while(h!==n)}else p===null&&(h.shared.lanes=0);ns|=v,t.lanes=v,t.memoizedState=X}}function Of(t,n,o){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var u=t[n],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(r(191,h));h.call(u)}}}var Vo={},Pr=_i(Vo),Do=_i(Vo),Lo=_i(Vo);function es(t){if(t===Vo)throw Error(r(174));return t}function zu(t,n){switch(lt(Lo,n),lt(Do,t),lt(Pr,Vo),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:ot(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=ot(n,t)}ct(Pr),lt(Pr,n)}function Ws(){ct(Pr),ct(Do),ct(Lo)}function Mf(t){es(Lo.current);var n=es(Pr.current),o=ot(n,t.type);n!==o&&(lt(Do,t),lt(Pr,o))}function $u(t){Do.current===t&&(ct(Pr),ct(Do))}var vt=_i(0);function Ja(t){for(var n=t;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Wu=[];function qu(){for(var t=0;t<Wu.length;t++)Wu[t]._workInProgressVersionPrimary=null;Wu.length=0}var Za=Ae.ReactCurrentDispatcher,Hu=Ae.ReactCurrentBatchConfig,ts=0,_t=null,Vt=null,bt=null,el=!1,Oo=!1,Mo=0,sy=0;function an(){throw Error(r(321))}function Ku(t,n){if(n===null)return!1;for(var o=0;o<n.length&&o<t.length;o++)if(!fr(t[o],n[o]))return!1;return!0}function Qu(t,n,o,u,h,p){if(ts=p,_t=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Za.current=t===null||t.memoizedState===null?uy:cy,t=o(u,h),Oo){p=0;do{if(Oo=!1,Mo=0,25<=p)throw Error(r(301));p+=1,bt=Vt=null,n.updateQueue=null,Za.current=hy,t=o(u,h)}while(Oo)}if(Za.current=rl,n=Vt!==null&&Vt.next!==null,ts=0,bt=Vt=_t=null,el=!1,n)throw Error(r(300));return t}function Gu(){var t=Mo!==0;return Mo=0,t}function xr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?_t.memoizedState=bt=t:bt=bt.next=t,bt}function Jn(){if(Vt===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=Vt.next;var n=bt===null?_t.memoizedState:bt.next;if(n!==null)bt=n,Vt=t;else{if(t===null)throw Error(r(310));Vt=t,t={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},bt===null?_t.memoizedState=bt=t:bt=bt.next=t}return bt}function Fo(t,n){return typeof n=="function"?n(t):n}function Yu(t){var n=Jn(),o=n.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=t;var u=Vt,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var v=h.next;h.next=p.next,p.next=v}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var T=v=null,R=null,b=p;do{var Q=b.lane;if((ts&Q)===Q)R!==null&&(R=R.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),u=b.hasEagerState?b.eagerState:t(u,b.action);else{var X={lane:Q,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};R===null?(T=R=X,v=u):R=R.next=X,_t.lanes|=Q,ns|=Q}b=b.next}while(b!==null&&b!==p);R===null?v=u:R.next=T,fr(u,n.memoizedState)||(An=!0),n.memoizedState=u,n.baseState=v,n.baseQueue=R,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,_t.lanes|=p,ns|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function Xu(t){var n=Jn(),o=n.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=n.memoizedState;if(h!==null){o.pending=null;var v=h=h.next;do p=t(p,v.action),v=v.next;while(v!==h);fr(p,n.memoizedState)||(An=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),o.lastRenderedState=p}return[p,u]}function Ff(){}function jf(t,n){var o=_t,u=Jn(),h=n(),p=!fr(u.memoizedState,h);if(p&&(u.memoizedState=h,An=!0),u=u.queue,Ju(Bf.bind(null,o,u,t),[t]),u.getSnapshot!==n||p||bt!==null&&bt.memoizedState.tag&1){if(o.flags|=2048,jo(9,Uf.bind(null,o,u,h,n),void 0,null),Ut===null)throw Error(r(349));(ts&30)!==0||bf(o,n,h)}return h}function bf(t,n,o){t.flags|=16384,t={getSnapshot:n,value:o},n=_t.updateQueue,n===null?(n={lastEffect:null,stores:null},_t.updateQueue=n,n.stores=[t]):(o=n.stores,o===null?n.stores=[t]:o.push(t))}function Uf(t,n,o,u){n.value=o,n.getSnapshot=u,zf(n)&&$f(t)}function Bf(t,n,o){return o(function(){zf(n)&&$f(t)})}function zf(t){var n=t.getSnapshot;t=t.value;try{var o=n();return!fr(t,o)}catch{return!0}}function $f(t){var n=Qr(t,1);n!==null&&yr(n,t,1,-1)}function Wf(t){var n=xr();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:t},n.queue=t,t=t.dispatch=ly.bind(null,_t,t),[n.memoizedState,t]}function jo(t,n,o,u){return t={tag:t,create:n,destroy:o,deps:u,next:null},n=_t.updateQueue,n===null?(n={lastEffect:null,stores:null},_t.updateQueue=n,n.lastEffect=t.next=t):(o=n.lastEffect,o===null?n.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,n.lastEffect=t)),t}function qf(){return Jn().memoizedState}function tl(t,n,o,u){var h=xr();_t.flags|=t,h.memoizedState=jo(1|n,o,void 0,u===void 0?null:u)}function nl(t,n,o,u){var h=Jn();u=u===void 0?null:u;var p=void 0;if(Vt!==null){var v=Vt.memoizedState;if(p=v.destroy,u!==null&&Ku(u,v.deps)){h.memoizedState=jo(n,o,p,u);return}}_t.flags|=t,h.memoizedState=jo(1|n,o,p,u)}function Hf(t,n){return tl(8390656,8,t,n)}function Ju(t,n){return nl(2048,8,t,n)}function Kf(t,n){return nl(4,2,t,n)}function Qf(t,n){return nl(4,4,t,n)}function Gf(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Yf(t,n,o){return o=o!=null?o.concat([t]):null,nl(4,4,Gf.bind(null,n,t),o)}function Zu(){}function Xf(t,n){var o=Jn();n=n===void 0?null:n;var u=o.memoizedState;return u!==null&&n!==null&&Ku(n,u[1])?u[0]:(o.memoizedState=[t,n],t)}function Jf(t,n){var o=Jn();n=n===void 0?null:n;var u=o.memoizedState;return u!==null&&n!==null&&Ku(n,u[1])?u[0]:(t=t(),o.memoizedState=[t,n],t)}function Zf(t,n,o){return(ts&21)===0?(t.baseState&&(t.baseState=!1,An=!0),t.memoizedState=o):(fr(o,n)||(o=Wi(),_t.lanes|=o,ns|=o,t.baseState=!0),n)}function oy(t,n){var o=ze;ze=o!==0&&4>o?o:4,t(!0);var u=Hu.transition;Hu.transition={};try{t(!1),n()}finally{ze=o,Hu.transition=u}}function ed(){return Jn().memoizedState}function ay(t,n,o){var u=Ci(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},td(t))nd(n,o);else if(o=Vf(t,n,o,u),o!==null){var h=yn();yr(o,t,u,h),rd(o,n,u)}}function ly(t,n,o){var u=Ci(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(td(t))nd(n,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var v=n.lastRenderedState,T=p(v,o);if(h.hasEagerState=!0,h.eagerState=T,fr(T,v)){var R=n.interleaved;R===null?(h.next=h,Uu(n)):(h.next=R.next,R.next=h),n.interleaved=h;return}}catch{}finally{}o=Vf(t,n,h,u),o!==null&&(h=yn(),yr(o,t,u,h),rd(o,n,u))}}function td(t){var n=t.alternate;return t===_t||n!==null&&n===_t}function nd(t,n){Oo=el=!0;var o=t.pending;o===null?n.next=n:(n.next=o.next,o.next=n),t.pending=n}function rd(t,n,o){if((o&4194240)!==0){var u=n.lanes;u&=t.pendingLanes,o|=u,n.lanes=o,fi(t,o)}}var rl={readContext:Xn,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},uy={readContext:Xn,useCallback:function(t,n){return xr().memoizedState=[t,n===void 0?null:n],t},useContext:Xn,useEffect:Hf,useImperativeHandle:function(t,n,o){return o=o!=null?o.concat([t]):null,tl(4194308,4,Gf.bind(null,n,t),o)},useLayoutEffect:function(t,n){return tl(4194308,4,t,n)},useInsertionEffect:function(t,n){return tl(4,2,t,n)},useMemo:function(t,n){var o=xr();return n=n===void 0?null:n,t=t(),o.memoizedState=[t,n],t},useReducer:function(t,n,o){var u=xr();return n=o!==void 0?o(n):n,u.memoizedState=u.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},u.queue=t,t=t.dispatch=ay.bind(null,_t,t),[u.memoizedState,t]},useRef:function(t){var n=xr();return t={current:t},n.memoizedState=t},useState:Wf,useDebugValue:Zu,useDeferredValue:function(t){return xr().memoizedState=t},useTransition:function(){var t=Wf(!1),n=t[0];return t=oy.bind(null,t[1]),xr().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,o){var u=_t,h=xr();if(dt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=n(),Ut===null)throw Error(r(349));(ts&30)!==0||bf(u,n,o)}h.memoizedState=o;var p={value:o,getSnapshot:n};return h.queue=p,Hf(Bf.bind(null,u,p,t),[t]),u.flags|=2048,jo(9,Uf.bind(null,u,p,o,n),void 0,null),o},useId:function(){var t=xr(),n=Ut.identifierPrefix;if(dt){var o=Kr,u=Hr;o=(u&~(1<<32-St(u)-1)).toString(32)+o,n=":"+n+"R"+o,o=Mo++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=sy++,n=":"+n+"r"+o.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},cy={readContext:Xn,useCallback:Xf,useContext:Xn,useEffect:Ju,useImperativeHandle:Yf,useInsertionEffect:Kf,useLayoutEffect:Qf,useMemo:Jf,useReducer:Yu,useRef:qf,useState:function(){return Yu(Fo)},useDebugValue:Zu,useDeferredValue:function(t){var n=Jn();return Zf(n,Vt.memoizedState,t)},useTransition:function(){var t=Yu(Fo)[0],n=Jn().memoizedState;return[t,n]},useMutableSource:Ff,useSyncExternalStore:jf,useId:ed,unstable_isNewReconciler:!1},hy={readContext:Xn,useCallback:Xf,useContext:Xn,useEffect:Ju,useImperativeHandle:Yf,useInsertionEffect:Kf,useLayoutEffect:Qf,useMemo:Jf,useReducer:Xu,useRef:qf,useState:function(){return Xu(Fo)},useDebugValue:Zu,useDeferredValue:function(t){var n=Jn();return Vt===null?n.memoizedState=t:Zf(n,Vt.memoizedState,t)},useTransition:function(){var t=Xu(Fo)[0],n=Jn().memoizedState;return[t,n]},useMutableSource:Ff,useSyncExternalStore:jf,useId:ed,unstable_isNewReconciler:!1};function pr(t,n){if(t&&t.defaultProps){n=se({},n),t=t.defaultProps;for(var o in t)n[o]===void 0&&(n[o]=t[o]);return n}return n}function ec(t,n,o,u){n=t.memoizedState,o=o(u,n),o=o==null?n:se({},n,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var il={isMounted:function(t){return(t=t._reactInternals)?wn(t)===t:!1},enqueueSetState:function(t,n,o){t=t._reactInternals;var u=yn(),h=Ci(t),p=Gr(u,h);p.payload=n,o!=null&&(p.callback=o),n=Si(t,p,h),n!==null&&(yr(n,t,h,u),Ya(n,t,h))},enqueueReplaceState:function(t,n,o){t=t._reactInternals;var u=yn(),h=Ci(t),p=Gr(u,h);p.tag=1,p.payload=n,o!=null&&(p.callback=o),n=Si(t,p,h),n!==null&&(yr(n,t,h,u),Ya(n,t,h))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var o=yn(),u=Ci(t),h=Gr(o,u);h.tag=2,n!=null&&(h.callback=n),n=Si(t,h,u),n!==null&&(yr(n,t,u,o),Ya(n,t,u))}};function id(t,n,o,u,h,p,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,v):n.prototype&&n.prototype.isPureReactComponent?!Io(o,u)||!Io(h,p):!0}function sd(t,n,o){var u=!1,h=wi,p=n.contextType;return typeof p=="object"&&p!==null?p=Xn(p):(h=In(n)?Yi:on.current,u=n.contextTypes,p=(u=u!=null)?Fs(t,h):wi),n=new n(o,p),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=il,t.stateNode=n,n._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),n}function od(t,n,o,u){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,u),n.state!==t&&il.enqueueReplaceState(n,n.state,null)}function tc(t,n,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},Bu(t);var p=n.contextType;typeof p=="object"&&p!==null?h.context=Xn(p):(p=In(n)?Yi:on.current,h.context=Fs(t,p)),h.state=t.memoizedState,p=n.getDerivedStateFromProps,typeof p=="function"&&(ec(t,n,p,o),h.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(n=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),n!==h.state&&il.enqueueReplaceState(h,h.state,null),Xa(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function qs(t,n){try{var o="",u=n;do o+=xe(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:n,stack:h,digest:null}}function nc(t,n,o){return{value:t,source:null,stack:o??null,digest:n??null}}function rc(t,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var fy=typeof WeakMap=="function"?WeakMap:Map;function ad(t,n,o){o=Gr(-1,o),o.tag=3,o.payload={element:null};var u=n.value;return o.callback=function(){hl||(hl=!0,vc=u),rc(t,n)},o}function ld(t,n,o){o=Gr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=n.value;o.payload=function(){return u(h)},o.callback=function(){rc(t,n)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){rc(t,n),typeof u!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var v=n.stack;this.componentDidCatch(n.value,{componentStack:v!==null?v:""})}),o}function ud(t,n,o){var u=t.pingCache;if(u===null){u=t.pingCache=new fy;var h=new Set;u.set(n,h)}else h=u.get(n),h===void 0&&(h=new Set,u.set(n,h));h.has(o)||(h.add(o),t=Ry.bind(null,t,n,o),n.then(t,t))}function cd(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function hd(t,n,o,u,h){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=Gr(-1,1),n.tag=2,Si(o,n,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var dy=Ae.ReactCurrentOwner,An=!1;function gn(t,n,o,u){n.child=t===null?Nf(n,null,o,u):Bs(n,t.child,o,u)}function fd(t,n,o,u,h){o=o.render;var p=n.ref;return $s(n,h),u=Qu(t,n,o,u,p,h),o=Gu(),t!==null&&!An?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~h,Yr(t,n,h)):(dt&&o&&Nu(n),n.flags|=1,gn(t,n,u,h),n.child)}function dd(t,n,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Ac(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=p,pd(t,n,p,u,h)):(t=yl(o.type,null,u,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(p=t.child,(t.lanes&h)===0){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:Io,o(v,u)&&t.ref===n.ref)return Yr(t,n,h)}return n.flags|=1,t=Pi(p,u),t.ref=n.ref,t.return=n,n.child=t}function pd(t,n,o,u,h){if(t!==null){var p=t.memoizedProps;if(Io(p,u)&&t.ref===n.ref)if(An=!1,n.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(An=!0);else return n.lanes=t.lanes,Yr(t,n,h)}return ic(t,n,o,u,h)}function md(t,n,o){var u=n.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(Ks,Un),Un|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,lt(Ks,Un),Un|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,lt(Ks,Un),Un|=u}else p!==null?(u=p.baseLanes|o,n.memoizedState=null):u=o,lt(Ks,Un),Un|=u;return gn(t,n,h,o),n.child}function gd(t,n){var o=n.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function ic(t,n,o,u,h){var p=In(o)?Yi:on.current;return p=Fs(n,p),$s(n,h),o=Qu(t,n,o,u,p,h),u=Gu(),t!==null&&!An?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~h,Yr(t,n,h)):(dt&&u&&Nu(n),n.flags|=1,gn(t,n,o,h),n.child)}function yd(t,n,o,u,h){if(In(o)){var p=!0;za(n)}else p=!1;if($s(n,h),n.stateNode===null)ol(t,n),sd(n,o,u),tc(n,o,u,h),u=!0;else if(t===null){var v=n.stateNode,T=n.memoizedProps;v.props=T;var R=v.context,b=o.contextType;typeof b=="object"&&b!==null?b=Xn(b):(b=In(o)?Yi:on.current,b=Fs(n,b));var Q=o.getDerivedStateFromProps,X=typeof Q=="function"||typeof v.getSnapshotBeforeUpdate=="function";X||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==u||R!==b)&&od(n,v,u,b),Ti=!1;var K=n.memoizedState;v.state=K,Xa(n,u,v,h),R=n.memoizedState,T!==u||K!==R||Sn.current||Ti?(typeof Q=="function"&&(ec(n,o,Q,u),R=n.memoizedState),(T=Ti||id(n,o,T,u,K,R,b))?(X||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(n.flags|=4194308)):(typeof v.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=u,n.memoizedState=R),v.props=u,v.state=R,v.context=b,u=T):(typeof v.componentDidMount=="function"&&(n.flags|=4194308),u=!1)}else{v=n.stateNode,Df(t,n),T=n.memoizedProps,b=n.type===n.elementType?T:pr(n.type,T),v.props=b,X=n.pendingProps,K=v.context,R=o.contextType,typeof R=="object"&&R!==null?R=Xn(R):(R=In(o)?Yi:on.current,R=Fs(n,R));var le=o.getDerivedStateFromProps;(Q=typeof le=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==X||K!==R)&&od(n,v,u,R),Ti=!1,K=n.memoizedState,v.state=K,Xa(n,u,v,h);var he=n.memoizedState;T!==X||K!==he||Sn.current||Ti?(typeof le=="function"&&(ec(n,o,le,u),he=n.memoizedState),(b=Ti||id(n,o,b,u,K,he,R)||!1)?(Q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,he,R),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,he,R)),typeof v.componentDidUpdate=="function"&&(n.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===t.memoizedProps&&K===t.memoizedState||(n.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&K===t.memoizedState||(n.flags|=1024),n.memoizedProps=u,n.memoizedState=he),v.props=u,v.state=he,v.context=R,u=b):(typeof v.componentDidUpdate!="function"||T===t.memoizedProps&&K===t.memoizedState||(n.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&K===t.memoizedState||(n.flags|=1024),u=!1)}return sc(t,n,o,u,p,h)}function sc(t,n,o,u,h,p){gd(t,n);var v=(n.flags&128)!==0;if(!u&&!v)return h&&Tf(n,o,!1),Yr(t,n,p);u=n.stateNode,dy.current=n;var T=v&&typeof o.getDerivedStateFromError!="function"?null:u.render();return n.flags|=1,t!==null&&v?(n.child=Bs(n,t.child,null,p),n.child=Bs(n,null,T,p)):gn(t,n,T,p),n.memoizedState=u.state,h&&Tf(n,o,!0),n.child}function vd(t){var n=t.stateNode;n.pendingContext?wf(t,n.pendingContext,n.pendingContext!==n.context):n.context&&wf(t,n.context,!1),zu(t,n.containerInfo)}function _d(t,n,o,u,h){return Us(),Ou(h),n.flags|=256,gn(t,n,o,u),n.child}var oc={dehydrated:null,treeContext:null,retryLane:0};function ac(t){return{baseLanes:t,cachePool:null,transitions:null}}function wd(t,n,o){var u=n.pendingProps,h=vt.current,p=!1,v=(n.flags&128)!==0,T;if((T=v)||(T=t!==null&&t.memoizedState===null?!1:(h&2)!==0),T?(p=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),lt(vt,h&1),t===null)return Lu(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(v=u.children,t=u.fallback,p?(u=n.mode,p=n.child,v={mode:"hidden",children:v},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=vl(v,u,0,null),t=os(t,u,o,null),p.return=n,t.return=n,p.sibling=t,n.child=p,n.child.memoizedState=ac(o),n.memoizedState=oc,t):lc(n,v));if(h=t.memoizedState,h!==null&&(T=h.dehydrated,T!==null))return py(t,n,v,u,T,h,o);if(p){p=u.fallback,v=n.mode,h=t.child,T=h.sibling;var R={mode:"hidden",children:u.children};return(v&1)===0&&n.child!==h?(u=n.child,u.childLanes=0,u.pendingProps=R,n.deletions=null):(u=Pi(h,R),u.subtreeFlags=h.subtreeFlags&14680064),T!==null?p=Pi(T,p):(p=os(p,v,o,null),p.flags|=2),p.return=n,u.return=n,u.sibling=p,n.child=u,u=p,p=n.child,v=t.child.memoizedState,v=v===null?ac(o):{baseLanes:v.baseLanes|o,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=t.childLanes&~o,n.memoizedState=oc,u}return p=t.child,t=p.sibling,u=Pi(p,{mode:"visible",children:u.children}),(n.mode&1)===0&&(u.lanes=o),u.return=n,u.sibling=null,t!==null&&(o=n.deletions,o===null?(n.deletions=[t],n.flags|=16):o.push(t)),n.child=u,n.memoizedState=null,u}function lc(t,n){return n=vl({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function sl(t,n,o,u){return u!==null&&Ou(u),Bs(n,t.child,null,o),t=lc(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function py(t,n,o,u,h,p,v){if(o)return n.flags&256?(n.flags&=-257,u=nc(Error(r(422))),sl(t,n,v,u)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(p=u.fallback,h=n.mode,u=vl({mode:"visible",children:u.children},h,0,null),p=os(p,h,v,null),p.flags|=2,u.return=n,p.return=n,u.sibling=p,n.child=u,(n.mode&1)!==0&&Bs(n,t.child,null,v),n.child.memoizedState=ac(v),n.memoizedState=oc,p);if((n.mode&1)===0)return sl(t,n,v,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var T=u.dgst;return u=T,p=Error(r(419)),u=nc(p,u,void 0),sl(t,n,v,u)}if(T=(v&t.childLanes)!==0,An||T){if(u=Ut,u!==null){switch(v&-v){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|v))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,Qr(t,h),yr(u,t,h,-1))}return Ic(),u=nc(Error(r(421))),sl(t,n,v,u)}return h.data==="$?"?(n.flags|=128,n.child=t.child,n=Cy.bind(null,t),h._reactRetry=n,null):(t=p.treeContext,bn=vi(h.nextSibling),jn=n,dt=!0,dr=null,t!==null&&(Gn[Yn++]=Hr,Gn[Yn++]=Kr,Gn[Yn++]=Xi,Hr=t.id,Kr=t.overflow,Xi=n),n=lc(n,u.children),n.flags|=4096,n)}function Ed(t,n,o){t.lanes|=n;var u=t.alternate;u!==null&&(u.lanes|=n),bu(t.return,n,o)}function uc(t,n,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function Td(t,n,o){var u=n.pendingProps,h=u.revealOrder,p=u.tail;if(gn(t,n,u.children,o),u=vt.current,(u&2)!==0)u=u&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ed(t,o,n);else if(t.tag===19)Ed(t,o,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(lt(vt,u),(n.mode&1)===0)n.memoizedState=null;else switch(h){case"forwards":for(o=n.child,h=null;o!==null;)t=o.alternate,t!==null&&Ja(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=n.child,n.child=null):(h=o.sibling,o.sibling=null),uc(n,!1,h,o,p);break;case"backwards":for(o=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&Ja(t)===null){n.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}uc(n,!0,o,null,p);break;case"together":uc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function ol(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function Yr(t,n,o){if(t!==null&&(n.dependencies=t.dependencies),ns|=n.lanes,(o&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,o=Pi(t,t.pendingProps),n.child=o,o.return=n;t.sibling!==null;)t=t.sibling,o=o.sibling=Pi(t,t.pendingProps),o.return=n;o.sibling=null}return n.child}function my(t,n,o){switch(n.tag){case 3:vd(n),Us();break;case 5:Mf(n);break;case 1:In(n.type)&&za(n);break;case 4:zu(n,n.stateNode.containerInfo);break;case 10:var u=n.type._context,h=n.memoizedProps.value;lt(Qa,u._currentValue),u._currentValue=h;break;case 13:if(u=n.memoizedState,u!==null)return u.dehydrated!==null?(lt(vt,vt.current&1),n.flags|=128,null):(o&n.child.childLanes)!==0?wd(t,n,o):(lt(vt,vt.current&1),t=Yr(t,n,o),t!==null?t.sibling:null);lt(vt,vt.current&1);break;case 19:if(u=(o&n.childLanes)!==0,(t.flags&128)!==0){if(u)return Td(t,n,o);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),lt(vt,vt.current),u)break;return null;case 22:case 23:return n.lanes=0,md(t,n,o)}return Yr(t,n,o)}var Sd,cc,Id,Ad;Sd=function(t,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},cc=function(){},Id=function(t,n,o,u){var h=t.memoizedProps;if(h!==u){t=n.stateNode,es(Pr.current);var p=null;switch(o){case"input":h=ht(t,h),u=ht(t,u),p=[];break;case"select":h=se({},h,{value:void 0}),u=se({},u,{value:void 0}),p=[];break;case"textarea":h=nn(t,h),u=nn(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=ba)}sr(o,u);var v;o=null;for(b in h)if(!u.hasOwnProperty(b)&&h.hasOwnProperty(b)&&h[b]!=null)if(b==="style"){var T=h[b];for(v in T)T.hasOwnProperty(v)&&(o||(o={}),o[v]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(l.hasOwnProperty(b)?p||(p=[]):(p=p||[]).push(b,null));for(b in u){var R=u[b];if(T=h?.[b],u.hasOwnProperty(b)&&R!==T&&(R!=null||T!=null))if(b==="style")if(T){for(v in T)!T.hasOwnProperty(v)||R&&R.hasOwnProperty(v)||(o||(o={}),o[v]="");for(v in R)R.hasOwnProperty(v)&&T[v]!==R[v]&&(o||(o={}),o[v]=R[v])}else o||(p||(p=[]),p.push(b,o)),o=R;else b==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,T=T?T.__html:void 0,R!=null&&T!==R&&(p=p||[]).push(b,R)):b==="children"?typeof R!="string"&&typeof R!="number"||(p=p||[]).push(b,""+R):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(l.hasOwnProperty(b)?(R!=null&&b==="onScroll"&&ut("scroll",t),p||T===R||(p=[])):(p=p||[]).push(b,R))}o&&(p=p||[]).push("style",o);var b=p;(n.updateQueue=b)&&(n.flags|=4)}},Ad=function(t,n,o,u){o!==u&&(n.flags|=4)};function bo(t,n){if(!dt)switch(t.tailMode){case"hidden":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function ln(t){var n=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(n)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,n}function gy(t,n,o){var u=n.pendingProps;switch(Vu(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(n),null;case 1:return In(n.type)&&Ba(),ln(n),null;case 3:return u=n.stateNode,Ws(),ct(Sn),ct(on),qu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Ha(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,dr!==null&&(Ec(dr),dr=null))),cc(t,n),ln(n),null;case 5:$u(n);var h=es(Lo.current);if(o=n.type,t!==null&&n.stateNode!=null)Id(t,n,o,u,h),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!u){if(n.stateNode===null)throw Error(r(166));return ln(n),null}if(t=es(Pr.current),Ha(n)){u=n.stateNode,o=n.type;var p=n.memoizedProps;switch(u[kr]=n,u[Po]=p,t=(n.mode&1)!==0,o){case"dialog":ut("cancel",u),ut("close",u);break;case"iframe":case"object":case"embed":ut("load",u);break;case"video":case"audio":for(h=0;h<Ro.length;h++)ut(Ro[h],u);break;case"source":ut("error",u);break;case"img":case"image":case"link":ut("error",u),ut("load",u);break;case"details":ut("toggle",u);break;case"input":it(u,p),ut("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},ut("invalid",u);break;case"textarea":_r(u,p),ut("invalid",u)}sr(o,p),h=null;for(var v in p)if(p.hasOwnProperty(v)){var T=p[v];v==="children"?typeof T=="string"?u.textContent!==T&&(p.suppressHydrationWarning!==!0&&ja(u.textContent,T,t),h=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&ja(u.textContent,T,t),h=["children",""+T]):l.hasOwnProperty(v)&&T!=null&&v==="onScroll"&&ut("scroll",u)}switch(o){case"input":Ue(u),en(u,p,!0);break;case"textarea":Ue(u),ir(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=ba)}u=h,n.updateQueue=u,u!==null&&(n.flags|=4)}else{v=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Je(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=v.createElement(o,{is:u.is}):(t=v.createElement(o),o==="select"&&(v=t,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):t=v.createElementNS(t,o),t[kr]=n,t[Po]=u,Sd(t,n,!1,!1),n.stateNode=t;e:{switch(v=ri(o,u),o){case"dialog":ut("cancel",t),ut("close",t),h=u;break;case"iframe":case"object":case"embed":ut("load",t),h=u;break;case"video":case"audio":for(h=0;h<Ro.length;h++)ut(Ro[h],t);h=u;break;case"source":ut("error",t),h=u;break;case"img":case"image":case"link":ut("error",t),ut("load",t),h=u;break;case"details":ut("toggle",t),h=u;break;case"input":it(t,u),h=ht(t,u),ut("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=se({},u,{value:void 0}),ut("invalid",t);break;case"textarea":_r(t,u),h=nn(t,u),ut("invalid",t);break;default:h=u}sr(o,h),T=h;for(p in T)if(T.hasOwnProperty(p)){var R=T[p];p==="style"?zn(t,R):p==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Mr(t,R)):p==="children"?typeof R=="string"?(o!=="textarea"||R!=="")&&rn(t,R):typeof R=="number"&&rn(t,""+R):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(l.hasOwnProperty(p)?R!=null&&p==="onScroll"&&ut("scroll",t):R!=null&&ae(t,p,R,v))}switch(o){case"input":Ue(t),en(t,u,!1);break;case"textarea":Ue(t),ir(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Ee(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?dn(t,!!u.multiple,p,!1):u.defaultValue!=null&&dn(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=ba)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return ln(n),null;case 6:if(t&&n.stateNode!=null)Ad(t,n,t.memoizedProps,u);else{if(typeof u!="string"&&n.stateNode===null)throw Error(r(166));if(o=es(Lo.current),es(Pr.current),Ha(n)){if(u=n.stateNode,o=n.memoizedProps,u[kr]=n,(p=u.nodeValue!==o)&&(t=jn,t!==null))switch(t.tag){case 3:ja(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ja(u.nodeValue,o,(t.mode&1)!==0)}p&&(n.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[kr]=n,n.stateNode=u}return ln(n),null;case 13:if(ct(vt),u=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(dt&&bn!==null&&(n.mode&1)!==0&&(n.flags&128)===0)kf(),Us(),n.flags|=98560,p=!1;else if(p=Ha(n),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(r(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[kr]=n}else Us(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ln(n),p=!1}else dr!==null&&(Ec(dr),dr=null),p=!0;if(!p)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=o,n):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(vt.current&1)!==0?Dt===0&&(Dt=3):Ic())),n.updateQueue!==null&&(n.flags|=4),ln(n),null);case 4:return Ws(),cc(t,n),t===null&&Co(n.stateNode.containerInfo),ln(n),null;case 10:return ju(n.type._context),ln(n),null;case 17:return In(n.type)&&Ba(),ln(n),null;case 19:if(ct(vt),p=n.memoizedState,p===null)return ln(n),null;if(u=(n.flags&128)!==0,v=p.rendering,v===null)if(u)bo(p,!1);else{if(Dt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(v=Ja(t),v!==null){for(n.flags|=128,bo(p,!1),u=v.updateQueue,u!==null&&(n.updateQueue=u,n.flags|=4),n.subtreeFlags=0,u=o,o=n.child;o!==null;)p=o,t=u,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,t=v.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return lt(vt,vt.current&1|2),n.child}t=t.sibling}p.tail!==null&&re()>Qs&&(n.flags|=128,u=!0,bo(p,!1),n.lanes=4194304)}else{if(!u)if(t=Ja(v),t!==null){if(n.flags|=128,u=!0,o=t.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),bo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!dt)return ln(n),null}else 2*re()-p.renderingStartTime>Qs&&o!==1073741824&&(n.flags|=128,u=!0,bo(p,!1),n.lanes=4194304);p.isBackwards?(v.sibling=n.child,n.child=v):(o=p.last,o!==null?o.sibling=v:n.child=v,p.last=v)}return p.tail!==null?(n=p.tail,p.rendering=n,p.tail=n.sibling,p.renderingStartTime=re(),n.sibling=null,o=vt.current,lt(vt,u?o&1|2:o&1),n):(ln(n),null);case 22:case 23:return Sc(),u=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(n.flags|=8192),u&&(n.mode&1)!==0?(Un&1073741824)!==0&&(ln(n),n.subtreeFlags&6&&(n.flags|=8192)):ln(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function yy(t,n){switch(Vu(n),n.tag){case 1:return In(n.type)&&Ba(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Ws(),ct(Sn),ct(on),qu(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return $u(n),null;case 13:if(ct(vt),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Us()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return ct(vt),null;case 4:return Ws(),null;case 10:return ju(n.type._context),null;case 22:case 23:return Sc(),null;case 24:return null;default:return null}}var al=!1,un=!1,vy=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Hs(t,n){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){It(t,n,u)}else o.current=null}function hc(t,n,o){try{o()}catch(u){It(t,n,u)}}var Rd=!1;function _y(t,n){if(Su=mi,t=rf(),mu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,T=-1,R=-1,b=0,Q=0,X=t,K=null;t:for(;;){for(var le;X!==o||h!==0&&X.nodeType!==3||(T=v+h),X!==p||u!==0&&X.nodeType!==3||(R=v+u),X.nodeType===3&&(v+=X.nodeValue.length),(le=X.firstChild)!==null;)K=X,X=le;for(;;){if(X===t)break t;if(K===o&&++b===h&&(T=v),K===p&&++Q===u&&(R=v),(le=X.nextSibling)!==null)break;X=K,K=X.parentNode}X=le}o=T===-1||R===-1?null:{start:T,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(Iu={focusedElem:t,selectionRange:o},mi=!1,ce=n;ce!==null;)if(n=ce,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,ce=t;else for(;ce!==null;){n=ce;try{var he=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var de=he.memoizedProps,Rt=he.memoizedState,M=n.stateNode,N=M.getSnapshotBeforeUpdate(n.elementType===n.type?de:pr(n.type,de),Rt);M.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var F=n.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ee){It(n,n.return,ee)}if(t=n.sibling,t!==null){t.return=n.return,ce=t;break}ce=n.return}return he=Rd,Rd=!1,he}function Uo(t,n,o){var u=n.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&hc(n,o,p)}h=h.next}while(h!==u)}}function ll(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==n)}}function fc(t){var n=t.ref;if(n!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof n=="function"?n(t):n.current=t}}function Cd(t){var n=t.alternate;n!==null&&(t.alternate=null,Cd(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[kr],delete n[Po],delete n[ku],delete n[ty],delete n[ny])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kd(t){return t.tag===5||t.tag===3||t.tag===4}function Pd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dc(t,n,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(t,n):o.insertBefore(t,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(t,o)):(n=o,n.appendChild(t)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=ba));else if(u!==4&&(t=t.child,t!==null))for(dc(t,n,o),t=t.sibling;t!==null;)dc(t,n,o),t=t.sibling}function pc(t,n,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?o.insertBefore(t,n):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(pc(t,n,o),t=t.sibling;t!==null;)pc(t,n,o),t=t.sibling}var Kt=null,mr=!1;function Ii(t,n,o){for(o=o.child;o!==null;)xd(t,n,o),o=o.sibling}function xd(t,n,o){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(sn,o)}catch{}switch(o.tag){case 5:un||Hs(o,n);case 6:var u=Kt,h=mr;Kt=null,Ii(t,n,o),Kt=u,mr=h,Kt!==null&&(mr?(t=Kt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Kt.removeChild(o.stateNode));break;case 18:Kt!==null&&(mr?(t=Kt,o=o.stateNode,t.nodeType===8?Cu(t.parentNode,o):t.nodeType===1&&Cu(t,o),cr(t)):Cu(Kt,o.stateNode));break;case 4:u=Kt,h=mr,Kt=o.stateNode.containerInfo,mr=!0,Ii(t,n,o),Kt=u,mr=h;break;case 0:case 11:case 14:case 15:if(!un&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&hc(o,n,v),h=h.next}while(h!==u)}Ii(t,n,o);break;case 1:if(!un&&(Hs(o,n),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){It(o,n,T)}Ii(t,n,o);break;case 21:Ii(t,n,o);break;case 22:o.mode&1?(un=(u=un)||o.memoizedState!==null,Ii(t,n,o),un=u):Ii(t,n,o);break;default:Ii(t,n,o)}}function Nd(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new vy),n.forEach(function(u){var h=ky.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function gr(t,n){var o=n.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,v=n,T=v;e:for(;T!==null;){switch(T.tag){case 5:Kt=T.stateNode,mr=!1;break e;case 3:Kt=T.stateNode.containerInfo,mr=!0;break e;case 4:Kt=T.stateNode.containerInfo,mr=!0;break e}T=T.return}if(Kt===null)throw Error(r(160));xd(p,v,h),Kt=null,mr=!1;var R=h.alternate;R!==null&&(R.return=null),h.return=null}catch(b){It(h,n,b)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Vd(n,t),n=n.sibling}function Vd(t,n){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gr(n,t),Nr(t),u&4){try{Uo(3,t,t.return),ll(3,t)}catch(de){It(t,t.return,de)}try{Uo(5,t,t.return)}catch(de){It(t,t.return,de)}}break;case 1:gr(n,t),Nr(t),u&512&&o!==null&&Hs(o,o.return);break;case 5:if(gr(n,t),Nr(t),u&512&&o!==null&&Hs(o,o.return),t.flags&32){var h=t.stateNode;try{rn(h,"")}catch(de){It(t,t.return,de)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,v=o!==null?o.memoizedProps:p,T=t.type,R=t.updateQueue;if(t.updateQueue=null,R!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&st(h,p),ri(T,v);var b=ri(T,p);for(v=0;v<R.length;v+=2){var Q=R[v],X=R[v+1];Q==="style"?zn(h,X):Q==="dangerouslySetInnerHTML"?Mr(h,X):Q==="children"?rn(h,X):ae(h,Q,X,b)}switch(T){case"input":Zt(h,p);break;case"textarea":Wt(h,p);break;case"select":var K=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var le=p.value;le!=null?dn(h,!!p.multiple,le,!1):K!==!!p.multiple&&(p.defaultValue!=null?dn(h,!!p.multiple,p.defaultValue,!0):dn(h,!!p.multiple,p.multiple?[]:"",!1))}h[Po]=p}catch(de){It(t,t.return,de)}}break;case 6:if(gr(n,t),Nr(t),u&4){if(t.stateNode===null)throw Error(r(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(de){It(t,t.return,de)}}break;case 3:if(gr(n,t),Nr(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{cr(n.containerInfo)}catch(de){It(t,t.return,de)}break;case 4:gr(n,t),Nr(t);break;case 13:gr(n,t),Nr(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(yc=re())),u&4&&Nd(t);break;case 22:if(Q=o!==null&&o.memoizedState!==null,t.mode&1?(un=(b=un)||Q,gr(n,t),un=b):gr(n,t),Nr(t),u&8192){if(b=t.memoizedState!==null,(t.stateNode.isHidden=b)&&!Q&&(t.mode&1)!==0)for(ce=t,Q=t.child;Q!==null;){for(X=ce=Q;ce!==null;){switch(K=ce,le=K.child,K.tag){case 0:case 11:case 14:case 15:Uo(4,K,K.return);break;case 1:Hs(K,K.return);var he=K.stateNode;if(typeof he.componentWillUnmount=="function"){u=K,o=K.return;try{n=u,he.props=n.memoizedProps,he.state=n.memoizedState,he.componentWillUnmount()}catch(de){It(u,o,de)}}break;case 5:Hs(K,K.return);break;case 22:if(K.memoizedState!==null){Od(X);continue}}le!==null?(le.return=K,ce=le):Od(X)}Q=Q.sibling}e:for(Q=null,X=t;;){if(X.tag===5){if(Q===null){Q=X;try{h=X.stateNode,b?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=X.stateNode,R=X.memoizedProps.style,v=R!=null&&R.hasOwnProperty("display")?R.display:null,T.style.display=ni("display",v))}catch(de){It(t,t.return,de)}}}else if(X.tag===6){if(Q===null)try{X.stateNode.nodeValue=b?"":X.memoizedProps}catch(de){It(t,t.return,de)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===t)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===t)break e;for(;X.sibling===null;){if(X.return===null||X.return===t)break e;Q===X&&(Q=null),X=X.return}Q===X&&(Q=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:gr(n,t),Nr(t),u&4&&Nd(t);break;case 21:break;default:gr(n,t),Nr(t)}}function Nr(t){var n=t.flags;if(n&2){try{e:{for(var o=t.return;o!==null;){if(kd(o)){var u=o;break e}o=o.return}throw Error(r(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(rn(h,""),u.flags&=-33);var p=Pd(t);pc(t,p,h);break;case 3:case 4:var v=u.stateNode.containerInfo,T=Pd(t);dc(t,T,v);break;default:throw Error(r(161))}}catch(R){It(t,t.return,R)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function wy(t,n,o){ce=t,Dd(t)}function Dd(t,n,o){for(var u=(t.mode&1)!==0;ce!==null;){var h=ce,p=h.child;if(h.tag===22&&u){var v=h.memoizedState!==null||al;if(!v){var T=h.alternate,R=T!==null&&T.memoizedState!==null||un;T=al;var b=un;if(al=v,(un=R)&&!b)for(ce=h;ce!==null;)v=ce,R=v.child,v.tag===22&&v.memoizedState!==null?Md(h):R!==null?(R.return=v,ce=R):Md(h);for(;p!==null;)ce=p,Dd(p),p=p.sibling;ce=h,al=T,un=b}Ld(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,ce=p):Ld(t)}}function Ld(t){for(;ce!==null;){var n=ce;if((n.flags&8772)!==0){var o=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:un||ll(5,n);break;case 1:var u=n.stateNode;if(n.flags&4&&!un)if(o===null)u.componentDidMount();else{var h=n.elementType===n.type?o.memoizedProps:pr(n.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=n.updateQueue;p!==null&&Of(n,p,u);break;case 3:var v=n.updateQueue;if(v!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}Of(n,v,o)}break;case 5:var T=n.stateNode;if(o===null&&n.flags&4){o=T;var R=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&o.focus();break;case"img":R.src&&(o.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var b=n.alternate;if(b!==null){var Q=b.memoizedState;if(Q!==null){var X=Q.dehydrated;X!==null&&cr(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}un||n.flags&512&&fc(n)}catch(K){It(n,n.return,K)}}if(n===t){ce=null;break}if(o=n.sibling,o!==null){o.return=n.return,ce=o;break}ce=n.return}}function Od(t){for(;ce!==null;){var n=ce;if(n===t){ce=null;break}var o=n.sibling;if(o!==null){o.return=n.return,ce=o;break}ce=n.return}}function Md(t){for(;ce!==null;){var n=ce;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{ll(4,n)}catch(R){It(n,o,R)}break;case 1:var u=n.stateNode;if(typeof u.componentDidMount=="function"){var h=n.return;try{u.componentDidMount()}catch(R){It(n,h,R)}}var p=n.return;try{fc(n)}catch(R){It(n,p,R)}break;case 5:var v=n.return;try{fc(n)}catch(R){It(n,v,R)}}}catch(R){It(n,n.return,R)}if(n===t){ce=null;break}var T=n.sibling;if(T!==null){T.return=n.return,ce=T;break}ce=n.return}}var Ey=Math.ceil,ul=Ae.ReactCurrentDispatcher,mc=Ae.ReactCurrentOwner,Zn=Ae.ReactCurrentBatchConfig,He=0,Ut=null,Pt=null,Qt=0,Un=0,Ks=_i(0),Dt=0,Bo=null,ns=0,cl=0,gc=0,zo=null,Rn=null,yc=0,Qs=1/0,Xr=null,hl=!1,vc=null,Ai=null,fl=!1,Ri=null,dl=0,$o=0,_c=null,pl=-1,ml=0;function yn(){return(He&6)!==0?re():pl!==-1?pl:pl=re()}function Ci(t){return(t.mode&1)===0?1:(He&2)!==0&&Qt!==0?Qt&-Qt:iy.transition!==null?(ml===0&&(ml=Wi()),ml):(t=ze,t!==0||(t=window.event,t=t===void 0?16:yo(t.type)),t)}function yr(t,n,o,u){if(50<$o)throw $o=0,_c=null,Error(r(185));hi(t,o,u),((He&2)===0||t!==Ut)&&(t===Ut&&((He&2)===0&&(cl|=o),Dt===4&&ki(t,Qt)),Cn(t,u),o===1&&He===0&&(n.mode&1)===0&&(Qs=re()+500,$a&&Ei()))}function Cn(t,n){var o=t.callbackNode;br(t,n);var u=$i(t,t===Ut?Qt:0);if(u===0)o!==null&&U(o),t.callbackNode=null,t.callbackPriority=0;else if(n=u&-u,t.callbackPriority!==n){if(o!=null&&U(o),n===1)t.tag===0?ry(jd.bind(null,t)):Sf(jd.bind(null,t)),Zg(function(){(He&6)===0&&Ei()}),o=null;else{switch(di(u)){case 1:o=Ze;break;case 4:o=Me;break;case 16:o=et;break;case 536870912:o=Fe;break;default:o=et}o=Hd(o,Fd.bind(null,t))}t.callbackPriority=n,t.callbackNode=o}}function Fd(t,n){if(pl=-1,ml=0,(He&6)!==0)throw Error(r(327));var o=t.callbackNode;if(Gs()&&t.callbackNode!==o)return null;var u=$i(t,t===Ut?Qt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||n)n=gl(t,u);else{n=u;var h=He;He|=2;var p=Ud();(Ut!==t||Qt!==n)&&(Xr=null,Qs=re()+500,is(t,n));do try{Iy();break}catch(T){bd(t,T)}while(!0);Fu(),ul.current=p,He=h,Pt!==null?n=0:(Ut=null,Qt=0,n=Dt)}if(n!==0){if(n===2&&(h=On(t),h!==0&&(u=h,n=wc(t,h))),n===1)throw o=Bo,is(t,0),ki(t,u),Cn(t,re()),o;if(n===6)ki(t,u);else{if(h=t.current.alternate,(u&30)===0&&!Ty(h)&&(n=gl(t,u),n===2&&(p=On(t),p!==0&&(u=p,n=wc(t,p))),n===1))throw o=Bo,is(t,0),ki(t,u),Cn(t,re()),o;switch(t.finishedWork=h,t.finishedLanes=u,n){case 0:case 1:throw Error(r(345));case 2:ss(t,Rn,Xr);break;case 3:if(ki(t,u),(u&130023424)===u&&(n=yc+500-re(),10<n)){if($i(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){yn(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Ru(ss.bind(null,t,Rn,Xr),n);break}ss(t,Rn,Xr);break;case 4:if(ki(t,u),(u&4194240)===u)break;for(n=t.eventTimes,h=-1;0<u;){var v=31-St(u);p=1<<v,v=n[v],v>h&&(h=v),u&=~p}if(u=h,u=re()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Ey(u/1960))-u,10<u){t.timeoutHandle=Ru(ss.bind(null,t,Rn,Xr),u);break}ss(t,Rn,Xr);break;case 5:ss(t,Rn,Xr);break;default:throw Error(r(329))}}}return Cn(t,re()),t.callbackNode===o?Fd.bind(null,t):null}function wc(t,n){var o=zo;return t.current.memoizedState.isDehydrated&&(is(t,n).flags|=256),t=gl(t,n),t!==2&&(n=Rn,Rn=o,n!==null&&Ec(n)),t}function Ec(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function Ty(t){for(var n=t;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!fr(p(),h))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ki(t,n){for(n&=~gc,n&=~cl,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var o=31-St(n),u=1<<o;t[o]=-1,n&=~u}}function jd(t){if((He&6)!==0)throw Error(r(327));Gs();var n=$i(t,0);if((n&1)===0)return Cn(t,re()),null;var o=gl(t,n);if(t.tag!==0&&o===2){var u=On(t);u!==0&&(n=u,o=wc(t,u))}if(o===1)throw o=Bo,is(t,0),ki(t,n),Cn(t,re()),o;if(o===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,ss(t,Rn,Xr),Cn(t,re()),null}function Tc(t,n){var o=He;He|=1;try{return t(n)}finally{He=o,He===0&&(Qs=re()+500,$a&&Ei())}}function rs(t){Ri!==null&&Ri.tag===0&&(He&6)===0&&Gs();var n=He;He|=1;var o=Zn.transition,u=ze;try{if(Zn.transition=null,ze=1,t)return t()}finally{ze=u,Zn.transition=o,He=n,(He&6)===0&&Ei()}}function Sc(){Un=Ks.current,ct(Ks)}function is(t,n){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Jg(o)),Pt!==null)for(o=Pt.return;o!==null;){var u=o;switch(Vu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Ba();break;case 3:Ws(),ct(Sn),ct(on),qu();break;case 5:$u(u);break;case 4:Ws();break;case 13:ct(vt);break;case 19:ct(vt);break;case 10:ju(u.type._context);break;case 22:case 23:Sc()}o=o.return}if(Ut=t,Pt=t=Pi(t.current,null),Qt=Un=n,Dt=0,Bo=null,gc=cl=ns=0,Rn=zo=null,Zi!==null){for(n=0;n<Zi.length;n++)if(o=Zi[n],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var v=p.next;p.next=h,u.next=v}o.pending=u}Zi=null}return t}function bd(t,n){do{var o=Pt;try{if(Fu(),Za.current=rl,el){for(var u=_t.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}el=!1}if(ts=0,bt=Vt=_t=null,Oo=!1,Mo=0,mc.current=null,o===null||o.return===null){Dt=1,Bo=n,Pt=null;break}e:{var p=t,v=o.return,T=o,R=n;if(n=Qt,T.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var b=R,Q=T,X=Q.tag;if((Q.mode&1)===0&&(X===0||X===11||X===15)){var K=Q.alternate;K?(Q.updateQueue=K.updateQueue,Q.memoizedState=K.memoizedState,Q.lanes=K.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var le=cd(v);if(le!==null){le.flags&=-257,hd(le,v,T,p,n),le.mode&1&&ud(p,b,n),n=le,R=b;var he=n.updateQueue;if(he===null){var de=new Set;de.add(R),n.updateQueue=de}else he.add(R);break e}else{if((n&1)===0){ud(p,b,n),Ic();break e}R=Error(r(426))}}else if(dt&&T.mode&1){var Rt=cd(v);if(Rt!==null){(Rt.flags&65536)===0&&(Rt.flags|=256),hd(Rt,v,T,p,n),Ou(qs(R,T));break e}}p=R=qs(R,T),Dt!==4&&(Dt=2),zo===null?zo=[p]:zo.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,n&=-n,p.lanes|=n;var M=ad(p,R,n);Lf(p,M);break e;case 1:T=R;var N=p.type,F=p.stateNode;if((p.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Ai===null||!Ai.has(F)))){p.flags|=65536,n&=-n,p.lanes|=n;var ee=ld(p,T,n);Lf(p,ee);break e}}p=p.return}while(p!==null)}zd(o)}catch(ge){n=ge,Pt===o&&o!==null&&(Pt=o=o.return);continue}break}while(!0)}function Ud(){var t=ul.current;return ul.current=rl,t===null?rl:t}function Ic(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),Ut===null||(ns&268435455)===0&&(cl&268435455)===0||ki(Ut,Qt)}function gl(t,n){var o=He;He|=2;var u=Ud();(Ut!==t||Qt!==n)&&(Xr=null,is(t,n));do try{Sy();break}catch(h){bd(t,h)}while(!0);if(Fu(),He=o,ul.current=u,Pt!==null)throw Error(r(261));return Ut=null,Qt=0,Dt}function Sy(){for(;Pt!==null;)Bd(Pt)}function Iy(){for(;Pt!==null&&!Ne();)Bd(Pt)}function Bd(t){var n=qd(t.alternate,t,Un);t.memoizedProps=t.pendingProps,n===null?zd(t):Pt=n,mc.current=null}function zd(t){var n=t;do{var o=n.alternate;if(t=n.return,(n.flags&32768)===0){if(o=gy(o,n,Un),o!==null){Pt=o;return}}else{if(o=yy(o,n),o!==null){o.flags&=32767,Pt=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Dt=6,Pt=null;return}}if(n=n.sibling,n!==null){Pt=n;return}Pt=n=t}while(n!==null);Dt===0&&(Dt=5)}function ss(t,n,o){var u=ze,h=Zn.transition;try{Zn.transition=null,ze=1,Ay(t,n,o,u)}finally{Zn.transition=h,ze=u}return null}function Ay(t,n,o,u){do Gs();while(Ri!==null);if((He&6)!==0)throw Error(r(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(at(t,p),t===Ut&&(Pt=Ut=null,Qt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||fl||(fl=!0,Hd(et,function(){return Gs(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=Zn.transition,Zn.transition=null;var v=ze;ze=1;var T=He;He|=4,mc.current=null,_y(t,o),Vd(o,t),qg(Iu),mi=!!Su,Iu=Su=null,t.current=o,wy(o),me(),He=T,ze=v,Zn.transition=p}else t.current=o;if(fl&&(fl=!1,Ri=t,dl=h),p=t.pendingLanes,p===0&&(Ai=null),Ln(o.stateNode),Cn(t,re()),n!==null)for(u=t.onRecoverableError,o=0;o<n.length;o++)h=n[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(hl)throw hl=!1,t=vc,vc=null,t;return(dl&1)!==0&&t.tag!==0&&Gs(),p=t.pendingLanes,(p&1)!==0?t===_c?$o++:($o=0,_c=t):$o=0,Ei(),null}function Gs(){if(Ri!==null){var t=di(dl),n=Zn.transition,o=ze;try{if(Zn.transition=null,ze=16>t?16:t,Ri===null)var u=!1;else{if(t=Ri,Ri=null,dl=0,(He&6)!==0)throw Error(r(331));var h=He;for(He|=4,ce=t.current;ce!==null;){var p=ce,v=p.child;if((ce.flags&16)!==0){var T=p.deletions;if(T!==null){for(var R=0;R<T.length;R++){var b=T[R];for(ce=b;ce!==null;){var Q=ce;switch(Q.tag){case 0:case 11:case 15:Uo(8,Q,p)}var X=Q.child;if(X!==null)X.return=Q,ce=X;else for(;ce!==null;){Q=ce;var K=Q.sibling,le=Q.return;if(Cd(Q),Q===b){ce=null;break}if(K!==null){K.return=le,ce=K;break}ce=le}}}var he=p.alternate;if(he!==null){var de=he.child;if(de!==null){he.child=null;do{var Rt=de.sibling;de.sibling=null,de=Rt}while(de!==null)}}ce=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,ce=v;else e:for(;ce!==null;){if(p=ce,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Uo(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,ce=M;break e}ce=p.return}}var N=t.current;for(ce=N;ce!==null;){v=ce;var F=v.child;if((v.subtreeFlags&2064)!==0&&F!==null)F.return=v,ce=F;else e:for(v=N;ce!==null;){if(T=ce,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:ll(9,T)}}catch(ge){It(T,T.return,ge)}if(T===v){ce=null;break e}var ee=T.sibling;if(ee!==null){ee.return=T.return,ce=ee;break e}ce=T.return}}if(He=h,Ei(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(sn,t)}catch{}u=!0}return u}finally{ze=o,Zn.transition=n}}return!1}function $d(t,n,o){n=qs(o,n),n=ad(t,n,1),t=Si(t,n,1),n=yn(),t!==null&&(hi(t,1,n),Cn(t,n))}function It(t,n,o){if(t.tag===3)$d(t,t,o);else for(;n!==null;){if(n.tag===3){$d(n,t,o);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ai===null||!Ai.has(u))){t=qs(o,t),t=ld(n,t,1),n=Si(n,t,1),t=yn(),n!==null&&(hi(n,1,t),Cn(n,t));break}}n=n.return}}function Ry(t,n,o){var u=t.pingCache;u!==null&&u.delete(n),n=yn(),t.pingedLanes|=t.suspendedLanes&o,Ut===t&&(Qt&o)===o&&(Dt===4||Dt===3&&(Qt&130023424)===Qt&&500>re()-yc?is(t,0):gc|=o),Cn(t,n)}function Wd(t,n){n===0&&((t.mode&1)===0?n=1:(n=vs,vs<<=1,(vs&130023424)===0&&(vs=4194304)));var o=yn();t=Qr(t,n),t!==null&&(hi(t,n,o),Cn(t,o))}function Cy(t){var n=t.memoizedState,o=0;n!==null&&(o=n.retryLane),Wd(t,o)}function ky(t,n){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(n),Wd(t,o)}var qd;qd=function(t,n,o){if(t!==null)if(t.memoizedProps!==n.pendingProps||Sn.current)An=!0;else{if((t.lanes&o)===0&&(n.flags&128)===0)return An=!1,my(t,n,o);An=(t.flags&131072)!==0}else An=!1,dt&&(n.flags&1048576)!==0&&If(n,qa,n.index);switch(n.lanes=0,n.tag){case 2:var u=n.type;ol(t,n),t=n.pendingProps;var h=Fs(n,on.current);$s(n,o),h=Qu(null,n,u,t,h,o);var p=Gu();return n.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,In(u)?(p=!0,za(n)):p=!1,n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Bu(n),h.updater=il,n.stateNode=h,h._reactInternals=n,tc(n,u,t,o),n=sc(null,n,u,!0,p,o)):(n.tag=0,dt&&p&&Nu(n),gn(null,n,h,o),n=n.child),n;case 16:u=n.elementType;e:{switch(ol(t,n),t=n.pendingProps,h=u._init,u=h(u._payload),n.type=u,h=n.tag=xy(u),t=pr(u,t),h){case 0:n=ic(null,n,u,t,o);break e;case 1:n=yd(null,n,u,t,o);break e;case 11:n=fd(null,n,u,t,o);break e;case 14:n=dd(null,n,u,pr(u.type,t),o);break e}throw Error(r(306,u,""))}return n;case 0:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:pr(u,h),ic(t,n,u,h,o);case 1:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:pr(u,h),yd(t,n,u,h,o);case 3:e:{if(vd(n),t===null)throw Error(r(387));u=n.pendingProps,p=n.memoizedState,h=p.element,Df(t,n),Xa(n,u,null,o);var v=n.memoizedState;if(u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){h=qs(Error(r(423)),n),n=_d(t,n,u,o,h);break e}else if(u!==h){h=qs(Error(r(424)),n),n=_d(t,n,u,o,h);break e}else for(bn=vi(n.stateNode.containerInfo.firstChild),jn=n,dt=!0,dr=null,o=Nf(n,null,u,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Us(),u===h){n=Yr(t,n,o);break e}gn(t,n,u,o)}n=n.child}return n;case 5:return Mf(n),t===null&&Lu(n),u=n.type,h=n.pendingProps,p=t!==null?t.memoizedProps:null,v=h.children,Au(u,h)?v=null:p!==null&&Au(u,p)&&(n.flags|=32),gd(t,n),gn(t,n,v,o),n.child;case 6:return t===null&&Lu(n),null;case 13:return wd(t,n,o);case 4:return zu(n,n.stateNode.containerInfo),u=n.pendingProps,t===null?n.child=Bs(n,null,u,o):gn(t,n,u,o),n.child;case 11:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:pr(u,h),fd(t,n,u,h,o);case 7:return gn(t,n,n.pendingProps,o),n.child;case 8:return gn(t,n,n.pendingProps.children,o),n.child;case 12:return gn(t,n,n.pendingProps.children,o),n.child;case 10:e:{if(u=n.type._context,h=n.pendingProps,p=n.memoizedProps,v=h.value,lt(Qa,u._currentValue),u._currentValue=v,p!==null)if(fr(p.value,v)){if(p.children===h.children&&!Sn.current){n=Yr(t,n,o);break e}}else for(p=n.child,p!==null&&(p.return=n);p!==null;){var T=p.dependencies;if(T!==null){v=p.child;for(var R=T.firstContext;R!==null;){if(R.context===u){if(p.tag===1){R=Gr(-1,o&-o),R.tag=2;var b=p.updateQueue;if(b!==null){b=b.shared;var Q=b.pending;Q===null?R.next=R:(R.next=Q.next,Q.next=R),b.pending=R}}p.lanes|=o,R=p.alternate,R!==null&&(R.lanes|=o),bu(p.return,o,n),T.lanes|=o;break}R=R.next}}else if(p.tag===10)v=p.type===n.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(r(341));v.lanes|=o,T=v.alternate,T!==null&&(T.lanes|=o),bu(v,o,n),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===n){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}gn(t,n,h.children,o),n=n.child}return n;case 9:return h=n.type,u=n.pendingProps.children,$s(n,o),h=Xn(h),u=u(h),n.flags|=1,gn(t,n,u,o),n.child;case 14:return u=n.type,h=pr(u,n.pendingProps),h=pr(u.type,h),dd(t,n,u,h,o);case 15:return pd(t,n,n.type,n.pendingProps,o);case 17:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:pr(u,h),ol(t,n),n.tag=1,In(u)?(t=!0,za(n)):t=!1,$s(n,o),sd(n,u,h),tc(n,u,h,o),sc(null,n,u,!0,t,o);case 19:return Td(t,n,o);case 22:return md(t,n,o)}throw Error(r(156,n.tag))};function Hd(t,n){return H(t,n)}function Py(t,n,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(t,n,o,u){return new Py(t,n,o,u)}function Ac(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xy(t){if(typeof t=="function")return Ac(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D)return 11;if(t===Oe)return 14}return 2}function Pi(t,n){var o=t.alternate;return o===null?(o=er(t.tag,n,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=n,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,n=t.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function yl(t,n,o,u,h,p){var v=2;if(u=t,typeof t=="function")Ac(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case C:return os(o.children,h,p,n);case S:v=8,h|=8;break;case E:return t=er(12,o,n,h|2),t.elementType=E,t.lanes=p,t;case I:return t=er(13,o,n,h),t.elementType=I,t.lanes=p,t;case qe:return t=er(19,o,n,h),t.elementType=qe,t.lanes=p,t;case Le:return vl(o,h,p,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:v=10;break e;case x:v=9;break e;case D:v=11;break e;case Oe:v=14;break e;case Et:v=16,u=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return n=er(v,o,n,h),n.elementType=t,n.type=u,n.lanes=p,n}function os(t,n,o,u){return t=er(7,t,u,n),t.lanes=o,t}function vl(t,n,o,u){return t=er(22,t,u,n),t.elementType=Le,t.lanes=o,t.stateNode={isHidden:!1},t}function Rc(t,n,o){return t=er(6,t,null,n),t.lanes=o,t}function Cc(t,n,o){return n=er(4,t.children!==null?t.children:[],t.key,n),n.lanes=o,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function Ny(t,n,o,u,h){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ci(0),this.expirationTimes=ci(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function kc(t,n,o,u,h,p,v,T,R){return t=new Ny(t,n,o,T,R),n===1?(n=1,p===!0&&(n|=8)):n=0,p=er(3,null,null,n),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bu(p),t}function Vy(t,n,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pe,key:u==null?null:""+u,children:t,containerInfo:n,implementation:o}}function Kd(t){if(!t)return wi;t=t._reactInternals;e:{if(wn(t)!==t||t.tag!==1)throw Error(r(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(In(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(t.tag===1){var o=t.type;if(In(o))return Ef(t,o,n)}return n}function Qd(t,n,o,u,h,p,v,T,R){return t=kc(o,u,!0,t,h,p,v,T,R),t.context=Kd(null),o=t.current,u=yn(),h=Ci(o),p=Gr(u,h),p.callback=n??null,Si(o,p,h),t.current.lanes=h,hi(t,h,u),Cn(t,u),t}function _l(t,n,o,u){var h=n.current,p=yn(),v=Ci(h);return o=Kd(o),n.context===null?n.context=o:n.pendingContext=o,n=Gr(p,v),n.payload={element:t},u=u===void 0?null:u,u!==null&&(n.callback=u),t=Si(h,n,v),t!==null&&(yr(t,h,v,p),Ya(t,h,v)),v}function wl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gd(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<n?o:n}}function Pc(t,n){Gd(t,n),(t=t.alternate)&&Gd(t,n)}function Dy(){return null}var Yd=typeof reportError=="function"?reportError:function(t){console.error(t)};function xc(t){this._internalRoot=t}El.prototype.render=xc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));_l(t,n,null,null)},El.prototype.unmount=xc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;rs(function(){_l(null,t,null,null)}),n[Wr]=null}};function El(t){this._internalRoot=t}El.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ea();t={blockedOn:null,target:t,priority:n};for(var o=0;o<Ir.length&&n!==0&&n<Ir[o].priority;o++);Ir.splice(o,0,t),o===0&&Ia(t)}};function Nc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xd(){}function Ly(t,n,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var b=wl(v);p.call(b)}}var v=Qd(n,u,t,0,null,!1,!1,"",Xd);return t._reactRootContainer=v,t[Wr]=v.current,Co(t.nodeType===8?t.parentNode:t),rs(),v}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var T=u;u=function(){var b=wl(R);T.call(b)}}var R=kc(t,0,!1,null,null,!1,!1,"",Xd);return t._reactRootContainer=R,t[Wr]=R.current,Co(t.nodeType===8?t.parentNode:t),rs(function(){_l(n,R,o,u)}),R}function Sl(t,n,o,u,h){var p=o._reactRootContainer;if(p){var v=p;if(typeof h=="function"){var T=h;h=function(){var R=wl(v);T.call(R)}}_l(n,v,t,h)}else v=Ly(o,n,t,h,u);return wl(v)}_a=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var o=ui(n.pendingLanes);o!==0&&(fi(n,o|1),Cn(n,re()),(He&6)===0&&(Qs=re()+500,Ei()))}break;case 13:rs(function(){var u=Qr(t,1);if(u!==null){var h=yn();yr(u,t,1,h)}}),Pc(t,1)}},_s=function(t){if(t.tag===13){var n=Qr(t,134217728);if(n!==null){var o=yn();yr(n,t,134217728,o)}Pc(t,134217728)}},wa=function(t){if(t.tag===13){var n=Ci(t),o=Qr(t,n);if(o!==null){var u=yn();yr(o,t,n,u)}Pc(t,n)}},Ea=function(){return ze},Ta=function(t,n){var o=ze;try{return ze=t,n()}finally{ze=o}},Wn=function(t,n,o){switch(n){case"input":if(Zt(t,o),n=o.name,o.type==="radio"&&n!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var u=o[n];if(u!==t&&u.form===t.form){var h=Ua(u);if(!h)throw Error(r(90));W(u),Zt(u,h)}}}break;case"textarea":Wt(t,o);break;case"select":n=o.value,n!=null&&dn(t,!!o.multiple,n,!1)}},qn=Tc,zi=rs;var Oy={usingClientEntryPoint:!1,Events:[xo,Os,Ua,pn,Bi,Tc]},Wo={findFiberByHostInstance:Gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},My={bundleType:Wo.bundleType,version:Wo.version,rendererPackageName:Wo.rendererPackageName,rendererConfig:Wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ai(t),t===null?null:t.stateNode},findFiberByHostInstance:Wo.findFiberByHostInstance||Dy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Il.isDisabled&&Il.supportsFiber)try{sn=Il.inject(My),yt=Il}catch{}}return kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oy,kn.createPortal=function(t,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nc(n))throw Error(r(200));return Vy(t,n,null,o)},kn.createRoot=function(t,n){if(!Nc(t))throw Error(r(299));var o=!1,u="",h=Yd;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),n=kc(t,1,!1,null,null,o,!1,u,h),t[Wr]=n.current,Co(t.nodeType===8?t.parentNode:t),new xc(n)},kn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=ai(n),t=t===null?null:t.stateNode,t},kn.flushSync=function(t){return rs(t)},kn.hydrate=function(t,n,o){if(!Tl(n))throw Error(r(200));return Sl(null,t,n,!0,o)},kn.hydrateRoot=function(t,n,o){if(!Nc(t))throw Error(r(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",v=Yd;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),n=Qd(n,null,t,1,o??null,h,!1,p,v),t[Wr]=n.current,Co(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,h]:n.mutableSourceEagerHydrationData.push(o,h);return new El(n)},kn.render=function(t,n,o){if(!Tl(n))throw Error(r(200));return Sl(null,t,n,!1,o)},kn.unmountComponentAtNode=function(t){if(!Tl(t))throw Error(r(40));return t._reactRootContainer?(rs(function(){Sl(null,null,t,!1,function(){t._reactRootContainer=null,t[Wr]=null})}),!0):!1},kn.unstable_batchedUpdates=Tc,kn.unstable_renderSubtreeIntoContainer=function(t,n,o,u){if(!Tl(o))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return Sl(t,n,o,!1,u)},kn.version="18.3.1-next-f1338f8080-20240426",kn}var sp;function qy(){if(sp)return Lc.exports;sp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Lc.exports=Wy(),Lc.exports}var op;function Hy(){if(op)return Al;op=1;var i=qy();return Al.createRoot=i.createRoot,Al.hydrateRoot=i.hydrateRoot,Al}var Ky=Hy();const Qy=rm(Ky),Gy=({onConsent:i,onDecline:e})=>L.jsxs("div",{className:"consent-container",children:[L.jsx("h1",{children:L.jsx("b",{children:L.jsx("u",{children:"Welcome"})})}),L.jsx("h2",{children:"but first, we need your consent to proceed..."}),L.jsx("hr",{}),L.jsxs("div",{className:"legal well",children:[L.jsx("p",{children:'We would like to invite you to take part in the following study named "Click Speed Study"'}),L.jsxs("p",{children:["This will take approximately XX minutes, and you will be compensated $X.XX upon completion.",L.jsx("br",{}),"Please understand that we ",L.jsx("em",{children:"reserve the right to not compensate entries"})," that fail to follow instructions."]}),L.jsx("div",{className:"consent-form",children:L.jsx("iframe",{frameBorder:"1",src:"https://drive.google.com/file/d/1_jkO8vZMrpOrZMgEhpZuFgGcBjGE72Yg/preview",title:"Consent Form"})})]}),L.jsx("h4",{children:'If you agree and consent to these terms, please click "I Agree" to continue.'}),L.jsxs("div",{className:"button-container",children:[L.jsx("button",{className:"btn btn-danger",onClick:e,children:"I do NOT consent"}),L.jsx("button",{className:"btn btn-primary",onClick:i,children:"I Agree"})]})]});function Yy({onSubmit:i}){const[e,r]=Z.useState({workerId:"",name:"",age:"",gender:"",handedness:"",mouseDpi:"",repeat:"",ethnicity:"",race:""}),s=c=>{const{name:f,value:m}=c.target;r(y=>({...y,[f]:m}))},l=async c=>{c.preventDefault();try{i(e)}catch(f){console.error("Error handling form submission:",f)}};return L.jsxs("div",{className:"survey-container",children:[L.jsx("h1",{children:"Participant Information"}),L.jsxs("form",{onSubmit:l,children:[L.jsxs("div",{children:[L.jsx("label",{children:"Worker ID: "}),L.jsx("input",{type:"text",required:!0,name:"workerId",value:e.workerId,onChange:s})]}),L.jsxs("div",{children:[L.jsx("label",{children:"Name: "}),L.jsx("input",{type:"text",required:!0,name:"name",value:e.name,onChange:s})]}),L.jsxs("div",{children:[L.jsx("label",{children:"Age: "}),L.jsx("input",{type:"number",required:!0,name:"age",value:e.age,onChange:s})]}),L.jsxs("div",{children:[L.jsx("label",{children:"Gender: "}),L.jsxs("select",{required:!0,name:"gender",value:e.gender,onChange:s,children:[L.jsx("option",{value:"",children:"Select an option"}),L.jsx("option",{value:"male",children:"Male"}),L.jsx("option",{value:"female",children:"Female"}),L.jsx("option",{value:"other",children:"Other"})]})]}),L.jsxs("div",{children:[L.jsx("label",{children:"Handedness: "}),L.jsxs("select",{required:!0,name:"handedness",value:e.handedness,onChange:s,children:[L.jsx("option",{value:"",children:"Select an option"}),L.jsx("option",{value:"right",children:"Right Handed"}),L.jsx("option",{value:"left",children:"Left Handed"})]})]}),L.jsxs("div",{children:[L.jsx("label",{children:"Mouse DPI (optional): "}),L.jsx("input",{type:"number",name:"mouseDpi",value:e.mouseDpi,onChange:s,placeholder:"e.g., 800, 1200, 1600"})]}),L.jsxs("div",{children:[L.jsx("label",{children:"Have you done our experiments before? "}),L.jsxs("select",{required:!0,name:"repeat",value:e.repeat,onChange:s,children:[L.jsx("option",{value:"",children:"Select an option"}),L.jsx("option",{value:"yes",children:"Yes"}),L.jsx("option",{value:"no",children:"No"}),L.jsx("option",{value:"idk",children:"I don't remember"})]})]}),L.jsx("h2",{children:"Optional Information"}),L.jsxs("div",{children:[L.jsx("label",{children:"Ethnicity: "}),L.jsxs("select",{name:"ethnicity",value:e.ethnicity,onChange:s,children:[L.jsx("option",{value:"",children:"Select an option"}),L.jsx("option",{value:"hispanic",children:"Hispanic/Latinx"}),L.jsx("option",{value:"other",children:"Other"})]})]}),L.jsxs("div",{children:[L.jsx("label",{children:"Race: "}),L.jsxs("select",{name:"race",value:e.race,onChange:s,children:[L.jsx("option",{value:"",children:"Select an option"}),L.jsx("option",{value:"white",children:"White"}),L.jsx("option",{value:"black",children:"Black"}),L.jsx("option",{value:"asian",children:"Asian"}),L.jsx("option",{value:"native",children:"Native American"}),L.jsx("option",{value:"other",children:"Other"})]})]}),L.jsx("button",{type:"submit",className:"submit-button",children:"Submit"})]})]})}const Xy=({onStart:i,onPractice:e,currentPage:r=0,setCurrentPage:s})=>{const[l,c]=Z.useState(0),f=r!==void 0?r:l,m=s||c,y=[{title:"Game Overview",content:L.jsxs("div",{className:"instructions-content",children:[L.jsx("h2",{children:"Welcome to the Global Invigoration Study!"}),L.jsxs("p",{children:["You will play a game with ",L.jsx("strong",{children:"two tasks"}),". Your goal is to earn as many points as possible by following the on-screen instructions."]}),L.jsxs("div",{className:"phase-overview",children:[L.jsxs("div",{className:"phase-item",children:[L.jsx("h3",{children:"Task 1: Movement Task"}),L.jsx("p",{children:"Move your cursor between bars at a steady pace"})]}),L.jsxs("div",{className:"phase-item",children:[L.jsx("h3",{children:"Task 2: Reward Collection"}),L.jsx("p",{children:"Press the keys in the sequence to collect your reward"})]})]}),L.jsx("p",{children:"Let's learn about each task in detail..."})]})},{title:"Task 1: Movement Task",content:L.jsxs("div",{className:"instructions-content",children:[L.jsx("h2",{children:"Movement Task Details"}),L.jsx("div",{className:"phase-visual",children:L.jsxs("div",{className:"visual-description",children:[L.jsx("h3",{children:"What you'll see:"}),L.jsxs("ul",{children:[L.jsxs("li",{children:[L.jsx("strong",{children:"Blue bars"})," on the left and right sides of the screen"]}),L.jsxs("li",{children:["Your ",L.jsx("strong",{children:"score"})," will be displayed in the top right corner"]})]})]})}),L.jsx("h3",{children:"What to do:"}),L.jsxs("ul",{children:[L.jsxs("li",{children:[L.jsx("strong",{children:"Move your cursor"})," back and forth between the bars at a steady pace"]}),L.jsxs("li",{children:["The bars will turn ",L.jsx("strong",{children:"green"})," when you hover over them"]}),L.jsx("li",{children:"Keep moving at a steady pace - don't stay on one side too long!"}),L.jsxs("li",{children:["If you move too slowly, you'll see a ",L.jsx("strong",{children:'"Move Faster!"'})," warning"]})]})]})},{title:"Task 2: Reward Collection",content:L.jsxs("div",{className:"instructions-content",children:[L.jsx("h2",{children:"Reward Collection Details"}),L.jsx("div",{className:"phase-visual",children:L.jsxs("div",{className:"visual-description",children:[L.jsx("h3",{children:"What happens:"}),L.jsxs("ul",{children:[L.jsxs("li",{children:["After an unknown amount of time, the ",L.jsx("strong",{children:"bars disappear"})]}),L.jsx("li",{children:"After some time, you may be given the option to collect a reward"}),L.jsx("li",{children:"You will need to collect your reward"})]})]})}),L.jsx("h3",{children:"What to do:"}),L.jsxs("ul",{children:[L.jsxs("li",{children:["Follow the ",L.jsx("strong",{children:"key sequence"})," displayed on screen to collect the reward"]}),L.jsxs("li",{children:["Press the keys ",L.jsx("strong",{children:"A, S, D, F"})," in the exact order shown"]}),L.jsx("li",{children:"Watch as your progress is displayed with the sequence"}),L.jsx("li",{children:"Complete the entire sequence to receive your reward"})]})]})},{title:"Ready to Start?",content:L.jsxs("div",{className:"instructions-content",children:[L.jsx("h2",{children:"You're Ready to Start!"}),L.jsx("p",{children:"You now know everything you need to participate in the study. Remember: move between the bars, then collect the reward by following the key sequence."}),L.jsxs("div",{className:"final-reminder",children:[L.jsx("h3",{children:"Quick Reminder:"}),L.jsxs("ol",{children:[L.jsxs("li",{children:[L.jsx("strong",{children:"Task 1:"})," Move cursor between blue bars"]}),L.jsxs("li",{children:[L.jsx("strong",{children:"Task 2:"})," Follow the key sequence to collect the reward"]})]})]})]})}],_=()=>{f<y.length-1&&m(f+1)},A=()=>{f>0&&m(f-1)},P=f===y.length-1,j=f===0;return L.jsx("div",{className:"instructions-container",children:L.jsxs("div",{className:"instructions",children:[L.jsx("h1",{children:y[f].title}),L.jsxs("div",{className:"page-indicator",children:["Page ",f+1," of ",y.length]}),y[f].content,L.jsxs("div",{className:"navigation-container",children:[!P&&L.jsxs("div",{className:"page-navigation",children:[L.jsx("button",{onClick:A,className:"nav-button prev-button",disabled:j,children:" Previous"}),L.jsx("button",{onClick:_,className:"nav-button next-button",children:"Next "})]}),P&&L.jsxs("div",{className:"button-container",children:[L.jsx("button",{onClick:A,className:"nav-button prev-button",children:" Previous"}),L.jsx("button",{onClick:e,className:"practice-button",children:"Practice"}),L.jsx("button",{onClick:i,className:"start-button",children:"Start Game"})]})]})]})})};var ap={};const im=function(i){const e=[];let r=0;for(let s=0;s<i.length;s++){let l=i.charCodeAt(s);l<128?e[r++]=l:l<2048?(e[r++]=l>>6|192,e[r++]=l&63|128):(l&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(i.charCodeAt(++s)&1023),e[r++]=l>>18|240,e[r++]=l>>12&63|128,e[r++]=l>>6&63|128,e[r++]=l&63|128):(e[r++]=l>>12|224,e[r++]=l>>6&63|128,e[r++]=l&63|128)}return e},Jy=function(i){const e=[];let r=0,s=0;for(;r<i.length;){const l=i[r++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=i[r++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=i[r++],f=i[r++],m=i[r++],y=((l&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=i[r++],f=i[r++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},sm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<i.length;l+=3){const c=i[l],f=l+1<i.length,m=f?i[l+1]:0,y=l+2<i.length,_=y?i[l+2]:0,A=c>>2,P=(c&3)<<4|m>>4;let j=(m&15)<<2|_>>6,z=_&63;y||(z=64,f||(j=64)),s.push(r[A],r[P],r[j],r[z])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(im(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Jy(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<i.length;){const c=r[i.charAt(l++)],m=l<i.length?r[i.charAt(l)]:0;++l;const _=l<i.length?r[i.charAt(l)]:64;++l;const P=l<i.length?r[i.charAt(l)]:64;if(++l,c==null||m==null||_==null||P==null)throw new Zy;const j=c<<2|m>>4;if(s.push(j),_!==64){const z=m<<4&240|_>>2;if(s.push(z),P!==64){const J=_<<6&192|P;s.push(J)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Zy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ev=function(i){const e=im(i);return sm.encodeByteArray(e,!0)},jl=function(i){return ev(i).replace(/\./g,"")},tv=function(i){try{return sm.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const rv=()=>nv().__FIREBASE_DEFAULTS__,iv=()=>{if(typeof process>"u"||typeof ap>"u")return;const i=ap.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},sv=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&tv(i[1]);return e&&JSON.parse(e)},mh=()=>{try{return rv()||iv()||sv()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},ov=i=>{var e,r;return(r=(e=mh())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[i]},av=i=>{const e=ov(i);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),s]:[e.substring(0,r),s]},om=()=>{var i;return(i=mh())===null||i===void 0?void 0:i.config};class lv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,s)=>{r?this.reject(r):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,s))}}}function uv(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},s=e||"demo-project",l=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[jl(JSON.stringify(r)),jl(JSON.stringify(f)),""].join(".")}function cv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hv(){var i;const e=(i=mh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fv(){return!hv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dv(){try{return typeof indexedDB=="object"}catch{return!1}}function pv(){return new Promise((i,e)=>{try{let r=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),r||self.indexedDB.deleteDatabase(s),i(!0)},l.onupgradeneeded=()=>{r=!1},l.onerror=()=>{var c;e(((c=l.error)===null||c===void 0?void 0:c.message)||"")}}catch(r){e(r)}})}const mv="FirebaseError";class uo extends Error{constructor(e,r,s){super(r),this.code=e,this.customData=s,this.name=mv,Object.setPrototypeOf(this,uo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,am.prototype.create)}}class am{constructor(e,r,s){this.service=e,this.serviceName=r,this.errors=s}create(e,...r){const s=r[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?gv(c,s):"Error",m=`${this.serviceName}: ${f} (${l}).`;return new uo(l,m,s)}}function gv(i,e){return i.replace(yv,(r,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const yv=/\{\$([^}]+)}/g;function Hc(i,e){if(i===e)return!0;const r=Object.keys(i),s=Object.keys(e);for(const l of r){if(!s.includes(l))return!1;const c=i[l],f=e[l];if(lp(c)&&lp(f)){if(!Hc(c,f))return!1}else if(c!==f)return!1}for(const l of s)if(!r.includes(l))return!1;return!0}function lp(i){return i!==null&&typeof i=="object"}function ea(i){return i&&i._delegate?i._delegate:i}class ta{constructor(e,r,s){this.name=e,this.instanceFactory=r,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const as="[DEFAULT]";class vv{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const s=new lv;if(this.instancesDeferred.set(r,s),this.isInitialized(r)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:r});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const s=this.normalizeInstanceIdentifier(e?.identifier),l=(r=e?.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wv(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(const[r,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:r});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&f.resolve(l)}return l}onInit(e,r){var s;const l=this.normalizeInstanceIdentifier(r),c=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(l,c);const f=this.instances.get(l);return f&&e(f,l),()=>{c.delete(e)}}invokeOnInitCallbacks(e,r){const s=this.onInitCallbacks.get(r);if(s)for(const l of s)try{l(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:_v(e),options:r}),this.instances.set(e,s),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _v(i){return i===as?void 0:i}function wv(i){return i.instantiationMode==="EAGER"}class Ev{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new vv(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}var Ke;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ke||(Ke={}));const Tv={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},Sv=Ke.INFO,Iv={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},Av=(i,e,...r)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),l=Iv[e];if(l)console[l](`[${s}]  ${i.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lm{constructor(e){this.name=e,this._logLevel=Sv,this._logHandler=Av,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const Rv=(i,e)=>e.some(r=>i instanceof r);let up,cp;function Cv(){return up||(up=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kv(){return cp||(cp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const um=new WeakMap,Kc=new WeakMap,cm=new WeakMap,Fc=new WeakMap,gh=new WeakMap;function Pv(i){const e=new Promise((r,s)=>{const l=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{r(Vi(i.result)),l()},f=()=>{s(i.error),l()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(r=>{r instanceof IDBCursor&&um.set(r,i)}).catch(()=>{}),gh.set(e,i),e}function xv(i){if(Kc.has(i))return;const e=new Promise((r,s)=>{const l=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{r(),l()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});Kc.set(i,e)}let Qc={get(i,e,r){if(i instanceof IDBTransaction){if(e==="done")return Kc.get(i);if(e==="objectStoreNames")return i.objectStoreNames||cm.get(i);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Vi(i[e])},set(i,e,r){return i[e]=r,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Nv(i){Qc=i(Qc)}function Vv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const s=i.call(jc(this),e,...r);return cm.set(s,e.sort?e.sort():[e]),Vi(s)}:kv().includes(i)?function(...e){return i.apply(jc(this),e),Vi(um.get(this))}:function(...e){return Vi(i.apply(jc(this),e))}}function Dv(i){return typeof i=="function"?Vv(i):(i instanceof IDBTransaction&&xv(i),Rv(i,Cv())?new Proxy(i,Qc):i)}function Vi(i){if(i instanceof IDBRequest)return Pv(i);if(Fc.has(i))return Fc.get(i);const e=Dv(i);return e!==i&&(Fc.set(i,e),gh.set(e,i)),e}const jc=i=>gh.get(i);function Lv(i,e,{blocked:r,upgrade:s,blocking:l,terminated:c}={}){const f=indexedDB.open(i,e),m=Vi(f);return s&&f.addEventListener("upgradeneeded",y=>{s(Vi(f.result),y.oldVersion,y.newVersion,Vi(f.transaction),y)}),r&&f.addEventListener("blocked",y=>r(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),l&&y.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const Ov=["get","getKey","getAll","getAllKeys","count"],Mv=["put","add","delete","clear"],bc=new Map;function hp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(bc.get(e))return bc.get(e);const r=e.replace(/FromIndex$/,""),s=e!==r,l=Mv.includes(r);if(!(r in(s?IDBIndex:IDBObjectStore).prototype)||!(l||Ov.includes(r)))return;const c=async function(f,...m){const y=this.transaction(f,l?"readwrite":"readonly");let _=y.store;return s&&(_=_.index(m.shift())),(await Promise.all([_[r](...m),l&&y.done]))[0]};return bc.set(e,c),c}Nv(i=>({...i,get:(e,r,s)=>hp(e,r)||i.get(e,r,s),has:(e,r)=>!!hp(e,r)||i.has(e,r)}));class Fv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(jv(r)){const s=r.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(r=>r).join(" ")}}function jv(i){const e=i.getComponent();return e?.type==="VERSION"}const Gc="@firebase/app",fp="0.10.13";const Zr=new lm("@firebase/app"),bv="@firebase/app-compat",Uv="@firebase/analytics-compat",Bv="@firebase/analytics",zv="@firebase/app-check-compat",$v="@firebase/app-check",Wv="@firebase/auth",qv="@firebase/auth-compat",Hv="@firebase/database",Kv="@firebase/data-connect",Qv="@firebase/database-compat",Gv="@firebase/functions",Yv="@firebase/functions-compat",Xv="@firebase/installations",Jv="@firebase/installations-compat",Zv="@firebase/messaging",e_="@firebase/messaging-compat",t_="@firebase/performance",n_="@firebase/performance-compat",r_="@firebase/remote-config",i_="@firebase/remote-config-compat",s_="@firebase/storage",o_="@firebase/storage-compat",a_="@firebase/firestore",l_="@firebase/vertexai-preview",u_="@firebase/firestore-compat",c_="firebase",h_="10.14.1";const Yc="[DEFAULT]",f_={[Gc]:"fire-core",[bv]:"fire-core-compat",[Bv]:"fire-analytics",[Uv]:"fire-analytics-compat",[$v]:"fire-app-check",[zv]:"fire-app-check-compat",[Wv]:"fire-auth",[qv]:"fire-auth-compat",[Hv]:"fire-rtdb",[Kv]:"fire-data-connect",[Qv]:"fire-rtdb-compat",[Gv]:"fire-fn",[Yv]:"fire-fn-compat",[Xv]:"fire-iid",[Jv]:"fire-iid-compat",[Zv]:"fire-fcm",[e_]:"fire-fcm-compat",[t_]:"fire-perf",[n_]:"fire-perf-compat",[r_]:"fire-rc",[i_]:"fire-rc-compat",[s_]:"fire-gcs",[o_]:"fire-gcs-compat",[a_]:"fire-fst",[u_]:"fire-fst-compat",[l_]:"fire-vertex","fire-js":"fire-js",[c_]:"fire-js-all"};const bl=new Map,d_=new Map,Xc=new Map;function dp(i,e){try{i.container.addComponent(e)}catch(r){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,r)}}function Ul(i){const e=i.name;if(Xc.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;Xc.set(e,i);for(const r of bl.values())dp(r,i);for(const r of d_.values())dp(r,i);return!0}function p_(i,e){const r=i.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),i.container.getProvider(e)}const m_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Di=new am("app","Firebase",m_);class g_{constructor(e,r,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}const y_=h_;function hm(i,e={}){let r=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Yc,automaticDataCollectionEnabled:!1},e),l=s.name;if(typeof l!="string"||!l)throw Di.create("bad-app-name",{appName:String(l)});if(r||(r=om()),!r)throw Di.create("no-options");const c=bl.get(l);if(c){if(Hc(r,c.options)&&Hc(s,c.config))return c;throw Di.create("duplicate-app",{appName:l})}const f=new Ev(l);for(const y of Xc.values())f.addComponent(y);const m=new g_(r,s,f);return bl.set(l,m),m}function v_(i=Yc){const e=bl.get(i);if(!e&&i===Yc&&om())return hm();if(!e)throw Di.create("no-app",{appName:i});return e}function eo(i,e,r){var s;let l=(s=f_[i])!==null&&s!==void 0?s:i;r&&(l+=`-${r}`);const c=l.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const m=[`Unable to register library "${l}" with version "${e}":`];c&&m.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(m.join(" "));return}Ul(new ta(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}const __="firebase-heartbeat-database",w_=1,na="firebase-heartbeat-store";let Uc=null;function fm(){return Uc||(Uc=Lv(__,w_,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(na)}catch(r){console.warn(r)}}}}).catch(i=>{throw Di.create("idb-open",{originalErrorMessage:i.message})})),Uc}async function E_(i){try{const r=(await fm()).transaction(na),s=await r.objectStore(na).get(dm(i));return await r.done,s}catch(e){if(e instanceof uo)Zr.warn(e.message);else{const r=Di.create("idb-get",{originalErrorMessage:e?.message});Zr.warn(r.message)}}}async function pp(i,e){try{const s=(await fm()).transaction(na,"readwrite");await s.objectStore(na).put(e,dm(i)),await s.done}catch(r){if(r instanceof uo)Zr.warn(r.message);else{const s=Di.create("idb-set",{originalErrorMessage:r?.message});Zr.warn(s.message)}}}function dm(i){return`${i.name}!${i.options.appId}`}const T_=1024,S_=720*60*60*1e3;class I_{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new R_(r),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,r;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=mp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const m=new Date(f.date).valueOf();return Date.now()-m<=S_}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Zr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=mp(),{heartbeatsToSend:s,unsentEntries:l}=A_(this._heartbeatsCache.heartbeats),c=jl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=r,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(r){return Zr.warn(r),""}}}function mp(){return new Date().toISOString().substring(0,10)}function A_(i,e=T_){const r=[];let s=i.slice();for(const l of i){const c=r.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),gp(r)>e){c.dates.pop();break}}else if(r.push({agent:l.agent,dates:[l.date]}),gp(r)>e){r.pop();break}s=s.slice(1)}return{heartbeatsToSend:r,unsentEntries:s}}class R_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dv()?pv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await E_(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const l=await this.read();return pp(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const l=await this.read();return pp(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function gp(i){return jl(JSON.stringify({version:2,heartbeats:i})).length}function C_(i){Ul(new ta("platform-logger",e=>new Fv(e),"PRIVATE")),Ul(new ta("heartbeat",e=>new I_(e),"PRIVATE")),eo(Gc,fp,i),eo(Gc,fp,"esm2017"),eo("fire-js","")}C_("");var k_="firebase",P_="10.14.1";eo(k_,P_,"app");var yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var us,pm;(function(){var i;function e(C,S){function E(){}E.prototype=S.prototype,C.D=S.prototype,C.prototype=new E,C.prototype.constructor=C,C.C=function(k,x,D){for(var I=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)I[qe-2]=arguments[qe];return S.prototype[x].apply(k,I)}}function r(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,r),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(C,S,E){E||(E=0);var k=Array(16);if(typeof S=="string")for(var x=0;16>x;++x)k[x]=S.charCodeAt(E++)|S.charCodeAt(E++)<<8|S.charCodeAt(E++)<<16|S.charCodeAt(E++)<<24;else for(x=0;16>x;++x)k[x]=S[E++]|S[E++]<<8|S[E++]<<16|S[E++]<<24;S=C.g[0],E=C.g[1],x=C.g[2];var D=C.g[3],I=S+(D^E&(x^D))+k[0]+3614090360&4294967295;S=E+(I<<7&4294967295|I>>>25),I=D+(x^S&(E^x))+k[1]+3905402710&4294967295,D=S+(I<<12&4294967295|I>>>20),I=x+(E^D&(S^E))+k[2]+606105819&4294967295,x=D+(I<<17&4294967295|I>>>15),I=E+(S^x&(D^S))+k[3]+3250441966&4294967295,E=x+(I<<22&4294967295|I>>>10),I=S+(D^E&(x^D))+k[4]+4118548399&4294967295,S=E+(I<<7&4294967295|I>>>25),I=D+(x^S&(E^x))+k[5]+1200080426&4294967295,D=S+(I<<12&4294967295|I>>>20),I=x+(E^D&(S^E))+k[6]+2821735955&4294967295,x=D+(I<<17&4294967295|I>>>15),I=E+(S^x&(D^S))+k[7]+4249261313&4294967295,E=x+(I<<22&4294967295|I>>>10),I=S+(D^E&(x^D))+k[8]+1770035416&4294967295,S=E+(I<<7&4294967295|I>>>25),I=D+(x^S&(E^x))+k[9]+2336552879&4294967295,D=S+(I<<12&4294967295|I>>>20),I=x+(E^D&(S^E))+k[10]+4294925233&4294967295,x=D+(I<<17&4294967295|I>>>15),I=E+(S^x&(D^S))+k[11]+2304563134&4294967295,E=x+(I<<22&4294967295|I>>>10),I=S+(D^E&(x^D))+k[12]+1804603682&4294967295,S=E+(I<<7&4294967295|I>>>25),I=D+(x^S&(E^x))+k[13]+4254626195&4294967295,D=S+(I<<12&4294967295|I>>>20),I=x+(E^D&(S^E))+k[14]+2792965006&4294967295,x=D+(I<<17&4294967295|I>>>15),I=E+(S^x&(D^S))+k[15]+1236535329&4294967295,E=x+(I<<22&4294967295|I>>>10),I=S+(x^D&(E^x))+k[1]+4129170786&4294967295,S=E+(I<<5&4294967295|I>>>27),I=D+(E^x&(S^E))+k[6]+3225465664&4294967295,D=S+(I<<9&4294967295|I>>>23),I=x+(S^E&(D^S))+k[11]+643717713&4294967295,x=D+(I<<14&4294967295|I>>>18),I=E+(D^S&(x^D))+k[0]+3921069994&4294967295,E=x+(I<<20&4294967295|I>>>12),I=S+(x^D&(E^x))+k[5]+3593408605&4294967295,S=E+(I<<5&4294967295|I>>>27),I=D+(E^x&(S^E))+k[10]+38016083&4294967295,D=S+(I<<9&4294967295|I>>>23),I=x+(S^E&(D^S))+k[15]+3634488961&4294967295,x=D+(I<<14&4294967295|I>>>18),I=E+(D^S&(x^D))+k[4]+3889429448&4294967295,E=x+(I<<20&4294967295|I>>>12),I=S+(x^D&(E^x))+k[9]+568446438&4294967295,S=E+(I<<5&4294967295|I>>>27),I=D+(E^x&(S^E))+k[14]+3275163606&4294967295,D=S+(I<<9&4294967295|I>>>23),I=x+(S^E&(D^S))+k[3]+4107603335&4294967295,x=D+(I<<14&4294967295|I>>>18),I=E+(D^S&(x^D))+k[8]+1163531501&4294967295,E=x+(I<<20&4294967295|I>>>12),I=S+(x^D&(E^x))+k[13]+2850285829&4294967295,S=E+(I<<5&4294967295|I>>>27),I=D+(E^x&(S^E))+k[2]+4243563512&4294967295,D=S+(I<<9&4294967295|I>>>23),I=x+(S^E&(D^S))+k[7]+1735328473&4294967295,x=D+(I<<14&4294967295|I>>>18),I=E+(D^S&(x^D))+k[12]+2368359562&4294967295,E=x+(I<<20&4294967295|I>>>12),I=S+(E^x^D)+k[5]+4294588738&4294967295,S=E+(I<<4&4294967295|I>>>28),I=D+(S^E^x)+k[8]+2272392833&4294967295,D=S+(I<<11&4294967295|I>>>21),I=x+(D^S^E)+k[11]+1839030562&4294967295,x=D+(I<<16&4294967295|I>>>16),I=E+(x^D^S)+k[14]+4259657740&4294967295,E=x+(I<<23&4294967295|I>>>9),I=S+(E^x^D)+k[1]+2763975236&4294967295,S=E+(I<<4&4294967295|I>>>28),I=D+(S^E^x)+k[4]+1272893353&4294967295,D=S+(I<<11&4294967295|I>>>21),I=x+(D^S^E)+k[7]+4139469664&4294967295,x=D+(I<<16&4294967295|I>>>16),I=E+(x^D^S)+k[10]+3200236656&4294967295,E=x+(I<<23&4294967295|I>>>9),I=S+(E^x^D)+k[13]+681279174&4294967295,S=E+(I<<4&4294967295|I>>>28),I=D+(S^E^x)+k[0]+3936430074&4294967295,D=S+(I<<11&4294967295|I>>>21),I=x+(D^S^E)+k[3]+3572445317&4294967295,x=D+(I<<16&4294967295|I>>>16),I=E+(x^D^S)+k[6]+76029189&4294967295,E=x+(I<<23&4294967295|I>>>9),I=S+(E^x^D)+k[9]+3654602809&4294967295,S=E+(I<<4&4294967295|I>>>28),I=D+(S^E^x)+k[12]+3873151461&4294967295,D=S+(I<<11&4294967295|I>>>21),I=x+(D^S^E)+k[15]+530742520&4294967295,x=D+(I<<16&4294967295|I>>>16),I=E+(x^D^S)+k[2]+3299628645&4294967295,E=x+(I<<23&4294967295|I>>>9),I=S+(x^(E|~D))+k[0]+4096336452&4294967295,S=E+(I<<6&4294967295|I>>>26),I=D+(E^(S|~x))+k[7]+1126891415&4294967295,D=S+(I<<10&4294967295|I>>>22),I=x+(S^(D|~E))+k[14]+2878612391&4294967295,x=D+(I<<15&4294967295|I>>>17),I=E+(D^(x|~S))+k[5]+4237533241&4294967295,E=x+(I<<21&4294967295|I>>>11),I=S+(x^(E|~D))+k[12]+1700485571&4294967295,S=E+(I<<6&4294967295|I>>>26),I=D+(E^(S|~x))+k[3]+2399980690&4294967295,D=S+(I<<10&4294967295|I>>>22),I=x+(S^(D|~E))+k[10]+4293915773&4294967295,x=D+(I<<15&4294967295|I>>>17),I=E+(D^(x|~S))+k[1]+2240044497&4294967295,E=x+(I<<21&4294967295|I>>>11),I=S+(x^(E|~D))+k[8]+1873313359&4294967295,S=E+(I<<6&4294967295|I>>>26),I=D+(E^(S|~x))+k[15]+4264355552&4294967295,D=S+(I<<10&4294967295|I>>>22),I=x+(S^(D|~E))+k[6]+2734768916&4294967295,x=D+(I<<15&4294967295|I>>>17),I=E+(D^(x|~S))+k[13]+1309151649&4294967295,E=x+(I<<21&4294967295|I>>>11),I=S+(x^(E|~D))+k[4]+4149444226&4294967295,S=E+(I<<6&4294967295|I>>>26),I=D+(E^(S|~x))+k[11]+3174756917&4294967295,D=S+(I<<10&4294967295|I>>>22),I=x+(S^(D|~E))+k[2]+718787259&4294967295,x=D+(I<<15&4294967295|I>>>17),I=E+(D^(x|~S))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(x+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+x&4294967295,C.g[3]=C.g[3]+D&4294967295}s.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var E=S-this.blockSize,k=this.B,x=this.h,D=0;D<S;){if(x==0)for(;D<=E;)l(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<S;)if(k[x++]=C.charCodeAt(D++),x==this.blockSize){l(this,k),x=0;break}}else for(;D<S;)if(k[x++]=C[D++],x==this.blockSize){l(this,k),x=0;break}}this.h=x,this.o+=S},s.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var E=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=E&255,E/=256;for(this.u(C),C=Array(16),S=E=0;4>S;++S)for(var k=0;32>k;k+=8)C[E++]=this.g[S]>>>k&255;return C};function c(C,S){var E=m;return Object.prototype.hasOwnProperty.call(E,C)?E[C]:E[C]=S(C)}function f(C,S){this.h=S;for(var E=[],k=!0,x=C.length-1;0<=x;x--){var D=C[x]|0;k&&D==S||(E[x]=D,k=!1)}this.g=E}var m={};function y(C){return-128<=C&&128>C?c(C,function(S){return new f([S|0],0>S?-1:0)}):new f([C|0],0>C?-1:0)}function _(C){if(isNaN(C)||!isFinite(C))return P;if(0>C)return q(_(-C));for(var S=[],E=1,k=0;C>=E;k++)S[k]=C/E|0,E*=4294967296;return new f(S,0)}function A(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return q(A(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=_(Math.pow(S,8)),k=P,x=0;x<C.length;x+=8){var D=Math.min(8,C.length-x),I=parseInt(C.substring(x,x+D),S);8>D?(D=_(Math.pow(S,D)),k=k.j(D).add(_(I))):(k=k.j(E),k=k.add(_(I)))}return k}var P=y(0),j=y(1),z=y(16777216);i=f.prototype,i.m=function(){if(te(this))return-q(this).m();for(var C=0,S=1,E=0;E<this.g.length;E++){var k=this.i(E);C+=(0<=k?k:4294967296+k)*S,S*=4294967296}return C},i.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(J(this))return"0";if(te(this))return"-"+q(this).toString(C);for(var S=_(Math.pow(C,6)),E=this,k="";;){var x=Ae(E,S).g;E=oe(E,x.j(S));var D=((0<E.g.length?E.g[0]:E.h)>>>0).toString(C);if(E=x,J(E))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},i.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function J(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function te(C){return C.h==-1}i.l=function(C){return C=oe(this,C),te(C)?-1:J(C)?0:1};function q(C){for(var S=C.g.length,E=[],k=0;k<S;k++)E[k]=~C.g[k];return new f(E,~C.h).add(j)}i.abs=function(){return te(this)?q(this):this},i.add=function(C){for(var S=Math.max(this.g.length,C.g.length),E=[],k=0,x=0;x<=S;x++){var D=k+(this.i(x)&65535)+(C.i(x)&65535),I=(D>>>16)+(this.i(x)>>>16)+(C.i(x)>>>16);k=I>>>16,D&=65535,I&=65535,E[x]=I<<16|D}return new f(E,E[E.length-1]&-2147483648?-1:0)};function oe(C,S){return C.add(q(S))}i.j=function(C){if(J(this)||J(C))return P;if(te(this))return te(C)?q(this).j(q(C)):q(q(this).j(C));if(te(C))return q(this.j(q(C)));if(0>this.l(z)&&0>C.l(z))return _(this.m()*C.m());for(var S=this.g.length+C.g.length,E=[],k=0;k<2*S;k++)E[k]=0;for(k=0;k<this.g.length;k++)for(var x=0;x<C.g.length;x++){var D=this.i(k)>>>16,I=this.i(k)&65535,qe=C.i(x)>>>16,Oe=C.i(x)&65535;E[2*k+2*x]+=I*Oe,ke(E,2*k+2*x),E[2*k+2*x+1]+=D*Oe,ke(E,2*k+2*x+1),E[2*k+2*x+1]+=I*qe,ke(E,2*k+2*x+1),E[2*k+2*x+2]+=D*qe,ke(E,2*k+2*x+2)}for(k=0;k<S;k++)E[k]=E[2*k+1]<<16|E[2*k];for(k=S;k<2*S;k++)E[k]=0;return new f(E,0)};function ke(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function ae(C,S){this.g=C,this.h=S}function Ae(C,S){if(J(S))throw Error("division by zero");if(J(C))return new ae(P,P);if(te(C))return S=Ae(q(C),S),new ae(q(S.g),q(S.h));if(te(S))return S=Ae(C,q(S)),new ae(q(S.g),S.h);if(30<C.g.length){if(te(C)||te(S))throw Error("slowDivide_ only works with positive integers.");for(var E=j,k=S;0>=k.l(C);)E=Xe(E),k=Xe(k);var x=Pe(E,1),D=Pe(k,1);for(k=Pe(k,2),E=Pe(E,2);!J(k);){var I=D.add(k);0>=I.l(C)&&(x=x.add(E),D=I),k=Pe(k,1),E=Pe(E,1)}return S=oe(C,x.j(S)),new ae(x,S)}for(x=P;0<=C.l(S);){for(E=Math.max(1,Math.floor(C.m()/S.m())),k=Math.ceil(Math.log(E)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=_(E),I=D.j(S);te(I)||0<I.l(C);)E-=k,D=_(E),I=D.j(S);J(D)&&(D=j),x=x.add(D),C=oe(C,I)}return new ae(x,C)}i.A=function(C){return Ae(this,C).h},i.and=function(C){for(var S=Math.max(this.g.length,C.g.length),E=[],k=0;k<S;k++)E[k]=this.i(k)&C.i(k);return new f(E,this.h&C.h)},i.or=function(C){for(var S=Math.max(this.g.length,C.g.length),E=[],k=0;k<S;k++)E[k]=this.i(k)|C.i(k);return new f(E,this.h|C.h)},i.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),E=[],k=0;k<S;k++)E[k]=this.i(k)^C.i(k);return new f(E,this.h^C.h)};function Xe(C){for(var S=C.g.length+1,E=[],k=0;k<S;k++)E[k]=C.i(k)<<1|C.i(k-1)>>>31;return new f(E,C.h)}function Pe(C,S){var E=S>>5;S%=32;for(var k=C.g.length-E,x=[],D=0;D<k;D++)x[D]=0<S?C.i(D+E)>>>S|C.i(D+E+1)<<32-S:C.i(D+E);return new f(x,C.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,pm=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=A,us=f}).apply(typeof yp<"u"?yp:typeof self<"u"?self:typeof window<"u"?window:{});var Rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mm,Ko,gm,Nl,Jc,ym,vm,_m;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,g){return a==Array.prototype||a==Object.prototype||(a[d]=g.value),a};function r(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rl=="object"&&Rl];for(var d=0;d<a.length;++d){var g=a[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=r(this);function l(a,d){if(d)e:{var g=s;a=a.split(".");for(var w=0;w<a.length-1;w++){var O=a[w];if(!(O in g))break e;g=g[O]}a=a[a.length-1],w=g[a],d=d(w),d!=w&&d!=null&&e(g,a,{configurable:!0,writable:!0,value:d})}}function c(a,d){a instanceof String&&(a+="");var g=0,w=!1,O={next:function(){if(!w&&g<a.length){var B=g++;return{value:d(B,a[B]),done:!1}}return w=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}l("Array.prototype.values",function(a){return a||function(){return c(this,function(d,g){return g})}});var f=f||{},m=this||self;function y(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function _(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function A(a,d,g){return a.call.apply(a.bind,arguments)}function P(a,d,g){if(!a)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,w),a.apply(d,O)}}return function(){return a.apply(d,arguments)}}function j(a,d,g){return j=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:P,j.apply(null,arguments)}function z(a,d){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),a.apply(this,w)}}function J(a,d){function g(){}g.prototype=d.prototype,a.aa=d.prototype,a.prototype=new g,a.prototype.constructor=a,a.Qb=function(w,O,B){for(var ie=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)ie[nt-2]=arguments[nt];return d.prototype[O].apply(w,ie)}}function te(a){const d=a.length;if(0<d){const g=Array(d);for(let w=0;w<d;w++)g[w]=a[w];return g}return[]}function q(a,d){for(let g=1;g<arguments.length;g++){const w=arguments[g];if(y(w)){const O=a.length||0,B=w.length||0;a.length=O+B;for(let ie=0;ie<B;ie++)a[O+ie]=w[ie]}else a.push(w)}}class oe{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ke(a){return/^[\s\xa0]*$/.test(a)}function ae(){var a=m.navigator;return a&&(a=a.userAgent)?a:""}function Ae(a){return Ae[" "](a),a}Ae[" "]=function(){};var Xe=ae().indexOf("Gecko")!=-1&&!(ae().toLowerCase().indexOf("webkit")!=-1&&ae().indexOf("Edge")==-1)&&!(ae().indexOf("Trident")!=-1||ae().indexOf("MSIE")!=-1)&&ae().indexOf("Edge")==-1;function Pe(a,d,g){for(const w in a)d.call(g,a[w],w,a)}function C(a,d){for(const g in a)d.call(void 0,a[g],g,a)}function S(a){const d={};for(const g in a)d[g]=a[g];return d}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,d){let g,w;for(let O=1;O<arguments.length;O++){w=arguments[O];for(g in w)a[g]=w[g];for(let B=0;B<E.length;B++)g=E[B],Object.prototype.hasOwnProperty.call(w,g)&&(a[g]=w[g])}}function x(a){var d=1;a=a.split(":");const g=[];for(;0<d&&a.length;)g.push(a.shift()),d--;return a.length&&g.push(a.join(":")),g}function D(a){m.setTimeout(()=>{throw a},0)}function I(){var a=fe;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class qe{constructor(){this.h=this.g=null}add(d,g){const w=Oe.get();w.set(d,g),this.h?this.h.next=w:this.g=w,this.h=w}}var Oe=new oe(()=>new Et,a=>a.reset());class Et{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,ne=!1,fe=new qe,se=()=>{const a=m.Promise.resolve(void 0);Le=()=>{a.then(V)}};var V=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(g){D(g)}var d=Oe;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}ne=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var Re=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const g=()=>{};m.addEventListener("test",g,d),m.removeEventListener("test",g,d)}catch{}return a})();function xe(a,d){if(ue.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var g=this.type=a.type,w=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(Xe){e:{try{Ae(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else g=="mouseover"?d=a.fromElement:g=="mouseout"&&(d=a.toElement);this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Te[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&xe.aa.h.call(this)}}J(xe,ue);var Te={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function Qe(a,d,g,w,O){this.listener=a,this.proxy=null,this.src=d,this.type=g,this.capture=!!w,this.ha=O,this.key=++Ee,this.da=this.fa=!1}function mt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ue(a){this.src=a,this.g={},this.h=0}Ue.prototype.add=function(a,d,g,w,O){var B=a.toString();a=this.g[B],a||(a=this.g[B]=[],this.h++);var ie=$t(a,d,w,O);return-1<ie?(d=a[ie],g||(d.fa=!1)):(d=new Qe(d,this.src,B,!!w,O),d.fa=g,a.push(d)),d};function W(a,d){var g=d.type;if(g in a.g){var w=a.g[g],O=Array.prototype.indexOf.call(w,d,void 0),B;(B=0<=O)&&Array.prototype.splice.call(w,O,1),B&&(mt(d),a.g[g].length==0&&(delete a.g[g],a.h--))}}function $t(a,d,g,w){for(var O=0;O<a.length;++O){var B=a[O];if(!B.da&&B.listener==d&&B.capture==!!g&&B.ha==w)return O}return-1}var ht="closure_lm_"+(1e6*Math.random()|0),it={};function st(a,d,g,w,O){if(Array.isArray(d)){for(var B=0;B<d.length;B++)st(a,d[B],g,w,O);return null}return g=ir(g),a&&a[Ce]?a.K(d,g,_(w)?!!w.capture:!1,O):Zt(a,d,g,!1,w,O)}function Zt(a,d,g,w,O,B){if(!d)throw Error("Invalid event type");var ie=_(O)?!!O.capture:!!O,nt=_r(a);if(nt||(a[ht]=nt=new Ue(a)),g=nt.add(d,g,w,ie,B),g.proxy)return g;if(w=en(),g.proxy=w,w.src=a,w.listener=g,a.addEventListener)Re||(O=ie),O===void 0&&(O=!1),a.addEventListener(d.toString(),w,O);else if(a.attachEvent)a.attachEvent(dn(d.toString()),w);else if(a.addListener&&a.removeListener)a.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function en(){function a(g){return d.call(a.src,a.listener,g)}const d=nn;return a}function rr(a,d,g,w,O){if(Array.isArray(d))for(var B=0;B<d.length;B++)rr(a,d[B],g,w,O);else w=_(w)?!!w.capture:!!w,g=ir(g),a&&a[Ce]?(a=a.i,d=String(d).toString(),d in a.g&&(B=a.g[d],g=$t(B,g,w,O),-1<g&&(mt(B[g]),Array.prototype.splice.call(B,g,1),B.length==0&&(delete a.g[d],a.h--)))):a&&(a=_r(a))&&(d=a.g[d.toString()],a=-1,d&&(a=$t(d,g,w,O)),(g=-1<a?d[a]:null)&&tn(g))}function tn(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Ce])W(d.i,a);else{var g=a.type,w=a.proxy;d.removeEventListener?d.removeEventListener(g,w,a.capture):d.detachEvent?d.detachEvent(dn(g),w):d.addListener&&d.removeListener&&d.removeListener(w),(g=_r(d))?(W(g,a),g.h==0&&(g.src=null,d[ht]=null)):mt(a)}}}function dn(a){return a in it?it[a]:it[a]="on"+a}function nn(a,d){if(a.da)a=!0;else{d=new xe(d,this);var g=a.listener,w=a.ha||a.src;a.fa&&tn(a),a=g.call(w,d)}return a}function _r(a){return a=a[ht],a instanceof Ue?a:null}var Wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ir(a){return typeof a=="function"?a:(a[Wt]||(a[Wt]=function(d){return a.handleEvent(d)}),a[Wt])}function Je(){$.call(this),this.i=new Ue(this),this.M=this,this.F=null}J(Je,$),Je.prototype[Ce]=!0,Je.prototype.removeEventListener=function(a,d,g,w){rr(this,a,d,g,w)};function ot(a,d){var g,w=a.F;if(w)for(g=[];w;w=w.F)g.push(w);if(a=a.M,w=d.type||d,typeof d=="string")d=new ue(d,a);else if(d instanceof ue)d.target=d.target||a;else{var O=d;d=new ue(w,a),k(d,O)}if(O=!0,g)for(var B=g.length-1;0<=B;B--){var ie=d.g=g[B];O=At(ie,w,!0,d)&&O}if(ie=d.g=a,O=At(ie,w,!0,d)&&O,O=At(ie,w,!1,d)&&O,g)for(B=0;B<g.length;B++)ie=d.g=g[B],O=At(ie,w,!1,d)&&O}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var g=a.g[d],w=0;w<g.length;w++)mt(g[w]);delete a.g[d],a.h--}}this.F=null},Je.prototype.K=function(a,d,g,w){return this.i.add(String(a),d,!1,g,w)},Je.prototype.L=function(a,d,g,w){return this.i.add(String(a),d,!0,g,w)};function At(a,d,g,w){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,B=0;B<d.length;++B){var ie=d[B];if(ie&&!ie.da&&ie.capture==g){var nt=ie.listener,Nt=ie.ha||ie.src;ie.fa&&W(a.i,ie),O=nt.call(Nt,w)!==!1&&O}}return O&&!w.defaultPrevented}function Mr(a,d,g){if(typeof a=="function")g&&(a=j(a,g));else if(a&&typeof a.handleEvent=="function")a=j(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:m.setTimeout(a,d||0)}function rn(a){a.g=Mr(()=>{a.g=null,a.i&&(a.i=!1,rn(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class wr extends ${constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:rn(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vn(a){$.call(this),this.h=a,this.g={}}J(vn,$);var ni=[];function zn(a){Pe(a.g,function(d,g){this.g.hasOwnProperty(g)&&tn(d)},a),a.g={}}vn.prototype.N=function(){vn.aa.N.call(this),zn(this)},vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bi=m.JSON.stringify,sr=m.JSON.parse,ri=class{stringify(a){return m.JSON.stringify(a,void 0)}parse(a){return m.JSON.parse(a,void 0)}};function $n(){}$n.prototype.h=null;function Ui(a){return a.h||(a.h=a.i())}function Wn(){}var _n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pn(){ue.call(this,"d")}J(Pn,ue);function ii(){ue.call(this,"c")}J(ii,ue);var pn={},Bi=null;function qn(){return Bi=Bi||new Je}pn.La="serverreachability";function zi(a){ue.call(this,pn.La,a)}J(zi,ue);function Tt(a){const d=qn();ot(d,new zi(d))}pn.STAT_EVENT="statevent";function xn(a,d){ue.call(this,pn.STAT_EVENT,a),this.stat=d}J(xn,ue);function gt(a){const d=qn();ot(d,new xn(d,a))}pn.Ma="timingevent";function si(a,d){ue.call(this,pn.Ma,a),this.size=d}J(si,ue);function Nn(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){a()},d)}function Hn(){this.g=!0}Hn.prototype.xa=function(){this.g=!1};function Er(a,d,g,w,O,B){a.info(function(){if(a.g)if(B)for(var ie="",nt=B.split("&"),Nt=0;Nt<nt.length;Nt++){var $e=nt[Nt].split("=");if(1<$e.length){var jt=$e[0];$e=$e[1];var kt=jt.split("_");ie=2<=kt.length&&kt[1]=="type"?ie+(jt+"="+$e+"&"):ie+(jt+"=redacted&")}}else ie=null;else ie=B;return"XMLHTTP REQ ("+w+") [attempt "+O+"]: "+d+`
`+g+`
`+ie})}function Vn(a,d,g,w,O,B,ie){a.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+O+"]: "+d+`
`+g+`
`+B+" "+ie})}function Mt(a,d,g,w){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+or(a,g)+(w?" "+w:"")})}function tt(a,d){a.info(function(){return"TIMEOUT: "+d})}Hn.prototype.info=function(){};function or(a,d){if(!a.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(a=0;a<g.length;a++)if(Array.isArray(g[a])){var w=g[a];if(!(2>w.length)){var O=w[1];if(Array.isArray(O)&&!(1>O.length)){var B=O[0];if(B!="noop"&&B!="stop"&&B!="close")for(var ie=1;ie<O.length;ie++)O[ie]=""}}}}return bi(g)}catch{return d}}var Fr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ms={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wn;function Tr(){}J(Tr,$n),Tr.prototype.g=function(){return new XMLHttpRequest},Tr.prototype.i=function(){return{}},wn=new Tr;function Dn(a,d,g,w){this.j=a,this.i=d,this.l=g,this.R=w||1,this.U=new vn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new oi}function oi(){this.i=null,this.g="",this.h=!1}var ai={},li={};function H(a,d,g){a.L=1,a.v=fi(On(d)),a.m=g,a.P=!0,U(a,null)}function U(a,d){a.F=Date.now(),re(a),a.A=On(a.v);var g=a.A,w=a.R;Array.isArray(w)||(w=[String(w)]),pi(g.i,"t",w),a.C=0,g=a.j.J,a.h=new oi,a.g=xa(a.j,g?d:null,!a.m),0<a.O&&(a.M=new wr(j(a.Y,a,a.g),a.O)),d=a.U,g=a.g,w=a.ca;var O="readystatechange";Array.isArray(O)||(O&&(ni[0]=O.toString()),O=ni);for(var B=0;B<O.length;B++){var ie=st(g,O[B],w||d.handleEvent,!1,d.h||d);if(!ie)break;d.g[ie.key]=ie}d=a.H?S(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Tt(),Er(a.i,a.u,a.A,a.l,a.R,a.m)}Dn.prototype.ca=function(a){a=a.target;const d=this.M;d&&Tn(a)==3?d.j():this.Y(a)},Dn.prototype.Y=function(a){try{if(a==this.g)e:{const kt=Tn(this.g);var d=this.g.Ba();const Qn=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||vo(this.g)))){this.J||kt!=4||d==7||(d==8||0>=Qn?Tt(3):Tt(2)),Ze(this);var g=this.g.Z();this.X=g;t:if(Ne(this)){var w=vo(this.g);a="";var O=w.length,B=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){et(this),Me(this);var ie="";break t}this.h.i=new m.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,a+=this.h.i.decode(w[d],{stream:!(B&&d==O-1)});w.length=0,this.h.g+=a,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=g==200,Vn(this.i,this.u,this.A,this.l,this.R,kt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,Nt=this.g;if((nt=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ke(nt)){var $e=nt;break t}}$e=null}if(g=$e)Mt(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ft(this,g);else{this.o=!1,this.s=3,gt(12),et(this),Me(this);break e}}if(this.P){g=!0;let Fn;for(;!this.J&&this.C<ie.length;)if(Fn=me(this,ie),Fn==li){kt==4&&(this.s=4,gt(14),g=!1),Mt(this.i,this.l,null,"[Incomplete Response]");break}else if(Fn==ai){this.s=4,gt(15),Mt(this.i,this.l,ie,"[Invalid Chunk]"),g=!1;break}else Mt(this.i,this.l,Fn,null),Ft(this,Fn);if(Ne(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||ie.length!=0||this.h.h||(this.s=1,gt(16),g=!1),this.o=this.o&&g,!g)Mt(this.i,this.l,ie,"[Invalid Chunked Response]"),et(this),Me(this);else if(0<ie.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),wo(jt),jt.M=!0,gt(11))}}else Mt(this.i,this.l,ie,null),Ft(this,ie);kt==4&&et(this),this.o&&!this.J&&(kt==4?Cs(this.j,this):(this.o=!1,re(this)))}else Ts(this.g),g==400&&0<ie.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),et(this),Me(this)}}}catch{}finally{}};function Ne(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function me(a,d){var g=a.C,w=d.indexOf(`
`,g);return w==-1?li:(g=Number(d.substring(g,w)),isNaN(g)?ai:(w+=1,w+g>d.length?li:(d=d.slice(w,w+g),a.C=w+g,d)))}Dn.prototype.cancel=function(){this.J=!0,et(this)};function re(a){a.S=Date.now()+a.I,Be(a,a.I)}function Be(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Nn(j(a.ba,a),d)}function Ze(a){a.B&&(m.clearTimeout(a.B),a.B=null)}Dn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(tt(this.i,this.A),this.L!=2&&(Tt(),gt(17)),et(this),this.s=2,Me(this)):Be(this,this.S-a)};function Me(a){a.j.G==0||a.J||Cs(a.j,a)}function et(a){Ze(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,zn(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Ft(a,d){try{var g=a.j;if(g.G!=0&&(g.g==a||St(g.h,a))){if(!a.K&&St(g.h,a)&&g.G==3){try{var w=g.Da.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var O=w;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<a.F)Rs(g),hr(g);else break e;As(g),gt(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=Nn(j(g.Za,g),6e3));if(1>=Ln(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else $r(g,11)}else if((a.K||g.g==a)&&Rs(g),!ke(d))for(O=g.Da.g.parse(d),d=0;d<O.length;d++){let $e=O[d];if(g.T=$e[0],$e=$e[1],g.G==2)if($e[0]=="c"){g.K=$e[1],g.ia=$e[2];const jt=$e[3];jt!=null&&(g.la=jt,g.j.info("VER="+g.la));const kt=$e[4];kt!=null&&(g.Aa=kt,g.j.info("SVER="+g.Aa));const Qn=$e[5];Qn!=null&&typeof Qn=="number"&&0<Qn&&(w=1.5*Qn,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;const Fn=a.g;if(Fn){const Qi=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qi){var B=w.h;B.g||Qi.indexOf("spdy")==-1&&Qi.indexOf("quic")==-1&&Qi.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(jr(B,B.h),B.h=null))}if(w.D){const Ps=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ps&&(w.ya=Ps,at(w.I,w.D,Ps))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-a.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var ie=a;if(w.qa=Pa(w,w.J?w.ia:null,w.W),ie.K){gs(w.h,ie);var nt=ie,Nt=w.L;Nt&&(nt.I=Nt),nt.B&&(Ze(nt),re(nt)),w.g=ie}else Ki(w);0<g.i.length&&Rr(g)}else $e[0]!="stop"&&$e[0]!="close"||$r(g,7);else g.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?$r(g,7):Ht(g):$e[0]!="noop"&&g.l&&g.l.ta($e),g.v=0)}}Tt(4)}catch{}}var Fe=class{constructor(a,d){this.g=a,this.map=d}};function sn(a){this.l=a||10,m.PerformanceNavigationTiming?(a=m.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yt(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ln(a){return a.h?1:a.g?a.g.size:0}function St(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function jr(a,d){a.g?a.g.add(d):a.h=d}function gs(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}sn.prototype.cancel=function(){if(this.i=va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function va(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const g of a.g.values())d=d.concat(g.D);return d}return te(a.i)}function ys(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(y(a)){for(var d=[],g=a.length,w=0;w<g;w++)d.push(a[w]);return d}d=[],g=0;for(w in a)d[g++]=a[w];return d}function vs(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(y(a)||typeof a=="string"){var d=[];a=a.length;for(var g=0;g<a;g++)d.push(g);return d}d=[],g=0;for(const w in a)d[g++]=w;return d}}}function ui(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(y(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var g=vs(a),w=ys(a),O=w.length,B=0;B<O;B++)d.call(void 0,w[B],g&&g[B],a)}var $i=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lu(a,d){if(a){a=a.split("&");for(var g=0;g<a.length;g++){var w=a[g].indexOf("="),O=null;if(0<=w){var B=a[g].substring(0,w);O=a[g].substring(w+1)}else B=a[g];d(B,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function br(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof br){this.h=a.h,Wi(this,a.j),this.o=a.o,this.g=a.g,ci(this,a.s),this.l=a.l;var d=a.i,g=new Sr;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),hi(this,g),this.m=a.m}else a&&(d=String(a).match($i))?(this.h=!1,Wi(this,d[1]||"",!0),this.o=ze(d[2]||""),this.g=ze(d[3]||"",!0),ci(this,d[4]),this.l=ze(d[5]||"",!0),hi(this,d[6]||"",!0),this.m=ze(d[7]||"")):(this.h=!1,this.i=new Sr(null,this.h))}br.prototype.toString=function(){var a=[],d=this.j;d&&a.push(di(d,_s,!0),":");var g=this.g;return(g||d=="file")&&(a.push("//"),(d=this.o)&&a.push(di(d,_s,!0),"@"),a.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&a.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&a.push("/"),a.push(di(g,g.charAt(0)=="/"?Ea:wa,!0))),(g=this.i.toString())&&a.push("?",g),(g=this.m)&&a.push("#",di(g,mo)),a.join("")};function On(a){return new br(a)}function Wi(a,d,g){a.j=g?ze(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function ci(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function hi(a,d,g){d instanceof Sr?(a.i=d,Ir(a.i,a.h)):(g||(d=di(d,Ta)),a.i=new Sr(d,a.h))}function at(a,d,g){a.i.set(d,g)}function fi(a){return at(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ze(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function di(a,d,g){return typeof a=="string"?(a=encodeURI(a).replace(d,_a),g&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function _a(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var _s=/[#\/\?@]/g,wa=/[#\?:]/g,Ea=/[#\?]/g,Ta=/[#\?@]/g,mo=/#/g;function Sr(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function qt(a){a.g||(a.g=new Map,a.h=0,a.i&&lu(a.i,function(d,g){a.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}i=Sr.prototype,i.add=function(a,d){qt(this),this.i=null,a=Kn(this,a);var g=this.g.get(a);return g||this.g.set(a,g=[]),g.push(d),this.h+=1,this};function ar(a,d){qt(a),d=Kn(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function lr(a,d){return qt(a),d=Kn(a,d),a.g.has(d)}i.forEach=function(a,d){qt(this),this.g.forEach(function(g,w){g.forEach(function(O){a.call(d,O,w,this)},this)},this)},i.na=function(){qt(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let w=0;w<d.length;w++){const O=a[w];for(let B=0;B<O.length;B++)g.push(d[w])}return g},i.V=function(a){qt(this);let d=[];if(typeof a=="string")lr(this,a)&&(d=d.concat(this.g.get(Kn(this,a))));else{a=Array.from(this.g.values());for(let g=0;g<a.length;g++)d=d.concat(a[g])}return d},i.set=function(a,d){return qt(this),this.i=null,a=Kn(this,a),lr(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},i.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function pi(a,d,g){ar(a,d),0<g.length&&(a.i=null,a.g.set(Kn(a,d),te(g)),a.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var w=d[g];const B=encodeURIComponent(String(w)),ie=this.V(w);for(w=0;w<ie.length;w++){var O=B;ie[w]!==""&&(O+="="+encodeURIComponent(String(ie[w]))),a.push(O)}}return this.i=a.join("&")};function Kn(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function Ir(a,d){d&&!a.j&&(qt(a),a.i=null,a.g.forEach(function(g,w){var O=w.toLowerCase();w!=O&&(ar(this,w),pi(this,O,g))},a)),a.j=d}function uu(a,d){const g=new Hn;if(m.Image){const w=new Image;w.onload=z(En,g,"TestLoadImage: loaded",!0,d,w),w.onerror=z(En,g,"TestLoadImage: error",!1,d,w),w.onabort=z(En,g,"TestLoadImage: abort",!1,d,w),w.ontimeout=z(En,g,"TestLoadImage: timeout",!1,d,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=a}else d(!1)}function Sa(a,d){const g=new Hn,w=new AbortController,O=setTimeout(()=>{w.abort(),En(g,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:w.signal}).then(B=>{clearTimeout(O),B.ok?En(g,"TestPingServer: ok",!0,d):En(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),En(g,"TestPingServer: error",!1,d)})}function En(a,d,g,w,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),w(g)}catch{}}function cu(){this.g=new ri}function Ia(a,d,g){const w=g||"";try{ui(a,function(O,B){let ie=O;_(O)&&(ie=bi(O)),d.push(w+B+"="+encodeURIComponent(ie))})}catch(O){throw d.push(w+"type="+encodeURIComponent("_badmap")),O}}function Ur(a){this.l=a.Ub||null,this.j=a.eb||!1}J(Ur,$n),Ur.prototype.g=function(){return new qi(this.l,this.j)},Ur.prototype.i=(function(a){return function(){return a}})({});function qi(a,d){Je.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}J(qi,Je),i=qi.prototype,i.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,cr(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||m).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ur(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,cr(this)),this.g&&(this.readyState=3,cr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Aa(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Aa(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ur(this):cr(this),this.readyState==3&&Aa(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,ur(this))},i.Qa=function(a){this.g&&(this.response=a,ur(this))},i.ga=function(){this.g&&ur(this)};function ur(a){a.readyState=4,a.l=null,a.j=null,a.v=null,cr(a)}i.setRequestHeader=function(a,d){this.u.append(a,d)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,a.push(g[0]+": "+g[1]),g=d.next();return a.join(`\r
`)};function cr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Br(a){let d="";return Pe(a,function(g,w){d+=w,d+=":",d+=g,d+=`\r
`}),d}function mi(a,d,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=Br(g),typeof a=="string"?g!=null&&encodeURIComponent(String(g)):at(a,d,g))}function ft(a){Je.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}J(ft,Je);var hu=/^https?$/i,go=["POST","PUT"];i=ft.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,d,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wn.g(),this.v=this.o?Ui(this.o):Ui(wn),this.g.onreadystatechange=j(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(B){Hi(this,B);return}if(a=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var O in w)g.set(O,w[O]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const B of w.keys())g.set(B,w.get(B));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(B=>B.toLowerCase()=="content-type"),O=m.FormData&&a instanceof m.FormData,!(0<=Array.prototype.indexOf.call(go,d,void 0))||w||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ie]of g)this.g.setRequestHeader(B,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Es(this),this.u=!0,this.g.send(a),this.u=!1}catch(B){Hi(this,B)}};function Hi(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,ws(a),Mn(a)}function ws(a){a.A||(a.A=!0,ot(a,"complete"),ot(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ot(this,"complete"),ot(this,"abort"),Mn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mn(this,!0)),ft.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?yo(this):this.bb())},i.bb=function(){yo(this)};function yo(a){if(a.h&&typeof f<"u"&&(!a.v[1]||Tn(a)!=4||a.Z()!=2)){if(a.u&&Tn(a)==4)Mr(a.Ea,0,a);else if(ot(a,"readystatechange"),Tn(a)==4){a.h=!1;try{const ie=a.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var w;if(w=ie===0){var O=String(a.D).match($i)[1]||null;!O&&m.self&&m.self.location&&(O=m.self.location.protocol.slice(0,-1)),w=!hu.test(O?O.toLowerCase():"")}g=w}if(g)ot(a,"complete"),ot(a,"success");else{a.m=6;try{var B=2<Tn(a)?a.g.statusText:""}catch{B=""}a.l=B+" ["+a.Z()+"]",ws(a)}}finally{Mn(a)}}}}function Mn(a,d){if(a.g){Es(a);const g=a.g,w=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ot(a,"ready");try{g.onreadystatechange=w}catch{}}}function Es(a){a.I&&(m.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function Tn(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),sr(d)}};function vo(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Ts(a){const d={};a=(a.g&&2<=Tn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<a.length;w++){if(ke(a[w]))continue;var g=x(a[w]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const B=d[O]||[];d[O]=B,B.push(g)}C(d,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ar(a,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[a]||d}function _o(a){this.Aa=0,this.i=[],this.j=new Hn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ar("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ar("baseRetryDelayMs",5e3,a),this.cb=Ar("retryDelaySeedMs",1e4,a),this.Wa=Ar("forwardChannelMaxRetries",2,a),this.wa=Ar("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new sn(a&&a.concurrentRequestLimit),this.Da=new cu,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=_o.prototype,i.la=8,i.G=1,i.connect=function(a,d,g,w){gt(0),this.W=a,this.H=d||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=Pa(this,null,this.W),Rr(this)};function Ht(a){if(Ss(a),a.G==3){var d=a.U++,g=On(a.I);if(at(g,"SID",a.K),at(g,"RID",d),at(g,"TYPE","terminate"),zr(a,g),d=new Dn(a,a.j,d),d.L=2,d.v=fi(On(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=d.v,g=!0),g||(d.g=xa(d.j,null),d.g.ea(d.v)),d.F=Date.now(),re(d)}ka(a)}function hr(a){a.g&&(wo(a),a.g.cancel(),a.g=null)}function Ss(a){hr(a),a.u&&(m.clearTimeout(a.u),a.u=null),Rs(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&m.clearTimeout(a.s),a.s=null)}function Rr(a){if(!yt(a.h)&&!a.s){a.s=!0;var d=a.Ga;Le||se(),ne||(Le(),ne=!0),fe.add(d,a),a.B=0}}function fu(a,d){return Ln(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Nn(j(a.Ga,a,d),Ca(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const O=new Dn(this,this.j,a);let B=this.o;if(this.S&&(B?(B=S(B),k(B,this.S)):B=this.S),this.m!==null||this.O||(O.H=B,B=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(d+=w,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=gi(this,O,d),g=On(this.I),at(g,"RID",a),at(g,"CVER",22),this.D&&at(g,"X-HTTP-Session-Id",this.D),zr(this,g),B&&(this.O?d="headers="+encodeURIComponent(String(Br(B)))+"&"+d:this.m&&mi(g,this.m,B)),jr(this.h,O),this.Ua&&at(g,"TYPE","init"),this.P?(at(g,"$req",d),at(g,"SID","null"),O.T=!0,H(O,g,null)):H(O,g,d),this.G=2}}else this.G==3&&(a?Is(this,a):this.i.length==0||yt(this.h)||Is(this))};function Is(a,d){var g;d?g=d.l:g=a.U++;const w=On(a.I);at(w,"SID",a.K),at(w,"RID",g),at(w,"AID",a.T),zr(a,w),a.m&&a.o&&mi(w,a.m,a.o),g=new Dn(a,a.j,g,a.B+1),a.m===null&&(g.H=a.o),d&&(a.i=d.D.concat(a.i)),d=gi(a,g,1e3),g.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),jr(a.h,g),H(g,w,d)}function zr(a,d){a.H&&Pe(a.H,function(g,w){at(d,w,g)}),a.l&&ui({},function(g,w){at(d,w,g)})}function gi(a,d,g){g=Math.min(a.i.length,g);var w=a.l?j(a.l.Na,a.l,a):null;e:{var O=a.i;let B=-1;for(;;){const ie=["count="+g];B==-1?0<g?(B=O[0].g,ie.push("ofs="+B)):B=0:ie.push("ofs="+B);let nt=!0;for(let Nt=0;Nt<g;Nt++){let $e=O[Nt].g;const jt=O[Nt].map;if($e-=B,0>$e)B=Math.max(0,O[Nt].g-100),nt=!1;else try{Ia(jt,ie,"req"+$e+"_")}catch{w&&w(jt)}}if(nt){w=ie.join("&");break e}}}return a=a.i.splice(0,g),d.D=a,w}function Ki(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Le||se(),ne||(Le(),ne=!0),fe.add(d,a),a.v=0}}function As(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Nn(j(a.Fa,a),Ca(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,Ra(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Nn(j(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),hr(this),Ra(this))};function wo(a){a.A!=null&&(m.clearTimeout(a.A),a.A=null)}function Ra(a){a.g=new Dn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=On(a.qa);at(d,"RID","rpc"),at(d,"SID",a.K),at(d,"AID",a.T),at(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&at(d,"TO",a.ja),at(d,"TYPE","xmlhttp"),zr(a,d),a.m&&a.o&&mi(d,a.m,a.o),a.L&&(a.g.I=a.L);var g=a.g;a=a.ia,g.L=1,g.v=fi(On(d)),g.m=null,g.P=!0,U(g,a)}i.Za=function(){this.C!=null&&(this.C=null,hr(this),As(this),gt(19))};function Rs(a){a.C!=null&&(m.clearTimeout(a.C),a.C=null)}function Cs(a,d){var g=null;if(a.g==d){Rs(a),wo(a),a.g=null;var w=2}else if(St(a.h,d))g=d.D,gs(a.h,d),w=1;else return;if(a.G!=0){if(d.o)if(w==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var O=a.B;w=qn(),ot(w,new si(w,g)),Rr(a)}else Ki(a);else if(O=d.s,O==3||O==0&&0<d.X||!(w==1&&fu(a,d)||w==2&&As(a)))switch(g&&0<g.length&&(d=a.h,d.i=d.i.concat(g)),O){case 1:$r(a,5);break;case 4:$r(a,10);break;case 3:$r(a,6);break;default:$r(a,2)}}}function Ca(a,d){let g=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(g*=2),g*d}function $r(a,d){if(a.j.info("Error code "+d),d==2){var g=j(a.fb,a),w=a.Xa;const O=!w;w=new br(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Wi(w,"https"),fi(w),O?uu(w.toString(),g):Sa(w.toString(),g)}else gt(2);a.G=0,a.l&&a.l.sa(d),ka(a),Ss(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function ka(a){if(a.G=0,a.ka=[],a.l){const d=va(a.h);(d.length!=0||a.i.length!=0)&&(q(a.ka,d),q(a.ka,a.i),a.h.i.length=0,te(a.i),a.i.length=0),a.l.ra()}}function Pa(a,d,g){var w=g instanceof br?On(g):new br(g);if(w.g!="")d&&(w.g=d+"."+w.g),ci(w,w.s);else{var O=m.location;w=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var B=new br(null);w&&Wi(B,w),d&&(B.g=d),O&&ci(B,O),g&&(B.l=g),w=B}return g=a.D,d=a.ya,g&&d&&at(w,g,d),at(w,"VER",a.la),zr(a,w),w}function xa(a,d,g){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new ft(new Ur({eb:g})):new ft(a.pa),d.Ha(a.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eo(){}i=Eo.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ks(){}ks.prototype.g=function(a,d){return new mn(a,d)};function mn(a,d){Je.call(this),this.g=new _o(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!ke(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ke(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Cr(this)}J(mn,Je),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Ht(this.g)},mn.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var g={};g.__data__=a,a=g}else this.u&&(g={},g.__data__=bi(a),a=g);d.i.push(new Fe(d.Ya++,a)),d.G==3&&Rr(d)},mn.prototype.N=function(){this.g.l=null,delete this.j,Ht(this.g),delete this.g,mn.aa.N.call(this)};function Na(a){Pn.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const g in d){a=g;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}J(Na,Pn);function Va(){ii.call(this),this.status=1}J(Va,ii);function Cr(a){this.g=a}J(Cr,Eo),Cr.prototype.ua=function(){ot(this.g,"a")},Cr.prototype.ta=function(a){ot(this.g,new Na(a))},Cr.prototype.sa=function(a){ot(this.g,new Va)},Cr.prototype.ra=function(){ot(this.g,"b")},ks.prototype.createWebChannel=ks.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,_m=function(){return new ks},vm=function(){return qn()},ym=pn,Jc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fr.NO_ERROR=0,Fr.TIMEOUT=8,Fr.HTTP_ERROR=6,Nl=Fr,ms.COMPLETE="complete",gm=ms,Wn.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Ko=Wn,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,mm=ft}).apply(typeof Rl<"u"?Rl:typeof self<"u"?self:typeof window<"u"?window:{});const vp="@firebase/firestore";class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");let co="10.14.0";const cs=new lm("@firebase/firestore");function Ho(){return cs.logLevel}function pe(i,...e){if(cs.logLevel<=Ke.DEBUG){const r=e.map(yh);cs.debug(`Firestore (${co}): ${i}`,...r)}}function ei(i,...e){if(cs.logLevel<=Ke.ERROR){const r=e.map(yh);cs.error(`Firestore (${co}): ${i}`,...r)}}function no(i,...e){if(cs.logLevel<=Ke.WARN){const r=e.map(yh);cs.warn(`Firestore (${co}): ${i}`,...r)}}function yh(i){if(typeof i=="string")return i;try{return(function(r){return JSON.stringify(r)})(i)}catch{return i}}function Ie(i="Unexpected state"){const e=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: `+i;throw ei(e),new Error(e)}function rt(i,e){i||Ie()}function De(i,e){return i}const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends uo{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Li{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}class wm{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(hn.UNAUTHENTICATED)))}shutdown(){}}class N_{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class V_{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){rt(this.o===void 0);let s=this.i;const l=y=>this.i!==s?(s=this.i,r(y)):Promise.resolve();let c=new Li;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Li,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},m=y=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Li)}}),0),f()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((s=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(rt(typeof s.accessToken=="string"),new wm(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string"),new hn(e)}}class D_{constructor(e,r,s){this.l=e,this.h=r,this.P=s,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class L_{constructor(e,r,s){this.l=e,this.h=r,this.P=s}getToken(){return Promise.resolve(new D_(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class O_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M_{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){rt(this.o===void 0);const s=c=>{c.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.R;return this.R=c.token,pe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?r(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?l(c):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(rt(typeof r.token=="string"),this.R=r.token,new O_(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function F_(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let s=0;s<i;s++)r[s]=Math.floor(256*Math.random());return r}class Em{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const l=F_(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<r&&(s+=e.charAt(l[c]%e.length))}return s}}function Ye(i,e){return i<e?-1:i>e?1:0}function ro(i,e,r){return i.length===e.length&&i.every(((s,l)=>r(s,e[l])))}class Ot{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ye(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ye(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ye(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*r));return new Ot(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Ot(0,0))}static max(){return new Ve(new Ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ra{constructor(e,r,s){r===void 0?r=0:r>e.length&&Ie(),s===void 0?s=e.length-r:s>e.length-r&&Ie(),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return ra.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ra?e.forEach((s=>{r.push(s)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let l=0;l<s;l++){const c=e.get(l),f=r.get(l);if(c<f)return-1;if(c>f)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class pt extends ra{construct(e,r,s){return new pt(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter((l=>l.length>0)))}return new pt(r)}static emptyPath(){return new pt([])}}const j_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends ra{construct(e,r,s){return new Yt(e,r,s)}static isValidIdentifier(e){return j_.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Yt(["__name__"])}static fromServerFormat(e){const r=[];let s="",l=0;const c=()=>{if(s.length===0)throw new ye(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let f=!1;for(;l<e.length;){const m=e[l];if(m==="\\"){if(l+1===e.length)throw new ye(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ye(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,l+=2}else m==="`"?(f=!f,l++):m!=="."||f?(s+=m,l++):(c(),l++)}if(c(),f)throw new ye(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(r)}static emptyPath(){return new Yt([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(pt.fromString(e))}static fromName(e){return new we(pt.fromString(e).popFirst(5))}static empty(){return new we(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return pt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new pt(e.slice()))}}function b_(i,e){const r=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,l=Ve.fromTimestamp(s===1e9?new Ot(r+1,0):new Ot(r,s));return new Mi(l,we.empty(),e)}function U_(i){return new Mi(i.readTime,i.key,-1)}class Mi{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new Mi(Ve.min(),we.empty(),-1)}static max(){return new Mi(Ve.max(),we.empty(),-1)}}function B_(i,e){let r=i.readTime.compareTo(e.readTime);return r!==0?r:(r=we.comparator(i.documentKey,e.documentKey),r!==0?r:Ye(i.largestBatchId,e.largestBatchId))}const z_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ca(i){if(i.code!==Y.FAILED_PRECONDITION||i.message!==z_)throw i;pe("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new G(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(r,c).next(s,l)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof G?r:G.resolve(r)}catch(r){return G.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):G.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):G.reject(r)}static resolve(e){return new G(((r,s)=>{r(e)}))}static reject(e){return new G(((r,s)=>{s(e)}))}static waitFor(e){return new G(((r,s)=>{let l=0,c=0,f=!1;e.forEach((m=>{++l,m.next((()=>{++c,f&&c===l&&r()}),(y=>s(y)))})),f=!0,c===l&&r()}))}static or(e){let r=G.resolve(!1);for(const s of e)r=r.next((l=>l?G.resolve(l):s()));return r}static forEach(e,r){const s=[];return e.forEach(((l,c)=>{s.push(r.call(this,l,c))})),this.waitFor(s)}static mapArray(e,r){return new G(((s,l)=>{const c=e.length,f=new Array(c);let m=0;for(let y=0;y<c;y++){const _=y;r(e[_]).next((A=>{f[_]=A,++m,m===c&&s(f)}),(A=>l(A)))}}))}static doWhile(e,r){return new G(((s,l)=>{const c=()=>{e()===!0?r().next((()=>{c()}),l):s()};c()}))}}function W_(i){const e=i.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function ha(i){return i.name==="IndexedDbTransactionError"}class vh{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=s=>this.ie(s),this.se=s=>r.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}vh.oe=-1;function Yl(i){return i==null}function Bl(i){return i===0&&1/i==-1/0}function q_(i){return typeof i=="number"&&Number.isInteger(i)&&!Bl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function _p(i){let e=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&e++;return e}function ho(i,e){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&e(r,i[r])}function Tm(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class wt{constructor(e,r){this.comparator=e,this.root=r||Gt.EMPTY}insert(e,r){return new wt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return r+s.left.size;l<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,s)=>(e(r,s),!1)))}toString(){const e=[];return this.inorderTraversal(((r,s)=>(e.push(`${r}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cl(this.root,e,this.comparator,!0)}}class Cl{constructor(e,r,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=r?s(e.key,r):1,r&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,r,s,l,c){this.key=e,this.value=r,this.color=s??Gt.RED,this.left=l??Gt.EMPTY,this.right=c??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,l,c){return new Gt(e??this.key,r??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,r,s),null):c===0?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(e,r,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,l=this;if(r(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,r),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),r(e,l.key)===0){if(l.right.isEmpty())return Gt.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,r))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,r,s,l,c){return this}insert(e,r,s){return new Gt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,s)=>(e(r),!1)))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;r(l.key)}}forEachWhile(e,r){let s;for(s=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new wp(this.data.getIterator())}getIteratorFrom(e){return new wp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((s=>{r=r.add(s)})),r}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const l=r.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new Xt(this.comparator);return r.data=e,r}}class wp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class vr{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new vr([])}unionWith(e){let r=new Xt(Yt.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new vr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,((r,s)=>r.isEqual(s)))}}class Sm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Sm("Invalid base64 string: "+c):c}})(e);return new Jt(r)}static fromUint8Array(e){const r=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(e);return new Jt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const s=new Uint8Array(r.length);for(let l=0;l<r.length;l++)s[l]=r.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const H_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fi(i){if(rt(!!i),typeof i=="string"){let e=0;const r=H_.exec(i);if(rt(!!r),r[1]){let l=r[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ct(i.seconds),nanos:Ct(i.nanos)}}function Ct(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function hs(i){return typeof i=="string"?Jt.fromBase64String(i):Jt.fromUint8Array(i)}function _h(i){var e,r;return((r=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function wh(i){const e=i.mapValue.fields.__previous_value__;return _h(e)?wh(e):e}function ia(i){const e=Fi(i.mapValue.fields.__local_write_time__.timestampValue);return new Ot(e.seconds,e.nanos)}class K_{constructor(e,r,s,l,c,f,m,y,_){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=_}}class sa{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new sa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sa&&e.projectId===this.projectId&&e.database===this.database}}const kl={mapValue:{}};function fs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?_h(i)?4:G_(i)?9007199254740991:Q_(i)?10:11:Ie()}function Lr(i,e){if(i===e)return!0;const r=fs(i);if(r!==fs(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ia(i).isEqual(ia(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=Fi(l.timestampValue),m=Fi(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(l,c){return hs(l.bytesValue).isEqual(hs(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(l,c){return Ct(l.geoPointValue.latitude)===Ct(c.geoPointValue.latitude)&&Ct(l.geoPointValue.longitude)===Ct(c.geoPointValue.longitude)})(i,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return Ct(l.integerValue)===Ct(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=Ct(l.doubleValue),m=Ct(c.doubleValue);return f===m?Bl(f)===Bl(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return ro(i.arrayValue.values||[],e.arrayValue.values||[],Lr);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},m=c.mapValue.fields||{};if(_p(f)!==_p(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!Lr(f[y],m[y])))return!1;return!0})(i,e);default:return Ie()}}function oa(i,e){return(i.values||[]).find((r=>Lr(r,e)))!==void 0}function io(i,e){if(i===e)return 0;const r=fs(i),s=fs(e);if(r!==s)return Ye(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ye(i.booleanValue,e.booleanValue);case 2:return(function(c,f){const m=Ct(c.integerValue||c.doubleValue),y=Ct(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(i,e);case 3:return Ep(i.timestampValue,e.timestampValue);case 4:return Ep(ia(i),ia(e));case 5:return Ye(i.stringValue,e.stringValue);case 6:return(function(c,f){const m=hs(c),y=hs(f);return m.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(c,f){const m=c.split("/"),y=f.split("/");for(let _=0;_<m.length&&_<y.length;_++){const A=Ye(m[_],y[_]);if(A!==0)return A}return Ye(m.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,f){const m=Ye(Ct(c.latitude),Ct(f.latitude));return m!==0?m:Ye(Ct(c.longitude),Ct(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Tp(i.arrayValue,e.arrayValue);case 10:return(function(c,f){var m,y,_,A;const P=c.fields||{},j=f.fields||{},z=(m=P.value)===null||m===void 0?void 0:m.arrayValue,J=(y=j.value)===null||y===void 0?void 0:y.arrayValue,te=Ye(((_=z?.values)===null||_===void 0?void 0:_.length)||0,((A=J?.values)===null||A===void 0?void 0:A.length)||0);return te!==0?te:Tp(z,J)})(i.mapValue,e.mapValue);case 11:return(function(c,f){if(c===kl.mapValue&&f===kl.mapValue)return 0;if(c===kl.mapValue)return 1;if(f===kl.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),_=f.fields||{},A=Object.keys(_);y.sort(),A.sort();for(let P=0;P<y.length&&P<A.length;++P){const j=Ye(y[P],A[P]);if(j!==0)return j;const z=io(m[y[P]],_[A[P]]);if(z!==0)return z}return Ye(y.length,A.length)})(i.mapValue,e.mapValue);default:throw Ie()}}function Ep(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ye(i,e);const r=Fi(i),s=Fi(e),l=Ye(r.seconds,s.seconds);return l!==0?l:Ye(r.nanos,s.nanos)}function Tp(i,e){const r=i.values||[],s=e.values||[];for(let l=0;l<r.length&&l<s.length;++l){const c=io(r[l],s[l]);if(c)return c}return Ye(r.length,s.length)}function so(i){return Zc(i)}function Zc(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(r){const s=Fi(r);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(r){return hs(r).toBase64()})(i.bytesValue):"referenceValue"in i?(function(r){return we.fromName(r).toString()})(i.referenceValue):"geoPointValue"in i?(function(r){return`geo(${r.latitude},${r.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(r){let s="[",l=!0;for(const c of r.values||[])l?l=!1:s+=",",s+=Zc(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(r){const s=Object.keys(r.fields||{}).sort();let l="{",c=!0;for(const f of s)c?c=!1:l+=",",l+=`${f}:${Zc(r.fields[f])}`;return l+"}"})(i.mapValue):Ie()}function eh(i){return!!i&&"integerValue"in i}function Eh(i){return!!i&&"arrayValue"in i}function Sp(i){return!!i&&"nullValue"in i}function Ip(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Vl(i){return!!i&&"mapValue"in i}function Q_(i){var e,r;return((r=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Yo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ho(i.mapValue.fields,((r,s)=>e.mapValue.fields[r]=Yo(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Yo(i.arrayValue.values[r]);return e}return Object.assign({},i)}function G_(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class tr{constructor(e){this.value=e}static empty(){return new tr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!Vl(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yo(r)}setAll(e){let r=Yt.emptyPath(),s={},l=[];e.forEach(((f,m)=>{if(!r.isImmediateParentOf(m)){const y=this.getFieldsMap(r);this.applyChanges(y,s,l),s={},l=[],r=m.popLast()}f?s[m.lastSegment()]=Yo(f):l.push(m.lastSegment())}));const c=this.getFieldsMap(r);this.applyChanges(c,s,l)}delete(e){const r=this.field(e.popLast());Vl(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Lr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=r.mapValue.fields[e.get(s)];Vl(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=l),r=l}return r.mapValue.fields}applyChanges(e,r,s){ho(r,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new tr(Yo(this.value))}}function Im(i){const e=[];return ho(i.fields,((r,s)=>{const l=new Yt([r]);if(Vl(s)){const c=Im(s.mapValue).fields;if(c.length===0)e.push(l);else for(const f of c)e.push(l.child(f))}else e.push(l)})),new vr(e)}class fn{constructor(e,r,s,l,c,f,m){this.key=e,this.documentType=r,this.version=s,this.readTime=l,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new fn(e,0,Ve.min(),Ve.min(),Ve.min(),tr.empty(),0)}static newFoundDocument(e,r,s,l){return new fn(e,1,r,Ve.min(),s,l,0)}static newNoDocument(e,r){return new fn(e,2,r,Ve.min(),Ve.min(),tr.empty(),0)}static newUnknownDocument(e,r){return new fn(e,3,r,Ve.min(),Ve.min(),tr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zl{constructor(e,r){this.position=e,this.inclusive=r}}function Ap(i,e,r){let s=0;for(let l=0;l<i.position.length;l++){const c=e[l],f=i.position[l];if(c.field.isKeyField()?s=we.comparator(we.fromName(f.referenceValue),r.key):s=io(f,r.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Rp(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!Lr(i.position[r],e.position[r]))return!1;return!0}class $l{constructor(e,r="asc"){this.field=e,this.dir=r}}function Y_(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Am{}class Lt extends Am{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,s):new J_(e,r,s):r==="array-contains"?new t0(e,s):r==="in"?new n0(e,s):r==="not-in"?new r0(e,s):r==="array-contains-any"?new i0(e,s):new Lt(e,r,s)}static createKeyFieldInFilter(e,r,s){return r==="in"?new Z_(e,s):new e0(e,s)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(io(r,this.value)):r!==null&&fs(this.value)===fs(r)&&this.matchesComparison(io(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Or extends Am{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Or(e,r)}matches(e){return Rm(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Rm(i){return i.op==="and"}function Cm(i){return X_(i)&&Rm(i)}function X_(i){for(const e of i.filters)if(e instanceof Or)return!1;return!0}function th(i){if(i instanceof Lt)return i.field.canonicalString()+i.op.toString()+so(i.value);if(Cm(i))return i.filters.map((e=>th(e))).join(",");{const e=i.filters.map((r=>th(r))).join(",");return`${i.op}(${e})`}}function km(i,e){return i instanceof Lt?(function(s,l){return l instanceof Lt&&s.op===l.op&&s.field.isEqual(l.field)&&Lr(s.value,l.value)})(i,e):i instanceof Or?(function(s,l){return l instanceof Or&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,f,m)=>c&&km(f,l.filters[m])),!0):!1})(i,e):void Ie()}function Pm(i){return i instanceof Lt?(function(r){return`${r.field.canonicalString()} ${r.op} ${so(r.value)}`})(i):i instanceof Or?(function(r){return r.op.toString()+" {"+r.getFilters().map(Pm).join(" ,")+"}"})(i):"Filter"}class J_ extends Lt{constructor(e,r,s){super(e,r,s),this.key=we.fromName(s.referenceValue)}matches(e){const r=we.comparator(e.key,this.key);return this.matchesComparison(r)}}class Z_ extends Lt{constructor(e,r){super(e,"in",r),this.keys=xm("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class e0 extends Lt{constructor(e,r){super(e,"not-in",r),this.keys=xm("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function xm(i,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((s=>we.fromName(s.referenceValue)))}class t0 extends Lt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Eh(r)&&oa(r.arrayValue,this.value)}}class n0 extends Lt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&oa(this.value.arrayValue,r)}}class r0 extends Lt{constructor(e,r){super(e,"not-in",r)}matches(e){if(oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!oa(this.value.arrayValue,r)}}class i0 extends Lt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Eh(r)||!r.arrayValue.values)&&r.arrayValue.values.some((s=>oa(this.value.arrayValue,s)))}}class s0{constructor(e,r=null,s=[],l=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=f,this.endAt=m,this.ue=null}}function Cp(i,e=null,r=[],s=[],l=null,c=null,f=null){return new s0(i,e,r,s,l,c,f)}function Th(i){const e=De(i);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((s=>th(s))).join(","),r+="|ob:",r+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Yl(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((s=>so(s))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((s=>so(s))).join(",")),e.ue=r}return e.ue}function Sh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<i.orderBy.length;r++)if(!Y_(i.orderBy[r],e.orderBy[r]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let r=0;r<i.filters.length;r++)if(!km(i.filters[r],e.filters[r]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Rp(i.startAt,e.startAt)&&Rp(i.endAt,e.endAt)}function nh(i){return we.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Xl{constructor(e,r=null,s=[],l=[],c=null,f="F",m=null,y=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function o0(i,e,r,s,l,c,f,m){return new Xl(i,e,r,s,l,c,f,m)}function Nm(i){return new Xl(i)}function kp(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function a0(i){return i.collectionGroup!==null}function Xo(i){const e=De(i);if(e.ce===null){e.ce=[];const r=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),r.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Xt(Yt.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{r.has(c.canonicalString())||c.isKeyField()||e.ce.push(new $l(c,s))})),r.has(Yt.keyField().canonicalString())||e.ce.push(new $l(Yt.keyField(),s))}return e.ce}function Vr(i){const e=De(i);return e.le||(e.le=l0(e,Xo(i))),e.le}function l0(i,e){if(i.limitType==="F")return Cp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new $l(l.field,c)}));const r=i.endAt?new zl(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new zl(i.startAt.position,i.startAt.inclusive):null;return Cp(i.path,i.collectionGroup,e,i.filters,i.limit,r,s)}}function rh(i,e,r){return new Xl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,r,i.startAt,i.endAt)}function Jl(i,e){return Sh(Vr(i),Vr(e))&&i.limitType===e.limitType}function Vm(i){return`${Th(Vr(i))}|lt:${i.limitType}`}function Ys(i){return`Query(target=${(function(r){let s=r.path.canonicalString();return r.collectionGroup!==null&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map((l=>Pm(l))).join(", ")}]`),Yl(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map((l=>so(l))).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map((l=>so(l))).join(",")),`Target(${s})`})(Vr(i))}; limitType=${i.limitType})`}function Zl(i,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):we.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,l){for(const c of Xo(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(i,e)&&(function(s,l){return!(s.startAt&&!(function(f,m,y){const _=Ap(f,m,y);return f.inclusive?_<=0:_<0})(s.startAt,Xo(s),l)||s.endAt&&!(function(f,m,y){const _=Ap(f,m,y);return f.inclusive?_>=0:_>0})(s.endAt,Xo(s),l))})(i,e)}function u0(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Dm(i){return(e,r)=>{let s=!1;for(const l of Xo(i)){const c=c0(l,e,r);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function c0(i,e,r){const s=i.field.isKeyField()?we.comparator(e.key,r.key):(function(c,f,m){const y=f.data.field(c),_=m.data.field(c);return y!==null&&_!==null?io(y,_):Ie()})(i.field,e,r);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ie()}}class fo{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,r){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,r]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,r]);l.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[r]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,((r,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return Tm(this.inner)}size(){return this.innerSize}}const h0=new wt(we.comparator);function ti(){return h0}const Lm=new wt(we.comparator);function Qo(...i){let e=Lm;for(const r of i)e=e.insert(r.key,r);return e}function Om(i){let e=Lm;return i.forEach(((r,s)=>e=e.insert(r,s.overlayedDocument))),e}function ls(){return Jo()}function Mm(){return Jo()}function Jo(){return new fo((i=>i.toString()),((i,e)=>i.isEqual(e)))}const f0=new wt(we.comparator),d0=new Xt(we.comparator);function be(...i){let e=d0;for(const r of i)e=e.add(r);return e}const p0=new Xt(Ye);function m0(){return p0}function Ih(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bl(e)?"-0":e}}function Fm(i){return{integerValue:""+i}}function g0(i,e){return q_(e)?Fm(e):Ih(i,e)}class eu{constructor(){this._=void 0}}function y0(i,e,r){return i instanceof Wl?(function(l,c){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&_h(c)&&(c=wh(c)),c&&(f.fields.__previous_value__=c),{mapValue:f}})(r,e):i instanceof aa?bm(i,e):i instanceof la?Um(i,e):(function(l,c){const f=jm(l,c),m=Pp(f)+Pp(l.Pe);return eh(f)&&eh(l.Pe)?Fm(m):Ih(l.serializer,m)})(i,e)}function v0(i,e,r){return i instanceof aa?bm(i,e):i instanceof la?Um(i,e):r}function jm(i,e){return i instanceof ql?(function(s){return eh(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Wl extends eu{}class aa extends eu{constructor(e){super(),this.elements=e}}function bm(i,e){const r=Bm(e);for(const s of i.elements)r.some((l=>Lr(l,s)))||r.push(s);return{arrayValue:{values:r}}}class la extends eu{constructor(e){super(),this.elements=e}}function Um(i,e){let r=Bm(e);for(const s of i.elements)r=r.filter((l=>!Lr(l,s)));return{arrayValue:{values:r}}}class ql extends eu{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Pp(i){return Ct(i.integerValue||i.doubleValue)}function Bm(i){return Eh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function _0(i,e){return i.field.isEqual(e.field)&&(function(s,l){return s instanceof aa&&l instanceof aa||s instanceof la&&l instanceof la?ro(s.elements,l.elements,Lr):s instanceof ql&&l instanceof ql?Lr(s.Pe,l.Pe):s instanceof Wl&&l instanceof Wl})(i.transform,e.transform)}class w0{constructor(e,r){this.version=e,this.transformResults=r}}class Jr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Jr}static exists(e){return new Jr(void 0,e)}static updateTime(e){return new Jr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dl(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class tu{}function zm(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Wm(i.key,Jr.none()):new fa(i.key,i.data,Jr.none());{const r=i.data,s=tr.empty();let l=new Xt(Yt.comparator);for(let c of e.fields)if(!l.has(c)){let f=r.field(c);f===null&&c.length>1&&(c=c.popLast(),f=r.field(c)),f===null?s.delete(c):s.set(c,f),l=l.add(c)}return new ds(i.key,s,new vr(l.toArray()),Jr.none())}}function E0(i,e,r){i instanceof fa?(function(l,c,f){const m=l.value.clone(),y=Np(l.fieldTransforms,c,f.transformResults);m.setAll(y),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,r):i instanceof ds?(function(l,c,f){if(!Dl(l.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Np(l.fieldTransforms,c,f.transformResults),y=c.data;y.setAll($m(l)),y.setAll(m),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(i,e,r):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,r)}function Zo(i,e,r,s){return i instanceof fa?(function(c,f,m,y){if(!Dl(c.precondition,f))return m;const _=c.value.clone(),A=Vp(c.fieldTransforms,y,f);return _.setAll(A),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(i,e,r,s):i instanceof ds?(function(c,f,m,y){if(!Dl(c.precondition,f))return m;const _=Vp(c.fieldTransforms,y,f),A=f.data;return A.setAll($m(c)),A.setAll(_),f.convertToFoundDocument(f.version,A).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((P=>P.field)))})(i,e,r,s):(function(c,f,m){return Dl(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,r)}function T0(i,e){let r=null;for(const s of i.fieldTransforms){const l=e.data.field(s.field),c=jm(s.transform,l||null);c!=null&&(r===null&&(r=tr.empty()),r.set(s.field,c))}return r||null}function xp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&ro(s,l,((c,f)=>_0(c,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class fa extends tu{constructor(e,r,s,l=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ds extends tu{constructor(e,r,s,l,c=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function $m(i){const e=new Map;return i.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const s=i.data.field(r);e.set(r,s)}})),e}function Np(i,e,r){const s=new Map;rt(i.length===r.length);for(let l=0;l<r.length;l++){const c=i[l],f=c.transform,m=e.data.field(c.field);s.set(c.field,v0(f,m,r[l]))}return s}function Vp(i,e,r){const s=new Map;for(const l of i){const c=l.transform,f=r.data.field(l.field);s.set(l.field,y0(c,f,e))}return s}class Wm extends tu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S0 extends tu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class I0{constructor(e,r,s,l){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&E0(c,e,s[l])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=Zo(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=Zo(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=Mm();return this.mutations.forEach((l=>{const c=e.get(l.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=r.has(l.key)?null:m;const y=zm(f,m);y!==null&&s.set(l.key,y),f.isValidDocument()||f.convertToNoDocument(Ve.min())})),s}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),be())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,((r,s)=>xp(r,s)))&&ro(this.baseMutations,e.baseMutations,((r,s)=>xp(r,s)))}}class Ah{constructor(e,r,s,l){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=l}static from(e,r,s){rt(e.mutations.length===s.length);let l=(function(){return f0})();const c=e.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,s[f].version);return new Ah(e,r,s,l)}}class A0{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class R0{constructor(e,r){this.count=e,this.unchangedNames=r}}var xt,We;function C0(i){switch(i){default:return Ie();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function qm(i){if(i===void 0)return ei("GRPC error has no .code"),Y.UNKNOWN;switch(i){case xt.OK:return Y.OK;case xt.CANCELLED:return Y.CANCELLED;case xt.UNKNOWN:return Y.UNKNOWN;case xt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case xt.INTERNAL:return Y.INTERNAL;case xt.UNAVAILABLE:return Y.UNAVAILABLE;case xt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case xt.NOT_FOUND:return Y.NOT_FOUND;case xt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case xt.ABORTED:return Y.ABORTED;case xt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case xt.DATA_LOSS:return Y.DATA_LOSS;default:return Ie()}}(We=xt||(xt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";function k0(){return new TextEncoder}const P0=new us([4294967295,4294967295],0);function Dp(i){const e=k0().encode(i),r=new pm;return r.update(e),new Uint8Array(r.digest())}function Lp(i){const e=new DataView(i.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new us([r,s],0),new us([l,c],0)]}class Rh{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new Go(`Invalid padding: ${r}`);if(s<0)throw new Go(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Go(`Invalid hash count: ${s}`);if(e.length===0&&r!==0)throw new Go(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=us.fromNumber(this.Ie)}Ee(e,r,s){let l=e.add(r.multiply(us.fromNumber(s)));return l.compare(P0)===1&&(l=new us([l.getBits(0),l.getBits(1)],0)),l.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Dp(e),[s,l]=Lp(r);for(let c=0;c<this.hashCount;c++){const f=this.Ee(s,l,c);if(!this.de(f))return!1}return!0}static create(e,r,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Rh(c,l,r);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.Ie===0)return;const r=Dp(e),[s,l]=Lp(r);for(let c=0;c<this.hashCount;c++){const f=this.Ee(s,l,c);this.Ae(f)}}Ae(e){const r=Math.floor(e/8),s=e%8;this.bitmap[r]|=1<<s}}class Go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class nu{constructor(e,r,s,l,c){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const l=new Map;return l.set(e,da.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new nu(Ve.min(),l,new wt(Ye),ti(),be())}}class da{constructor(e,r,s,l,c){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new da(s,r,be(),be(),be())}}class Ll{constructor(e,r,s,l){this.Re=e,this.removedTargetIds=r,this.key=s,this.Ve=l}}class Hm{constructor(e,r){this.targetId=e,this.me=r}}class Km{constructor(e,r,s=Jt.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=l}}class Op{constructor(){this.fe=0,this.ge=Fp(),this.pe=Jt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=be(),r=be(),s=be();return this.ge.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:r=r.add(l);break;case 1:s=s.add(l);break;default:Ie()}})),new da(this.pe,this.ye,e,r,s)}Ce(){this.we=!1,this.ge=Fp()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,rt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class x0{constructor(e){this.Le=e,this.Be=new Map,this.ke=ti(),this.qe=Mp(),this.Qe=new wt(Ye)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const s=this.Ge(r);switch(e.state){case 0:this.ze(r)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),s.De(e.resumeToken));break;default:Ie()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((s,l)=>{this.ze(l)&&r(l)}))}He(e){const r=e.targetId,s=e.me.count,l=this.Je(r);if(l){const c=l.target;if(nh(c))if(s===0){const f=new we(c.path);this.Ue(r,f,fn.newNoDocument(f,Ve.min()))}else rt(s===1);else{const f=this.Ye(r);if(f!==s){const m=this.Ze(e),y=m?this.Xe(m,e,f):1;if(y!==0){this.je(r);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,_)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=r;let f,m;try{f=hs(s).toUint8Array()}catch(y){if(y instanceof Sm)return no("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Rh(f,l,c)}catch(y){return no(y instanceof Go?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.Ie===0?null:m}Xe(e,r,s){return r.me.count===s-this.nt(e,r.targetId)?0:2}nt(e,r){const s=this.Le.getRemoteKeysForTarget(r);let l=0;return s.forEach((c=>{const f=this.Le.tt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.Ue(r,c,null),l++)})),l}rt(e){const r=new Map;this.Be.forEach(((c,f)=>{const m=this.Je(f);if(m){if(c.current&&nh(m.target)){const y=new we(m.target.path);this.ke.get(y)!==null||this.it(f,y)||this.Ue(f,y,fn.newNoDocument(y,e))}c.be&&(r.set(f,c.ve()),c.Ce())}}));let s=be();this.qe.forEach(((c,f)=>{let m=!0;f.forEachWhile((y=>{const _=this.Je(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.ke.forEach(((c,f)=>f.setReadTime(e)));const l=new nu(e,r,this.Qe,this.ke,s);return this.ke=ti(),this.qe=Mp(),this.Qe=new wt(Ye),l}$e(e,r){if(!this.ze(e))return;const s=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,s),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,s){if(!this.ze(e))return;const l=this.Ge(e);this.it(e,r)?l.Fe(r,1):l.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),s&&(this.ke=this.ke.insert(r,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Op,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Xt(Ye),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||pe("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Op),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Mp(){return new wt(we.comparator)}function Fp(){return new wt(we.comparator)}const N0={asc:"ASCENDING",desc:"DESCENDING"},V0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D0={and:"AND",or:"OR"};class L0{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function ih(i,e){return i.useProto3Json||Yl(e)?e:{value:e}}function Hl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qm(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function O0(i,e){return Hl(i,e.toTimestamp())}function Dr(i){return rt(!!i),Ve.fromTimestamp((function(r){const s=Fi(r);return new Ot(s.seconds,s.nanos)})(i))}function Ch(i,e){return sh(i,e).canonicalString()}function sh(i,e){const r=(function(l){return new pt(["projects",l.projectId,"databases",l.database])})(i).child("documents");return e===void 0?r:r.child(e)}function Gm(i){const e=pt.fromString(i);return rt(eg(e)),e}function oh(i,e){return Ch(i.databaseId,e.path)}function Bc(i,e){const r=Gm(e);if(r.get(1)!==i.databaseId.projectId)throw new ye(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new ye(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new we(Xm(r))}function Ym(i,e){return Ch(i.databaseId,e)}function M0(i){const e=Gm(i);return e.length===4?pt.emptyPath():Xm(e)}function ah(i){return new pt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Xm(i){return rt(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function jp(i,e,r){return{name:oh(i,e),fields:r.value.mapValue.fields}}function F0(i,e){let r;if("targetChange"in e){e.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ie()})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(_,A){return _.useProto3Json?(rt(A===void 0||typeof A=="string"),Jt.fromBase64String(A||"")):(rt(A===void 0||A instanceof Buffer||A instanceof Uint8Array),Jt.fromUint8Array(A||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(_){const A=_.code===void 0?Y.UNKNOWN:qm(_.code);return new ye(A,_.message||"")})(f);r=new Km(s,l,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=Bc(i,s.document.name),c=Dr(s.document.updateTime),f=s.document.createTime?Dr(s.document.createTime):Ve.min(),m=new tr({mapValue:{fields:s.document.fields}}),y=fn.newFoundDocument(l,c,f,m),_=s.targetIds||[],A=s.removedTargetIds||[];r=new Ll(_,A,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=Bc(i,s.document),c=s.readTime?Dr(s.readTime):Ve.min(),f=fn.newNoDocument(l,c),m=s.removedTargetIds||[];r=new Ll([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=Bc(i,s.document),c=s.removedTargetIds||[];r=new Ll([],c,l,null)}else{if(!("filter"in e))return Ie();{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,f=new R0(l,c),m=s.targetId;r=new Hm(m,f)}}return r}function j0(i,e){let r;if(e instanceof fa)r={update:jp(i,e.key,e.value)};else if(e instanceof Wm)r={delete:oh(i,e.key)};else if(e instanceof ds)r={update:jp(i,e.key,e.data),updateMask:K0(e.fieldMask)};else{if(!(e instanceof S0))return Ie();r={verify:oh(i,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((s=>(function(c,f){const m=f.transform;if(m instanceof Wl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof aa)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof la)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ql)return{fieldPath:f.field.canonicalString(),increment:m.Pe};throw Ie()})(0,s)))),e.precondition.isNone||(r.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:O0(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ie()})(i,e.precondition)),r}function b0(i,e){return i&&i.length>0?(rt(e!==void 0),i.map((r=>(function(l,c){let f=l.updateTime?Dr(l.updateTime):Dr(c);return f.isEqual(Ve.min())&&(f=Dr(c)),new w0(f,l.transformResults||[])})(r,e)))):[]}function U0(i,e){return{documents:[Ym(i,e.path)]}}function B0(i,e){const r={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=Ym(i,l);const c=(function(_){if(_.length!==0)return Zm(Or.create(_,"and"))})(e.filters);c&&(r.structuredQuery.where=c);const f=(function(_){if(_.length!==0)return _.map((A=>(function(j){return{field:Xs(j.field),direction:W0(j.dir)}})(A)))})(e.orderBy);f&&(r.structuredQuery.orderBy=f);const m=ih(i,e.limit);return m!==null&&(r.structuredQuery.limit=m),e.startAt&&(r.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{_t:r,parent:l}}function z0(i){let e=M0(i.parent);const r=i.structuredQuery,s=r.from?r.from.length:0;let l=null;if(s>0){rt(s===1);const A=r.from[0];A.allDescendants?l=A.collectionId:e=e.child(A.collectionId)}let c=[];r.where&&(c=(function(P){const j=Jm(P);return j instanceof Or&&Cm(j)?j.getFilters():[j]})(r.where));let f=[];r.orderBy&&(f=(function(P){return P.map((j=>(function(J){return new $l(Js(J.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(J.direction))})(j)))})(r.orderBy));let m=null;r.limit&&(m=(function(P){let j;return j=typeof P=="object"?P.value:P,Yl(j)?null:j})(r.limit));let y=null;r.startAt&&(y=(function(P){const j=!!P.before,z=P.values||[];return new zl(z,j)})(r.startAt));let _=null;return r.endAt&&(_=(function(P){const j=!P.before,z=P.values||[];return new zl(z,j)})(r.endAt)),o0(e,l,f,c,m,"F",y,_)}function $0(i,e){const r=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Jm(i){return i.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=Js(r.unaryFilter.field);return Lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Js(r.unaryFilter.field);return Lt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Js(r.unaryFilter.field);return Lt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Js(r.unaryFilter.field);return Lt.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}})(i):i.fieldFilter!==void 0?(function(r){return Lt.create(Js(r.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}})(r.fieldFilter.op),r.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(r){return Or.create(r.compositeFilter.filters.map((s=>Jm(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ie()}})(r.compositeFilter.op))})(i):Ie()}function W0(i){return N0[i]}function q0(i){return V0[i]}function H0(i){return D0[i]}function Xs(i){return{fieldPath:i.canonicalString()}}function Js(i){return Yt.fromServerFormat(i.fieldPath)}function Zm(i){return i instanceof Lt?(function(r){if(r.op==="=="){if(Ip(r.value))return{unaryFilter:{field:Xs(r.field),op:"IS_NAN"}};if(Sp(r.value))return{unaryFilter:{field:Xs(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Ip(r.value))return{unaryFilter:{field:Xs(r.field),op:"IS_NOT_NAN"}};if(Sp(r.value))return{unaryFilter:{field:Xs(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xs(r.field),op:q0(r.op),value:r.value}}})(i):i instanceof Or?(function(r){const s=r.getFilters().map((l=>Zm(l)));return s.length===1?s[0]:{compositeFilter:{op:H0(r.op),filters:s}}})(i):Ie()}function K0(i){const e=[];return i.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function eg(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Ni{constructor(e,r,s,l,c=Ve.min(),f=Ve.min(),m=Jt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Q0{constructor(e){this.ct=e}}function G0(i){const e=z0({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?rh(e,e.limit,"L"):e}class Y0{constructor(){this.un=new X0}addToCollectionParentIndex(e,r){return this.un.add(r),G.resolve()}getCollectionParents(e,r){return G.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return G.resolve()}deleteFieldIndex(e,r){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,r){return G.resolve()}getDocumentsMatchingTarget(e,r){return G.resolve(null)}getIndexType(e,r){return G.resolve(0)}getFieldIndexes(e,r){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,r){return G.resolve(Mi.min())}getMinOffsetFromCollectionGroup(e,r){return G.resolve(Mi.min())}updateCollectionGroup(e,r,s){return G.resolve()}updateIndexEntries(e,r){return G.resolve()}}class X0{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),l=this.index[r]||new Xt(pt.comparator),c=!l.has(s);return this.index[r]=l.add(s),c}has(e){const r=e.lastSegment(),s=e.popLast(),l=this.index[r];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Xt(pt.comparator)).toArray()}}class oo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new oo(0)}static kn(){return new oo(-1)}}class J0{constructor(){this.changes=new fo((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return s!==void 0?G.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Z0{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class ew{constructor(e,r,s,l){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,r)))).next((l=>(s!==null&&Zo(s.mutation,l,vr.empty(),Ot.now()),l)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((s=>this.getLocalViewOfDocuments(e,s,be()).next((()=>s))))}getLocalViewOfDocuments(e,r,s=be()){const l=ls();return this.populateOverlays(e,l,r).next((()=>this.computeViews(e,r,l,s).next((c=>{let f=Qo();return c.forEach(((m,y)=>{f=f.insert(m,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,r){const s=ls();return this.populateOverlays(e,s,r).next((()=>this.computeViews(e,r,s,be())))}populateOverlays(e,r,s){const l=[];return s.forEach((c=>{r.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((f,m)=>{r.set(f,m)}))}))}computeViews(e,r,s,l){let c=ti();const f=Jo(),m=(function(){return Jo()})();return r.forEach(((y,_)=>{const A=s.get(_.key);l.has(_.key)&&(A===void 0||A.mutation instanceof ds)?c=c.insert(_.key,_):A!==void 0?(f.set(_.key,A.mutation.getFieldMask()),Zo(A.mutation,_,A.mutation.getFieldMask(),Ot.now())):f.set(_.key,vr.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((_,A)=>f.set(_,A))),r.forEach(((_,A)=>{var P;return m.set(_,new Z0(A,(P=f.get(_))!==null&&P!==void 0?P:null))})),m)))}recalculateAndSaveOverlays(e,r){const s=Jo();let l=new wt(((f,m)=>f-m)),c=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((f=>{for(const m of f)m.keys().forEach((y=>{const _=r.get(y);if(_===null)return;let A=s.get(y)||vr.empty();A=m.applyToLocalView(_,A),s.set(y,A);const P=(l.get(m.batchId)||be()).add(y);l=l.insert(m.batchId,P)}))})).next((()=>{const f=[],m=l.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),_=y.key,A=y.value,P=Mm();A.forEach((j=>{if(!c.has(j)){const z=zm(r.get(j),s.get(j));z!==null&&P.set(j,z),c=c.add(j)}})),f.push(this.documentOverlayCache.saveOverlays(e,_,P))}return G.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,r,s,l){return(function(f){return we.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):a0(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,l):this.getDocumentsMatchingCollectionQuery(e,r,s,l)}getNextDocuments(e,r,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,l-c.size):G.resolve(ls());let m=-1,y=c;return f.next((_=>G.forEach(_,((A,P)=>(m<P.largestBatchId&&(m=P.largestBatchId),c.get(A)?G.resolve():this.remoteDocumentCache.getEntry(e,A).next((j=>{y=y.insert(A,j)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,y,_,be()))).next((A=>({batchId:m,changes:Om(A)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new we(r)).next((s=>{let l=Qo();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,r,s,l){const c=r.collectionGroup;let f=Qo();return this.indexManager.getCollectionParents(e,c).next((m=>G.forEach(m,(y=>{const _=(function(P,j){return new Xl(j,null,P.explicitOrderBy.slice(),P.filters.slice(),P.limit,P.limitType,P.startAt,P.endAt)})(r,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,s,l).next((A=>{A.forEach(((P,j)=>{f=f.insert(P,j)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,r,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,c,l)))).next((f=>{c.forEach(((y,_)=>{const A=_.getKey();f.get(A)===null&&(f=f.insert(A,fn.newInvalidDocument(A)))}));let m=Qo();return f.forEach(((y,_)=>{const A=c.get(y);A!==void 0&&Zo(A.mutation,_,vr.empty(),Ot.now()),Zl(r,_)&&(m=m.insert(y,_))})),m}))}}class tw{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return G.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(l){return{id:l.id,version:l.version,createTime:Dr(l.createTime)}})(r)),G.resolve()}getNamedQuery(e,r){return G.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(l){return{name:l.name,query:G0(l.bundledQuery),readTime:Dr(l.readTime)}})(r)),G.resolve()}}class nw{constructor(){this.overlays=new wt(we.comparator),this.Ir=new Map}getOverlay(e,r){return G.resolve(this.overlays.get(r))}getOverlays(e,r){const s=ls();return G.forEach(r,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,r,s){return s.forEach(((l,c)=>{this.ht(e,r,c)})),G.resolve()}removeOverlaysForBatchId(e,r,s){const l=this.Ir.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.Ir.delete(s)),G.resolve()}getOverlaysForCollection(e,r,s){const l=ls(),c=r.length+1,f=new we(r.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,_=y.getKey();if(!r.isPrefixOf(_.path))break;_.path.length===c&&y.largestBatchId>s&&l.set(y.getKey(),y)}return G.resolve(l)}getOverlaysForCollectionGroup(e,r,s,l){let c=new wt(((_,A)=>_-A));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===r&&_.largestBatchId>s){let A=c.get(_.largestBatchId);A===null&&(A=ls(),c=c.insert(_.largestBatchId,A)),A.set(_.getKey(),_)}}const m=ls(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((_,A)=>m.set(_,A))),!(m.size()>=l)););return G.resolve(m)}ht(e,r,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.Ir.get(l.largestBatchId).delete(s.key);this.Ir.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new A0(r,s));let c=this.Ir.get(r);c===void 0&&(c=be(),this.Ir.set(r,c)),this.Ir.set(r,c.add(s.key))}}class rw{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,G.resolve()}}class kh{constructor(){this.Tr=new Xt(zt.Er),this.dr=new Xt(zt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const s=new zt(e,r);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,r){e.forEach((s=>this.addReference(s,r)))}removeReference(e,r){this.Vr(new zt(e,r))}mr(e,r){e.forEach((s=>this.removeReference(s,r)))}gr(e){const r=new we(new pt([])),s=new zt(r,e),l=new zt(r,e+1),c=[];return this.dr.forEachInRange([s,l],(f=>{this.Vr(f),c.push(f.key)})),c}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new we(new pt([])),s=new zt(r,e),l=new zt(r,e+1);let c=be();return this.dr.forEachInRange([s,l],(f=>{c=c.add(f.key)})),c}containsKey(e){const r=new zt(e,0),s=this.Tr.firstAfterOrEqual(r);return s!==null&&e.isEqual(s.key)}}class zt{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return we.comparator(e.key,r.key)||Ye(e.wr,r.wr)}static Ar(e,r){return Ye(e.wr,r.wr)||we.comparator(e.key,r.key)}}class iw{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Xt(zt.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,s,l){const c=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new I0(c,r,s,l);this.mutationQueue.push(f);for(const m of l)this.br=this.br.add(new zt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return G.resolve(f)}lookupMutationBatch(e,r){return G.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const s=r+1,l=this.vr(s),c=l<0?0:l;return G.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new zt(r,0),l=new zt(r,Number.POSITIVE_INFINITY),c=[];return this.br.forEachInRange([s,l],(f=>{const m=this.Dr(f.wr);c.push(m)})),G.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new Xt(Ye);return r.forEach((l=>{const c=new zt(l,0),f=new zt(l,Number.POSITIVE_INFINITY);this.br.forEachInRange([c,f],(m=>{s=s.add(m.wr)}))})),G.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,l=s.length+1;let c=s;we.isDocumentKey(c)||(c=c.child(""));const f=new zt(new we(c),0);let m=new Xt(Ye);return this.br.forEachWhile((y=>{const _=y.key.path;return!!s.isPrefixOf(_)&&(_.length===l&&(m=m.add(y.wr)),!0)}),f),G.resolve(this.Cr(m))}Cr(e){const r=[];return e.forEach((s=>{const l=this.Dr(s);l!==null&&r.push(l)})),r}removeMutationBatch(e,r){rt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return G.forEach(r.mutations,(l=>{const c=new zt(l.key,r.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.br=s}))}On(e){}containsKey(e,r){const s=new zt(r,0),l=this.br.firstAfterOrEqual(s);return G.resolve(r.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class sw{constructor(e){this.Mr=e,this.docs=(function(){return new wt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,l=this.docs.get(s),c=l?l.size:0,f=this.Mr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return G.resolve(s?s.document.mutableCopy():fn.newInvalidDocument(r))}getEntries(e,r){let s=ti();return r.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():fn.newInvalidDocument(l))})),G.resolve(s)}getDocumentsMatchingQuery(e,r,s,l){let c=ti();const f=r.path,m=new we(f.child("")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:_,value:{document:A}}=y.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||B_(U_(A),s)<=0||(l.has(A.key)||Zl(r,A))&&(c=c.insert(A.key,A.mutableCopy()))}return G.resolve(c)}getAllFromCollectionGroup(e,r,s,l){Ie()}Or(e,r){return G.forEach(this.docs,(s=>r(s)))}newChangeBuffer(e){return new ow(this)}getSize(e){return G.resolve(this.size)}}class ow extends J0{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?r.push(this.cr.addEntry(e,l)):this.cr.removeEntry(s)})),G.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}class aw{constructor(e){this.persistence=e,this.Nr=new fo((r=>Th(r)),Sh),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.Lr=0,this.Br=new kh,this.targetCount=0,this.kr=oo.Bn()}forEachTarget(e,r){return this.Nr.forEach(((s,l)=>r(l))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Lr&&(this.Lr=r),G.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new oo(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,G.resolve()}updateTargetData(e,r){return this.Kn(r),G.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,r,s){let l=0;const c=[];return this.Nr.forEach(((f,m)=>{m.sequenceNumber<=r&&s.get(m.targetId)===null&&(this.Nr.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),l++)})),G.waitFor(c).next((()=>l))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,r){const s=this.Nr.get(r)||null;return G.resolve(s)}addMatchingKeys(e,r,s){return this.Br.Rr(r,s),G.resolve()}removeMatchingKeys(e,r,s){this.Br.mr(r,s);const l=this.persistence.referenceDelegate,c=[];return l&&r.forEach((f=>{c.push(l.markPotentiallyOrphaned(e,f))})),G.waitFor(c)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),G.resolve()}getMatchingKeysForTargetId(e,r){const s=this.Br.yr(r);return G.resolve(s)}containsKey(e,r){return G.resolve(this.Br.containsKey(r))}}class lw{constructor(e,r){this.qr={},this.overlays={},this.Qr=new vh(0),this.Kr=!1,this.Kr=!0,this.$r=new rw,this.referenceDelegate=e(this),this.Ur=new aw(this),this.indexManager=new Y0,this.remoteDocumentCache=(function(l){return new sw(l)})((s=>this.referenceDelegate.Wr(s))),this.serializer=new Q0(r),this.Gr=new tw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new nw,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.qr[e.toKey()];return s||(s=new iw(r,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,s){pe("MemoryPersistence","Starting transaction:",e);const l=new uw(this.Qr.next());return this.referenceDelegate.zr(),s(l).next((c=>this.referenceDelegate.jr(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Hr(e,r){return G.or(Object.values(this.qr).map((s=>()=>s.containsKey(e,r))))}}class uw extends $_{constructor(e){super(),this.currentSequenceNumber=e}}class Ph{constructor(e){this.persistence=e,this.Jr=new kh,this.Yr=null}static Zr(e){return new Ph(e)}get Xr(){if(this.Yr)return this.Yr;throw Ie()}addReference(e,r,s){return this.Jr.addReference(s,r),this.Xr.delete(s.toString()),G.resolve()}removeReference(e,r,s){return this.Jr.removeReference(s,r),this.Xr.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),G.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((l=>this.Xr.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next((l=>{l.forEach((c=>this.Xr.add(c.toString())))})).next((()=>s.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,(s=>{const l=we.fromPath(s);return this.ei(e,l).next((c=>{c||r.removeEntry(l,Ve.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((s=>{s?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return G.or([()=>G.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class xh{constructor(e,r,s,l){this.targetId=e,this.fromCache=r,this.$i=s,this.Ui=l}static Wi(e,r){let s=be(),l=be();for(const c of r.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new xh(e,r.fromCache,s,l)}}class cw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class hw{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return fv()?8:W_(cv())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,s,l){const c={result:null};return this.Yi(e,r).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.Zi(e,r,l,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new cw;return this.Xi(e,r,f).next((m=>{if(c.result=m,this.zi)return this.es(e,r,f,m.size)}))})).next((()=>c.result))}es(e,r,s,l){return s.documentReadCount<this.ji?(Ho()<=Ke.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Ys(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Ho()<=Ke.DEBUG&&pe("QueryEngine","Query:",Ys(r),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.Hi*l?(Ho()<=Ke.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Ys(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vr(r))):G.resolve())}Yi(e,r){if(kp(r))return G.resolve(null);let s=Vr(r);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(r.limit!==null&&l===1&&(r=rh(r,null,"F"),s=Vr(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const f=be(...c);return this.Ji.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((y=>{const _=this.ts(r,m);return this.ns(r,_,f,y.readTime)?this.Yi(e,rh(r,null,"F")):this.rs(e,_,r,y)}))))})))))}Zi(e,r,s,l){return kp(r)||l.isEqual(Ve.min())?G.resolve(null):this.Ji.getDocuments(e,s).next((c=>{const f=this.ts(r,c);return this.ns(r,f,s,l)?G.resolve(null):(Ho()<=Ke.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ys(r)),this.rs(e,f,r,b_(l,-1)).next((m=>m)))}))}ts(e,r){let s=new Xt(Dm(e));return r.forEach(((l,c)=>{Zl(e,c)&&(s=s.add(c))})),s}ns(e,r,s,l){if(e.limit===null)return!1;if(s.size!==r.size)return!0;const c=e.limitType==="F"?r.last():r.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Xi(e,r,s){return Ho()<=Ke.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Ys(r)),this.Ji.getDocumentsMatchingQuery(e,r,Mi.min(),s)}rs(e,r,s,l){return this.Ji.getDocumentsMatchingQuery(e,s,l).next((c=>(r.forEach((f=>{c=c.insert(f.key,f)})),c)))}}class fw{constructor(e,r,s,l){this.persistence=e,this.ss=r,this.serializer=l,this.os=new wt(Ye),this._s=new fo((c=>Th(c)),Sh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ew(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function dw(i,e,r,s){return new fw(i,e,r,s)}async function tg(i,e){const r=De(i);return await r.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return r.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,r.ls(e),r.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],m=[];let y=be();for(const _ of l){f.push(_.batchId);for(const A of _.mutations)y=y.add(A.key)}for(const _ of c){m.push(_.batchId);for(const A of _.mutations)y=y.add(A.key)}return r.localDocuments.getDocuments(s,y).next((_=>({hs:_,removedBatchIds:f,addedBatchIds:m})))}))}))}function pw(i,e){const r=De(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=r.cs.newChangeBuffer({trackRemovals:!0});return(function(m,y,_,A){const P=_.batch,j=P.keys();let z=G.resolve();return j.forEach((J=>{z=z.next((()=>A.getEntry(y,J))).next((te=>{const q=_.docVersions.get(J);rt(q!==null),te.version.compareTo(q)<0&&(P.applyToRemoteDocument(te,_),te.isValidDocument()&&(te.setReadTime(_.commitVersion),A.addEntry(te)))}))})),z.next((()=>m.mutationQueue.removeMutationBatch(y,P)))})(r,s,e,c).next((()=>c.apply(s))).next((()=>r.mutationQueue.performConsistencyCheck(s))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let y=be();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(y=y.add(m.batch.mutations[_].key));return y})(e)))).next((()=>r.localDocuments.getDocuments(s,l)))}))}function ng(i){const e=De(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function mw(i,e){const r=De(i),s=e.snapshotVersion;let l=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=r.cs.newChangeBuffer({trackRemovals:!0});l=r.os;const m=[];e.targetChanges.forEach(((A,P)=>{const j=l.get(P);if(!j)return;m.push(r.Ur.removeMatchingKeys(c,A.removedDocuments,P).next((()=>r.Ur.addMatchingKeys(c,A.addedDocuments,P))));let z=j.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(P)!==null?z=z.withResumeToken(Jt.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):A.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(A.resumeToken,s)),l=l.insert(P,z),(function(te,q,oe){return te.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=3e8?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0})(j,z,A)&&m.push(r.Ur.updateTargetData(c,z))}));let y=ti(),_=be();if(e.documentUpdates.forEach((A=>{e.resolvedLimboDocuments.has(A)&&m.push(r.persistence.referenceDelegate.updateLimboDocument(c,A))})),m.push(gw(c,f,e.documentUpdates).next((A=>{y=A.Ps,_=A.Is}))),!s.isEqual(Ve.min())){const A=r.Ur.getLastRemoteSnapshotVersion(c).next((P=>r.Ur.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(A)}return G.waitFor(m).next((()=>f.apply(c))).next((()=>r.localDocuments.getLocalViewOfDocuments(c,y,_))).next((()=>y))})).then((c=>(r.os=l,c)))}function gw(i,e,r){let s=be(),l=be();return r.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let f=ti();return r.forEach(((m,y)=>{const _=c.get(m);y.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(m)),y.isNoDocument()&&y.version.isEqual(Ve.min())?(e.removeEntry(m,y.readTime),f=f.insert(m,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(y),f=f.insert(m,y)):pe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",y.version)})),{Ps:f,Is:l}}))}function yw(i,e){const r=De(i);return r.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function vw(i,e){const r=De(i);return r.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return r.Ur.getTargetData(s,e).next((c=>c?(l=c,G.resolve(l)):r.Ur.allocateTargetId(s).next((f=>(l=new Ni(e,f,"TargetPurposeListen",s.currentSequenceNumber),r.Ur.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=r.os.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(r.os=r.os.insert(s.targetId,s),r._s.set(e,s.targetId)),s}))}async function lh(i,e,r){const s=De(i),l=s.os.get(e),c=r?"readwrite":"readwrite-primary";try{r||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!ha(f))throw f;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.os=s.os.remove(e),s._s.delete(l.target)}function bp(i,e,r){const s=De(i);let l=Ve.min(),c=be();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,_,A){const P=De(y),j=P._s.get(A);return j!==void 0?G.resolve(P.os.get(j)):P.Ur.getTargetData(_,A)})(s,f,Vr(e)).next((m=>{if(m)return l=m.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(f,m.targetId).next((y=>{c=y}))})).next((()=>s.ss.getDocumentsMatchingQuery(f,e,r?l:Ve.min(),r?c:be()))).next((m=>(_w(s,u0(e),m),{documents:m,Ts:c})))))}function _w(i,e,r){let s=i.us.get(e)||Ve.min();r.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.us.set(e,s)}class Up{constructor(){this.activeTargetIds=m0()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ww{constructor(){this.so=new Up,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,s){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Up,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ew{_o(e){}shutdown(){}}class Bp{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Pl=null;function zc(){return Pl===null?Pl=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pl++,"0x"+Pl.toString(16)}const Tw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sw{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const cn="WebChannelConnection";class Iw extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",l=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+r.host,this.vo=`projects/${l}/databases/${c}`,this.Co=this.databaseId.database==="(default)"?`project_id=${l}`:`project_id=${l}&database_id=${c}`}get Fo(){return!1}Mo(r,s,l,c,f){const m=zc(),y=this.xo(r,s.toUriEncodedString());pe("RestConnection",`Sending RPC '${r}' ${m}:`,y,l);const _={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(_,c,f),this.No(r,y,_,l).then((A=>(pe("RestConnection",`Received RPC '${r}' ${m}: `,A),A)),(A=>{throw no("RestConnection",`RPC '${r}' ${m} failed with error: `,A,"url: ",y,"request:",l),A}))}Lo(r,s,l,c,f,m){return this.Mo(r,s,l,c,f)}Oo(r,s,l){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+co})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((c,f)=>r[f]=c)),l&&l.headers.forEach(((c,f)=>r[f]=c))}xo(r,s){const l=Tw[r];return`${this.Do}/v1/${s}:${l}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,s,l){const c=zc();return new Promise(((f,m)=>{const y=new mm;y.setWithCredentials(!0),y.listenOnce(gm.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Nl.NO_ERROR:const A=y.getResponseJson();pe(cn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(A)),f(A);break;case Nl.TIMEOUT:pe(cn,`RPC '${e}' ${c} timed out`),m(new ye(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Nl.HTTP_ERROR:const P=y.getStatus();if(pe(cn,`RPC '${e}' ${c} failed with status:`,P,"response text:",y.getResponseText()),P>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const z=j?.error;if(z&&z.status&&z.message){const J=(function(q){const oe=q.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(oe)>=0?oe:Y.UNKNOWN})(z.status);m(new ye(J,z.message))}else m(new ye(Y.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new ye(Y.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{pe(cn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(l);pe(cn,`RPC '${e}' ${c} sending request:`,l),y.send(r,"POST",_,s,15)}))}Bo(e,r,s){const l=zc(),c=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=_m(),m=vm(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Oo(y.initMessageHeaders,r,s),y.encodeInitMessageHeaders=!0;const A=c.join("");pe(cn,`Creating RPC '${e}' stream ${l}: ${A}`,y);const P=f.createWebChannel(A,y);let j=!1,z=!1;const J=new Sw({Io:q=>{z?pe(cn,`Not sending because RPC '${e}' stream ${l} is closed:`,q):(j||(pe(cn,`Opening RPC '${e}' stream ${l} transport.`),P.open(),j=!0),pe(cn,`RPC '${e}' stream ${l} sending:`,q),P.send(q))},To:()=>P.close()}),te=(q,oe,ke)=>{q.listen(oe,(ae=>{try{ke(ae)}catch(Ae){setTimeout((()=>{throw Ae}),0)}}))};return te(P,Ko.EventType.OPEN,(()=>{z||(pe(cn,`RPC '${e}' stream ${l} transport opened.`),J.yo())})),te(P,Ko.EventType.CLOSE,(()=>{z||(z=!0,pe(cn,`RPC '${e}' stream ${l} transport closed`),J.So())})),te(P,Ko.EventType.ERROR,(q=>{z||(z=!0,no(cn,`RPC '${e}' stream ${l} transport errored:`,q),J.So(new ye(Y.UNAVAILABLE,"The operation could not be completed")))})),te(P,Ko.EventType.MESSAGE,(q=>{var oe;if(!z){const ke=q.data[0];rt(!!ke);const ae=ke,Ae=ae.error||((oe=ae[0])===null||oe===void 0?void 0:oe.error);if(Ae){pe(cn,`RPC '${e}' stream ${l} received error:`,Ae);const Xe=Ae.status;let Pe=(function(E){const k=xt[E];if(k!==void 0)return qm(k)})(Xe),C=Ae.message;Pe===void 0&&(Pe=Y.INTERNAL,C="Unknown error status: "+Xe+" with message "+Ae.message),z=!0,J.So(new ye(Pe,C)),P.close()}else pe(cn,`RPC '${e}' stream ${l} received:`,ke),J.bo(ke)}})),te(m,ym.STAT_EVENT,(q=>{q.stat===Jc.PROXY?pe(cn,`RPC '${e}' stream ${l} detected buffering proxy`):q.stat===Jc.NOPROXY&&pe(cn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{J.wo()}),0),J}}function $c(){return typeof document<"u"?document:null}function ru(i){return new L0(i,!0)}class rg{constructor(e,r,s=1e3,l=1.5,c=6e4){this.ui=e,this.timerId=r,this.ko=s,this.qo=l,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),l=Math.max(0,r-s);l>0&&pe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,l,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class ig{constructor(e,r,s,l,c,f,m,y){this.ui=e,this.Ho=s,this.Jo=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new rg(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Y.RESOURCE_EXHAUSTED?(ei(r.toString()),ei("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.Yo===r&&this.P_(s,l)}),(s=>{e((()=>{const l=new ye(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(l)}))}))}P_(e,r){const s=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{s((()=>this.listener.Eo()))})),this.stream.Ro((()=>{s((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((l=>{s((()=>this.I_(l)))})),this.stream.onMessage((l=>{s((()=>++this.e_==1?this.E_(l):this.onNext(l)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Aw extends ig{constructor(e,r,s,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,l,f),this.serializer=c}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=F0(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ve.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ve.min():f.readTime?Dr(f.readTime):Ve.min()})(e);return this.listener.d_(r,s)}A_(e){const r={};r.database=ah(this.serializer),r.addTarget=(function(c,f){let m;const y=f.target;if(m=nh(y)?{documents:U0(c,y)}:{query:B0(c,y)._t},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=Qm(c,f.resumeToken);const _=ih(c,f.expectedCount);_!==null&&(m.expectedCount=_)}else if(f.snapshotVersion.compareTo(Ve.min())>0){m.readTime=Hl(c,f.snapshotVersion.toTimestamp());const _=ih(c,f.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const s=$0(this.serializer,e);s&&(r.labels=s),this.a_(r)}R_(e){const r={};r.database=ah(this.serializer),r.removeTarget=e,this.a_(r)}}class Rw extends ig{constructor(e,r,s,l,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,l,f),this.serializer=c}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return rt(!!e.streamToken),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=b0(e.writeResults,e.commitTime),s=Dr(e.commitTime);return this.listener.g_(s,r)}p_(){const e={};e.database=ah(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((s=>j0(this.serializer,s)))};this.a_(r)}}class Cw extends class{}{constructor(e,r,s,l){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=l,this.y_=!1}w_(){if(this.y_)throw new ye(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,s,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Mo(e,sh(r,s),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(Y.UNKNOWN,c.toString())}))}Lo(e,r,s,l,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Lo(e,sh(r,s),l,f,m,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ye(Y.UNKNOWN,f.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class kw{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ei(r),this.D_=!1):pe("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class Pw{constructor(e,r,s,l,c){this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=c,this.k_._o((f=>{s.enqueueAndForget((async()=>{ps(this)&&(pe("RemoteStore","Restarting streams for network reachability change."),await(async function(y){const _=De(y);_.L_.add(4),await pa(_),_.q_.set("Unknown"),_.L_.delete(4),await iu(_)})(this))}))})),this.q_=new kw(s,l)}}async function iu(i){if(ps(i))for(const e of i.B_)await e(!0)}async function pa(i){for(const e of i.B_)await e(!1)}function sg(i,e){const r=De(i);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Lh(r)?Dh(r):po(r).r_()&&Vh(r,e))}function Nh(i,e){const r=De(i),s=po(r);r.N_.delete(e),s.r_()&&og(r,e),r.N_.size===0&&(s.r_()?s.o_():ps(r)&&r.q_.set("Unknown"))}function Vh(i,e){if(i.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const r=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}po(i).A_(e)}function og(i,e){i.Q_.xe(e),po(i).R_(e)}function Dh(i){i.Q_=new x0({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>i.N_.get(e)||null,tt:()=>i.datastore.serializer.databaseId}),po(i).start(),i.q_.v_()}function Lh(i){return ps(i)&&!po(i).n_()&&i.N_.size>0}function ps(i){return De(i).L_.size===0}function ag(i){i.Q_=void 0}async function xw(i){i.q_.set("Online")}async function Nw(i){i.N_.forEach(((e,r)=>{Vh(i,e)}))}async function Vw(i,e){ag(i),Lh(i)?(i.q_.M_(e),Dh(i)):i.q_.set("Unknown")}async function Dw(i,e,r){if(i.q_.set("Online"),e instanceof Km&&e.state===2&&e.cause)try{await(async function(l,c){const f=c.cause;for(const m of c.targetIds)l.N_.has(m)&&(await l.remoteSyncer.rejectListen(m,f),l.N_.delete(m),l.Q_.removeTarget(m))})(i,e)}catch(s){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Kl(i,s)}else if(e instanceof Ll?i.Q_.Ke(e):e instanceof Hm?i.Q_.He(e):i.Q_.We(e),!r.isEqual(Ve.min()))try{const s=await ng(i.localStore);r.compareTo(s)>=0&&await(function(c,f){const m=c.Q_.rt(f);return m.targetChanges.forEach(((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const A=c.N_.get(_);A&&c.N_.set(_,A.withResumeToken(y.resumeToken,f))}})),m.targetMismatches.forEach(((y,_)=>{const A=c.N_.get(y);if(!A)return;c.N_.set(y,A.withResumeToken(Jt.EMPTY_BYTE_STRING,A.snapshotVersion)),og(c,y);const P=new Ni(A.target,y,_,A.sequenceNumber);Vh(c,P)})),c.remoteSyncer.applyRemoteEvent(m)})(i,r)}catch(s){pe("RemoteStore","Failed to raise snapshot:",s),await Kl(i,s)}}async function Kl(i,e,r){if(!ha(e))throw e;i.L_.add(1),await pa(i),i.q_.set("Offline"),r||(r=()=>ng(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{pe("RemoteStore","Retrying IndexedDB access"),await r(),i.L_.delete(1),await iu(i)}))}function lg(i,e){return e().catch((r=>Kl(i,r,e)))}async function su(i){const e=De(i),r=ji(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Lw(e);)try{const l=await yw(e.localStore,s);if(l===null){e.O_.length===0&&r.o_();break}s=l.batchId,Ow(e,l)}catch(l){await Kl(e,l)}ug(e)&&cg(e)}function Lw(i){return ps(i)&&i.O_.length<10}function Ow(i,e){i.O_.push(e);const r=ji(i);r.r_()&&r.V_&&r.m_(e.mutations)}function ug(i){return ps(i)&&!ji(i).n_()&&i.O_.length>0}function cg(i){ji(i).start()}async function Mw(i){ji(i).p_()}async function Fw(i){const e=ji(i);for(const r of i.O_)e.m_(r.mutations)}async function jw(i,e,r){const s=i.O_.shift(),l=Ah.from(s,e,r);await lg(i,(()=>i.remoteSyncer.applySuccessfulWrite(l))),await su(i)}async function bw(i,e){e&&ji(i).V_&&await(async function(s,l){if((function(f){return C0(f)&&f!==Y.ABORTED})(l.code)){const c=s.O_.shift();ji(s).s_(),await lg(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await su(s)}})(i,e),ug(i)&&cg(i)}async function zp(i,e){const r=De(i);r.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const s=ps(r);r.L_.add(3),await pa(r),s&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await iu(r)}async function Uw(i,e){const r=De(i);e?(r.L_.delete(2),await iu(r)):e||(r.L_.add(2),await pa(r),r.q_.set("Unknown"))}function po(i){return i.K_||(i.K_=(function(r,s,l){const c=De(r);return c.w_(),new Aw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(i.datastore,i.asyncQueue,{Eo:xw.bind(null,i),Ro:Nw.bind(null,i),mo:Vw.bind(null,i),d_:Dw.bind(null,i)}),i.B_.push((async e=>{e?(i.K_.s_(),Lh(i)?Dh(i):i.q_.set("Unknown")):(await i.K_.stop(),ag(i))}))),i.K_}function ji(i){return i.U_||(i.U_=(function(r,s,l){const c=De(r);return c.w_(),new Rw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(i.datastore,i.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Mw.bind(null,i),mo:bw.bind(null,i),f_:Fw.bind(null,i),g_:jw.bind(null,i)}),i.B_.push((async e=>{e?(i.U_.s_(),await su(i)):(await i.U_.stop(),i.O_.length>0&&(pe("RemoteStore",`Stopping write stream with ${i.O_.length} pending writes`),i.O_=[]))}))),i.U_}class Oh{constructor(e,r,s,l,c){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,l,c){const f=Date.now()+s,m=new Oh(e,r,f,l,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mh(i,e){if(ei("AsyncQueue",`${e}: ${i}`),ha(i))return new ye(Y.UNAVAILABLE,`${e}: ${i}`);throw i}class to{constructor(e){this.comparator=e?(r,s)=>e(r,s)||we.comparator(r.key,s.key):(r,s)=>we.comparator(r.key,s.key),this.keyedMap=Qo(),this.sortedSet=new wt(this.comparator)}static emptySet(e){return new to(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,s)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof to)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const l=r.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const s=new to;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}class $p{constructor(){this.W_=new wt(we.comparator)}track(e){const r=e.doc.key,s=this.W_.get(r);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(r,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(r,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(r):e.type===1&&s.type===2?this.W_=this.W_.insert(r,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Ie():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,s)=>{e.push(s)})),e}}class ao{constructor(e,r,s,l,c,f,m,y,_){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(e,r,s,l,c){const f=[];return r.forEach((m=>{f.push({type:0,doc:m})})),new ao(e,r,to.emptySet(r),f,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let l=0;l<r.length;l++)if(r[l].type!==s[l].type||!r[l].doc.isEqual(s[l].doc))return!1;return!0}}class Bw{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class zw{constructor(){this.queries=Wp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,s){const l=De(r),c=l.queries;l.queries=Wp(),c.forEach(((f,m)=>{for(const y of m.j_)y.onError(s)}))})(this,new ye(Y.ABORTED,"Firestore shutting down"))}}function Wp(){return new fo((i=>Vm(i)),Jl)}async function $w(i,e){const r=De(i);let s=3;const l=e.query;let c=r.queries.get(l);c?!c.H_()&&e.J_()&&(s=2):(c=new Bw,s=e.J_()?0:1);try{switch(s){case 0:c.z_=await r.onListen(l,!0);break;case 1:c.z_=await r.onListen(l,!1);break;case 2:await r.onFirstRemoteStoreListen(l)}}catch(f){const m=Mh(f,`Initialization of query '${Ys(e.query)}' failed`);return void e.onError(m)}r.queries.set(l,c),c.j_.push(e),e.Z_(r.onlineState),c.z_&&e.X_(c.z_)&&Fh(r)}async function Ww(i,e){const r=De(i),s=e.query;let l=3;const c=r.queries.get(s);if(c){const f=c.j_.indexOf(e);f>=0&&(c.j_.splice(f,1),c.j_.length===0?l=e.J_()?0:1:!c.H_()&&e.J_()&&(l=2))}switch(l){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}}function qw(i,e){const r=De(i);let s=!1;for(const l of e){const c=l.query,f=r.queries.get(c);if(f){for(const m of f.j_)m.X_(l)&&(s=!0);f.z_=l}}s&&Fh(r)}function Hw(i,e,r){const s=De(i),l=s.queries.get(e);if(l)for(const c of l.j_)c.onError(r);s.queries.delete(e)}function Fh(i){i.Y_.forEach((e=>{e.next()}))}var uh,qp;(qp=uh||(uh={})).ea="default",qp.Cache="cache";class Kw{constructor(e,r,s){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new ao(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const s=r!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==uh.Cache}}class hg{constructor(e){this.key=e}}class fg{constructor(e){this.key=e}}class Qw{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=be(),this.mutatedKeys=be(),this.Aa=Dm(e),this.Ra=new to(this.Aa)}get Va(){return this.Ta}ma(e,r){const s=r?r.fa:new $p,l=r?r.Ra:this.Ra;let c=r?r.mutatedKeys:this.mutatedKeys,f=l,m=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((A,P)=>{const j=l.get(A),z=Zl(this.query,P)?P:null,J=!!j&&this.mutatedKeys.has(j.key),te=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let q=!1;j&&z?j.data.isEqual(z.data)?J!==te&&(s.track({type:3,doc:z}),q=!0):this.ga(j,z)||(s.track({type:2,doc:z}),q=!0,(y&&this.Aa(z,y)>0||_&&this.Aa(z,_)<0)&&(m=!0)):!j&&z?(s.track({type:0,doc:z}),q=!0):j&&!z&&(s.track({type:1,doc:j}),q=!0,(y||_)&&(m=!0)),q&&(z?(f=f.add(z),c=te?c.add(A):c.delete(A)):(f=f.delete(A),c=c.delete(A)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const A=this.query.limitType==="F"?f.last():f.first();f=f.delete(A.key),c=c.delete(A.key),s.track({type:1,doc:A})}return{Ra:f,fa:s,ns:m,mutatedKeys:c}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,l){const c=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const f=e.fa.G_();f.sort(((A,P)=>(function(z,J){const te=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return te(z)-te(J)})(A.type,P.type)||this.Aa(A.doc,P.doc))),this.pa(s),l=l!=null&&l;const m=r&&!l?this.ya():[],y=this.da.size===0&&this.current&&!l?1:0,_=y!==this.Ea;return this.Ea=y,f.length!==0||_?{snapshot:new ao(this.query,e.Ra,c,f,e.mutatedKeys,y===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $p,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=be(),this.Ra.forEach((s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))}));const r=[];return e.forEach((s=>{this.da.has(s)||r.push(new fg(s))})),this.da.forEach((s=>{e.has(s)||r.push(new hg(s))})),r}ba(e){this.Ta=e.Ts,this.da=be();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return ao.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Gw{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class Yw{constructor(e){this.key=e,this.va=!1}}class Xw{constructor(e,r,s,l,c,f){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Ca={},this.Fa=new fo((m=>Vm(m)),Jl),this.Ma=new Map,this.xa=new Set,this.Oa=new wt(we.comparator),this.Na=new Map,this.La=new kh,this.Ba={},this.ka=new Map,this.qa=oo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Jw(i,e,r=!0){const s=vg(i);let l;const c=s.Fa.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.Da()):l=await dg(s,e,r,!0),l}async function Zw(i,e){const r=vg(i);await dg(r,e,!0,!1)}async function dg(i,e,r,s){const l=await vw(i.localStore,Vr(e)),c=l.targetId,f=i.sharedClientState.addLocalQueryTarget(c,r);let m;return s&&(m=await eE(i,e,c,f==="current",l.resumeToken)),i.isPrimaryClient&&r&&sg(i.remoteStore,l),m}async function eE(i,e,r,s,l){i.Ka=(P,j,z)=>(async function(te,q,oe,ke){let ae=q.view.ma(oe);ae.ns&&(ae=await bp(te.localStore,q.query,!1).then((({documents:C})=>q.view.ma(C,ae))));const Ae=ke&&ke.targetChanges.get(q.targetId),Xe=ke&&ke.targetMismatches.get(q.targetId)!=null,Pe=q.view.applyChanges(ae,te.isPrimaryClient,Ae,Xe);return Kp(te,q.targetId,Pe.wa),Pe.snapshot})(i,P,j,z);const c=await bp(i.localStore,e,!0),f=new Qw(e,c.Ts),m=f.ma(c.documents),y=da.createSynthesizedTargetChangeForCurrentChange(r,s&&i.onlineState!=="Offline",l),_=f.applyChanges(m,i.isPrimaryClient,y);Kp(i,r,_.wa);const A=new Gw(e,r,f);return i.Fa.set(e,A),i.Ma.has(r)?i.Ma.get(r).push(e):i.Ma.set(r,[e]),_.snapshot}async function tE(i,e,r){const s=De(i),l=s.Fa.get(e),c=s.Ma.get(l.targetId);if(c.length>1)return s.Ma.set(l.targetId,c.filter((f=>!Jl(f,e)))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await lh(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),r&&Nh(s.remoteStore,l.targetId),ch(s,l.targetId)})).catch(ca)):(ch(s,l.targetId),await lh(s.localStore,l.targetId,!0))}async function nE(i,e){const r=De(i),s=r.Fa.get(e),l=r.Ma.get(s.targetId);r.isPrimaryClient&&l.length===1&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),Nh(r.remoteStore,s.targetId))}async function rE(i,e,r){const s=cE(i);try{const l=await(function(f,m){const y=De(f),_=Ot.now(),A=m.reduce(((z,J)=>z.add(J.key)),be());let P,j;return y.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let J=ti(),te=be();return y.cs.getEntries(z,A).next((q=>{J=q,J.forEach(((oe,ke)=>{ke.isValidDocument()||(te=te.add(oe))}))})).next((()=>y.localDocuments.getOverlayedDocuments(z,J))).next((q=>{P=q;const oe=[];for(const ke of m){const ae=T0(ke,P.get(ke.key).overlayedDocument);ae!=null&&oe.push(new ds(ke.key,ae,Im(ae.value.mapValue),Jr.exists(!0)))}return y.mutationQueue.addMutationBatch(z,_,oe,m)})).next((q=>{j=q;const oe=q.applyToLocalDocumentSet(P,te);return y.documentOverlayCache.saveOverlays(z,q.batchId,oe)}))})).then((()=>({batchId:j.batchId,changes:Om(P)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(f,m,y){let _=f.Ba[f.currentUser.toKey()];_||(_=new wt(Ye)),_=_.insert(m,y),f.Ba[f.currentUser.toKey()]=_})(s,l.batchId,r),await ma(s,l.changes),await su(s.remoteStore)}catch(l){const c=Mh(l,"Failed to persist write");r.reject(c)}}async function pg(i,e){const r=De(i);try{const s=await mw(r.localStore,e);e.targetChanges.forEach(((l,c)=>{const f=r.Na.get(c);f&&(rt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?f.va=!0:l.modifiedDocuments.size>0?rt(f.va):l.removedDocuments.size>0&&(rt(f.va),f.va=!1))})),await ma(r,s,e)}catch(s){await ca(s)}}function Hp(i,e,r){const s=De(i);if(s.isPrimaryClient&&r===0||!s.isPrimaryClient&&r===1){const l=[];s.Fa.forEach(((c,f)=>{const m=f.view.Z_(e);m.snapshot&&l.push(m.snapshot)})),(function(f,m){const y=De(f);y.onlineState=m;let _=!1;y.queries.forEach(((A,P)=>{for(const j of P.j_)j.Z_(m)&&(_=!0)})),_&&Fh(y)})(s.eventManager,e),l.length&&s.Ca.d_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function iE(i,e,r){const s=De(i);s.sharedClientState.updateQueryState(e,"rejected",r);const l=s.Na.get(e),c=l&&l.key;if(c){let f=new wt(we.comparator);f=f.insert(c,fn.newNoDocument(c,Ve.min()));const m=be().add(c),y=new nu(Ve.min(),new Map,new wt(Ye),f,m);await pg(s,y),s.Oa=s.Oa.remove(c),s.Na.delete(e),jh(s)}else await lh(s.localStore,e,!1).then((()=>ch(s,e,r))).catch(ca)}async function sE(i,e){const r=De(i),s=e.batch.batchId;try{const l=await pw(r.localStore,e);gg(r,s,null),mg(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),await ma(r,l)}catch(l){await ca(l)}}async function oE(i,e,r){const s=De(i);try{const l=await(function(f,m){const y=De(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let A;return y.mutationQueue.lookupMutationBatch(_,m).next((P=>(rt(P!==null),A=P.keys(),y.mutationQueue.removeMutationBatch(_,P)))).next((()=>y.mutationQueue.performConsistencyCheck(_))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(_,A,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,A))).next((()=>y.localDocuments.getDocuments(_,A)))}))})(s.localStore,e);gg(s,e,r),mg(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),await ma(s,l)}catch(l){await ca(l)}}function mg(i,e){(i.ka.get(e)||[]).forEach((r=>{r.resolve()})),i.ka.delete(e)}function gg(i,e,r){const s=De(i);let l=s.Ba[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(r?c.reject(r):c.resolve(),l=l.remove(e)),s.Ba[s.currentUser.toKey()]=l}}function ch(i,e,r=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Ma.get(e))i.Fa.delete(s),r&&i.Ca.$a(s,r);i.Ma.delete(e),i.isPrimaryClient&&i.La.gr(e).forEach((s=>{i.La.containsKey(s)||yg(i,s)}))}function yg(i,e){i.xa.delete(e.path.canonicalString());const r=i.Oa.get(e);r!==null&&(Nh(i.remoteStore,r),i.Oa=i.Oa.remove(e),i.Na.delete(r),jh(i))}function Kp(i,e,r){for(const s of r)s instanceof hg?(i.La.addReference(s.key,e),aE(i,s)):s instanceof fg?(pe("SyncEngine","Document no longer in limbo: "+s.key),i.La.removeReference(s.key,e),i.La.containsKey(s.key)||yg(i,s.key)):Ie()}function aE(i,e){const r=e.key,s=r.path.canonicalString();i.Oa.get(r)||i.xa.has(s)||(pe("SyncEngine","New document in limbo: "+r),i.xa.add(s),jh(i))}function jh(i){for(;i.xa.size>0&&i.Oa.size<i.maxConcurrentLimboResolutions;){const e=i.xa.values().next().value;i.xa.delete(e);const r=new we(pt.fromString(e)),s=i.qa.next();i.Na.set(s,new Yw(r)),i.Oa=i.Oa.insert(r,s),sg(i.remoteStore,new Ni(Vr(Nm(r.path)),s,"TargetPurposeLimboResolution",vh.oe))}}async function ma(i,e,r){const s=De(i),l=[],c=[],f=[];s.Fa.isEmpty()||(s.Fa.forEach(((m,y)=>{f.push(s.Ka(y,e,r).then((_=>{var A;if((_||r)&&s.isPrimaryClient){const P=_?!_.fromCache:(A=r?.targetChanges.get(y.targetId))===null||A===void 0?void 0:A.current;s.sharedClientState.updateQueryState(y.targetId,P?"current":"not-current")}if(_){l.push(_);const P=xh.Wi(y.targetId,_);c.push(P)}})))})),await Promise.all(f),s.Ca.d_(l),await(async function(y,_){const A=De(y);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(P=>G.forEach(_,(j=>G.forEach(j.$i,(z=>A.persistence.referenceDelegate.addReference(P,j.targetId,z))).next((()=>G.forEach(j.Ui,(z=>A.persistence.referenceDelegate.removeReference(P,j.targetId,z)))))))))}catch(P){if(!ha(P))throw P;pe("LocalStore","Failed to update sequence numbers: "+P)}for(const P of _){const j=P.targetId;if(!P.fromCache){const z=A.os.get(j),J=z.snapshotVersion,te=z.withLastLimboFreeSnapshotVersion(J);A.os=A.os.insert(j,te)}}})(s.localStore,c))}async function lE(i,e){const r=De(i);if(!r.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const s=await tg(r.localStore,e);r.currentUser=e,(function(c,f){c.ka.forEach((m=>{m.forEach((y=>{y.reject(new ye(Y.CANCELLED,f))}))})),c.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ma(r,s.hs)}}function uE(i,e){const r=De(i),s=r.Na.get(e);if(s&&s.va)return be().add(s.key);{let l=be();const c=r.Ma.get(e);if(!c)return l;for(const f of c){const m=r.Fa.get(f);l=l.unionWith(m.view.Va)}return l}}function vg(i){const e=De(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=pg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iE.bind(null,e),e.Ca.d_=qw.bind(null,e.eventManager),e.Ca.$a=Hw.bind(null,e.eventManager),e}function cE(i){const e=De(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oE.bind(null,e),e}class Ql{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ru(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return dw(this.persistence,new hw,e.initialUser,this.serializer)}Ga(e){return new lw(Ph.Zr,this.serializer)}Wa(e){return new ww}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ql.provider={build:()=>new Ql};class hh{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Hp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=lE.bind(null,this.syncEngine),await Uw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new zw})()}createDatastore(e){const r=ru(e.databaseInfo.databaseId),s=(function(c){return new Iw(c)})(e.databaseInfo);return(function(c,f,m,y){return new Cw(c,f,m,y)})(e.authCredentials,e.appCheckCredentials,s,r)}createRemoteStore(e){return(function(s,l,c,f,m){return new Pw(s,l,c,f,m)})(this.localStore,this.datastore,e.asyncQueue,(r=>Hp(this.syncEngine,r,0)),(function(){return Bp.D()?new Bp:new Ew})())}createSyncEngine(e,r){return(function(l,c,f,m,y,_,A){const P=new Xw(l,c,f,m,y,_);return A&&(P.Qa=!0),P})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(l){const c=De(l);pe("RemoteStore","RemoteStore shutting down."),c.L_.add(5),await pa(c),c.k_.shutdown(),c.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}hh.provider={build:()=>new hh};class hE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ei("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}class fE{constructor(e,r,s,l,c){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=l,this.user=hn.UNAUTHENTICATED,this.clientId=Em.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{pe("FirestoreClient","Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(pe("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const s=Mh(r,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Wc(i,e){i.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const r=i.configuration;await e.initialize(r);let s=r.initialUser;i.setCredentialChangeListener((async l=>{s.isEqual(l)||(await tg(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Qp(i,e){i.asyncQueue.verifyOperationInProgress();const r=await dE(i);pe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,i.configuration),i.setCredentialChangeListener((s=>zp(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,l)=>zp(e.remoteStore,l))),i._onlineComponents=e}async function dE(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wc(i,i._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(l){return l.name==="FirebaseError"?l.code===Y.FAILED_PRECONDITION||l.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(r))throw r;no("Error using user provided cache. Falling back to memory cache: "+r),await Wc(i,new Ql)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),await Wc(i,new Ql);return i._offlineComponents}async function _g(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),await Qp(i,i._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),await Qp(i,new hh))),i._onlineComponents}function pE(i){return _g(i).then((e=>e.syncEngine))}async function mE(i){const e=await _g(i),r=e.eventManager;return r.onListen=Jw.bind(null,e.syncEngine),r.onUnlisten=tE.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Zw.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=nE.bind(null,e.syncEngine),r}function gE(i,e,r={}){const s=new Li;return i.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,y,_){const A=new hE({next:j=>{A.Za(),f.enqueueAndForget((()=>Ww(c,P))),j.fromCache&&y.source==="server"?_.reject(new ye(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(j)},error:j=>_.reject(j)}),P=new Kw(m,A,{includeMetadataChanges:!0,_a:!0});return $w(c,P)})(await mE(i),i.asyncQueue,e,r,s))),s.promise}function wg(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const Gp=new Map;function Eg(i,e,r){if(!r)throw new ye(Y.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function yE(i,e,r,s){if(e===!0&&s===!0)throw new ye(Y.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function Yp(i){if(!we.isDocumentKey(i))throw new ye(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Xp(i){if(we.isDocumentKey(i))throw new ye(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function bh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ie()}function ua(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ye(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=bh(i);throw new ye(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return i}class Jp{constructor(e){var r,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ye(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wg((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ye(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ye(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ye(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ou{constructor(e,r,s,l){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jp(e),e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new x_;switch(s.type){case"firstParty":return new L_(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const s=Gp.get(r);s&&(pe("ComponentProvider","Removing Datastore"),Gp.delete(r),s.terminate())})(this),Promise.resolve()}}function vE(i,e,r,s={}){var l;const c=(i=ua(i,ou))._getSettings(),f=`${e}:${r}`;if(c.host!=="firestore.googleapis.com"&&c.host!==f&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:f,ssl:!1})),s.mockUserToken){let m,y;if(typeof s.mockUserToken=="string")m=s.mockUserToken,y=hn.MOCK_USER;else{m=uv(s.mockUserToken,(l=i._app)===null||l===void 0?void 0:l.options.projectId);const _=s.mockUserToken.sub||s.mockUserToken.user_id;if(!_)throw new ye(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new hn(_)}i._authCredentials=new N_(new wm(m,y))}}class au{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new au(this.firestore,e,this._query)}}class nr{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}}class Oi extends au{constructor(e,r,s){super(e,r,Nm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new we(e))}withConverter(e){return new Oi(this.firestore,e,this._path)}}function ga(i,e,...r){if(i=ea(i),Eg("collection","path",e),i instanceof ou){const s=pt.fromString(e,...r);return Xp(s),new Oi(i,null,s)}{if(!(i instanceof nr||i instanceof Oi))throw new ye(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(pt.fromString(e,...r));return Xp(s),new Oi(i.firestore,null,s)}}function Tg(i,e,...r){if(i=ea(i),arguments.length===1&&(e=Em.newId()),Eg("doc","path",e),i instanceof ou){const s=pt.fromString(e,...r);return Yp(s),new nr(i,null,new we(s))}{if(!(i instanceof nr||i instanceof Oi))throw new ye(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(pt.fromString(e,...r));return Yp(s),new nr(i.firestore,i instanceof Oi?i.converter:null,new we(s))}}class Zp{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new rg(this,"async_queue_retry"),this.Vu=()=>{const s=$c();s&&pe("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const r=$c();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=$c();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new Li;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ha(e))throw e;pe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((s=>{this.Eu=s,this.du=!1;const l=(function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m})(s);throw ei("INTERNAL UNHANDLED ERROR: ",l),s})).then((s=>(this.du=!1,s))))));return this.mu=r,r}enqueueAfterDelay(e,r,s){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const l=Oh.createAndSchedule(this,e,r,s,(c=>this.yu(c)));return this.Tu.push(l),l}fu(){this.Eu&&Ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,s)=>r.targetTimeMs-s.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}class Uh extends ou{constructor(e,r,s,l){super(e,r,s,l),this.type="firestore",this._queue=new Zp,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zp(e),this._firestoreClient=void 0,await e}}}function _E(i,e){const r=typeof i=="object"?i:v_(),s=typeof i=="string"?i:"(default)",l=p_(r,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=av("firestore");c&&vE(l,...c)}return l}function Sg(i){if(i._terminated)throw new ye(Y.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||wE(i),i._firestoreClient}function wE(i){var e,r,s;const l=i._freezeSettings(),c=(function(m,y,_,A){return new K_(m,y,_,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,wg(A.experimentalLongPollingOptions),A.useFetchStreams)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,l);i._componentsProvider||!((r=l.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((s=l.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),i._firestoreClient=new fE(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&(function(m){const y=m?._online.build();return{_offline:m?._offline.build(y),_online:y}})(i._componentsProvider))}class lo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lo(Jt.fromBase64String(e))}catch(r){throw new ye(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new lo(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bh{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ye(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ig{constructor(e){this._methodName=e}}class zh{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ye(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ye(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}}class $h{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}}const EE=/^__.*__$/;class TE{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,r,this.fieldTransforms):new fa(e,this.data,r,this.fieldTransforms)}}function Ag(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class Wh{constructor(e,r,s,l,c,f){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Wh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const s=(r=this.path)===null||r===void 0?void 0:r.child(e),l=this.Fu({path:s,xu:!1});return l.Ou(e),l}Nu(e){var r;const s=(r=this.path)===null||r===void 0?void 0:r.child(e),l=this.Fu({path:s,xu:!1});return l.vu(),l}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Gl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Ag(this.Cu)&&EE.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class SE{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||ru(e)}Qu(e,r,s,l=!1){return new Wh({Cu:e,methodName:r,qu:s,path:Yt.emptyPath(),xu:!1,ku:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function IE(i){const e=i._freezeSettings(),r=ru(i._databaseId);return new SE(i._databaseId,!!e.ignoreUndefinedProperties,r)}function AE(i,e,r,s,l,c={}){const f=i.Qu(c.merge||c.mergeFields?2:0,e,r,l);Pg("Data must be an object, but it was:",f,s);const m=Cg(s,f);let y,_;if(c.merge)y=new vr(f.fieldMask),_=f.fieldTransforms;else if(c.mergeFields){const A=[];for(const P of c.mergeFields){const j=RE(e,P,r);if(!f.contains(j))throw new ye(Y.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);kE(A,j)||A.push(j)}y=new vr(A),_=f.fieldTransforms.filter((P=>y.covers(P.field)))}else y=null,_=f.fieldTransforms;return new TE(new tr(m),y,_)}function Rg(i,e){if(kg(i=ea(i)))return Pg("Unsupported field value:",e,i),Cg(i,e);if(i instanceof Ig)return(function(s,l){if(!Ag(l.Cu))throw l.Bu(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Bu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(s,l){const c=[];let f=0;for(const m of s){let y=Rg(m,l.Lu(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}})(i,e)}return(function(s,l){if((s=ea(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return g0(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Ot.fromDate(s);return{timestampValue:Hl(l.serializer,c)}}if(s instanceof Ot){const c=new Ot(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Hl(l.serializer,c)}}if(s instanceof zh)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof lo)return{bytesValue:Qm(l.serializer,s._byteString)};if(s instanceof nr){const c=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw l.Bu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ch(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof $h)return(function(f,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw m.Bu("VectorValues must only contain numeric values.");return Ih(m.serializer,y)}))}}}}}})(s,l);throw l.Bu(`Unsupported field value: ${bh(s)}`)})(i,e)}function Cg(i,e){const r={};return Tm(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(i,((s,l)=>{const c=Rg(l,e.Mu(s));c!=null&&(r[s]=c)})),{mapValue:{fields:r}}}function kg(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ot||i instanceof zh||i instanceof lo||i instanceof nr||i instanceof Ig||i instanceof $h)}function Pg(i,e,r){if(!kg(r)||!(function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)})(r)){const s=bh(r);throw s==="an object"?e.Bu(i+" a custom object"):e.Bu(i+" "+s)}}function RE(i,e,r){if((e=ea(e))instanceof Bh)return e._internalPath;if(typeof e=="string")return xg(i,e);throw Gl("Field path arguments must be of type string or ",i,!1,void 0,r)}const CE=new RegExp("[~\\*/\\[\\]]");function xg(i,e,r){if(e.search(CE)>=0)throw Gl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new Bh(...e.split("."))._internalPath}catch{throw Gl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function Gl(i,e,r,s,l){const c=s&&!s.isEmpty(),f=l!==void 0;let m=`Function ${e}() called with invalid data`;r&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${s}`),f&&(y+=` in document ${l}`),y+=")"),new ye(Y.INVALID_ARGUMENT,m+i+y)}function kE(i,e){return i.some((r=>r.isEqual(e)))}class Ng{constructor(e,r,s,l,c){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Vg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class PE extends Ng{data(){return super.data()}}function Vg(i,e){return typeof e=="string"?xg(i,e):e instanceof Bh?e._internalPath:e._delegate._internalPath}function xE(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ye(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class NE{convertValue(e,r="none"){switch(fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return ho(e,((l,c)=>{s[l]=this.convertValue(c,r)})),s}convertVectorValue(e){var r,s,l;const c=(l=(s=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||s===void 0?void 0:s.values)===null||l===void 0?void 0:l.map((f=>Ct(f.doubleValue)));return new $h(c)}convertGeoPoint(e){return new zh(Ct(e.latitude),Ct(e.longitude))}convertArray(e,r){return(e.values||[]).map((s=>this.convertValue(s,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const s=wh(e);return s==null?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(ia(e));default:return null}}convertTimestamp(e){const r=Fi(e);return new Ot(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=pt.fromString(e);rt(eg(s));const l=new sa(s.get(1),s.get(3)),c=new we(s.popFirst(5));return l.isEqual(r)||ei(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),c}}function VE(i,e,r){let s;return s=i?i.toFirestore(e):e,s}class xl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DE extends Ng{constructor(e,r,s,l,c,f){super(e,r,s,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ol(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(Vg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class Ol extends DE{data(e={}){return super.data(e)}}class LE{constructor(e,r,s,l){this._firestore=e,this._userDataWriter=r,this._snapshot=l,this.metadata=new xl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((s=>{e.call(r,new Ol(this._firestore,this._userDataWriter,s.key,s,new xl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ye(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((m=>{const y=new Ol(l._firestore,l._userDataWriter,m.doc.key,m.doc,new xl(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const y=new Ol(l._firestore,l._userDataWriter,m.doc.key,m.doc,new xl(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,A=-1;return m.type!==0&&(_=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),A=f.indexOf(m.doc.key)),{type:OE(m.type),doc:y,oldIndex:_,newIndex:A}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function OE(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}class ME extends NE{constructor(e){super(),this.firestore=e}convertBytes(e){return new lo(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,r)}}function FE(i){i=ua(i,au);const e=ua(i.firestore,Uh),r=Sg(e),s=new ME(e);return xE(i._query),gE(r,i._query).then((l=>new LE(e,s,i,l)))}function Dg(i,e,r){i=ua(i,nr);const s=ua(i.firestore,Uh),l=VE(i.converter,e);return jE(s,[AE(IE(s),"setDoc",i._key,l,i.converter!==null,r).toMutation(i._key,Jr.none())])}function jE(i,e){return(function(s,l){const c=new Li;return s.asyncQueue.enqueueAndForget((async()=>rE(await pE(s),l,c))),c.promise})(Sg(i),e)}(function(e,r=!0){(function(l){co=l})(y_),Ul(new ta("firestore",((s,{instanceIdentifier:l,options:c})=>{const f=s.getProvider("app").getImmediate(),m=new Uh(new V_(s.getProvider("auth-internal")),new M_(s.getProvider("app-check-internal")),(function(_,A){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ye(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sa(_.options.projectId,A)})(f,l),f);return c=Object.assign({useFetchStreams:r},c),m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),eo(vp,"4.7.3",e),eo(vp,"4.7.3","esm2017")})();const bE={apiKey:void 0,authDomain:void 0,databaseURL:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},UE=hm(bE),ya=_E(UE),BE=ga(ya,"globalInvigorationSubjects");ga(ya,"globalInvigorationTrials");ga(ya,"globalInvigorationGames");const zE=async i=>{try{const e=i.id;if(!e)throw new Error("Subject ID is required");const r=Tg(BE,e);return await Dg(r,{...i,id:e,timestamp:new Date().toISOString()})}catch(e){throw console.error("Error saving subject data: ",e),e}},$E=i=>i?.workerId||"UNK",WE=()=>({timestamp:new Date().toISOString(),userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,screenWidth:window.screen.width,screenHeight:window.screen.height,screenColorDepth:window.screen.colorDepth,windowWidth:window.innerWidth,windowHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,hasTouch:"ontouchstart"in window,maxTouchPoints:navigator.maxTouchPoints||0,browser:qE(),os:HE()}),qE=()=>{const i=navigator.userAgent;return i.includes("Chrome")?"Chrome":i.includes("Firefox")?"Firefox":i.includes("Safari")?"Safari":i.includes("Edge")?"Edge":"Unknown"},HE=()=>{const i=navigator.userAgent;return i.includes("Windows")?"Windows":i.includes("Mac")?"macOS":i.includes("Linux")?"Linux":i.includes("Android")?"Android":i.includes("iOS")?"iOS":"Unknown"},KE=async i=>{const e=$E(i),r=WE(),s={id:e,...i,systemInfo:r,sessionStart:new Date().toISOString(),experimentVersion:"1.0",status:"active"};try{return await zE(s),e}catch(l){throw console.error("Failed to initialize participant:",l),l}},em=async(i,e,r)=>{try{const s=ga(ya,"globalInvigorationTrials"),l=Tg(s,r);return await Dg(l,e)}catch(s){throw console.error("Error saving participant trial:",s),s}},Bn={BLOCKS:{POOR:{baseRounds:2},RICH:{baseRounds:2},ORDER:["poor","rich","rich","poor"]},ROUND_DURATIONS:{REACHING_PHASE:{mean:20,standardDeviation:2,min:15,max:25}},REWARDS:{PRACTICE_VALUE:50,ARRAYS:{POOR:[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,30,30,30,30,30,30,30,30,30,50,50,50,50,50,50],RICH:[10,10,10,10,10,10,30,30,30,30,30,30,30,30,30,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50]}},KEYS:{VALID_KEYS:["a","s","d","f"],SEQUENCE_LENGTH:10,PRACTICE_SEQUENCE_LENGTH:10}},QE=i=>{const e=i==="poor"?Bn.BLOCKS.POOR.baseRounds:Bn.BLOCKS.RICH.baseRounds;return e},Ml=()=>{const i=Bn.ROUND_DURATIONS.REACHING_PHASE,e=Math.random(),r=Math.random(),s=Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*r);let l=i.mean+s*i.standardDeviation;return l=Math.max(i.min,Math.min(i.max,l)),Math.round(l*10)/10},Fl=()=>{const i=Bn.KEYS.VALID_KEYS.slice(),e=Bn.KEYS.SEQUENCE_LENGTH,r=Math.floor(e/i.length);let s=e%i.length;const l={};i.forEach(m=>{l[m]=r+(s>0?1:0),s>0&&s--});const c=[];let f=null;for(let m=0;m<e;m++){const y=i.filter(A=>l[A]>0&&A!==f);let _;if(y.length===0){const A=i.filter(P=>l[P]>0);_=A[Math.floor(Math.random()*A.length)]}else _=y[Math.floor(Math.random()*y.length)];c.push(_),l[_]--,f=_}for(let m=1;m<c.length;m++)if(c[m]===c[m-1]){let y=-1;for(let _=m+1;_<c.length;_++)if(c[_]!==c[m]&&c[_]!==c[m-1]&&(_===c.length-1||c[_]!==c[_+1])){y=_;break}if(y!==-1){const _=c[m];c[m]=c[y],c[y]=_}}return c},tm=i=>{const e=[...i];for(let r=e.length-1;r>0;r--){const s=Math.floor(Math.random()*(r+1));[e[r],e[s]]=[e[s],e[r]]}return e},qc={},nm=i=>{const e=Bn.REWARDS.ARRAYS[i.toUpperCase()];return e?tm(e):(console.warn(`Unknown environment: ${i}, defaulting to POOR rewards`),tm(Bn.REWARDS.ARRAYS.POOR))},GE=i=>{const e=Zs(i);if(!e)return console.warn(`Invalid block index: ${i}`),nm("poor");const r=`block_${i}`;if(qc[r])return qc[r];const s=nm(e);return qc[r]=s,s},fh=Bn.BLOCKS.ORDER,Zs=i=>i<0||i>=fh.length?null:fh[i],Lg=i=>{const e=Zs(i);return e?QE(e):(console.warn(`Invalid block index: ${i}`),0)},dh=i=>{const e=i+1;return e<fh.length?e:null},YE=(i,e)=>{const r=Lg(i);return e<=r?"continue":dh(i)!==null?"break":"end"},XE=({participantData:i,participantId:e,onGameComplete:r})=>{const[s,l]=Z.useState(!1),[c,f]=Z.useState(8),[m,y]=Z.useState(0),[_,A]=Z.useState(null),[P,j]=Z.useState("reaching"),[z,J]=Z.useState(!1),[te,q]=Z.useState(0),[oe,ke]=Z.useState({width:window.innerWidth,height:window.innerHeight}),[ae,Ae]=Z.useState(!1),Xe=Z.useRef(null),Pe=Z.useRef(!1),C=Z.useRef(null),S=Z.useRef(Date.now()),[E,k]=Z.useState([]),[x,D]=Z.useState(0),[I,qe]=Z.useState([]),[Oe,Et]=Z.useState(0),[Le,ne]=Z.useState(null),[fe,se]=Z.useState(null),[V,$]=Z.useState(1),[ue,Re]=Z.useState(0),[xe,Te]=Z.useState(0),[Ce,Ee]=Z.useState(!1),[Qe,mt]=Z.useState(""),[Ue]=Z.useState("key"),[W]=Z.useState(Date.now()),[$t,ht]=Z.useState([]),[it,st]=Z.useState([]),[Zt,en]=Z.useState([]),[rr,tn]=Z.useState([]),[dn,nn]=Z.useState(null),[_r,Wt]=Z.useState(null),[ir,Je]=Z.useState([]),[ot,At]=Z.useState([]),[Mr,rn]=Z.useState([]),[wr,vn]=Z.useState([]),[ni,zn]=Z.useState([]),[bi,sr]=Z.useState(1),[ri,$n]=Z.useState(null),[Ui,Wn]=Z.useState(1),[_n,Pn]=Z.useState(0),[ii,pn]=Z.useState([]),[Bi,qn]=Z.useState([]);Z.useRef(!1);const zi=Z.useRef(!1),Tt=(H,U,Ne=null)=>{const me=Array.isArray(H)?H.slice(0,U):[];for(;me.length<U;)me.push(Ne);return me},xn=(H,U)=>Array.from({length:U},()=>H),gt=(H,U,Ne)=>{let me,re;const{leftBar:Be,rightBar:Ze}=Fr(),Me=Be.x+Be.width,et=Ze.x;if(H>=Be.x&&H<=Me?(me="ASW",re="L"):H>=et&&H<=Ze.x+Ze.width?(me="ATW",re="R"):(ae?me="WS":me="RO",re="N"),ri&&ri!==re&&re!=="N"){const Fe=bi+1;sr(Fe),Wt(re),si(Fe-1,re,dn,{gameStateArray:$t.slice(),eventArray:it.slice(),posXArray:Zt.slice(),posYArray:rr.slice(),timestampArray:Mr.slice()}),ht([]),st([]),en([]),tn([]),nn(re),Wt(null),Je([]),At([]),rn([]),vn([]),zn([]),sr(Fe),Wn(1),pn([]),qn([])}$n(re),ht(Fe=>[...Fe,me]);let Ft="None";c<=3&&(Ft="RC"),st(Fe=>[...Fe,Ft]),en(Fe=>[...Fe,H]),tn(Fe=>[...Fe,U]),rn(Fe=>[...Fe,Ne]),!dn&&re!=="N"&&nn(re)},si=async(H,U,Ne,me)=>{if(!me||me.gameStateArray.length===0)return;const re=Math.max(me.gameStateArray?.length||0,me.eventArray?.length||0,me.posXArray?.length||0,me.posYArray?.length||0,me.timestampArray?.length||0),Be=Tt(me.gameStateArray,re,null),Ze=Tt(me.eventArray,re,"None"),Me=Tt(me.posXArray,re,null),et=Tt(me.posYArray,re,null),Ft=Tt(me.timestampArray,re,null),Fe=xn(null,re),sn=xn(null,re),yt=xn(null,re),Ln=xn(null,re),St={participantId:e,sessionStartTime:W,reachNumber:H,environment:Le,round:V,block:Oe+1,startWall:Ne,endWall:U,gameStateArray:Be,eventArray:Ze,posXArray:Me,posYArray:et,reachTimestampArray:Ft,keytapNumberArray:Fe,keytapValueArray:sn,keyupTimestampArray:yt,validityArray:Ln,currScore:m,rewardValue:null};try{const jr=Oe+1,gs=`${e}_block${jr}_round${V}_reach${H}`;await em(e,St,gs),console.log(`Reach ${H} data saved successfully`)}catch(jr){console.error(`Failed to save reach ${H} data:`,jr)}},Nn=async()=>{if(ir.length===0)return;const H=Math.max(ir.length,ot.length,Mr.length,wr.length,ni.length),U=Tt(ir,H,null),Ne=Tt(ot,H,null),me=Tt(Mr,H,null),re=Tt(wr,H,null),Be=Tt(ni,H,null),Ze=Tt(ii,H,null),Me=Tt(Bi,H,null),et=xn(null,H),Ft=xn(null,H),Fe=xn(null,H),sn={participantId:e,sessionStartTime:W,environment:Le,round:V,block:Oe+1,rewardValue:ue,keytapNumberArray:U,keytapValueArray:Ne,keyPressTimestampArray:me,keyupTimestampArray:re,validityArray:Be,gameStateArray:Ze,eventArray:Me,posXArray:et,posYArray:Ft,reachTimestampArray:Fe,startWall:null,endWall:null,reachNumber:null,currScore:m};try{const yt=Oe+1,Ln=`${e}_block${yt}_round${V}`;await em(e,sn,Ln),console.log(`Round ${V} data saved successfully`)}catch(yt){console.error(`Failed to save round ${V} data:`,yt)}},Hn=oe.width*.1,Er=oe.height,Vn={x:0,y:0,width:Hn,height:Er},Mt={x:oe.width-Hn,y:0,width:Hn,height:Er},tt={x:Math.max(oe.width/2,400),y:Math.max(oe.height/2-60,200)},or=Math.max(Math.min(oe.width,oe.height)*.12,30),Fr=()=>({leftBar:Vn,rightBar:Mt,coinPosition:tt,coinRadius:or}),ms=(H,U)=>{if(U===0)return H.beginPath(),H.arc(tt.x,tt.y,re,0,2*Math.PI),H.fillStyle="#f0f0f0",H.fill(),H.strokeStyle="#c0c0c0",H.lineWidth=4,H.stroke(),H.fillStyle="#888888",H.font=`bold ${re*.4}px Arial`,H.textAlign="center",H.textBaseline="middle",H.fillText("0",tt.x,tt.y-re*.7),0;let Ne,me;if(U===10)Ne=1,me=1;else if(U===30)Ne=3,me=2;else if(U===50)Ne=5,me=4;else return 0;const re=20,Be=re*1.8;let Ze=0;for(let et=0;et<me;et++){const Ft=et+1,Fe=tt.y+et*Be*.8,sn=tt.x-(Ft-1)*Be/2;for(let yt=0;yt<Ft&&Ze<Ne;yt++){const Ln=sn+yt*Be;H.beginPath(),H.arc(Ln,Fe,re,0,2*Math.PI);const St=H.createRadialGradient(Ln-re*.3,Fe-re*.3,0,Ln,Fe,re);St.addColorStop(0,"#FFD700"),St.addColorStop(.7,"#FFA500"),St.addColorStop(1,"#FF8C00"),H.fillStyle=St,H.fill(),H.strokeStyle="#FF8C00",H.lineWidth=2,H.stroke(),H.fillStyle="#B8860B",H.fillRect(Ln-re*.1,Fe-re*.4,re*.2,re*.8),Ze++}}const Me=me*Be*.8;return H.fillStyle="#FFD700",H.font='bold 24px "Arial", sans-serif',H.textAlign="center",H.textBaseline="top",H.fillText(`${U} points`,tt.x,tt.y+Me+30),Me};Z.useEffect(()=>{const H=()=>{const Ne={width:window.innerWidth,height:window.innerHeight};ke(Ne)},U={width:window.innerWidth,height:window.innerHeight};return ke(U),window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]);const wn=H=>{if(!s||P!=="coin"||!z)return;const U=H.key.toLowerCase();if(!["a","s","d","f"].includes(U)||E.length===0||x>=E.length)return;const me=Date.now(),re=E[x],Be=U===re,Ze=[...I];if(Ze[x]=Be?"correct":"incorrect",qe(Ze),Je(Me=>[...Me,x+1]),At(Me=>[...Me,U]),rn(Me=>[...Me,me]),zn(Me=>[...Me,Be?"correct":"incorrect"]),pn(Me=>[...Me,"SO"]),qn(Me=>[...Me,"RR"]),Be){const Me=x+1;if(Me<E.length)D(Me);else{y(Fe=>Fe+ue),q(Fe=>Fe+1),Ee(!0),mt(`+${ue}!`),pn(Fe=>[...Fe,"SC"]),qn(Fe=>[...Fe,"RREC"]),setTimeout(()=>{Ee(!1)},1e3),A(null),Ae(!1),C.current&&clearTimeout(C.current),j("reaching"),J(!1),D(0),qe(new Array(E.length).fill("pending")),Nn();const et=V+1;$(et);const Ft=YE(Oe,et);if(Ft==="break"){const Fe=dh(Oe);se(Fe),j("break")}else if(Ft==="end")l(!1),Pe.current=!0,r?.();else{const Fe=Ml(),sn=Fl();f(Fe),k(sn),qe(new Array(sn.length).fill("pending")),oi(Oe,et)}}}else Ee(!0),mt("Wrong key!"),setTimeout(()=>{Ee(!1)},1e3)},Tr=H=>{if(!s||P!=="coin"||!z)return;const U=H.key.toLowerCase();if(!["a","s","d","f"].includes(U)||E.length===0||x>=E.length)return;const me=Date.now();vn(re=>[...re,me])};Z.useEffect(()=>{if(!s||P!=="reaching")return;const H=setInterval(()=>{f(U=>U<=1?(j("coin"),J(!0),Re(xe),D(0),qe(new Array(E.length).fill("pending")),Je([]),At([]),rn([]),vn([]),zn([]),Wn(1),0):U-1)},1e3);return()=>clearInterval(H)},[s,P,V,Le,E.length]),Z.useEffect(()=>{P==="coin"&&E.length>0&&(console.log("Starting reward tracking for sequence:",E),console.log("Reward tracking started successfully"))},[E,P,Le,V,ue]),Z.useEffect(()=>{if(s&&(window.addEventListener("keydown",wn),window.addEventListener("keyup",Tr)),P==="break"){const H=U=>{U.key===" "&&li()};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)}return()=>{window.removeEventListener("keydown",wn),window.removeEventListener("keyup",Tr)}},[s,P,z,E,x,I,Le,ue,e,i,W,r]),Z.useEffect(()=>{P==="reaching"&&(ht([]),st([]),en([]),tn([]),nn(null),Wt(null),Je([]),At([]),rn([]),vn([]),zn([]),sr(1),$n(null),Wn(1),pn([]),qn([]),Pn(0),zi.current=!1,console.log("Data collection arrays reset for new trial"))},[P,Le,V,ue]),Z.useEffect(()=>{const H=U=>{!s||P!=="coin"||!z||E.length===0||U.key.toLowerCase()};return window.addEventListener("keyup",H),()=>window.removeEventListener("keyup",H)},[s,P,z,E]);const Dn=H=>{if(!s||P!=="reaching")return;const Ne=Xe.current.getBoundingClientRect(),me=H.clientX-Ne.left,re=H.clientY-Ne.top,{leftBar:Be,rightBar:Ze}=Fr(),Me=Date.now();Me-_n>=33&&(gt(me,re,Me),Pn(Me)),me>=Be.x&&me<=Be.x+Be.width&&re>=Be.y&&re<=Be.y+Be.height?_!=="left"&&(A("left"),S.current=Date.now(),Ae(!1),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{Ae(!0)},2e3)):me>=Ze.x&&me<=Ze.x+Ze.width&&re>=Ze.y&&re<=Ze.y+Ze.height&&_!=="right"&&(A("right"),S.current=Date.now(),Ae(!1),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{Ae(!0)},2e3))},oi=(H,U)=>{const Ne=GE(H),me=(U-1)%Ne.length,re=Ne[me];Te(re);const Be=Zs(H);console.log(`Block ${H} (${Be}), Round ${U} reward value set to: ${re}`)},ai=()=>{const U=Zs(0);l(!0),y(0),Et(0),ne(U),$(1),se(null),j("reaching"),J(!1),A(null),Ae(!1),Pe.current=!1,ht([]),st([]),en([]),tn([]),nn(null),Wt(null),Je([]),At([]),rn([]),vn([]),zn([]),sr(1),$n(null),Wn(1);const Ne=Ml(),me=Fl();f(Ne),k(me),qe(new Array(me.length).fill("pending")),oi(0,1),console.log("Game started with:",{initialBlockIndex:0,initialEnvironment:U,roundDuration:Ne,sequence:me})};Z.useEffect(()=>{if(e)ai();else{const H=setTimeout(()=>{ai()},100);return()=>clearTimeout(H)}},[e]),Z.useEffect(()=>()=>{C.current&&clearTimeout(C.current)},[]),Z.useEffect(()=>{const H=Xe.current;H&&(H.classList.remove("cursor-visible","cursor-hidden"),P==="coin"?H.classList.add("cursor-hidden"):H.classList.add("cursor-visible"))},[P]),Z.useEffect(()=>{const H=Xe.current;H&&H.classList.add("cursor-visible")},[]),Z.useEffect(()=>{const H=Xe.current;if(!H)return;const U=H.getContext("2d");if(U.clearRect(0,0,oe.width,oe.height),U.fillStyle="#000000",U.fillRect(0,0,oe.width,oe.height),P==="reaching"){if(U.beginPath(),U.rect(Vn.x,Vn.y,Vn.width,Vn.height),U.fillStyle=_==="left"?"#27ae60":"#3498db",U.fill(),U.strokeStyle="#2980b9",U.lineWidth=3,U.stroke(),U.beginPath(),U.rect(Mt.x,Mt.y,Mt.width,Mt.height),U.fillStyle=_==="right"?"#27ae60":"#3498db",U.fill(),U.strokeStyle="#2980b9",U.lineWidth=3,U.stroke(),c<=3){const Ne=xe;U.beginPath(),U.arc(tt.x,tt.y,or,0,2*Math.PI),U.fillStyle="#808080",U.fill(),U.strokeStyle="#606060",U.lineWidth=3,U.stroke(),U.fillStyle="#ffffff",U.font=`bold ${or*.6}px Arial`,U.textAlign="center",U.textBaseline="middle",U.fillText(Ne.toString(),tt.x,tt.y)}U.fillStyle="#ffffff",U.font='bold 48px "Orbitron", "Courier New", monospace',U.textAlign="center",U.fillText(`Score: ${m}`,oe.width/2,80),ae&&(U.fillStyle="#FF6B6B",U.font='bold 20px "Orbitron", "Courier New", monospace',U.textAlign="center",U.fillText("Move Faster!",oe.width/2,oe.height-100)),Ce&&(U.fillStyle="#00FF00",U.font='bold 36px "Orbitron", "Courier New", monospace',U.textAlign="center",U.fillText(Qe,oe.width/2,oe.height/2-100))}else if(P==="coin"){if(U.fillStyle="#ffffff",U.font='bold 48px "Orbitron", "Courier New", monospace',U.textAlign="center",U.fillText(`Score: ${m}`,oe.width/2,80),z)if(ue===0){U.beginPath(),U.arc(tt.x,tt.y,or,0,2*Math.PI),U.fillStyle="#f0f0f0",U.fill(),U.strokeStyle="#c0c0c0",U.lineWidth=4,U.stroke();const Ne="0",me=or*.4;U.font=`bold ${me}px "Orbitron", "Courier New", monospace`,U.textAlign="center",U.textBaseline="middle";const re=tt.x,Be=tt.y-or*.7;U.fillStyle="rgba(0, 0, 0, 0.4)",U.fillText(Ne,re+1,Be+1),U.fillStyle="#888888",U.fillText(Ne,re,Be)}else{const Ne=ms(U,ue);if(E.length>0){const me=tt.x-E.length*40/2;let re;ue===10?re=tt.y+Ne+120:re=tt.y+Ne+80,E.forEach((Ze,Me)=>{const et=me+Me*40;I[Me]==="correct"?U.fillStyle="#27ae60":I[Me]==="incorrect"?U.fillStyle="#e74c3c":Me===x?U.fillStyle="#f39c12":U.fillStyle="#7f8c8d",U.font='bold 36px "Arial", sans-serif',U.fillText(Ze.toUpperCase(),et,re)}),U.fillStyle="#FFD700",U.font='bold 24px "Arial", sans-serif',U.textAlign="center",E.length>0&&x<E.length&&U.fillText(`Press: ${E[x].toUpperCase()}`,tt.x,re+40);const Be=`${x}/${E.length}`;U.fillStyle="#ecf0f1",U.font='20px "Arial", sans-serif',U.textAlign="center",U.fillText(Be,tt.x,re+65)}}}else if(P==="break"){U.fillStyle="#000000",U.fillRect(0,0,oe.width,oe.height),U.fillStyle="#ffffff",U.font='bold 48px "Orbitron", "Courier New", monospace',U.textAlign="center",U.fillText(`Score: ${m}`,oe.width/2,80);const Ne=Oe+1;if(U.fillStyle="#FFFFFF",U.font='bold 32px "Orbitron", "Courier New", monospace',U.textAlign="center",U.fillText(`Block ${Ne} Complete!`,oe.width/2,oe.height/2-100),U.font='20px "Orbitron", "Courier New", monospace',U.fillText("Take a short break.",oe.width/2,oe.height/2-40),fe!==null){const me=fe+1,re=Zs(fe);U.fillText(`Press SPACE to continue to Block ${me} (${re})`,oe.width/2,oe.height/2+40)}U.font='bold 24px "Orbitron", "Courier New", monospace',U.fillText(`Current Score: ${m}`,oe.width/2,oe.height/2+100)}},[c,m,_,P,z,oe,ae,Ce,E,x,I,Le,ue,Qe,s,V,Vn,Mt,tt,or,Hn]),Z.useEffect(()=>{if(!s||P==="break"||P!=="reaching")return;const H=dh(Oe),U=Lg(Oe);H===null&&V>U&&!Pe.current&&(console.log(`GAME COMPLETE - Last block finished (block ${Oe}, round ${V})`),l(!1),J(!1),k([]),qe([]),Pe.current=!0,r?.())},[Oe,V,s,P,Pe,r]),Z.useEffect(()=>{console.log("State changed:",{currentEnvironment:Le,environmentRound:V,gamePhase:P,gameActive:s})},[Le,V,P,s]);const li=()=>{if(fe===null){console.warn("No next block available");return}const H=fe,U=Zs(H);Et(H),ne(U),se(null),$(1),j("reaching"),J(!1),A(null),Ae(!1),ht([]),st([]),en([]),tn([]),nn(null),Wt(null),Je([]),At([]),rn([]),vn([]),zn([]),sr(1),$n(null),Wn(1);const Ne=Ml(),me=Fl();f(Ne),k(me),qe(new Array(me.length).fill("pending")),oi(H,1),console.log("Switched to block:",{nextBlockIndex:H,nextEnvironment:U,roundDuration:Ne,sequence:me})};return L.jsx("div",{className:"game-container",children:L.jsx("div",{className:"canvas-container",children:L.jsx("canvas",{ref:Xe,width:oe.width,height:oe.height,onMouseMove:Dn,className:"game-canvas",style:{width:"100vw",height:"100vh",display:"block",backgroundColor:"#000000"}})})})},JE=({onPracticeComplete:i})=>{const[e,r]=Z.useState(!1),[s,l]=Z.useState(8),[c,f]=Z.useState(0),[m,y]=Z.useState(null),[_,A]=Z.useState("reaching"),[P,j]=Z.useState(0),[z,J]=Z.useState(!1),[te,q]=Z.useState(1),[oe,ke]=Z.useState(0),[ae,Ae]=Z.useState({width:window.innerWidth,height:window.innerHeight}),[Xe,Pe]=Z.useState(!1),[C,S]=Z.useState(!1),E=Z.useRef(null),k=Z.useRef(!1),x=Z.useRef(null),D=Z.useRef(null),[I,qe]=Z.useState([]),[Oe,Et]=Z.useState(0),[Le,ne]=Z.useState([]),[fe,se]=Z.useState({x:0,y:0}),V=2,$=()=>Ml(),ue=()=>{const Ue=Fl(),W=Bn.KEYS.PRACTICE_SEQUENCE_LENGTH;qe(Ue),Et(0),ne(new Array(W).fill("pending"))},Re=ae.width*.1,xe=ae.height,Te={x:0,y:0,width:Re,height:xe},Ce={x:ae.width-Re,y:0,width:Re,height:xe},Ee={x:ae.width/2,y:ae.height/2-80},Qe=()=>Math.min(ae.width,ae.height)*.12*.85;Z.useEffect(()=>{const Ue=()=>{Ae({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",Ue),()=>window.removeEventListener("resize",Ue)},[]),Z.useEffect(()=>{if(e&&_==="reaching"){const Ue=setInterval(()=>{l(W=>W<=1?(A("coin"),J(!0),ue(),0):W-1)},1e3);return()=>clearInterval(Ue)}},[e,_]),Z.useEffect(()=>{const Ue=W=>{if(!e||_!=="coin"||!z||I.length===0)return;const $t=W.key.toLowerCase(),ht=I[Oe];$t===ht?(ne(it=>{const st=[...it];return st[Oe]="correct",st}),Et(it=>{const st=it+1;return st>=I.length?(f(Zt=>Zt+Bn.REWARDS.PRACTICE_VALUE),S(!0),setTimeout(()=>{S(!1)},2e3),ke(Zt=>Zt+1),te>=V?(r(!1),qe([]),ne([]),k.current||(k.current=!0,setTimeout(()=>{i()},2e3))):(q(Zt=>Zt+1),A("reaching"),l($()),J(!1),j(0),y(null),qe([]),ne([])),0):st})):(ne(it=>{const st=[...it];return st[Oe]="incorrect",st}),setTimeout(()=>{ne(it=>{const st=[...it];return st[Oe]==="incorrect"&&(st[Oe]="pending"),st})},500))};return window.addEventListener("keydown",Ue),()=>window.removeEventListener("keydown",Ue)},[e,_,z,te,V,c,oe,i,I,Oe]);const mt=Ue=>{if(!e)return;const $t=E.current.getBoundingClientRect(),ht=Ue.clientX-$t.left,it=Ue.clientY-$t.top;se({x:ht,y:it}),ht>=Te.x&&ht<=Te.x+Te.width&&it>=Te.y&&it<=Te.y+Te.height?m!=="left"&&(y("left"),x.current=Date.now(),Pe(!1),D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{Pe(!0)},2e3)):ht>=Ce.x&&ht<=Ce.x+Ce.width&&it>=Ce.y&&it<=Ce.y+Ce.height&&m!=="right"&&(y("right"),x.current=Date.now(),Pe(!1),D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{Pe(!0)},2e3))};return Z.useEffect(()=>{r(!0),A("reaching"),l($())},[]),Z.useEffect(()=>()=>{D.current&&clearTimeout(D.current)},[]),Z.useEffect(()=>{const Ue=E.current;Ue&&(Ue.classList.remove("cursor-visible","cursor-hidden"),_==="coin"?Ue.classList.add("cursor-hidden"):Ue.classList.add("cursor-visible"))},[_]),Z.useEffect(()=>{const Ue=E.current;Ue&&Ue.classList.add("cursor-visible")},[]),Z.useEffect(()=>{const Ue=E.current;if(!Ue)return;const W=Ue.getContext("2d");if(W.clearRect(0,0,ae.width,ae.height),W.fillStyle="#000000",W.fillRect(0,0,ae.width,ae.height),_==="reaching")W.beginPath(),W.rect(Te.x,Te.y,Te.width,Te.height),W.fillStyle=m==="left"?"#27ae60":"#3498db",W.fill(),W.strokeStyle="#2980b9",W.lineWidth=3,W.stroke(),W.beginPath(),W.rect(Ce.x,Ce.y,Ce.width,Ce.height),W.fillStyle=m==="right"?"#27ae60":"#3498db",W.fill(),W.strokeStyle="#2980b9",W.lineWidth=3,W.stroke(),s<=3&&(W.beginPath(),W.arc(Ee.x,Ee.y,Qe(),0,2*Math.PI),W.fillStyle="#808080",W.fill(),W.strokeStyle="#606060",W.lineWidth=3,W.stroke(),W.fillStyle="#ffffff",W.font=`bold ${Qe()*.6}px "Arial", sans-serif`,W.textAlign="center",W.textBaseline="middle",W.fillText(Bn.REWARDS.PRACTICE_VALUE.toString(),Ee.x,Ee.y)),W.fillStyle="#ffffff",W.font='bold 48px "Orbitron", "Courier New", monospace',W.textAlign="center",W.fillText(`Score: ${c}`,ae.width/2,80),W.fillStyle="#ffffff",W.font='16px "Press Start 2P", "Courier New", monospace',W.textAlign="center",W.fillText("Move your cursor back and forth between the bars!",ae.width/2,ae.height-50),Xe&&(W.fillStyle="#FF6B6B",W.font='bold 20px "Orbitron", "Courier New", monospace',W.textAlign="center",W.fillText("Move Faster!",ae.width/2,ae.height-100)),C&&(W.fillStyle="#00FF00",W.font='bold 36px "Orbitron", "Courier New", monospace',W.textAlign="center",W.fillText(`+${Bn.REWARDS.PRACTICE_VALUE}`,ae.width/2,ae.height/2-100));else if(_==="coin"){if(z&&(((it,st)=>{let dn=0;for(let nn=0;nn<4;nn++){const _r=nn+1,Wt=st+nn*36*.8,ir=it-(_r-1)*36/2;for(let Je=0;Je<_r&&dn<10;Je++){const ot=ir+Je*36;W.beginPath(),W.arc(ot,Wt,20,0,2*Math.PI);const At=W.createRadialGradient(ot-20*.3,Wt-20*.3,0,ot,Wt,20);At.addColorStop(0,"#FFD700"),At.addColorStop(.7,"#FFA500"),At.addColorStop(1,"#FF8C00"),W.fillStyle=At,W.fill(),W.strokeStyle="#FF8C00",W.lineWidth=2,W.stroke(),W.fillStyle="#B8860B",W.fillRect(ot-2,Wt-8,4,16),dn++}}})(Ee.x,Ee.y),W.fillStyle="#FFD700",W.font='bold 24px "Arial", sans-serif',W.textAlign="center",W.textBaseline="top",W.fillText("50 points",Ee.x,Ee.y+80+30)),I.length>0){const ht=Ee.x-I.length*45/2,it=Ee.y+80+120;W.font='bold 36px "Arial", sans-serif',W.textAlign="center",W.textBaseline="middle",I.forEach((Zt,en)=>{const rr=ht+en*45;Le[en]==="correct"?W.fillStyle="#27ae60":Le[en]==="incorrect"?W.fillStyle="#e74c3c":en===Oe?W.fillStyle="#f39c12":W.fillStyle="#7f8c8d",W.fillText(Zt.toUpperCase(),rr,it)}),Oe<I.length&&(W.fillStyle="#FFD700",W.font='bold 24px "Arial", sans-serif',W.fillText(`Press: ${I[Oe].toUpperCase()}`,Ee.x,it+40));const st=`${Oe}/${I.length}`;W.fillStyle="#ecf0f1",W.font='20px "Arial", sans-serif',W.fillText(st,Ee.x,it+65)}W.fillStyle="#ffffff",W.font='bold 48px "Orbitron", "Courier New", monospace',W.textAlign="center",W.fillText(`Score: ${c}`,ae.width/2,80),W.fillStyle="#ffffff",W.font='16px "Press Start 2P", "Courier New", monospace',W.textAlign="center",I.length>0?W.fillText("Press the highlighted keys in sequence to collect the coin!",ae.width/2,ae.height-50):W.fillText("Get ready to follow the key sequence!",ae.width/2,ae.height-50),C&&(W.fillStyle="#00FF00",W.font='bold 36px "Orbitron", "Courier New", monospace',W.textAlign="center",W.fillText(`+${Bn.REWARDS.PRACTICE_VALUE}`,ae.width/2,ae.height/2-100)),_==="reaching"&&e&&(W.beginPath(),W.arc(fe.x,fe.y,8,0,2*Math.PI),W.fillStyle="#FFD700",W.fill(),W.strokeStyle="#FFA500",W.lineWidth=2,W.stroke())}},[s,c,m,_,z,P,te,V,ae,Xe,C,I,Oe,Le,fe,e]),L.jsx("div",{className:"game-container",children:L.jsx("div",{className:"canvas-container",children:L.jsx("canvas",{ref:E,width:ae.width,height:ae.height,onMouseMove:mt,className:"game-canvas",style:{width:"100vw",height:"100vh",display:"block"}})})})},ZE=()=>{const i=async e=>{try{console.log(`Exporting ${e}...`);const r=await FE(ga(ya,e)),s=[];if(r.forEach(P=>{s.push({documentId:P.id,...P.data()})}),console.log(`Found ${s.length} documents in ${e}`),s.length===0){alert(`No data found in ${e}`);return}const l=new Set;s.forEach(P=>{Object.keys(P).forEach(j=>l.add(j))});const c=Array.from(l),f=[c.join(",")];s.forEach(P=>{const j=c.map(z=>{const J=P[z];return J==null?"":Array.isArray(J)?`"${JSON.stringify(J).replace(/"/g,'""')}"`:typeof J=="object"?`"${JSON.stringify(J).replace(/"/g,'""')}"`:`"${String(J).replace(/"/g,'""')}"`});f.push(j.join(","))});const m=f.join(`
`),y=new Blob([m],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(y),A=document.createElement("a");A.href=_,A.download=`${e}_export_${new Date().toISOString().split("T")[0]}.csv`,A.click(),console.log(` Exported ${s.length} documents to CSV`)}catch(r){console.error(` Error exporting ${e}:`,r),alert(`Export failed: ${r.message}`)}};return L.jsxs("div",{style:{padding:"20px",backgroundColor:"#f5f5f5",borderRadius:"8px",margin:"20px",maxWidth:"400px"},children:[L.jsx("h3",{style:{marginTop:0,color:"#333"},children:"Export Firebase Data to CSV"}),L.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[L.jsx("button",{onClick:()=>i("globalInvigorationTrials"),style:{padding:"12px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:" Export Trials Data"}),L.jsx("button",{onClick:()=>i("globalInvigorationSubjects"),style:{padding:"12px 20px",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:" Export Subjects Data"})]}),L.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"15px",marginBottom:0},children:"Downloads CSV files with all data from your Firebase collections"})]})};function eT(){const[i,e]=Z.useState("instructions"),[r,s]=Z.useState(null),[l,c]=Z.useState(null),[f,m]=Z.useState(0),y=async()=>{try{document.documentElement.requestFullscreen?await document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?await document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen?await document.documentElement.msRequestFullscreen():(window.moveTo(0,0),window.resizeTo(screen.width,screen.height))}catch(te){console.warn("Could not enter fullscreen mode:",te);try{window.moveTo(0,0),window.resizeTo(screen.width,screen.height)}catch(q){console.warn("Could not maximize window:",q)}}},_=async()=>{await y(),e("survey")},A=async te=>{s(te);try{const q=await KE(te);c(q),console.log("Participant initialized with ID:",q)}catch(q){console.error("Failed to initialize participant data collection:",q)}m(1),e("instructions")},P=()=>{e("game")},j=()=>{e("practice")},z=()=>{m(3),e("instructions")},J=te=>{e("complete")};return L.jsxs("div",{className:"app",children:[i==="consent"&&L.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:9999},children:L.jsx("button",{onClick:()=>e("export"),style:{padding:"10px 15px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"bold",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},title:"Export Firebase data to CSV",children:" Export Data"})}),i==="consent"&&L.jsx(Gy,{onConsent:_,onDecline:()=>e("decline")}),i==="survey"&&L.jsx(Yy,{onSubmit:A}),i==="instructions"&&L.jsx(Xy,{onStart:P,onPractice:j,currentPage:f,setCurrentPage:m}),i==="practice"&&L.jsx(JE,{onPracticeComplete:z}),i==="game"&&L.jsx(XE,{participantData:r,participantId:l,onGameComplete:J}),i==="export"&&L.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",zIndex:1e4,display:"flex",justifyContent:"center",alignItems:"center"},children:L.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto"},children:[L.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[L.jsx("h2",{style:{margin:0},children:"Export Firebase Data"}),L.jsx("button",{onClick:()=>e("consent"),style:{padding:"8px 12px",backgroundColor:"#666",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:" Close"})]}),L.jsx(ZE,{})]})}),i==="complete"&&L.jsxs("div",{className:"complete-message",children:[L.jsx("h1",{children:"Study Complete!"}),L.jsx("p",{children:"Thank you for participating in our research study."})]}),i==="decline"&&L.jsxs("div",{className:"decline-message",children:[L.jsx("h1",{children:"Thank you for your time"}),L.jsx("p",{children:"You have chosen not to participate in this study."})]})]})}const tT=Qy.createRoot(document.getElementById("root"));tT.render(L.jsx(By.StrictMode,{children:L.jsx(eT,{})}));
