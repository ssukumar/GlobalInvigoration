(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function h_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var om={exports:{}},Il={},am={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ro=Symbol.for("react.element"),d_=Symbol.for("react.portal"),f_=Symbol.for("react.fragment"),p_=Symbol.for("react.strict_mode"),m_=Symbol.for("react.profiler"),g_=Symbol.for("react.provider"),y_=Symbol.for("react.context"),v_=Symbol.for("react.forward_ref"),__=Symbol.for("react.suspense"),w_=Symbol.for("react.memo"),E_=Symbol.for("react.lazy"),rf=Symbol.iterator;function T_(t){return t===null||typeof t!="object"?null:(t=rf&&t[rf]||t["@@iterator"],typeof t=="function"?t:null)}var lm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},um=Object.assign,cm={};function ts(t,e,n){this.props=t,this.context=e,this.refs=cm,this.updater=n||lm}ts.prototype.isReactComponent={};ts.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ts.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hm(){}hm.prototype=ts.prototype;function th(t,e,n){this.props=t,this.context=e,this.refs=cm,this.updater=n||lm}var nh=th.prototype=new hm;nh.constructor=th;um(nh,ts.prototype);nh.isPureReactComponent=!0;var sf=Array.isArray,dm=Object.prototype.hasOwnProperty,rh={current:null},fm={key:!0,ref:!0,__self:!0,__source:!0};function pm(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)dm.call(e,r)&&!fm.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ro,type:t,key:s,ref:a,props:i,_owner:rh.current}}function S_(t,e){return{$$typeof:Ro,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ih(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ro}function I_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var of=/\/+/g;function lu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?I_(""+t.key):e.toString(36)}function Sa(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ro:case d_:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+lu(a,0):r,sf(i)?(n="",t!=null&&(n=t.replace(of,"$&/")+"/"),Sa(i,e,n,"",function(d){return d})):i!=null&&(ih(i)&&(i=S_(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(of,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",sf(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+lu(s,l);a+=Sa(s,e,n,c,i)}else if(c=T_(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+lu(s,l++),a+=Sa(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ta(t,e,n){if(t==null)return t;var r=[],i=0;return Sa(t,r,"","",function(s){return e.call(n,s,i++)}),r}function A_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},Ia={transition:null},R_={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:Ia,ReactCurrentOwner:rh};function mm(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:ta,forEach:function(t,e,n){ta(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ta(t,function(){e++}),e},toArray:function(t){return ta(t,function(e){return e})||[]},only:function(t){if(!ih(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=ts;se.Fragment=f_;se.Profiler=m_;se.PureComponent=th;se.StrictMode=p_;se.Suspense=__;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R_;se.act=mm;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=um({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=rh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)dm.call(e,c)&&!fm.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Ro,type:t.type,key:i,ref:s,props:r,_owner:a}};se.createContext=function(t){return t={$$typeof:y_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:g_,_context:t},t.Consumer=t};se.createElement=pm;se.createFactory=function(t){var e=pm.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:v_,render:t}};se.isValidElement=ih;se.lazy=function(t){return{$$typeof:E_,_payload:{_status:-1,_result:t},_init:A_}};se.memo=function(t,e){return{$$typeof:w_,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=Ia.transition;Ia.transition={};try{t()}finally{Ia.transition=e}};se.unstable_act=mm;se.useCallback=function(t,e){return xt.current.useCallback(t,e)};se.useContext=function(t){return xt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};se.useEffect=function(t,e){return xt.current.useEffect(t,e)};se.useId=function(){return xt.current.useId()};se.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return xt.current.useMemo(t,e)};se.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)};se.useRef=function(t){return xt.current.useRef(t)};se.useState=function(t){return xt.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return xt.current.useTransition()};se.version="18.3.1";am.exports=se;var B=am.exports;const C_=h_(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_=B,k_=Symbol.for("react.element"),x_=Symbol.for("react.fragment"),N_=Object.prototype.hasOwnProperty,V_=P_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,D_={key:!0,ref:!0,__self:!0,__source:!0};function gm(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)N_.call(e,r)&&!D_.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:k_,type:t,key:s,ref:a,props:i,_owner:V_.current}}Il.Fragment=x_;Il.jsx=gm;Il.jsxs=gm;om.exports=Il;var P=om.exports,zu={},ym={exports:{}},Ht={},vm={exports:{}},_m={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,G){var ee=W.length;W.push(G);e:for(;0<ee;){var ye=ee-1>>>1,ae=W[ye];if(0<i(ae,G))W[ye]=G,W[ee]=ae,ee=ye;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var G=W[0],ee=W.pop();if(ee!==G){W[0]=ee;e:for(var ye=0,ae=W.length,Ae=ae>>>1;ye<Ae;){var pt=2*(ye+1)-1,mt=W[pt],Be=pt+1,Se=W[Be];if(0>i(mt,ee))Be<ae&&0>i(Se,mt)?(W[ye]=Se,W[Be]=ee,ye=Be):(W[ye]=mt,W[pt]=ee,ye=pt);else if(Be<ae&&0>i(Se,ee))W[ye]=Se,W[Be]=ee,ye=Be;else break e}}return G}function i(W,G){var ee=W.sortIndex-G.sortIndex;return ee!==0?ee:W.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],f=1,g=null,v=3,R=!1,x=!1,D=!1,M=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(W){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=W)r(d),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(d)}}function L(W){if(D=!1,I(W),!x)if(n(c)!==null)x=!0,an($);else{var G=n(d);G!==null&&ge(L,G.startTime-W)}}function $(W,G){x=!1,D&&(D=!1,E(m),m=-1),R=!0;var ee=v;try{for(I(G),g=n(c);g!==null&&(!(g.expirationTime>G)||W&&!A());){var ye=g.callback;if(typeof ye=="function"){g.callback=null,v=g.priorityLevel;var ae=ye(g.expirationTime<=G);G=t.unstable_now(),typeof ae=="function"?g.callback=ae:g===n(c)&&r(c),I(G)}else r(c);g=n(c)}if(g!==null)var Ae=!0;else{var pt=n(d);pt!==null&&ge(L,pt.startTime-G),Ae=!1}return Ae}finally{g=null,v=ee,R=!1}}var z=!1,_=null,m=-1,y=5,S=-1;function A(){return!(t.unstable_now()-S<y)}function C(){if(_!==null){var W=t.unstable_now();S=W;var G=!0;try{G=_(!0,W)}finally{G?w():(z=!1,_=null)}}else z=!1}var w;if(typeof T=="function")w=function(){T(C)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,re=Ve.port2;Ve.port1.onmessage=C,w=function(){re.postMessage(null)}}else w=function(){M(C,0)};function an(W){_=W,z||(z=!0,w())}function ge(W,G){m=M(function(){W(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){x||R||(x=!0,an($))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(W){switch(v){case 1:case 2:case 3:var G=3;break;default:G=v}var ee=v;v=G;try{return W()}finally{v=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,G){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ee=v;v=W;try{return G()}finally{v=ee}},t.unstable_scheduleCallback=function(W,G,ee){var ye=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ye+ee:ye):ee=ye,W){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=ee+ae,W={id:f++,callback:G,priorityLevel:W,startTime:ee,expirationTime:ae,sortIndex:-1},ee>ye?(W.sortIndex=ee,e(d,W),n(c)===null&&W===n(d)&&(D?(E(m),m=-1):D=!0,ge(L,ee-ye))):(W.sortIndex=ae,e(c,W),x||R||(x=!0,an($))),W},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(W){var G=v;return function(){var ee=v;v=G;try{return W.apply(this,arguments)}finally{v=ee}}}})(_m);vm.exports=_m;var L_=vm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_=B,Wt=L_;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wm=new Set,Js={};function oi(t,e){Bi(t,e),Bi(t+"Capture",e)}function Bi(t,e){for(Js[t]=e,t=0;t<e.length;t++)wm.add(e[t])}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$u=Object.prototype.hasOwnProperty,M_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,af={},lf={};function F_(t){return $u.call(lf,t)?!0:$u.call(af,t)?!1:M_.test(t)?lf[t]=!0:(af[t]=!0,!1)}function j_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function b_(t,e,n,r){if(e===null||typeof e>"u"||j_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var sh=/[\-:]([a-z])/g;function oh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sh,oh);dt[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sh,oh);dt[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sh,oh);dt[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ah(t,e,n,r){var i=dt.hasOwnProperty(e)?dt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(b_(e,n,i,r)&&(n=null),r||i===null?F_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var er=O_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,na=Symbol.for("react.element"),Ei=Symbol.for("react.portal"),Ti=Symbol.for("react.fragment"),lh=Symbol.for("react.strict_mode"),Wu=Symbol.for("react.profiler"),Em=Symbol.for("react.provider"),Tm=Symbol.for("react.context"),uh=Symbol.for("react.forward_ref"),Hu=Symbol.for("react.suspense"),qu=Symbol.for("react.suspense_list"),ch=Symbol.for("react.memo"),ur=Symbol.for("react.lazy"),Sm=Symbol.for("react.offscreen"),uf=Symbol.iterator;function Ss(t){return t===null||typeof t!="object"?null:(t=uf&&t[uf]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,uu;function Vs(t){if(uu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uu=e&&e[1]||""}return`
`+uu+t}var cu=!1;function hu(t,e){if(!t||cu)return"";cu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{cu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vs(t):""}function U_(t){switch(t.tag){case 5:return Vs(t.type);case 16:return Vs("Lazy");case 13:return Vs("Suspense");case 19:return Vs("SuspenseList");case 0:case 2:case 15:return t=hu(t.type,!1),t;case 11:return t=hu(t.type.render,!1),t;case 1:return t=hu(t.type,!0),t;default:return""}}function Ku(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ti:return"Fragment";case Ei:return"Portal";case Wu:return"Profiler";case lh:return"StrictMode";case Hu:return"Suspense";case qu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tm:return(t.displayName||"Context")+".Consumer";case Em:return(t._context.displayName||"Context")+".Provider";case uh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ch:return e=t.displayName||null,e!==null?e:Ku(t.type)||"Memo";case ur:e=t._payload,t=t._init;try{return Ku(t(e))}catch{}}return null}function B_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ku(e);case 8:return e===lh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Im(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function z_(t){var e=Im(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ra(t){t._valueTracker||(t._valueTracker=z_(t))}function Am(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Im(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function za(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qu(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Rm(t,e){e=e.checked,e!=null&&ah(t,"checked",e,!1)}function Gu(t,e){Rm(t,e);var n=Pr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yu(t,e.type,Pr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yu(t,e,n){(e!=="number"||za(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ds=Array.isArray;function Di(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Xu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function df(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Ds(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pr(n)}}function Cm(t,e){var n=Pr(e.value),r=Pr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ff(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Pm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ju(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Pm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ia,km=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ia=ia||document.createElement("div"),ia.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ia.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$_=["Webkit","ms","Moz","O"];Object.keys(bs).forEach(function(t){$_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bs[e]=bs[t]})});function xm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bs.hasOwnProperty(t)&&bs[t]?(""+e).trim():e+"px"}function Nm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=xm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var W_=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zu(t,e){if(e){if(W_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function ec(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tc=null;function hh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nc=null,Li=null,Oi=null;function pf(t){if(t=ko(t)){if(typeof nc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=kl(e),nc(t.stateNode,t.type,e))}}function Vm(t){Li?Oi?Oi.push(t):Oi=[t]:Li=t}function Dm(){if(Li){var t=Li,e=Oi;if(Oi=Li=null,pf(t),e)for(t=0;t<e.length;t++)pf(e[t])}}function Lm(t,e){return t(e)}function Om(){}var du=!1;function Mm(t,e,n){if(du)return t(e,n);du=!0;try{return Lm(t,e,n)}finally{du=!1,(Li!==null||Oi!==null)&&(Om(),Dm())}}function eo(t,e){var n=t.stateNode;if(n===null)return null;var r=kl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var rc=!1;if(Kn)try{var Is={};Object.defineProperty(Is,"passive",{get:function(){rc=!0}}),window.addEventListener("test",Is,Is),window.removeEventListener("test",Is,Is)}catch{rc=!1}function H_(t,e,n,r,i,s,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Us=!1,$a=null,Wa=!1,ic=null,q_={onError:function(t){Us=!0,$a=t}};function K_(t,e,n,r,i,s,a,l,c){Us=!1,$a=null,H_.apply(q_,arguments)}function Q_(t,e,n,r,i,s,a,l,c){if(K_.apply(this,arguments),Us){if(Us){var d=$a;Us=!1,$a=null}else throw Error(U(198));Wa||(Wa=!0,ic=d)}}function ai(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mf(t){if(ai(t)!==t)throw Error(U(188))}function G_(t){var e=t.alternate;if(!e){if(e=ai(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return mf(i),t;if(s===r)return mf(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function jm(t){return t=G_(t),t!==null?bm(t):null}function bm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bm(t);if(e!==null)return e;t=t.sibling}return null}var Um=Wt.unstable_scheduleCallback,gf=Wt.unstable_cancelCallback,Y_=Wt.unstable_shouldYield,X_=Wt.unstable_requestPaint,Ke=Wt.unstable_now,J_=Wt.unstable_getCurrentPriorityLevel,dh=Wt.unstable_ImmediatePriority,Bm=Wt.unstable_UserBlockingPriority,Ha=Wt.unstable_NormalPriority,Z_=Wt.unstable_LowPriority,zm=Wt.unstable_IdlePriority,Al=null,kn=null;function e0(t){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Al,t,void 0,(t.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:r0,t0=Math.log,n0=Math.LN2;function r0(t){return t>>>=0,t===0?32:31-(t0(t)/n0|0)|0}var sa=64,oa=4194304;function Ls(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Ls(l):(s&=a,s!==0&&(r=Ls(s)))}else a=n&~i,a!==0?r=Ls(a):s!==0&&(r=Ls(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vn(e),i=1<<n,r|=t[n],e&=~i;return r}function i0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-vn(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=i0(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function sc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $m(){var t=sa;return sa<<=1,!(sa&4194240)&&(sa=64),t}function fu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Co(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vn(e),t[e]=n}function o0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function fh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function Wm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hm,ph,qm,Km,Qm,oc=!1,aa=[],gr=null,yr=null,vr=null,to=new Map,no=new Map,hr=[],a0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yf(t,e){switch(t){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":to.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":no.delete(e.pointerId)}}function As(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ko(e),e!==null&&ph(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function l0(t,e,n,r,i){switch(e){case"focusin":return gr=As(gr,t,e,n,r,i),!0;case"dragenter":return yr=As(yr,t,e,n,r,i),!0;case"mouseover":return vr=As(vr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return to.set(s,As(to.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,no.set(s,As(no.get(s)||null,t,e,n,r,i)),!0}return!1}function Gm(t){var e=Hr(t.target);if(e!==null){var n=ai(e);if(n!==null){if(e=n.tag,e===13){if(e=Fm(n),e!==null){t.blockedOn=e,Qm(t.priority,function(){qm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Aa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ac(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);tc=r,n.target.dispatchEvent(r),tc=null}else return e=ko(n),e!==null&&ph(e),t.blockedOn=n,!1;e.shift()}return!0}function vf(t,e,n){Aa(t)&&n.delete(e)}function u0(){oc=!1,gr!==null&&Aa(gr)&&(gr=null),yr!==null&&Aa(yr)&&(yr=null),vr!==null&&Aa(vr)&&(vr=null),to.forEach(vf),no.forEach(vf)}function Rs(t,e){t.blockedOn===e&&(t.blockedOn=null,oc||(oc=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,u0)))}function ro(t){function e(i){return Rs(i,t)}if(0<aa.length){Rs(aa[0],t);for(var n=1;n<aa.length;n++){var r=aa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gr!==null&&Rs(gr,t),yr!==null&&Rs(yr,t),vr!==null&&Rs(vr,t),to.forEach(e),no.forEach(e),n=0;n<hr.length;n++)r=hr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hr.length&&(n=hr[0],n.blockedOn===null);)Gm(n),n.blockedOn===null&&hr.shift()}var Mi=er.ReactCurrentBatchConfig,Ka=!0;function c0(t,e,n,r){var i=_e,s=Mi.transition;Mi.transition=null;try{_e=1,mh(t,e,n,r)}finally{_e=i,Mi.transition=s}}function h0(t,e,n,r){var i=_e,s=Mi.transition;Mi.transition=null;try{_e=4,mh(t,e,n,r)}finally{_e=i,Mi.transition=s}}function mh(t,e,n,r){if(Ka){var i=ac(t,e,n,r);if(i===null)Su(t,e,r,Qa,n),yf(t,r);else if(l0(i,t,e,n,r))r.stopPropagation();else if(yf(t,r),e&4&&-1<a0.indexOf(t)){for(;i!==null;){var s=ko(i);if(s!==null&&Hm(s),s=ac(t,e,n,r),s===null&&Su(t,e,r,Qa,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Su(t,e,r,null,n)}}var Qa=null;function ac(t,e,n,r){if(Qa=null,t=hh(r),t=Hr(t),t!==null)if(e=ai(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qa=t,null}function Ym(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J_()){case dh:return 1;case Bm:return 4;case Ha:case Z_:return 16;case zm:return 536870912;default:return 16}default:return 16}}var fr=null,gh=null,Ra=null;function Xm(){if(Ra)return Ra;var t,e=gh,n=e.length,r,i="value"in fr?fr.value:fr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Ra=i.slice(t,1<r?1-r:void 0)}function Ca(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function la(){return!0}function _f(){return!1}function qt(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?la:_f,this.isPropagationStopped=_f,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),e}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yh=qt(ns),Po=be({},ns,{view:0,detail:0}),d0=qt(Po),pu,mu,Cs,Rl=be({},Po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cs&&(Cs&&t.type==="mousemove"?(pu=t.screenX-Cs.screenX,mu=t.screenY-Cs.screenY):mu=pu=0,Cs=t),pu)},movementY:function(t){return"movementY"in t?t.movementY:mu}}),wf=qt(Rl),f0=be({},Rl,{dataTransfer:0}),p0=qt(f0),m0=be({},Po,{relatedTarget:0}),gu=qt(m0),g0=be({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),y0=qt(g0),v0=be({},ns,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_0=qt(v0),w0=be({},ns,{data:0}),Ef=qt(w0),E0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},S0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=S0[t])?!!e[t]:!1}function vh(){return I0}var A0=be({},Po,{key:function(t){if(t.key){var e=E0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ca(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?T0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vh,charCode:function(t){return t.type==="keypress"?Ca(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ca(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),R0=qt(A0),C0=be({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tf=qt(C0),P0=be({},Po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vh}),k0=qt(P0),x0=be({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),N0=qt(x0),V0=be({},Rl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),D0=qt(V0),L0=[9,13,27,32],_h=Kn&&"CompositionEvent"in window,Bs=null;Kn&&"documentMode"in document&&(Bs=document.documentMode);var O0=Kn&&"TextEvent"in window&&!Bs,Jm=Kn&&(!_h||Bs&&8<Bs&&11>=Bs),Sf=String.fromCharCode(32),If=!1;function Zm(t,e){switch(t){case"keyup":return L0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Si=!1;function M0(t,e){switch(t){case"compositionend":return eg(e);case"keypress":return e.which!==32?null:(If=!0,Sf);case"textInput":return t=e.data,t===Sf&&If?null:t;default:return null}}function F0(t,e){if(Si)return t==="compositionend"||!_h&&Zm(t,e)?(t=Xm(),Ra=gh=fr=null,Si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Jm&&e.locale!=="ko"?null:e.data;default:return null}}var j0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Af(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!j0[t.type]:e==="textarea"}function tg(t,e,n,r){Vm(r),e=Ga(e,"onChange"),0<e.length&&(n=new yh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zs=null,io=null;function b0(t){dg(t,0)}function Cl(t){var e=Ri(t);if(Am(e))return t}function U0(t,e){if(t==="change")return e}var ng=!1;if(Kn){var yu;if(Kn){var vu="oninput"in document;if(!vu){var Rf=document.createElement("div");Rf.setAttribute("oninput","return;"),vu=typeof Rf.oninput=="function"}yu=vu}else yu=!1;ng=yu&&(!document.documentMode||9<document.documentMode)}function Cf(){zs&&(zs.detachEvent("onpropertychange",rg),io=zs=null)}function rg(t){if(t.propertyName==="value"&&Cl(io)){var e=[];tg(e,io,t,hh(t)),Mm(b0,e)}}function B0(t,e,n){t==="focusin"?(Cf(),zs=e,io=n,zs.attachEvent("onpropertychange",rg)):t==="focusout"&&Cf()}function z0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cl(io)}function $0(t,e){if(t==="click")return Cl(e)}function W0(t,e){if(t==="input"||t==="change")return Cl(e)}function H0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:H0;function so(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!$u.call(e,i)||!wn(t[i],e[i]))return!1}return!0}function Pf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kf(t,e){var n=Pf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pf(n)}}function ig(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ig(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sg(){for(var t=window,e=za();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=za(t.document)}return e}function wh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function q0(t){var e=sg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ig(n.ownerDocument.documentElement,n)){if(r!==null&&wh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=kf(n,s);var a=kf(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var K0=Kn&&"documentMode"in document&&11>=document.documentMode,Ii=null,lc=null,$s=null,uc=!1;function xf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uc||Ii==null||Ii!==za(r)||(r=Ii,"selectionStart"in r&&wh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$s&&so($s,r)||($s=r,r=Ga(lc,"onSelect"),0<r.length&&(e=new yh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ii)))}function ua(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ai={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionend:ua("Transition","TransitionEnd")},_u={},og={};Kn&&(og=document.createElement("div").style,"AnimationEvent"in window||(delete Ai.animationend.animation,delete Ai.animationiteration.animation,delete Ai.animationstart.animation),"TransitionEvent"in window||delete Ai.transitionend.transition);function Pl(t){if(_u[t])return _u[t];if(!Ai[t])return t;var e=Ai[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in og)return _u[t]=e[n];return t}var ag=Pl("animationend"),lg=Pl("animationiteration"),ug=Pl("animationstart"),cg=Pl("transitionend"),hg=new Map,Nf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(t,e){hg.set(t,e),oi(e,[t])}for(var wu=0;wu<Nf.length;wu++){var Eu=Nf[wu],Q0=Eu.toLowerCase(),G0=Eu[0].toUpperCase()+Eu.slice(1);Dr(Q0,"on"+G0)}Dr(ag,"onAnimationEnd");Dr(lg,"onAnimationIteration");Dr(ug,"onAnimationStart");Dr("dblclick","onDoubleClick");Dr("focusin","onFocus");Dr("focusout","onBlur");Dr(cg,"onTransitionEnd");Bi("onMouseEnter",["mouseout","mouseover"]);Bi("onMouseLeave",["mouseout","mouseover"]);Bi("onPointerEnter",["pointerout","pointerover"]);Bi("onPointerLeave",["pointerout","pointerover"]);oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Os));function Vf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Q_(r,e,void 0,t),t.currentTarget=null}function dg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;Vf(i,l,d),s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;Vf(i,l,d),s=c}}}if(Wa)throw t=ic,Wa=!1,ic=null,t}function xe(t,e){var n=e[pc];n===void 0&&(n=e[pc]=new Set);var r=t+"__bubble";n.has(r)||(fg(e,t,2,!1),n.add(r))}function Tu(t,e,n){var r=0;e&&(r|=4),fg(n,t,r,e)}var ca="_reactListening"+Math.random().toString(36).slice(2);function oo(t){if(!t[ca]){t[ca]=!0,wm.forEach(function(n){n!=="selectionchange"&&(Y0.has(n)||Tu(n,!1,t),Tu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ca]||(e[ca]=!0,Tu("selectionchange",!1,e))}}function fg(t,e,n,r){switch(Ym(e)){case 1:var i=c0;break;case 4:i=h0;break;default:i=mh}n=i.bind(null,e,n,t),i=void 0,!rc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Su(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Hr(l),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}l=l.parentNode}}r=r.return}Mm(function(){var d=s,f=hh(n),g=[];e:{var v=hg.get(t);if(v!==void 0){var R=yh,x=t;switch(t){case"keypress":if(Ca(n)===0)break e;case"keydown":case"keyup":R=R0;break;case"focusin":x="focus",R=gu;break;case"focusout":x="blur",R=gu;break;case"beforeblur":case"afterblur":R=gu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=wf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=p0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=k0;break;case ag:case lg:case ug:R=y0;break;case cg:R=N0;break;case"scroll":R=d0;break;case"wheel":R=D0;break;case"copy":case"cut":case"paste":R=_0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Tf}var D=(e&4)!==0,M=!D&&t==="scroll",E=D?v!==null?v+"Capture":null:v;D=[];for(var T=d,I;T!==null;){I=T;var L=I.stateNode;if(I.tag===5&&L!==null&&(I=L,E!==null&&(L=eo(T,E),L!=null&&D.push(ao(T,L,I)))),M)break;T=T.return}0<D.length&&(v=new R(v,x,null,n,f),g.push({event:v,listeners:D}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",v&&n!==tc&&(x=n.relatedTarget||n.fromElement)&&(Hr(x)||x[Qn]))break e;if((R||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,R?(x=n.relatedTarget||n.toElement,R=d,x=x?Hr(x):null,x!==null&&(M=ai(x),x!==M||x.tag!==5&&x.tag!==6)&&(x=null)):(R=null,x=d),R!==x)){if(D=wf,L="onMouseLeave",E="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(D=Tf,L="onPointerLeave",E="onPointerEnter",T="pointer"),M=R==null?v:Ri(R),I=x==null?v:Ri(x),v=new D(L,T+"leave",R,n,f),v.target=M,v.relatedTarget=I,L=null,Hr(f)===d&&(D=new D(E,T+"enter",x,n,f),D.target=I,D.relatedTarget=M,L=D),M=L,R&&x)t:{for(D=R,E=x,T=0,I=D;I;I=yi(I))T++;for(I=0,L=E;L;L=yi(L))I++;for(;0<T-I;)D=yi(D),T--;for(;0<I-T;)E=yi(E),I--;for(;T--;){if(D===E||E!==null&&D===E.alternate)break t;D=yi(D),E=yi(E)}D=null}else D=null;R!==null&&Df(g,v,R,D,!1),x!==null&&M!==null&&Df(g,M,x,D,!0)}}e:{if(v=d?Ri(d):window,R=v.nodeName&&v.nodeName.toLowerCase(),R==="select"||R==="input"&&v.type==="file")var $=U0;else if(Af(v))if(ng)$=W0;else{$=z0;var z=B0}else(R=v.nodeName)&&R.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&($=$0);if($&&($=$(t,d))){tg(g,$,n,f);break e}z&&z(t,v,d),t==="focusout"&&(z=v._wrapperState)&&z.controlled&&v.type==="number"&&Yu(v,"number",v.value)}switch(z=d?Ri(d):window,t){case"focusin":(Af(z)||z.contentEditable==="true")&&(Ii=z,lc=d,$s=null);break;case"focusout":$s=lc=Ii=null;break;case"mousedown":uc=!0;break;case"contextmenu":case"mouseup":case"dragend":uc=!1,xf(g,n,f);break;case"selectionchange":if(K0)break;case"keydown":case"keyup":xf(g,n,f)}var _;if(_h)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Si?Zm(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(Jm&&n.locale!=="ko"&&(Si||m!=="onCompositionStart"?m==="onCompositionEnd"&&Si&&(_=Xm()):(fr=f,gh="value"in fr?fr.value:fr.textContent,Si=!0)),z=Ga(d,m),0<z.length&&(m=new Ef(m,t,null,n,f),g.push({event:m,listeners:z}),_?m.data=_:(_=eg(n),_!==null&&(m.data=_)))),(_=O0?M0(t,n):F0(t,n))&&(d=Ga(d,"onBeforeInput"),0<d.length&&(f=new Ef("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:d}),f.data=_))}dg(g,e)})}function ao(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ga(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=eo(t,n),s!=null&&r.unshift(ao(t,s,i)),s=eo(t,e),s!=null&&r.push(ao(t,s,i))),t=t.return}return r}function yi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Df(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=eo(n,s),c!=null&&a.unshift(ao(n,c,l))):i||(c=eo(n,s),c!=null&&a.push(ao(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var X0=/\r\n?/g,J0=/\u0000|\uFFFD/g;function Lf(t){return(typeof t=="string"?t:""+t).replace(X0,`
`).replace(J0,"")}function ha(t,e,n){if(e=Lf(e),Lf(t)!==e&&n)throw Error(U(425))}function Ya(){}var cc=null,hc=null;function dc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fc=typeof setTimeout=="function"?setTimeout:void 0,Z0=typeof clearTimeout=="function"?clearTimeout:void 0,Of=typeof Promise=="function"?Promise:void 0,ew=typeof queueMicrotask=="function"?queueMicrotask:typeof Of<"u"?function(t){return Of.resolve(null).then(t).catch(tw)}:fc;function tw(t){setTimeout(function(){throw t})}function Iu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ro(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ro(e)}function _r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var rs=Math.random().toString(36).slice(2),Pn="__reactFiber$"+rs,lo="__reactProps$"+rs,Qn="__reactContainer$"+rs,pc="__reactEvents$"+rs,nw="__reactListeners$"+rs,rw="__reactHandles$"+rs;function Hr(t){var e=t[Pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qn]||n[Pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Mf(t);t!==null;){if(n=t[Pn])return n;t=Mf(t)}return e}t=n,n=t.parentNode}return null}function ko(t){return t=t[Pn]||t[Qn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ri(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function kl(t){return t[lo]||null}var mc=[],Ci=-1;function Lr(t){return{current:t}}function Ne(t){0>Ci||(t.current=mc[Ci],mc[Ci]=null,Ci--)}function Ce(t,e){Ci++,mc[Ci]=t.current,t.current=e}var kr={},Rt=Lr(kr),Lt=Lr(!1),Jr=kr;function zi(t,e){var n=t.type.contextTypes;if(!n)return kr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ot(t){return t=t.childContextTypes,t!=null}function Xa(){Ne(Lt),Ne(Rt)}function Ff(t,e,n){if(Rt.current!==kr)throw Error(U(168));Ce(Rt,e),Ce(Lt,n)}function pg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,B_(t)||"Unknown",i));return be({},n,r)}function Ja(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,Jr=Rt.current,Ce(Rt,t),Ce(Lt,Lt.current),!0}function jf(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=pg(t,e,Jr),r.__reactInternalMemoizedMergedChildContext=t,Ne(Lt),Ne(Rt),Ce(Rt,t)):Ne(Lt),Ce(Lt,n)}var zn=null,xl=!1,Au=!1;function mg(t){zn===null?zn=[t]:zn.push(t)}function iw(t){xl=!0,mg(t)}function Or(){if(!Au&&zn!==null){Au=!0;var t=0,e=_e;try{var n=zn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,xl=!1}catch(i){throw zn!==null&&(zn=zn.slice(t+1)),Um(dh,Or),i}finally{_e=e,Au=!1}}return null}var Pi=[],ki=0,Za=null,el=0,Xt=[],Jt=0,Zr=null,$n=1,Wn="";function zr(t,e){Pi[ki++]=el,Pi[ki++]=Za,Za=t,el=e}function gg(t,e,n){Xt[Jt++]=$n,Xt[Jt++]=Wn,Xt[Jt++]=Zr,Zr=t;var r=$n;t=Wn;var i=32-vn(r)-1;r&=~(1<<i),n+=1;var s=32-vn(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,$n=1<<32-vn(e)+i|n<<i|r,Wn=s+t}else $n=1<<s|n<<i|r,Wn=t}function Eh(t){t.return!==null&&(zr(t,1),gg(t,1,0))}function Th(t){for(;t===Za;)Za=Pi[--ki],Pi[ki]=null,el=Pi[--ki],Pi[ki]=null;for(;t===Zr;)Zr=Xt[--Jt],Xt[Jt]=null,Wn=Xt[--Jt],Xt[Jt]=null,$n=Xt[--Jt],Xt[Jt]=null}var $t=null,zt=null,De=!1,gn=null;function yg(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$t=t,zt=_r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$t=t,zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zr!==null?{id:$n,overflow:Wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$t=t,zt=null,!0):!1;default:return!1}}function gc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yc(t){if(De){var e=zt;if(e){var n=e;if(!bf(t,e)){if(gc(t))throw Error(U(418));e=_r(n.nextSibling);var r=$t;e&&bf(t,e)?yg(r,n):(t.flags=t.flags&-4097|2,De=!1,$t=t)}}else{if(gc(t))throw Error(U(418));t.flags=t.flags&-4097|2,De=!1,$t=t}}}function Uf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function da(t){if(t!==$t)return!1;if(!De)return Uf(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dc(t.type,t.memoizedProps)),e&&(e=zt)){if(gc(t))throw vg(),Error(U(418));for(;e;)yg(t,e),e=_r(e.nextSibling)}if(Uf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zt=_r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zt=null}}else zt=$t?_r(t.stateNode.nextSibling):null;return!0}function vg(){for(var t=zt;t;)t=_r(t.nextSibling)}function $i(){zt=$t=null,De=!1}function Sh(t){gn===null?gn=[t]:gn.push(t)}var sw=er.ReactCurrentBatchConfig;function Ps(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function fa(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bf(t){var e=t._init;return e(t._payload)}function _g(t){function e(E,T){if(t){var I=E.deletions;I===null?(E.deletions=[T],E.flags|=16):I.push(T)}}function n(E,T){if(!t)return null;for(;T!==null;)e(E,T),T=T.sibling;return null}function r(E,T){for(E=new Map;T!==null;)T.key!==null?E.set(T.key,T):E.set(T.index,T),T=T.sibling;return E}function i(E,T){return E=Sr(E,T),E.index=0,E.sibling=null,E}function s(E,T,I){return E.index=I,t?(I=E.alternate,I!==null?(I=I.index,I<T?(E.flags|=2,T):I):(E.flags|=2,T)):(E.flags|=1048576,T)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,T,I,L){return T===null||T.tag!==6?(T=Vu(I,E.mode,L),T.return=E,T):(T=i(T,I),T.return=E,T)}function c(E,T,I,L){var $=I.type;return $===Ti?f(E,T,I.props.children,L,I.key):T!==null&&(T.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===ur&&Bf($)===T.type)?(L=i(T,I.props),L.ref=Ps(E,T,I),L.return=E,L):(L=La(I.type,I.key,I.props,null,E.mode,L),L.ref=Ps(E,T,I),L.return=E,L)}function d(E,T,I,L){return T===null||T.tag!==4||T.stateNode.containerInfo!==I.containerInfo||T.stateNode.implementation!==I.implementation?(T=Du(I,E.mode,L),T.return=E,T):(T=i(T,I.children||[]),T.return=E,T)}function f(E,T,I,L,$){return T===null||T.tag!==7?(T=Yr(I,E.mode,L,$),T.return=E,T):(T=i(T,I),T.return=E,T)}function g(E,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Vu(""+T,E.mode,I),T.return=E,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case na:return I=La(T.type,T.key,T.props,null,E.mode,I),I.ref=Ps(E,null,T),I.return=E,I;case Ei:return T=Du(T,E.mode,I),T.return=E,T;case ur:var L=T._init;return g(E,L(T._payload),I)}if(Ds(T)||Ss(T))return T=Yr(T,E.mode,I,null),T.return=E,T;fa(E,T)}return null}function v(E,T,I,L){var $=T!==null?T.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return $!==null?null:l(E,T,""+I,L);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case na:return I.key===$?c(E,T,I,L):null;case Ei:return I.key===$?d(E,T,I,L):null;case ur:return $=I._init,v(E,T,$(I._payload),L)}if(Ds(I)||Ss(I))return $!==null?null:f(E,T,I,L,null);fa(E,I)}return null}function R(E,T,I,L,$){if(typeof L=="string"&&L!==""||typeof L=="number")return E=E.get(I)||null,l(T,E,""+L,$);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case na:return E=E.get(L.key===null?I:L.key)||null,c(T,E,L,$);case Ei:return E=E.get(L.key===null?I:L.key)||null,d(T,E,L,$);case ur:var z=L._init;return R(E,T,I,z(L._payload),$)}if(Ds(L)||Ss(L))return E=E.get(I)||null,f(T,E,L,$,null);fa(T,L)}return null}function x(E,T,I,L){for(var $=null,z=null,_=T,m=T=0,y=null;_!==null&&m<I.length;m++){_.index>m?(y=_,_=null):y=_.sibling;var S=v(E,_,I[m],L);if(S===null){_===null&&(_=y);break}t&&_&&S.alternate===null&&e(E,_),T=s(S,T,m),z===null?$=S:z.sibling=S,z=S,_=y}if(m===I.length)return n(E,_),De&&zr(E,m),$;if(_===null){for(;m<I.length;m++)_=g(E,I[m],L),_!==null&&(T=s(_,T,m),z===null?$=_:z.sibling=_,z=_);return De&&zr(E,m),$}for(_=r(E,_);m<I.length;m++)y=R(_,E,m,I[m],L),y!==null&&(t&&y.alternate!==null&&_.delete(y.key===null?m:y.key),T=s(y,T,m),z===null?$=y:z.sibling=y,z=y);return t&&_.forEach(function(A){return e(E,A)}),De&&zr(E,m),$}function D(E,T,I,L){var $=Ss(I);if(typeof $!="function")throw Error(U(150));if(I=$.call(I),I==null)throw Error(U(151));for(var z=$=null,_=T,m=T=0,y=null,S=I.next();_!==null&&!S.done;m++,S=I.next()){_.index>m?(y=_,_=null):y=_.sibling;var A=v(E,_,S.value,L);if(A===null){_===null&&(_=y);break}t&&_&&A.alternate===null&&e(E,_),T=s(A,T,m),z===null?$=A:z.sibling=A,z=A,_=y}if(S.done)return n(E,_),De&&zr(E,m),$;if(_===null){for(;!S.done;m++,S=I.next())S=g(E,S.value,L),S!==null&&(T=s(S,T,m),z===null?$=S:z.sibling=S,z=S);return De&&zr(E,m),$}for(_=r(E,_);!S.done;m++,S=I.next())S=R(_,E,m,S.value,L),S!==null&&(t&&S.alternate!==null&&_.delete(S.key===null?m:S.key),T=s(S,T,m),z===null?$=S:z.sibling=S,z=S);return t&&_.forEach(function(C){return e(E,C)}),De&&zr(E,m),$}function M(E,T,I,L){if(typeof I=="object"&&I!==null&&I.type===Ti&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case na:e:{for(var $=I.key,z=T;z!==null;){if(z.key===$){if($=I.type,$===Ti){if(z.tag===7){n(E,z.sibling),T=i(z,I.props.children),T.return=E,E=T;break e}}else if(z.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===ur&&Bf($)===z.type){n(E,z.sibling),T=i(z,I.props),T.ref=Ps(E,z,I),T.return=E,E=T;break e}n(E,z);break}else e(E,z);z=z.sibling}I.type===Ti?(T=Yr(I.props.children,E.mode,L,I.key),T.return=E,E=T):(L=La(I.type,I.key,I.props,null,E.mode,L),L.ref=Ps(E,T,I),L.return=E,E=L)}return a(E);case Ei:e:{for(z=I.key;T!==null;){if(T.key===z)if(T.tag===4&&T.stateNode.containerInfo===I.containerInfo&&T.stateNode.implementation===I.implementation){n(E,T.sibling),T=i(T,I.children||[]),T.return=E,E=T;break e}else{n(E,T);break}else e(E,T);T=T.sibling}T=Du(I,E.mode,L),T.return=E,E=T}return a(E);case ur:return z=I._init,M(E,T,z(I._payload),L)}if(Ds(I))return x(E,T,I,L);if(Ss(I))return D(E,T,I,L);fa(E,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,T!==null&&T.tag===6?(n(E,T.sibling),T=i(T,I),T.return=E,E=T):(n(E,T),T=Vu(I,E.mode,L),T.return=E,E=T),a(E)):n(E,T)}return M}var Wi=_g(!0),wg=_g(!1),tl=Lr(null),nl=null,xi=null,Ih=null;function Ah(){Ih=xi=nl=null}function Rh(t){var e=tl.current;Ne(tl),t._currentValue=e}function vc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fi(t,e){nl=t,Ih=xi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dt=!0),t.firstContext=null)}function sn(t){var e=t._currentValue;if(Ih!==t)if(t={context:t,memoizedValue:e,next:null},xi===null){if(nl===null)throw Error(U(308));xi=t,nl.dependencies={lanes:0,firstContext:t}}else xi=xi.next=t;return e}var qr=null;function Ch(t){qr===null?qr=[t]:qr.push(t)}function Eg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ch(e)):(n.next=i.next,i.next=n),e.interleaved=n,Gn(t,r)}function Gn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cr=!1;function Ph(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Gn(t,n)}return i=r.interleaved,i===null?(e.next=e,Ch(r)):(e.next=i.next,i.next=e),r.interleaved=e,Gn(t,n)}function Pa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fh(t,n)}}function zf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function rl(t,e,n,r){var i=t.updateQueue;cr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?s=d:a.next=d,a=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(s!==null){var g=i.baseState;a=0,f=d=c=null,l=s;do{var v=l.lane,R=l.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,D=l;switch(v=e,R=n,D.tag){case 1:if(x=D.payload,typeof x=="function"){g=x.call(R,g,v);break e}g=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=D.payload,v=typeof x=="function"?x.call(R,g,v):x,v==null)break e;g=be({},g,v);break e;case 2:cr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[l]:v.push(l))}else R={eventTime:R,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=R,c=g):f=f.next=R,a|=v;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;v=l,l=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(1);if(f===null&&(c=g),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ti|=a,t.lanes=a,t.memoizedState=g}}function $f(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var xo={},xn=Lr(xo),uo=Lr(xo),co=Lr(xo);function Kr(t){if(t===xo)throw Error(U(174));return t}function kh(t,e){switch(Ce(co,e),Ce(uo,t),Ce(xn,xo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ju(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ju(e,t)}Ne(xn),Ce(xn,e)}function Hi(){Ne(xn),Ne(uo),Ne(co)}function Sg(t){Kr(co.current);var e=Kr(xn.current),n=Ju(e,t.type);e!==n&&(Ce(uo,t),Ce(xn,n))}function xh(t){uo.current===t&&(Ne(xn),Ne(uo))}var Fe=Lr(0);function il(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ru=[];function Nh(){for(var t=0;t<Ru.length;t++)Ru[t]._workInProgressVersionPrimary=null;Ru.length=0}var ka=er.ReactCurrentDispatcher,Cu=er.ReactCurrentBatchConfig,ei=0,je=null,Xe=null,rt=null,sl=!1,Ws=!1,ho=0,ow=0;function wt(){throw Error(U(321))}function Vh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function Dh(t,e,n,r,i,s){if(ei=s,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ka.current=t===null||t.memoizedState===null?cw:hw,t=n(r,i),Ws){s=0;do{if(Ws=!1,ho=0,25<=s)throw Error(U(301));s+=1,rt=Xe=null,e.updateQueue=null,ka.current=dw,t=n(r,i)}while(Ws)}if(ka.current=ol,e=Xe!==null&&Xe.next!==null,ei=0,rt=Xe=je=null,sl=!1,e)throw Error(U(300));return t}function Lh(){var t=ho!==0;return ho=0,t}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?je.memoizedState=rt=t:rt=rt.next=t,rt}function on(){if(Xe===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=rt===null?je.memoizedState:rt.next;if(e!==null)rt=e,Xe=t;else{if(t===null)throw Error(U(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},rt===null?je.memoizedState=rt=t:rt=rt.next=t}return rt}function fo(t,e){return typeof e=="function"?e(t):e}function Pu(t){var e=on(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Xe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,c=null,d=s;do{var f=d.lane;if((ei&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=g,a=r):c=c.next=g,je.lanes|=f,ti|=f}d=d.next}while(d!==null&&d!==s);c===null?a=r:c.next=l,wn(r,e.memoizedState)||(Dt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,je.lanes|=s,ti|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ku(t){var e=on(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);wn(s,e.memoizedState)||(Dt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ig(){}function Ag(t,e){var n=je,r=on(),i=e(),s=!wn(r.memoizedState,i);if(s&&(r.memoizedState=i,Dt=!0),r=r.queue,Oh(Pg.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,po(9,Cg.bind(null,n,r,i,e),void 0,null),it===null)throw Error(U(349));ei&30||Rg(n,e,i)}return i}function Rg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Cg(t,e,n,r){e.value=n,e.getSnapshot=r,kg(e)&&xg(t)}function Pg(t,e,n){return n(function(){kg(e)&&xg(t)})}function kg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function xg(t){var e=Gn(t,1);e!==null&&_n(e,t,1,-1)}function Wf(t){var e=Cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:t},e.queue=t,t=t.dispatch=uw.bind(null,je,t),[e.memoizedState,t]}function po(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ng(){return on().memoizedState}function xa(t,e,n,r){var i=Cn();je.flags|=t,i.memoizedState=po(1|e,n,void 0,r===void 0?null:r)}function Nl(t,e,n,r){var i=on();r=r===void 0?null:r;var s=void 0;if(Xe!==null){var a=Xe.memoizedState;if(s=a.destroy,r!==null&&Vh(r,a.deps)){i.memoizedState=po(e,n,s,r);return}}je.flags|=t,i.memoizedState=po(1|e,n,s,r)}function Hf(t,e){return xa(8390656,8,t,e)}function Oh(t,e){return Nl(2048,8,t,e)}function Vg(t,e){return Nl(4,2,t,e)}function Dg(t,e){return Nl(4,4,t,e)}function Lg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Og(t,e,n){return n=n!=null?n.concat([t]):null,Nl(4,4,Lg.bind(null,e,t),n)}function Mh(){}function Mg(t,e){var n=on();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Fg(t,e){var n=on();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jg(t,e,n){return ei&21?(wn(n,e)||(n=$m(),je.lanes|=n,ti|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=n)}function aw(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Cu.transition;Cu.transition={};try{t(!1),e()}finally{_e=n,Cu.transition=r}}function bg(){return on().memoizedState}function lw(t,e,n){var r=Tr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ug(t))Bg(e,n);else if(n=Eg(t,e,n,r),n!==null){var i=kt();_n(n,t,r,i),zg(n,e,r)}}function uw(t,e,n){var r=Tr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ug(t))Bg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,wn(l,a)){var c=e.interleaved;c===null?(i.next=i,Ch(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Eg(t,e,i,r),n!==null&&(i=kt(),_n(n,t,r,i),zg(n,e,r))}}function Ug(t){var e=t.alternate;return t===je||e!==null&&e===je}function Bg(t,e){Ws=sl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fh(t,n)}}var ol={readContext:sn,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},cw={readContext:sn,useCallback:function(t,e){return Cn().memoizedState=[t,e===void 0?null:e],t},useContext:sn,useEffect:Hf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xa(4194308,4,Lg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xa(4194308,4,t,e)},useInsertionEffect:function(t,e){return xa(4,2,t,e)},useMemo:function(t,e){var n=Cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lw.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=Cn();return t={current:t},e.memoizedState=t},useState:Wf,useDebugValue:Mh,useDeferredValue:function(t){return Cn().memoizedState=t},useTransition:function(){var t=Wf(!1),e=t[0];return t=aw.bind(null,t[1]),Cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,i=Cn();if(De){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),it===null)throw Error(U(349));ei&30||Rg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Hf(Pg.bind(null,r,s,t),[t]),r.flags|=2048,po(9,Cg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Cn(),e=it.identifierPrefix;if(De){var n=Wn,r=$n;n=(r&~(1<<32-vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ho++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ow++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hw={readContext:sn,useCallback:Mg,useContext:sn,useEffect:Oh,useImperativeHandle:Og,useInsertionEffect:Vg,useLayoutEffect:Dg,useMemo:Fg,useReducer:Pu,useRef:Ng,useState:function(){return Pu(fo)},useDebugValue:Mh,useDeferredValue:function(t){var e=on();return jg(e,Xe.memoizedState,t)},useTransition:function(){var t=Pu(fo)[0],e=on().memoizedState;return[t,e]},useMutableSource:Ig,useSyncExternalStore:Ag,useId:bg,unstable_isNewReconciler:!1},dw={readContext:sn,useCallback:Mg,useContext:sn,useEffect:Oh,useImperativeHandle:Og,useInsertionEffect:Vg,useLayoutEffect:Dg,useMemo:Fg,useReducer:ku,useRef:Ng,useState:function(){return ku(fo)},useDebugValue:Mh,useDeferredValue:function(t){var e=on();return Xe===null?e.memoizedState=t:jg(e,Xe.memoizedState,t)},useTransition:function(){var t=ku(fo)[0],e=on().memoizedState;return[t,e]},useMutableSource:Ig,useSyncExternalStore:Ag,useId:bg,unstable_isNewReconciler:!1};function pn(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _c(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vl={isMounted:function(t){return(t=t._reactInternals)?ai(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kt(),i=Tr(t),s=Hn(r,i);s.payload=e,n!=null&&(s.callback=n),e=wr(t,s,i),e!==null&&(_n(e,t,i,r),Pa(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kt(),i=Tr(t),s=Hn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=wr(t,s,i),e!==null&&(_n(e,t,i,r),Pa(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kt(),r=Tr(t),i=Hn(n,r);i.tag=2,e!=null&&(i.callback=e),e=wr(t,i,r),e!==null&&(_n(e,t,r,n),Pa(e,t,r))}};function qf(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!so(n,r)||!so(i,s):!0}function $g(t,e,n){var r=!1,i=kr,s=e.contextType;return typeof s=="object"&&s!==null?s=sn(s):(i=Ot(e)?Jr:Rt.current,r=e.contextTypes,s=(r=r!=null)?zi(t,i):kr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Kf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vl.enqueueReplaceState(e,e.state,null)}function wc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ph(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=sn(s):(s=Ot(e)?Jr:Rt.current,i.context=zi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_c(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vl.enqueueReplaceState(i,i.state,null),rl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function qi(t,e){try{var n="",r=e;do n+=U_(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function xu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ec(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fw=typeof WeakMap=="function"?WeakMap:Map;function Wg(t,e,n){n=Hn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ll||(ll=!0,Nc=r),Ec(t,e)},n}function Hg(t,e,n){n=Hn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ec(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ec(t,e),typeof r!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Qf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Cw.bind(null,t,e,n),e.then(t,t))}function Gf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hn(-1,1),e.tag=2,wr(n,e,1))),n.lanes|=1),t)}var pw=er.ReactCurrentOwner,Dt=!1;function Pt(t,e,n,r){e.child=t===null?wg(e,null,n,r):Wi(e,t.child,n,r)}function Xf(t,e,n,r,i){n=n.render;var s=e.ref;return Fi(e,i),r=Dh(t,e,n,r,s,i),n=Lh(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yn(t,e,i)):(De&&n&&Eh(e),e.flags|=1,Pt(t,e,r,i),e.child)}function Jf(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Wh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qg(t,e,s,r,i)):(t=La(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:so,n(a,r)&&t.ref===e.ref)return Yn(t,e,i)}return e.flags|=1,t=Sr(s,r),t.ref=e.ref,t.return=e,e.child=t}function qg(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(so(s,r)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Dt=!0);else return e.lanes=t.lanes,Yn(t,e,i)}return Tc(t,e,n,r,i)}function Kg(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Vi,Bt),Bt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(Vi,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ce(Vi,Bt),Bt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ce(Vi,Bt),Bt|=r;return Pt(t,e,i,n),e.child}function Qg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tc(t,e,n,r,i){var s=Ot(n)?Jr:Rt.current;return s=zi(e,s),Fi(e,i),n=Dh(t,e,n,r,s,i),r=Lh(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yn(t,e,i)):(De&&r&&Eh(e),e.flags|=1,Pt(t,e,n,i),e.child)}function Zf(t,e,n,r,i){if(Ot(n)){var s=!0;Ja(e)}else s=!1;if(Fi(e,i),e.stateNode===null)Na(t,e),$g(e,n,r),wc(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=sn(d):(d=Ot(n)?Jr:Rt.current,d=zi(e,d));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Kf(e,a,r,d),cr=!1;var v=e.memoizedState;a.state=v,rl(e,r,a,i),c=e.memoizedState,l!==r||v!==c||Lt.current||cr?(typeof f=="function"&&(_c(e,n,f,r),c=e.memoizedState),(l=cr||qf(e,n,l,r,v,c,d))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Tg(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:pn(e.type,l),a.props=d,g=e.pendingProps,v=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=sn(c):(c=Ot(n)?Jr:Rt.current,c=zi(e,c));var R=n.getDerivedStateFromProps;(f=typeof R=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==g||v!==c)&&Kf(e,a,r,c),cr=!1,v=e.memoizedState,a.state=v,rl(e,r,a,i);var x=e.memoizedState;l!==g||v!==x||Lt.current||cr?(typeof R=="function"&&(_c(e,n,R,r),x=e.memoizedState),(d=cr||qf(e,n,d,r,v,x,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),a.props=r,a.state=x,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return Sc(t,e,n,r,s,i)}function Sc(t,e,n,r,i,s){Qg(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&jf(e,n,!1),Yn(t,e,s);r=e.stateNode,pw.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Wi(e,t.child,null,s),e.child=Wi(e,null,l,s)):Pt(t,e,l,s),e.memoizedState=r.state,i&&jf(e,n,!0),e.child}function Gg(t){var e=t.stateNode;e.pendingContext?Ff(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ff(t,e.context,!1),kh(t,e.containerInfo)}function ep(t,e,n,r,i){return $i(),Sh(i),e.flags|=256,Pt(t,e,n,r),e.child}var Ic={dehydrated:null,treeContext:null,retryLane:0};function Ac(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yg(t,e,n){var r=e.pendingProps,i=Fe.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ce(Fe,i&1),t===null)return yc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Ol(a,r,0,null),t=Yr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ac(n),e.memoizedState=Ic,t):Fh(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return mw(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Sr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Sr(l,s):(s=Yr(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?Ac(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=Ic,r}return s=t.child,t=s.sibling,r=Sr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fh(t,e){return e=Ol({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pa(t,e,n,r){return r!==null&&Sh(r),Wi(e,t.child,null,n),t=Fh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mw(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=xu(Error(U(422))),pa(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ol({mode:"visible",children:r.children},i,0,null),s=Yr(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Wi(e,t.child,null,a),e.child.memoizedState=Ac(a),e.memoizedState=Ic,s);if(!(e.mode&1))return pa(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(U(419)),r=xu(s,r,void 0),pa(t,e,a,r)}if(l=(a&t.childLanes)!==0,Dt||l){if(r=it,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gn(t,i),_n(r,t,i,-1))}return $h(),r=xu(Error(U(421))),pa(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Pw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,zt=_r(i.nextSibling),$t=e,De=!0,gn=null,t!==null&&(Xt[Jt++]=$n,Xt[Jt++]=Wn,Xt[Jt++]=Zr,$n=t.id,Wn=t.overflow,Zr=e),e=Fh(e,r.children),e.flags|=4096,e)}function tp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vc(t.return,e,n)}function Nu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Xg(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Pt(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tp(t,n,e);else if(t.tag===19)tp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&il(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Nu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&il(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Nu(e,!0,n,null,s);break;case"together":Nu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Na(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ti|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Sr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Sr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gw(t,e,n){switch(e.tag){case 3:Gg(e),$i();break;case 5:Sg(e);break;case 1:Ot(e.type)&&Ja(e);break;case 4:kh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(tl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?Yg(t,e,n):(Ce(Fe,Fe.current&1),t=Yn(t,e,n),t!==null?t.sibling:null);Ce(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Xg(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,Kg(t,e,n)}return Yn(t,e,n)}var Jg,Rc,Zg,ey;Jg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rc=function(){};Zg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Kr(xn.current);var s=null;switch(n){case"input":i=Qu(t,i),r=Qu(t,r),s=[];break;case"select":i=be({},i,{value:void 0}),r=be({},r,{value:void 0}),s=[];break;case"textarea":i=Xu(t,i),r=Xu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ya)}Zu(n,r);var a;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Js.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Js.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&xe("scroll",t),s||l===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};ey=function(t,e,n,r){n!==r&&(e.flags|=4)};function ks(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yw(t,e,n){var r=e.pendingProps;switch(Th(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return Ot(e.type)&&Xa(),Et(e),null;case 3:return r=e.stateNode,Hi(),Ne(Lt),Ne(Rt),Nh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(da(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(Lc(gn),gn=null))),Rc(t,e),Et(e),null;case 5:xh(e);var i=Kr(co.current);if(n=e.type,t!==null&&e.stateNode!=null)Zg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Et(e),null}if(t=Kr(xn.current),da(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Pn]=e,r[lo]=s,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(i=0;i<Os.length;i++)xe(Os[i],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":cf(r,s),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xe("invalid",r);break;case"textarea":df(r,s),xe("invalid",r)}Zu(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ha(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ha(r.textContent,l,t),i=["children",""+l]):Js.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&xe("scroll",r)}switch(n){case"input":ra(r),hf(r,s,!0);break;case"textarea":ra(r),ff(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ya)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Pn]=e,t[lo]=r,Jg(t,e,!1,!1),e.stateNode=t;e:{switch(a=ec(n,r),n){case"dialog":xe("cancel",t),xe("close",t),i=r;break;case"iframe":case"object":case"embed":xe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Os.length;i++)xe(Os[i],t);i=r;break;case"source":xe("error",t),i=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),i=r;break;case"details":xe("toggle",t),i=r;break;case"input":cf(t,r),i=Qu(t,r),xe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=be({},r,{value:void 0}),xe("invalid",t);break;case"textarea":df(t,r),i=Xu(t,r),xe("invalid",t);break;default:i=r}Zu(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?Nm(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&km(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Zs(t,c):typeof c=="number"&&Zs(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Js.hasOwnProperty(s)?c!=null&&s==="onScroll"&&xe("scroll",t):c!=null&&ah(t,s,c,a))}switch(n){case"input":ra(t),hf(t,r,!1);break;case"textarea":ra(t),ff(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Di(t,!!r.multiple,s,!1):r.defaultValue!=null&&Di(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ya)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)ey(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Kr(co.current),Kr(xn.current),da(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pn]=e,(s=r.nodeValue!==n)&&(t=$t,t!==null))switch(t.tag){case 3:ha(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ha(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pn]=e,e.stateNode=r}return Et(e),null;case 13:if(Ne(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&zt!==null&&e.mode&1&&!(e.flags&128))vg(),$i(),e.flags|=98560,s=!1;else if(s=da(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Pn]=e}else $i(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),s=!1}else gn!==null&&(Lc(gn),gn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?Ze===0&&(Ze=3):$h())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return Hi(),Rc(t,e),t===null&&oo(e.stateNode.containerInfo),Et(e),null;case 10:return Rh(e.type._context),Et(e),null;case 17:return Ot(e.type)&&Xa(),Et(e),null;case 19:if(Ne(Fe),s=e.memoizedState,s===null)return Et(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)ks(s,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=il(t),a!==null){for(e.flags|=128,ks(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Fe,Fe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ke()>Ki&&(e.flags|=128,r=!0,ks(s,!1),e.lanes=4194304)}else{if(!r)if(t=il(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ks(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!De)return Et(e),null}else 2*Ke()-s.renderingStartTime>Ki&&n!==1073741824&&(e.flags|=128,r=!0,ks(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ke(),e.sibling=null,n=Fe.current,Ce(Fe,r?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return zh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bt&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function vw(t,e){switch(Th(e),e.tag){case 1:return Ot(e.type)&&Xa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hi(),Ne(Lt),Ne(Rt),Nh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xh(e),null;case 13:if(Ne(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));$i()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(Fe),null;case 4:return Hi(),null;case 10:return Rh(e.type._context),null;case 22:case 23:return zh(),null;case 24:return null;default:return null}}var ma=!1,It=!1,_w=typeof WeakSet=="function"?WeakSet:Set,q=null;function Ni(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(t,e,r)}else n.current=null}function Cc(t,e,n){try{n()}catch(r){We(t,e,r)}}var np=!1;function ww(t,e){if(cc=Ka,t=sg(),wh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,f=0,g=t,v=null;t:for(;;){for(var R;g!==n||i!==0&&g.nodeType!==3||(l=a+i),g!==s||r!==0&&g.nodeType!==3||(c=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(R=g.firstChild)!==null;)v=g,g=R;for(;;){if(g===t)break t;if(v===n&&++d===i&&(l=a),v===s&&++f===r&&(c=a),(R=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=R}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(hc={focusedElem:t,selectionRange:n},Ka=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var D=x.memoizedProps,M=x.memoizedState,E=e.stateNode,T=E.getSnapshotBeforeUpdate(e.elementType===e.type?D:pn(e.type,D),M);E.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(L){We(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return x=np,np=!1,x}function Hs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Cc(e,n,s)}i=i.next}while(i!==r)}}function Dl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Pc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ty(t){var e=t.alternate;e!==null&&(t.alternate=null,ty(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[lo],delete e[pc],delete e[nw],delete e[rw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ny(t){return t.tag===5||t.tag===3||t.tag===4}function rp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ny(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ya));else if(r!==4&&(t=t.child,t!==null))for(kc(t,e,n),t=t.sibling;t!==null;)kc(t,e,n),t=t.sibling}function xc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xc(t,e,n),t=t.sibling;t!==null;)xc(t,e,n),t=t.sibling}var at=null,mn=!1;function lr(t,e,n){for(n=n.child;n!==null;)ry(t,e,n),n=n.sibling}function ry(t,e,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Al,n)}catch{}switch(n.tag){case 5:It||Ni(n,e);case 6:var r=at,i=mn;at=null,lr(t,e,n),at=r,mn=i,at!==null&&(mn?(t=at,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(mn?(t=at,n=n.stateNode,t.nodeType===8?Iu(t.parentNode,n):t.nodeType===1&&Iu(t,n),ro(t)):Iu(at,n.stateNode));break;case 4:r=at,i=mn,at=n.stateNode.containerInfo,mn=!0,lr(t,e,n),at=r,mn=i;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Cc(n,e,a),i=i.next}while(i!==r)}lr(t,e,n);break;case 1:if(!It&&(Ni(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){We(n,e,l)}lr(t,e,n);break;case 21:lr(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,lr(t,e,n),It=r):lr(t,e,n);break;default:lr(t,e,n)}}function ip(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _w),e.forEach(function(r){var i=kw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:at=l.stateNode,mn=!1;break e;case 3:at=l.stateNode.containerInfo,mn=!0;break e;case 4:at=l.stateNode.containerInfo,mn=!0;break e}l=l.return}if(at===null)throw Error(U(160));ry(s,a,i),at=null,mn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){We(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iy(e,t),e=e.sibling}function iy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),Rn(t),r&4){try{Hs(3,t,t.return),Dl(3,t)}catch(D){We(t,t.return,D)}try{Hs(5,t,t.return)}catch(D){We(t,t.return,D)}}break;case 1:fn(e,t),Rn(t),r&512&&n!==null&&Ni(n,n.return);break;case 5:if(fn(e,t),Rn(t),r&512&&n!==null&&Ni(n,n.return),t.flags&32){var i=t.stateNode;try{Zs(i,"")}catch(D){We(t,t.return,D)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Rm(i,s),ec(l,a);var d=ec(l,s);for(a=0;a<c.length;a+=2){var f=c[a],g=c[a+1];f==="style"?Nm(i,g):f==="dangerouslySetInnerHTML"?km(i,g):f==="children"?Zs(i,g):ah(i,f,g,d)}switch(l){case"input":Gu(i,s);break;case"textarea":Cm(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var R=s.value;R!=null?Di(i,!!s.multiple,R,!1):v!==!!s.multiple&&(s.defaultValue!=null?Di(i,!!s.multiple,s.defaultValue,!0):Di(i,!!s.multiple,s.multiple?[]:"",!1))}i[lo]=s}catch(D){We(t,t.return,D)}}break;case 6:if(fn(e,t),Rn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(D){We(t,t.return,D)}}break;case 3:if(fn(e,t),Rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ro(e.containerInfo)}catch(D){We(t,t.return,D)}break;case 4:fn(e,t),Rn(t);break;case 13:fn(e,t),Rn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Uh=Ke())),r&4&&ip(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(It=(d=It)||f,fn(e,t),It=d):fn(e,t),Rn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(g=q=f;q!==null;){switch(v=q,R=v.child,v.tag){case 0:case 11:case 14:case 15:Hs(4,v,v.return);break;case 1:Ni(v,v.return);var x=v.stateNode;if(typeof x.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(D){We(r,n,D)}}break;case 5:Ni(v,v.return);break;case 22:if(v.memoizedState!==null){op(g);continue}}R!==null?(R.return=v,q=R):op(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{i=g.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=xm("display",a))}catch(D){We(t,t.return,D)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(D){We(t,t.return,D)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:fn(e,t),Rn(t),r&4&&ip(t);break;case 21:break;default:fn(e,t),Rn(t)}}function Rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ny(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Zs(i,""),r.flags&=-33);var s=rp(t);xc(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=rp(t);kc(t,l,a);break;default:throw Error(U(161))}}catch(c){We(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ew(t,e,n){q=t,sy(t)}function sy(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||ma;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||It;l=ma;var d=It;if(ma=a,(It=c)&&!d)for(q=i;q!==null;)a=q,c=a.child,a.tag===22&&a.memoizedState!==null?ap(i):c!==null?(c.return=a,q=c):ap(i);for(;s!==null;)q=s,sy(s),s=s.sibling;q=i,ma=l,It=d}sp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):sp(t)}}function sp(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||Dl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:pn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&$f(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$f(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&ro(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}It||e.flags&512&&Pc(e)}catch(v){We(e,e.return,v)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function op(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function ap(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Dl(4,e)}catch(c){We(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){We(e,i,c)}}var s=e.return;try{Pc(e)}catch(c){We(e,s,c)}break;case 5:var a=e.return;try{Pc(e)}catch(c){We(e,a,c)}}}catch(c){We(e,e.return,c)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var Tw=Math.ceil,al=er.ReactCurrentDispatcher,jh=er.ReactCurrentOwner,nn=er.ReactCurrentBatchConfig,de=0,it=null,Ye=null,ct=0,Bt=0,Vi=Lr(0),Ze=0,mo=null,ti=0,Ll=0,bh=0,qs=null,Vt=null,Uh=0,Ki=1/0,Bn=null,ll=!1,Nc=null,Er=null,ga=!1,pr=null,ul=0,Ks=0,Vc=null,Va=-1,Da=0;function kt(){return de&6?Ke():Va!==-1?Va:Va=Ke()}function Tr(t){return t.mode&1?de&2&&ct!==0?ct&-ct:sw.transition!==null?(Da===0&&(Da=$m()),Da):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Ym(t.type)),t):1}function _n(t,e,n,r){if(50<Ks)throw Ks=0,Vc=null,Error(U(185));Co(t,n,r),(!(de&2)||t!==it)&&(t===it&&(!(de&2)&&(Ll|=n),Ze===4&&dr(t,ct)),Mt(t,r),n===1&&de===0&&!(e.mode&1)&&(Ki=Ke()+500,xl&&Or()))}function Mt(t,e){var n=t.callbackNode;s0(t,e);var r=qa(t,t===it?ct:0);if(r===0)n!==null&&gf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&gf(n),e===1)t.tag===0?iw(lp.bind(null,t)):mg(lp.bind(null,t)),ew(function(){!(de&6)&&Or()}),n=null;else{switch(Wm(r)){case 1:n=dh;break;case 4:n=Bm;break;case 16:n=Ha;break;case 536870912:n=zm;break;default:n=Ha}n=fy(n,oy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oy(t,e){if(Va=-1,Da=0,de&6)throw Error(U(327));var n=t.callbackNode;if(ji()&&t.callbackNode!==n)return null;var r=qa(t,t===it?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cl(t,r);else{e=r;var i=de;de|=2;var s=ly();(it!==t||ct!==e)&&(Bn=null,Ki=Ke()+500,Gr(t,e));do try{Aw();break}catch(l){ay(t,l)}while(1);Ah(),al.current=s,de=i,Ye!==null?e=0:(it=null,ct=0,e=Ze)}if(e!==0){if(e===2&&(i=sc(t),i!==0&&(r=i,e=Dc(t,i))),e===1)throw n=mo,Gr(t,0),dr(t,r),Mt(t,Ke()),n;if(e===6)dr(t,r);else{if(i=t.current.alternate,!(r&30)&&!Sw(i)&&(e=cl(t,r),e===2&&(s=sc(t),s!==0&&(r=s,e=Dc(t,s))),e===1))throw n=mo,Gr(t,0),dr(t,r),Mt(t,Ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:$r(t,Vt,Bn);break;case 3:if(dr(t,r),(r&130023424)===r&&(e=Uh+500-Ke(),10<e)){if(qa(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){kt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=fc($r.bind(null,t,Vt,Bn),e);break}$r(t,Vt,Bn);break;case 4:if(dr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-vn(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tw(r/1960))-r,10<r){t.timeoutHandle=fc($r.bind(null,t,Vt,Bn),r);break}$r(t,Vt,Bn);break;case 5:$r(t,Vt,Bn);break;default:throw Error(U(329))}}}return Mt(t,Ke()),t.callbackNode===n?oy.bind(null,t):null}function Dc(t,e){var n=qs;return t.current.memoizedState.isDehydrated&&(Gr(t,e).flags|=256),t=cl(t,e),t!==2&&(e=Vt,Vt=n,e!==null&&Lc(e)),t}function Lc(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function Sw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!wn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dr(t,e){for(e&=~bh,e&=~Ll,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vn(e),r=1<<n;t[n]=-1,e&=~r}}function lp(t){if(de&6)throw Error(U(327));ji();var e=qa(t,0);if(!(e&1))return Mt(t,Ke()),null;var n=cl(t,e);if(t.tag!==0&&n===2){var r=sc(t);r!==0&&(e=r,n=Dc(t,r))}if(n===1)throw n=mo,Gr(t,0),dr(t,e),Mt(t,Ke()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$r(t,Vt,Bn),Mt(t,Ke()),null}function Bh(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Ki=Ke()+500,xl&&Or())}}function ni(t){pr!==null&&pr.tag===0&&!(de&6)&&ji();var e=de;de|=1;var n=nn.transition,r=_e;try{if(nn.transition=null,_e=1,t)return t()}finally{_e=r,nn.transition=n,de=e,!(de&6)&&Or()}}function zh(){Bt=Vi.current,Ne(Vi)}function Gr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Z0(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(Th(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xa();break;case 3:Hi(),Ne(Lt),Ne(Rt),Nh();break;case 5:xh(r);break;case 4:Hi();break;case 13:Ne(Fe);break;case 19:Ne(Fe);break;case 10:Rh(r.type._context);break;case 22:case 23:zh()}n=n.return}if(it=t,Ye=t=Sr(t.current,null),ct=Bt=e,Ze=0,mo=null,bh=Ll=ti=0,Vt=qs=null,qr!==null){for(e=0;e<qr.length;e++)if(n=qr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}qr=null}return t}function ay(t,e){do{var n=Ye;try{if(Ah(),ka.current=ol,sl){for(var r=je.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}sl=!1}if(ei=0,rt=Xe=je=null,Ws=!1,ho=0,jh.current=null,n===null||n.return===null){Ze=1,mo=e,Ye=null;break}e:{var s=t,a=n.return,l=n,c=e;if(e=ct,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var R=Gf(a);if(R!==null){R.flags&=-257,Yf(R,a,l,s,e),R.mode&1&&Qf(s,d,e),e=R,c=d;var x=e.updateQueue;if(x===null){var D=new Set;D.add(c),e.updateQueue=D}else x.add(c);break e}else{if(!(e&1)){Qf(s,d,e),$h();break e}c=Error(U(426))}}else if(De&&l.mode&1){var M=Gf(a);if(M!==null){!(M.flags&65536)&&(M.flags|=256),Yf(M,a,l,s,e),Sh(qi(c,l));break e}}s=c=qi(c,l),Ze!==4&&(Ze=2),qs===null?qs=[s]:qs.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=Wg(s,c,e);zf(s,E);break e;case 1:l=c;var T=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Er===null||!Er.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var L=Hg(s,l,e);zf(s,L);break e}}s=s.return}while(s!==null)}cy(n)}catch($){e=$,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(1)}function ly(){var t=al.current;return al.current=ol,t===null?ol:t}function $h(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),it===null||!(ti&268435455)&&!(Ll&268435455)||dr(it,ct)}function cl(t,e){var n=de;de|=2;var r=ly();(it!==t||ct!==e)&&(Bn=null,Gr(t,e));do try{Iw();break}catch(i){ay(t,i)}while(1);if(Ah(),de=n,al.current=r,Ye!==null)throw Error(U(261));return it=null,ct=0,Ze}function Iw(){for(;Ye!==null;)uy(Ye)}function Aw(){for(;Ye!==null&&!Y_();)uy(Ye)}function uy(t){var e=dy(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?cy(t):Ye=e,jh.current=null}function cy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vw(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Ye=null;return}}else if(n=yw(n,e,Bt),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);Ze===0&&(Ze=5)}function $r(t,e,n){var r=_e,i=nn.transition;try{nn.transition=null,_e=1,Rw(t,e,n,r)}finally{nn.transition=i,_e=r}return null}function Rw(t,e,n,r){do ji();while(pr!==null);if(de&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(o0(t,s),t===it&&(Ye=it=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ga||(ga=!0,fy(Ha,function(){return ji(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=nn.transition,nn.transition=null;var a=_e;_e=1;var l=de;de|=4,jh.current=null,ww(t,n),iy(n,t),q0(hc),Ka=!!cc,hc=cc=null,t.current=n,Ew(n),X_(),de=l,_e=a,nn.transition=s}else t.current=n;if(ga&&(ga=!1,pr=t,ul=i),s=t.pendingLanes,s===0&&(Er=null),e0(n.stateNode),Mt(t,Ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ll)throw ll=!1,t=Nc,Nc=null,t;return ul&1&&t.tag!==0&&ji(),s=t.pendingLanes,s&1?t===Vc?Ks++:(Ks=0,Vc=t):Ks=0,Or(),null}function ji(){if(pr!==null){var t=Wm(ul),e=nn.transition,n=_e;try{if(nn.transition=null,_e=16>t?16:t,pr===null)var r=!1;else{if(t=pr,pr=null,ul=0,de&6)throw Error(U(331));var i=de;for(de|=4,q=t.current;q!==null;){var s=q,a=s.child;if(q.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(q=d;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:Hs(8,f,s)}var g=f.child;if(g!==null)g.return=f,q=g;else for(;q!==null;){f=q;var v=f.sibling,R=f.return;if(ty(f),f===d){q=null;break}if(v!==null){v.return=R,q=v;break}q=R}}}var x=s.alternate;if(x!==null){var D=x.child;if(D!==null){x.child=null;do{var M=D.sibling;D.sibling=null,D=M}while(D!==null)}}q=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,q=a;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Hs(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,q=E;break e}q=s.return}}var T=t.current;for(q=T;q!==null;){a=q;var I=a.child;if(a.subtreeFlags&2064&&I!==null)I.return=a,q=I;else e:for(a=T;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Dl(9,l)}}catch($){We(l,l.return,$)}if(l===a){q=null;break e}var L=l.sibling;if(L!==null){L.return=l.return,q=L;break e}q=l.return}}if(de=i,Or(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Al,t)}catch{}r=!0}return r}finally{_e=n,nn.transition=e}}return!1}function up(t,e,n){e=qi(n,e),e=Wg(t,e,1),t=wr(t,e,1),e=kt(),t!==null&&(Co(t,1,e),Mt(t,e))}function We(t,e,n){if(t.tag===3)up(t,t,n);else for(;e!==null;){if(e.tag===3){up(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Er===null||!Er.has(r))){t=qi(n,t),t=Hg(e,t,1),e=wr(e,t,1),t=kt(),e!==null&&(Co(e,1,t),Mt(e,t));break}}e=e.return}}function Cw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ct&n)===n&&(Ze===4||Ze===3&&(ct&130023424)===ct&&500>Ke()-Uh?Gr(t,0):bh|=n),Mt(t,e)}function hy(t,e){e===0&&(t.mode&1?(e=oa,oa<<=1,!(oa&130023424)&&(oa=4194304)):e=1);var n=kt();t=Gn(t,e),t!==null&&(Co(t,e,n),Mt(t,n))}function Pw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hy(t,n)}function kw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),hy(t,n)}var dy;dy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lt.current)Dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dt=!1,gw(t,e,n);Dt=!!(t.flags&131072)}else Dt=!1,De&&e.flags&1048576&&gg(e,el,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Na(t,e),t=e.pendingProps;var i=zi(e,Rt.current);Fi(e,n),i=Dh(null,e,r,t,i,n);var s=Lh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(r)?(s=!0,Ja(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ph(e),i.updater=Vl,e.stateNode=i,i._reactInternals=e,wc(e,r,t,n),e=Sc(null,e,r,!0,s,n)):(e.tag=0,De&&s&&Eh(e),Pt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Na(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Nw(r),t=pn(r,t),i){case 0:e=Tc(null,e,r,t,n);break e;case 1:e=Zf(null,e,r,t,n);break e;case 11:e=Xf(null,e,r,t,n);break e;case 14:e=Jf(null,e,r,pn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),Tc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),Zf(t,e,r,i,n);case 3:e:{if(Gg(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Tg(t,e),rl(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=qi(Error(U(423)),e),e=ep(t,e,r,n,i);break e}else if(r!==i){i=qi(Error(U(424)),e),e=ep(t,e,r,n,i);break e}else for(zt=_r(e.stateNode.containerInfo.firstChild),$t=e,De=!0,gn=null,n=wg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($i(),r===i){e=Yn(t,e,n);break e}Pt(t,e,r,n)}e=e.child}return e;case 5:return Sg(e),t===null&&yc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,dc(r,i)?a=null:s!==null&&dc(r,s)&&(e.flags|=32),Qg(t,e),Pt(t,e,a,n),e.child;case 6:return t===null&&yc(e),null;case 13:return Yg(t,e,n);case 4:return kh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Wi(e,null,r,n):Pt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),Xf(t,e,r,i,n);case 7:return Pt(t,e,e.pendingProps,n),e.child;case 8:return Pt(t,e,e.pendingProps.children,n),e.child;case 12:return Pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ce(tl,r._currentValue),r._currentValue=a,s!==null)if(wn(s.value,a)){if(s.children===i.children&&!Lt.current){e=Yn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Hn(-1,n&-n),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),vc(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(U(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),vc(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Pt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fi(e,n),i=sn(i),r=r(i),e.flags|=1,Pt(t,e,r,n),e.child;case 14:return r=e.type,i=pn(r,e.pendingProps),i=pn(r.type,i),Jf(t,e,r,i,n);case 15:return qg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),Na(t,e),e.tag=1,Ot(r)?(t=!0,Ja(e)):t=!1,Fi(e,n),$g(e,r,i),wc(e,r,i,n),Sc(null,e,r,!0,t,n);case 19:return Xg(t,e,n);case 22:return Kg(t,e,n)}throw Error(U(156,e.tag))};function fy(t,e){return Um(t,e)}function xw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,r){return new xw(t,e,n,r)}function Wh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Nw(t){if(typeof t=="function")return Wh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uh)return 11;if(t===ch)return 14}return 2}function Sr(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function La(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Wh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ti:return Yr(n.children,i,s,e);case lh:a=8,i|=8;break;case Wu:return t=en(12,n,e,i|2),t.elementType=Wu,t.lanes=s,t;case Hu:return t=en(13,n,e,i),t.elementType=Hu,t.lanes=s,t;case qu:return t=en(19,n,e,i),t.elementType=qu,t.lanes=s,t;case Sm:return Ol(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Em:a=10;break e;case Tm:a=9;break e;case uh:a=11;break e;case ch:a=14;break e;case ur:a=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=en(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Yr(t,e,n,r){return t=en(7,t,r,e),t.lanes=n,t}function Ol(t,e,n,r){return t=en(22,t,r,e),t.elementType=Sm,t.lanes=n,t.stateNode={isHidden:!1},t}function Vu(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function Du(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Vw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fu(0),this.expirationTimes=fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hh(t,e,n,r,i,s,a,l,c){return t=new Vw(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=en(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ph(s),t}function Dw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ei,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function py(t){if(!t)return kr;t=t._reactInternals;e:{if(ai(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ot(n))return pg(t,n,e)}return e}function my(t,e,n,r,i,s,a,l,c){return t=Hh(n,r,!0,t,i,s,a,l,c),t.context=py(null),n=t.current,r=kt(),i=Tr(n),s=Hn(r,i),s.callback=e??null,wr(n,s,i),t.current.lanes=i,Co(t,i,r),Mt(t,r),t}function Ml(t,e,n,r){var i=e.current,s=kt(),a=Tr(i);return n=py(n),e.context===null?e.context=n:e.pendingContext=n,e=Hn(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=wr(i,e,a),t!==null&&(_n(t,i,a,s),Pa(t,i,a)),a}function hl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qh(t,e){cp(t,e),(t=t.alternate)&&cp(t,e)}function Lw(){return null}var gy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kh(t){this._internalRoot=t}Fl.prototype.render=Kh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Ml(t,e,null,null)};Fl.prototype.unmount=Kh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ni(function(){Ml(null,t,null,null)}),e[Qn]=null}};function Fl(t){this._internalRoot=t}Fl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Km();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hr.length&&e!==0&&e<hr[n].priority;n++);hr.splice(n,0,t),n===0&&Gm(t)}};function Qh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hp(){}function Ow(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=hl(a);s.call(d)}}var a=my(e,r,t,0,null,!1,!1,"",hp);return t._reactRootContainer=a,t[Qn]=a.current,oo(t.nodeType===8?t.parentNode:t),ni(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=hl(c);l.call(d)}}var c=Hh(t,0,!1,null,null,!1,!1,"",hp);return t._reactRootContainer=c,t[Qn]=c.current,oo(t.nodeType===8?t.parentNode:t),ni(function(){Ml(e,c,n,r)}),c}function bl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=hl(a);l.call(c)}}Ml(e,a,t,i)}else a=Ow(n,e,t,i,r);return hl(a)}Hm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ls(e.pendingLanes);n!==0&&(fh(e,n|1),Mt(e,Ke()),!(de&6)&&(Ki=Ke()+500,Or()))}break;case 13:ni(function(){var r=Gn(t,1);if(r!==null){var i=kt();_n(r,t,1,i)}}),qh(t,1)}};ph=function(t){if(t.tag===13){var e=Gn(t,134217728);if(e!==null){var n=kt();_n(e,t,134217728,n)}qh(t,134217728)}};qm=function(t){if(t.tag===13){var e=Tr(t),n=Gn(t,e);if(n!==null){var r=kt();_n(n,t,e,r)}qh(t,e)}};Km=function(){return _e};Qm=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};nc=function(t,e,n){switch(e){case"input":if(Gu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=kl(r);if(!i)throw Error(U(90));Am(r),Gu(r,i)}}}break;case"textarea":Cm(t,n);break;case"select":e=n.value,e!=null&&Di(t,!!n.multiple,e,!1)}};Lm=Bh;Om=ni;var Mw={usingClientEntryPoint:!1,Events:[ko,Ri,kl,Vm,Dm,Bh]},xs={findFiberByHostInstance:Hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fw={bundleType:xs.bundleType,version:xs.version,rendererPackageName:xs.rendererPackageName,rendererConfig:xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jm(t),t===null?null:t.stateNode},findFiberByHostInstance:xs.findFiberByHostInstance||Lw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ya.isDisabled&&ya.supportsFiber)try{Al=ya.inject(Fw),kn=ya}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mw;Ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qh(e))throw Error(U(200));return Dw(t,e,null,n)};Ht.createRoot=function(t,e){if(!Qh(t))throw Error(U(299));var n=!1,r="",i=gy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Hh(t,1,!1,null,null,n,!1,r,i),t[Qn]=e.current,oo(t.nodeType===8?t.parentNode:t),new Kh(e)};Ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=jm(e),t=t===null?null:t.stateNode,t};Ht.flushSync=function(t){return ni(t)};Ht.hydrate=function(t,e,n){if(!jl(e))throw Error(U(200));return bl(null,t,e,!0,n)};Ht.hydrateRoot=function(t,e,n){if(!Qh(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=gy;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=my(e,null,t,1,n??null,i,!1,s,a),t[Qn]=e.current,oo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Fl(e)};Ht.render=function(t,e,n){if(!jl(e))throw Error(U(200));return bl(null,t,e,!1,n)};Ht.unmountComponentAtNode=function(t){if(!jl(t))throw Error(U(40));return t._reactRootContainer?(ni(function(){bl(null,null,t,!1,function(){t._reactRootContainer=null,t[Qn]=null})}),!0):!1};Ht.unstable_batchedUpdates=Bh;Ht.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!jl(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return bl(t,e,n,!1,r)};Ht.version="18.3.1-next-f1338f8080-20240426";function yy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yy)}catch(t){console.error(t)}}yy(),ym.exports=Ht;var jw=ym.exports,dp=jw;zu.createRoot=dp.createRoot,zu.hydrateRoot=dp.hydrateRoot;const bw=({onConsent:t,onDecline:e})=>P.jsxs("div",{className:"consent-container",children:[P.jsx("h1",{children:P.jsx("b",{children:P.jsx("u",{children:"Welcome"})})}),P.jsx("h2",{children:"but first, we need your consent to proceed..."}),P.jsx("hr",{}),P.jsxs("div",{className:"legal well",children:[P.jsx("p",{children:'We would like to invite you to take part in the following study named "Click Speed Study"'}),P.jsxs("p",{children:["This will take approximately XX minutes, and you will be compensated $X.XX upon completion.",P.jsx("br",{}),"Please understand that we ",P.jsx("em",{children:"reserve the right to not compensate entries"})," that fail to follow instructions."]}),P.jsx("div",{className:"consent-form",children:P.jsx("iframe",{frameBorder:"1",src:"https://drive.google.com/file/d/1_jkO8vZMrpOrZMgEhpZuFgGcBjGE72Yg/preview",title:"Consent Form"})})]}),P.jsx("h4",{children:'If you agree and consent to these terms, please click "I Agree" to continue.'}),P.jsxs("div",{className:"button-container",children:[P.jsx("button",{className:"btn btn-danger",onClick:e,children:"I do NOT consent"}),P.jsx("button",{className:"btn btn-primary",onClick:t,children:"I Agree"})]})]});function Uw({onSubmit:t}){const[e,n]=B.useState({workerId:"",name:"",age:"",gender:"",handedness:"",mouseDpi:"",repeat:"",ethnicity:"",race:""}),r=s=>{const{name:a,value:l}=s.target;n(c=>({...c,[a]:l}))},i=async s=>{s.preventDefault();try{t(e)}catch(a){console.error("Error handling form submission:",a)}};return P.jsxs("div",{className:"survey-container",children:[P.jsx("h1",{children:"Participant Information"}),P.jsxs("form",{onSubmit:i,children:[P.jsxs("div",{children:[P.jsx("label",{children:"Worker ID: "}),P.jsx("input",{type:"text",required:!0,name:"workerId",value:e.workerId,onChange:r})]}),P.jsxs("div",{children:[P.jsx("label",{children:"Name: "}),P.jsx("input",{type:"text",required:!0,name:"name",value:e.name,onChange:r})]}),P.jsxs("div",{children:[P.jsx("label",{children:"Age: "}),P.jsx("input",{type:"number",required:!0,name:"age",value:e.age,onChange:r})]}),P.jsxs("div",{children:[P.jsx("label",{children:"Gender: "}),P.jsxs("select",{required:!0,name:"gender",value:e.gender,onChange:r,children:[P.jsx("option",{value:"",children:"Select an option"}),P.jsx("option",{value:"male",children:"Male"}),P.jsx("option",{value:"female",children:"Female"}),P.jsx("option",{value:"other",children:"Other"})]})]}),P.jsxs("div",{children:[P.jsx("label",{children:"Handedness: "}),P.jsxs("select",{required:!0,name:"handedness",value:e.handedness,onChange:r,children:[P.jsx("option",{value:"",children:"Select an option"}),P.jsx("option",{value:"right",children:"Right Handed"}),P.jsx("option",{value:"left",children:"Left Handed"})]})]}),P.jsxs("div",{children:[P.jsx("label",{children:"Mouse DPI (optional): "}),P.jsx("input",{type:"number",name:"mouseDpi",value:e.mouseDpi,onChange:r,placeholder:"e.g., 800, 1200, 1600"})]}),P.jsxs("div",{children:[P.jsx("label",{children:"Have you done our experiments before? "}),P.jsxs("select",{required:!0,name:"repeat",value:e.repeat,onChange:r,children:[P.jsx("option",{value:"",children:"Select an option"}),P.jsx("option",{value:"yes",children:"Yes"}),P.jsx("option",{value:"no",children:"No"}),P.jsx("option",{value:"idk",children:"I don't remember"})]})]}),P.jsx("h2",{children:"Optional Information"}),P.jsxs("div",{children:[P.jsx("label",{children:"Ethnicity: "}),P.jsxs("select",{name:"ethnicity",value:e.ethnicity,onChange:r,children:[P.jsx("option",{value:"",children:"Select an option"}),P.jsx("option",{value:"hispanic",children:"Hispanic/Latinx"}),P.jsx("option",{value:"other",children:"Other"})]})]}),P.jsxs("div",{children:[P.jsx("label",{children:"Race: "}),P.jsxs("select",{name:"race",value:e.race,onChange:r,children:[P.jsx("option",{value:"",children:"Select an option"}),P.jsx("option",{value:"white",children:"White"}),P.jsx("option",{value:"black",children:"Black"}),P.jsx("option",{value:"asian",children:"Asian"}),P.jsx("option",{value:"native",children:"Native American"}),P.jsx("option",{value:"other",children:"Other"})]})]}),P.jsx("button",{type:"submit",className:"submit-button",children:"Submit"})]})]})}const Bw=({onStart:t,onPractice:e,currentPage:n=0,setCurrentPage:r})=>{const[i,s]=B.useState(0),a=n!==void 0?n:i,l=r||s,c=[{title:"Game Overview",content:P.jsxs("div",{className:"instructions-content",children:[P.jsx("h2",{children:"Welcome to the Global Invigoration Study!"}),P.jsxs("p",{children:["You will play a game with ",P.jsx("strong",{children:"two tasks"}),". Your goal is to earn as many points as possible by following the on-screen instructions."]}),P.jsxs("div",{className:"phase-overview",children:[P.jsxs("div",{className:"phase-item",children:[P.jsx("h3",{children:"Task 1: Movement Task"}),P.jsx("p",{children:"Move your cursor between bars at a steady pace"})]}),P.jsxs("div",{className:"phase-item",children:[P.jsx("h3",{children:"Task 2: Reward Collection"}),P.jsx("p",{children:"Press the keys in the sequence to collect your reward"})]})]}),P.jsx("p",{children:"Let's learn about each task in detail..."})]})},{title:"Task 1: Movement Task",content:P.jsxs("div",{className:"instructions-content",children:[P.jsx("h2",{children:"Movement Task Details"}),P.jsx("div",{className:"phase-visual",children:P.jsxs("div",{className:"visual-description",children:[P.jsx("h3",{children:"What you'll see:"}),P.jsxs("ul",{children:[P.jsxs("li",{children:[P.jsx("strong",{children:"Blue bars"})," on the left and right sides of the screen"]}),P.jsxs("li",{children:["Your ",P.jsx("strong",{children:"score"})," will be displayed in the top right corner"]})]})]})}),P.jsx("h3",{children:"What to do:"}),P.jsxs("ul",{children:[P.jsxs("li",{children:[P.jsx("strong",{children:"Move your cursor"})," back and forth between the bars at a steady pace"]}),P.jsxs("li",{children:["The bars will turn ",P.jsx("strong",{children:"green"})," when you hover over them"]}),P.jsx("li",{children:"Keep moving at a steady pace - don't stay on one side too long!"}),P.jsxs("li",{children:["If you move too slowly, you'll see a ",P.jsx("strong",{children:'"Move Faster!"'})," warning"]})]})]})},{title:"Task 2: Reward Collection",content:P.jsxs("div",{className:"instructions-content",children:[P.jsx("h2",{children:"Reward Collection Details"}),P.jsx("div",{className:"phase-visual",children:P.jsxs("div",{className:"visual-description",children:[P.jsx("h3",{children:"What happens:"}),P.jsxs("ul",{children:[P.jsxs("li",{children:["After an unknown amount of time, the ",P.jsx("strong",{children:"bars disappear"})]}),P.jsx("li",{children:"After some time, you may be given the option to collect a reward"}),P.jsx("li",{children:"You will need to collect your reward"})]})]})}),P.jsx("h3",{children:"What to do:"}),P.jsxs("ul",{children:[P.jsxs("li",{children:["Follow the ",P.jsx("strong",{children:"key sequence"})," displayed on screen to collect the reward"]}),P.jsxs("li",{children:["Press the keys ",P.jsx("strong",{children:"A, S, D, F"})," in the exact order shown"]}),P.jsx("li",{children:"Watch as your progress is displayed with the sequence"}),P.jsx("li",{children:"Complete the entire sequence to receive your reward"})]})]})},{title:"Ready to Start?",content:P.jsxs("div",{className:"instructions-content",children:[P.jsx("h2",{children:"You're Ready to Start!"}),P.jsx("p",{children:"You now know everything you need to participate in the study. Remember: move between the bars, then collect the reward by following the key sequence."}),P.jsxs("div",{className:"final-reminder",children:[P.jsx("h3",{children:"Quick Reminder:"}),P.jsxs("ol",{children:[P.jsxs("li",{children:[P.jsx("strong",{children:"Task 1:"})," Move cursor between blue bars"]}),P.jsxs("li",{children:[P.jsx("strong",{children:"Task 2:"})," Follow the key sequence to collect the reward"]})]})]})]})}],d=()=>{a<c.length-1&&l(a+1)},f=()=>{a>0&&l(a-1)},g=a===c.length-1,v=a===0;return P.jsx("div",{className:"instructions-container",children:P.jsxs("div",{className:"instructions",children:[P.jsx("h1",{children:c[a].title}),P.jsxs("div",{className:"page-indicator",children:["Page ",a+1," of ",c.length]}),c[a].content,P.jsxs("div",{className:"navigation-container",children:[!g&&P.jsxs("div",{className:"page-navigation",children:[P.jsx("button",{onClick:f,className:"nav-button prev-button",disabled:v,children:" Previous"}),P.jsx("button",{onClick:d,className:"nav-button next-button",children:"Next "})]}),g&&P.jsxs("div",{className:"button-container",children:[P.jsx("button",{onClick:f,className:"nav-button prev-button",children:" Previous"}),P.jsx("button",{onClick:e,className:"practice-button",children:"Practice"}),P.jsx("button",{onClick:t,className:"start-button",children:"Start Game"})]})]})]})})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},zw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},_y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,f=s>>2,g=(s&3)<<4|l>>4;let v=(l&15)<<2|d>>6,R=d&63;c||(R=64,a||(v=64)),r.push(n[f],n[g],n[v],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||g==null)throw new $w;const v=s<<2|l>>4;if(r.push(v),d!==64){const R=l<<4&240|d>>2;if(r.push(R),g!==64){const x=d<<6&192|g;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $w extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ww=function(t){const e=vy(t);return _y.encodeByteArray(e,!0)},dl=function(t){return Ww(t).replace(/\./g,"")},Hw=function(t){try{return _y.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=()=>qw().__FIREBASE_DEFAULTS__,Qw=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Gw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hw(t[1]);return e&&JSON.parse(e)},Gh=()=>{try{return Kw()||Qw()||Gw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Yw=t=>{var e,n;return(n=(e=Gh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Xw=t=>{const e=Yw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wy=()=>{var t;return(t=Gh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[dl(JSON.stringify(n)),dl(JSON.stringify(a)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tE(){var t;const e=(t=Gh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nE(){return!tE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rE(){try{return typeof indexedDB=="object"}catch{return!1}}function iE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="FirebaseError";class is extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sE,Object.setPrototypeOf(this,is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ey.prototype.create)}}class Ey{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?oE(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new is(i,l,r)}}function oE(t,e){return t.replace(aE,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const aE=/\{\$([^}]+)}/g;function Oc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(fp(s)&&fp(a)){if(!Oc(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function fp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){return t&&t._delegate?t._delegate:t}class yo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Jw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cE(e))try{this.getOrInitializeService({instanceIdentifier:Wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wr){return this.instances.has(e)}getOptions(e=Wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wr){return this.component?this.component.multipleInstances?e:Wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uE(t){return t===Wr?void 0:t}function cE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const dE={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},fE=he.INFO,pE={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},mE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=pE[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ty{constructor(e){this.name=e,this._logLevel=fE,this._logHandler=mE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const gE=(t,e)=>e.some(n=>t instanceof n);let pp,mp;function yE(){return pp||(pp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vE(){return mp||(mp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sy=new WeakMap,Mc=new WeakMap,Iy=new WeakMap,Lu=new WeakMap,Yh=new WeakMap;function _E(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Ir(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Sy.set(n,t)}).catch(()=>{}),Yh.set(e,t),e}function wE(t){if(Mc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Mc.set(t,e)}let Fc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Iy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EE(t){Fc=t(Fc)}function TE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ou(this),e,...n);return Iy.set(r,e.sort?e.sort():[e]),Ir(r)}:vE().includes(t)?function(...e){return t.apply(Ou(this),e),Ir(Sy.get(this))}:function(...e){return Ir(t.apply(Ou(this),e))}}function SE(t){return typeof t=="function"?TE(t):(t instanceof IDBTransaction&&wE(t),gE(t,yE())?new Proxy(t,Fc):t)}function Ir(t){if(t instanceof IDBRequest)return _E(t);if(Lu.has(t))return Lu.get(t);const e=SE(t);return e!==t&&(Lu.set(t,e),Yh.set(e,t)),e}const Ou=t=>Yh.get(t);function IE(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Ir(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Ir(a.result),c.oldVersion,c.newVersion,Ir(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const AE=["get","getKey","getAll","getAllKeys","count"],RE=["put","add","delete","clear"],Mu=new Map;function gp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mu.get(e))return Mu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=RE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AE.includes(n)))return;const s=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return Mu.set(e,s),s}EE(t=>({...t,get:(e,n,r)=>gp(e,n)||t.get(e,n,r),has:(e,n)=>!!gp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jc="@firebase/app",yp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new Ty("@firebase/app"),kE="@firebase/app-compat",xE="@firebase/analytics-compat",NE="@firebase/analytics",VE="@firebase/app-check-compat",DE="@firebase/app-check",LE="@firebase/auth",OE="@firebase/auth-compat",ME="@firebase/database",FE="@firebase/data-connect",jE="@firebase/database-compat",bE="@firebase/functions",UE="@firebase/functions-compat",BE="@firebase/installations",zE="@firebase/installations-compat",$E="@firebase/messaging",WE="@firebase/messaging-compat",HE="@firebase/performance",qE="@firebase/performance-compat",KE="@firebase/remote-config",QE="@firebase/remote-config-compat",GE="@firebase/storage",YE="@firebase/storage-compat",XE="@firebase/firestore",JE="@firebase/vertexai-preview",ZE="@firebase/firestore-compat",e1="firebase",t1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc="[DEFAULT]",n1={[jc]:"fire-core",[kE]:"fire-core-compat",[NE]:"fire-analytics",[xE]:"fire-analytics-compat",[DE]:"fire-app-check",[VE]:"fire-app-check-compat",[LE]:"fire-auth",[OE]:"fire-auth-compat",[ME]:"fire-rtdb",[FE]:"fire-data-connect",[jE]:"fire-rtdb-compat",[bE]:"fire-fn",[UE]:"fire-fn-compat",[BE]:"fire-iid",[zE]:"fire-iid-compat",[$E]:"fire-fcm",[WE]:"fire-fcm-compat",[HE]:"fire-perf",[qE]:"fire-perf-compat",[KE]:"fire-rc",[QE]:"fire-rc-compat",[GE]:"fire-gcs",[YE]:"fire-gcs-compat",[XE]:"fire-fst",[ZE]:"fire-fst-compat",[JE]:"fire-vertex","fire-js":"fire-js",[e1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=new Map,r1=new Map,Uc=new Map;function vp(t,e){try{t.container.addComponent(e)}catch(n){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pl(t){const e=t.name;if(Uc.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;Uc.set(e,t);for(const n of fl.values())vp(n,t);for(const n of r1.values())vp(n,t);return!0}function i1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new Ey("app","Firebase",s1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=t1;function Ay(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:bc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ar.create("bad-app-name",{appName:String(i)});if(n||(n=wy()),!n)throw Ar.create("no-options");const s=fl.get(i);if(s){if(Oc(n,s.options)&&Oc(r,s.config))return s;throw Ar.create("duplicate-app",{appName:i})}const a=new hE(i);for(const c of Uc.values())a.addComponent(c);const l=new o1(n,r,a);return fl.set(i,l),l}function l1(t=bc){const e=fl.get(t);if(!e&&t===bc&&wy())return Ay();if(!e)throw Ar.create("no-app",{appName:t});return e}function bi(t,e,n){var r;let i=(r=n1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(l.join(" "));return}pl(new yo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="firebase-heartbeat-database",c1=1,vo="firebase-heartbeat-store";let Fu=null;function Ry(){return Fu||(Fu=IE(u1,c1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),Fu}async function h1(t){try{const n=(await Ry()).transaction(vo),r=await n.objectStore(vo).get(Cy(t));return await n.done,r}catch(e){if(e instanceof is)Xn.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xn.warn(n.message)}}}async function _p(t,e){try{const r=(await Ry()).transaction(vo,"readwrite");await r.objectStore(vo).put(e,Cy(t)),await r.done}catch(n){if(n instanceof is)Xn.warn(n.message);else{const r=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xn.warn(r.message)}}}function Cy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=1024,f1=30*24*60*60*1e3;class p1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new g1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=f1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wp(),{heartbeatsToSend:r,unsentEntries:i}=m1(this._heartbeatsCache.heartbeats),s=dl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Xn.warn(n),""}}}function wp(){return new Date().toISOString().substring(0,10)}function m1(t,e=d1){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Ep(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ep(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class g1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rE()?iE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await h1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _p(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _p(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ep(t){return dl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t){pl(new yo("platform-logger",e=>new CE(e),"PRIVATE")),pl(new yo("heartbeat",e=>new p1(e),"PRIVATE")),bi(jc,yp,t),bi(jc,yp,"esm2017"),bi("fire-js","")}y1("");var v1="firebase",_1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bi(v1,_1,"app");var Tp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xr,Py;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,m){function y(){}y.prototype=m.prototype,_.D=m.prototype,_.prototype=new y,_.prototype.constructor=_,_.C=function(S,A,C){for(var w=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)w[Ve-2]=arguments[Ve];return m.prototype[A].apply(S,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,m,y){y||(y=0);var S=Array(16);if(typeof m=="string")for(var A=0;16>A;++A)S[A]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(A=0;16>A;++A)S[A]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=_.g[0],y=_.g[1],A=_.g[2];var C=_.g[3],w=m+(C^y&(A^C))+S[0]+3614090360&4294967295;m=y+(w<<7&4294967295|w>>>25),w=C+(A^m&(y^A))+S[1]+3905402710&4294967295,C=m+(w<<12&4294967295|w>>>20),w=A+(y^C&(m^y))+S[2]+606105819&4294967295,A=C+(w<<17&4294967295|w>>>15),w=y+(m^A&(C^m))+S[3]+3250441966&4294967295,y=A+(w<<22&4294967295|w>>>10),w=m+(C^y&(A^C))+S[4]+4118548399&4294967295,m=y+(w<<7&4294967295|w>>>25),w=C+(A^m&(y^A))+S[5]+1200080426&4294967295,C=m+(w<<12&4294967295|w>>>20),w=A+(y^C&(m^y))+S[6]+2821735955&4294967295,A=C+(w<<17&4294967295|w>>>15),w=y+(m^A&(C^m))+S[7]+4249261313&4294967295,y=A+(w<<22&4294967295|w>>>10),w=m+(C^y&(A^C))+S[8]+1770035416&4294967295,m=y+(w<<7&4294967295|w>>>25),w=C+(A^m&(y^A))+S[9]+2336552879&4294967295,C=m+(w<<12&4294967295|w>>>20),w=A+(y^C&(m^y))+S[10]+4294925233&4294967295,A=C+(w<<17&4294967295|w>>>15),w=y+(m^A&(C^m))+S[11]+2304563134&4294967295,y=A+(w<<22&4294967295|w>>>10),w=m+(C^y&(A^C))+S[12]+1804603682&4294967295,m=y+(w<<7&4294967295|w>>>25),w=C+(A^m&(y^A))+S[13]+4254626195&4294967295,C=m+(w<<12&4294967295|w>>>20),w=A+(y^C&(m^y))+S[14]+2792965006&4294967295,A=C+(w<<17&4294967295|w>>>15),w=y+(m^A&(C^m))+S[15]+1236535329&4294967295,y=A+(w<<22&4294967295|w>>>10),w=m+(A^C&(y^A))+S[1]+4129170786&4294967295,m=y+(w<<5&4294967295|w>>>27),w=C+(y^A&(m^y))+S[6]+3225465664&4294967295,C=m+(w<<9&4294967295|w>>>23),w=A+(m^y&(C^m))+S[11]+643717713&4294967295,A=C+(w<<14&4294967295|w>>>18),w=y+(C^m&(A^C))+S[0]+3921069994&4294967295,y=A+(w<<20&4294967295|w>>>12),w=m+(A^C&(y^A))+S[5]+3593408605&4294967295,m=y+(w<<5&4294967295|w>>>27),w=C+(y^A&(m^y))+S[10]+38016083&4294967295,C=m+(w<<9&4294967295|w>>>23),w=A+(m^y&(C^m))+S[15]+3634488961&4294967295,A=C+(w<<14&4294967295|w>>>18),w=y+(C^m&(A^C))+S[4]+3889429448&4294967295,y=A+(w<<20&4294967295|w>>>12),w=m+(A^C&(y^A))+S[9]+568446438&4294967295,m=y+(w<<5&4294967295|w>>>27),w=C+(y^A&(m^y))+S[14]+3275163606&4294967295,C=m+(w<<9&4294967295|w>>>23),w=A+(m^y&(C^m))+S[3]+4107603335&4294967295,A=C+(w<<14&4294967295|w>>>18),w=y+(C^m&(A^C))+S[8]+1163531501&4294967295,y=A+(w<<20&4294967295|w>>>12),w=m+(A^C&(y^A))+S[13]+2850285829&4294967295,m=y+(w<<5&4294967295|w>>>27),w=C+(y^A&(m^y))+S[2]+4243563512&4294967295,C=m+(w<<9&4294967295|w>>>23),w=A+(m^y&(C^m))+S[7]+1735328473&4294967295,A=C+(w<<14&4294967295|w>>>18),w=y+(C^m&(A^C))+S[12]+2368359562&4294967295,y=A+(w<<20&4294967295|w>>>12),w=m+(y^A^C)+S[5]+4294588738&4294967295,m=y+(w<<4&4294967295|w>>>28),w=C+(m^y^A)+S[8]+2272392833&4294967295,C=m+(w<<11&4294967295|w>>>21),w=A+(C^m^y)+S[11]+1839030562&4294967295,A=C+(w<<16&4294967295|w>>>16),w=y+(A^C^m)+S[14]+4259657740&4294967295,y=A+(w<<23&4294967295|w>>>9),w=m+(y^A^C)+S[1]+2763975236&4294967295,m=y+(w<<4&4294967295|w>>>28),w=C+(m^y^A)+S[4]+1272893353&4294967295,C=m+(w<<11&4294967295|w>>>21),w=A+(C^m^y)+S[7]+4139469664&4294967295,A=C+(w<<16&4294967295|w>>>16),w=y+(A^C^m)+S[10]+3200236656&4294967295,y=A+(w<<23&4294967295|w>>>9),w=m+(y^A^C)+S[13]+681279174&4294967295,m=y+(w<<4&4294967295|w>>>28),w=C+(m^y^A)+S[0]+3936430074&4294967295,C=m+(w<<11&4294967295|w>>>21),w=A+(C^m^y)+S[3]+3572445317&4294967295,A=C+(w<<16&4294967295|w>>>16),w=y+(A^C^m)+S[6]+76029189&4294967295,y=A+(w<<23&4294967295|w>>>9),w=m+(y^A^C)+S[9]+3654602809&4294967295,m=y+(w<<4&4294967295|w>>>28),w=C+(m^y^A)+S[12]+3873151461&4294967295,C=m+(w<<11&4294967295|w>>>21),w=A+(C^m^y)+S[15]+530742520&4294967295,A=C+(w<<16&4294967295|w>>>16),w=y+(A^C^m)+S[2]+3299628645&4294967295,y=A+(w<<23&4294967295|w>>>9),w=m+(A^(y|~C))+S[0]+4096336452&4294967295,m=y+(w<<6&4294967295|w>>>26),w=C+(y^(m|~A))+S[7]+1126891415&4294967295,C=m+(w<<10&4294967295|w>>>22),w=A+(m^(C|~y))+S[14]+2878612391&4294967295,A=C+(w<<15&4294967295|w>>>17),w=y+(C^(A|~m))+S[5]+4237533241&4294967295,y=A+(w<<21&4294967295|w>>>11),w=m+(A^(y|~C))+S[12]+1700485571&4294967295,m=y+(w<<6&4294967295|w>>>26),w=C+(y^(m|~A))+S[3]+2399980690&4294967295,C=m+(w<<10&4294967295|w>>>22),w=A+(m^(C|~y))+S[10]+4293915773&4294967295,A=C+(w<<15&4294967295|w>>>17),w=y+(C^(A|~m))+S[1]+2240044497&4294967295,y=A+(w<<21&4294967295|w>>>11),w=m+(A^(y|~C))+S[8]+1873313359&4294967295,m=y+(w<<6&4294967295|w>>>26),w=C+(y^(m|~A))+S[15]+4264355552&4294967295,C=m+(w<<10&4294967295|w>>>22),w=A+(m^(C|~y))+S[6]+2734768916&4294967295,A=C+(w<<15&4294967295|w>>>17),w=y+(C^(A|~m))+S[13]+1309151649&4294967295,y=A+(w<<21&4294967295|w>>>11),w=m+(A^(y|~C))+S[4]+4149444226&4294967295,m=y+(w<<6&4294967295|w>>>26),w=C+(y^(m|~A))+S[11]+3174756917&4294967295,C=m+(w<<10&4294967295|w>>>22),w=A+(m^(C|~y))+S[2]+718787259&4294967295,A=C+(w<<15&4294967295|w>>>17),w=y+(C^(A|~m))+S[9]+3951481745&4294967295,_.g[0]=_.g[0]+m&4294967295,_.g[1]=_.g[1]+(A+(w<<21&4294967295|w>>>11))&4294967295,_.g[2]=_.g[2]+A&4294967295,_.g[3]=_.g[3]+C&4294967295}r.prototype.u=function(_,m){m===void 0&&(m=_.length);for(var y=m-this.blockSize,S=this.B,A=this.h,C=0;C<m;){if(A==0)for(;C<=y;)i(this,_,C),C+=this.blockSize;if(typeof _=="string"){for(;C<m;)if(S[A++]=_.charCodeAt(C++),A==this.blockSize){i(this,S),A=0;break}}else for(;C<m;)if(S[A++]=_[C++],A==this.blockSize){i(this,S),A=0;break}}this.h=A,this.o+=m},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var m=1;m<_.length-8;++m)_[m]=0;var y=8*this.o;for(m=_.length-8;m<_.length;++m)_[m]=y&255,y/=256;for(this.u(_),_=Array(16),m=y=0;4>m;++m)for(var S=0;32>S;S+=8)_[y++]=this.g[m]>>>S&255;return _};function s(_,m){var y=l;return Object.prototype.hasOwnProperty.call(y,_)?y[_]:y[_]=m(_)}function a(_,m){this.h=m;for(var y=[],S=!0,A=_.length-1;0<=A;A--){var C=_[A]|0;S&&C==m||(y[A]=C,S=!1)}this.g=y}var l={};function c(_){return-128<=_&&128>_?s(_,function(m){return new a([m|0],0>m?-1:0)}):new a([_|0],0>_?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return g;if(0>_)return M(d(-_));for(var m=[],y=1,S=0;_>=y;S++)m[S]=_/y|0,y*=4294967296;return new a(m,0)}function f(_,m){if(_.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(_.charAt(0)=="-")return M(f(_.substring(1),m));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(m,8)),S=g,A=0;A<_.length;A+=8){var C=Math.min(8,_.length-A),w=parseInt(_.substring(A,A+C),m);8>C?(C=d(Math.pow(m,C)),S=S.j(C).add(d(w))):(S=S.j(y),S=S.add(d(w)))}return S}var g=c(0),v=c(1),R=c(16777216);t=a.prototype,t.m=function(){if(D(this))return-M(this).m();for(var _=0,m=1,y=0;y<this.g.length;y++){var S=this.i(y);_+=(0<=S?S:4294967296+S)*m,m*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(x(this))return"0";if(D(this))return"-"+M(this).toString(_);for(var m=d(Math.pow(_,6)),y=this,S="";;){var A=L(y,m).g;y=E(y,A.j(m));var C=((0<y.g.length?y.g[0]:y.h)>>>0).toString(_);if(y=A,x(y))return C+S;for(;6>C.length;)C="0"+C;S=C+S}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function x(_){if(_.h!=0)return!1;for(var m=0;m<_.g.length;m++)if(_.g[m]!=0)return!1;return!0}function D(_){return _.h==-1}t.l=function(_){return _=E(this,_),D(_)?-1:x(_)?0:1};function M(_){for(var m=_.g.length,y=[],S=0;S<m;S++)y[S]=~_.g[S];return new a(y,~_.h).add(v)}t.abs=function(){return D(this)?M(this):this},t.add=function(_){for(var m=Math.max(this.g.length,_.g.length),y=[],S=0,A=0;A<=m;A++){var C=S+(this.i(A)&65535)+(_.i(A)&65535),w=(C>>>16)+(this.i(A)>>>16)+(_.i(A)>>>16);S=w>>>16,C&=65535,w&=65535,y[A]=w<<16|C}return new a(y,y[y.length-1]&-2147483648?-1:0)};function E(_,m){return _.add(M(m))}t.j=function(_){if(x(this)||x(_))return g;if(D(this))return D(_)?M(this).j(M(_)):M(M(this).j(_));if(D(_))return M(this.j(M(_)));if(0>this.l(R)&&0>_.l(R))return d(this.m()*_.m());for(var m=this.g.length+_.g.length,y=[],S=0;S<2*m;S++)y[S]=0;for(S=0;S<this.g.length;S++)for(var A=0;A<_.g.length;A++){var C=this.i(S)>>>16,w=this.i(S)&65535,Ve=_.i(A)>>>16,re=_.i(A)&65535;y[2*S+2*A]+=w*re,T(y,2*S+2*A),y[2*S+2*A+1]+=C*re,T(y,2*S+2*A+1),y[2*S+2*A+1]+=w*Ve,T(y,2*S+2*A+1),y[2*S+2*A+2]+=C*Ve,T(y,2*S+2*A+2)}for(S=0;S<m;S++)y[S]=y[2*S+1]<<16|y[2*S];for(S=m;S<2*m;S++)y[S]=0;return new a(y,0)};function T(_,m){for(;(_[m]&65535)!=_[m];)_[m+1]+=_[m]>>>16,_[m]&=65535,m++}function I(_,m){this.g=_,this.h=m}function L(_,m){if(x(m))throw Error("division by zero");if(x(_))return new I(g,g);if(D(_))return m=L(M(_),m),new I(M(m.g),M(m.h));if(D(m))return m=L(_,M(m)),new I(M(m.g),m.h);if(30<_.g.length){if(D(_)||D(m))throw Error("slowDivide_ only works with positive integers.");for(var y=v,S=m;0>=S.l(_);)y=$(y),S=$(S);var A=z(y,1),C=z(S,1);for(S=z(S,2),y=z(y,2);!x(S);){var w=C.add(S);0>=w.l(_)&&(A=A.add(y),C=w),S=z(S,1),y=z(y,1)}return m=E(_,A.j(m)),new I(A,m)}for(A=g;0<=_.l(m);){for(y=Math.max(1,Math.floor(_.m()/m.m())),S=Math.ceil(Math.log(y)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),C=d(y),w=C.j(m);D(w)||0<w.l(_);)y-=S,C=d(y),w=C.j(m);x(C)&&(C=v),A=A.add(C),_=E(_,w)}return new I(A,_)}t.A=function(_){return L(this,_).h},t.and=function(_){for(var m=Math.max(this.g.length,_.g.length),y=[],S=0;S<m;S++)y[S]=this.i(S)&_.i(S);return new a(y,this.h&_.h)},t.or=function(_){for(var m=Math.max(this.g.length,_.g.length),y=[],S=0;S<m;S++)y[S]=this.i(S)|_.i(S);return new a(y,this.h|_.h)},t.xor=function(_){for(var m=Math.max(this.g.length,_.g.length),y=[],S=0;S<m;S++)y[S]=this.i(S)^_.i(S);return new a(y,this.h^_.h)};function $(_){for(var m=_.g.length+1,y=[],S=0;S<m;S++)y[S]=_.i(S)<<1|_.i(S-1)>>>31;return new a(y,_.h)}function z(_,m){var y=m>>5;m%=32;for(var S=_.g.length-y,A=[],C=0;C<S;C++)A[C]=0<m?_.i(C+y)>>>m|_.i(C+y+1)<<32-m:_.i(C+y);return new a(A,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Py=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,Xr=a}).apply(typeof Tp<"u"?Tp:typeof self<"u"?self:typeof window<"u"?window:{});var va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ky,Ms,xy,Oa,Bc,Ny,Vy,Dy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof va=="object"&&va];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(o,u){if(u)e:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var k=o[p];if(!(k in h))break e;h=h[k]}o=o[o.length-1],p=h[o],u=u(p),u!=p&&u!=null&&e(h,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var h=0,p=!1,k={next:function(){if(!p&&h<o.length){var N=h++;return{value:u(N,o[N]),done:!1}}return p=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}i("Array.prototype.values",function(o){return o||function(){return s(this,function(u,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function d(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function f(o,u,h){return o.call.apply(o.bind,arguments)}function g(o,u,h){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,p),o.apply(u,k)}}return function(){return o.apply(u,arguments)}}function v(o,u,h){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,v.apply(null,arguments)}function R(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function x(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(p,k,N){for(var H=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)H[Ie-2]=arguments[Ie];return u.prototype[k].apply(p,H)}}function D(o){const u=o.length;if(0<u){const h=Array(u);for(let p=0;p<u;p++)h[p]=o[p];return h}return[]}function M(o,u){for(let h=1;h<arguments.length;h++){const p=arguments[h];if(c(p)){const k=o.length||0,N=p.length||0;o.length=k+N;for(let H=0;H<N;H++)o[k+H]=p[H]}else o.push(p)}}class E{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function T(o){return/^[\s\xa0]*$/.test(o)}function I(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function L(o){return L[" "](o),o}L[" "]=function(){};var $=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function z(o,u,h){for(const p in o)u.call(h,o[p],p,o)}function _(o,u){for(const h in o)u.call(void 0,o[h],h,o)}function m(o){const u={};for(const h in o)u[h]=o[h];return u}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(o,u){let h,p;for(let k=1;k<arguments.length;k++){p=arguments[k];for(h in p)o[h]=p[h];for(let N=0;N<y.length;N++)h=y[N],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function A(o){var u=1;o=o.split(":");const h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function C(o){l.setTimeout(()=>{throw o},0)}function w(){var o=G;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class Ve{constructor(){this.h=this.g=null}add(u,h){const p=re.get();p.set(u,h),this.h?this.h.next=p:this.g=p,this.h=p}}var re=new E(()=>new an,o=>o.reset());class an{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,W=!1,G=new Ve,ee=()=>{const o=l.Promise.resolve(void 0);ge=()=>{o.then(ye)}};var ye=()=>{for(var o;o=w();){try{o.h.call(o.g)}catch(h){C(h)}var u=re;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}W=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var pt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};l.addEventListener("test",h,u),l.removeEventListener("test",h,u)}catch{}return o}();function mt(o,u){if(Ae.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if($){e:{try{L(u.nodeName);var k=!0;break e}catch{}k=!1}k||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Be[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&mt.aa.h.call(this)}}x(mt,Ae);var Be={2:"touch",3:"pen",4:"mouse"};mt.prototype.h=function(){mt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),gt=0;function En(o,u,h,p,k){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!p,this.ha=k,this.key=++gt,this.da=this.fa=!1}function tr(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function le(o){this.src=o,this.g={},this.h=0}le.prototype.add=function(o,u,h,p,k){var N=o.toString();o=this.g[N],o||(o=this.g[N]=[],this.h++);var H=yt(o,u,p,k);return-1<H?(u=o[H],h||(u.fa=!1)):(u=new En(u,this.src,N,!!p,k),u.fa=h,o.push(u)),u};function O(o,u){var h=u.type;if(h in o.g){var p=o.g[h],k=Array.prototype.indexOf.call(p,u,void 0),N;(N=0<=k)&&Array.prototype.splice.call(p,k,1),N&&(tr(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function yt(o,u,h,p){for(var k=0;k<o.length;++k){var N=o[k];if(!N.da&&N.listener==u&&N.capture==!!h&&N.ha==p)return k}return-1}var tt="closure_lm_"+(1e6*Math.random()|0),ve={};function Qe(o,u,h,p,k){if(p&&p.once)return Kt(o,u,h,p,k);if(Array.isArray(u)){for(var N=0;N<u.length;N++)Qe(o,u[N],h,p,k);return null}return h=Tn(h),o&&o[Se]?o.K(u,h,d(p)?!!p.capture:!!p,k):st(o,u,h,!1,p,k)}function st(o,u,h,p,k,N){if(!u)throw Error("Invalid event type");var H=d(k)?!!k.capture:!!k,Ie=cn(o);if(Ie||(o[tt]=Ie=new le(o)),h=Ie.add(u,h,p,H,N),h.proxy)return h;if(p=ln(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)pt||(k=H),k===void 0&&(k=!1),o.addEventListener(u.toString(),p,k);else if(o.attachEvent)o.attachEvent(un(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function ln(){function o(h){return u.call(o.src,o.listener,h)}const u=Qt;return o}function Kt(o,u,h,p,k){if(Array.isArray(u)){for(var N=0;N<u.length;N++)Kt(o,u[N],h,p,k);return null}return h=Tn(h),o&&o[Se]?o.L(u,h,d(p)?!!p.capture:!!p,k):st(o,u,h,!0,p,k)}function ci(o,u,h,p,k){if(Array.isArray(u))for(var N=0;N<u.length;N++)ci(o,u[N],h,p,k);else p=d(p)?!!p.capture:!!p,h=Tn(h),o&&o[Se]?(o=o.i,u=String(u).toString(),u in o.g&&(N=o.g[u],h=yt(N,h,p,k),-1<h&&(tr(N[h]),Array.prototype.splice.call(N,h,1),N.length==0&&(delete o.g[u],o.h--)))):o&&(o=cn(o))&&(u=o.g[u.toString()],o=-1,u&&(o=yt(u,h,p,k)),(h=-1<o?u[o]:null)&&Ft(h))}function Ft(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[Se])O(u.i,o);else{var h=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(h,p,o.capture):u.detachEvent?u.detachEvent(un(h),p):u.addListener&&u.removeListener&&u.removeListener(p),(h=cn(u))?(O(h,o),h.h==0&&(h.src=null,u[tt]=null)):tr(o)}}}function un(o){return o in ve?ve[o]:ve[o]="on"+o}function Qt(o,u){if(o.da)o=!0;else{u=new mt(u,this);var h=o.listener,p=o.ha||o.src;o.fa&&Ft(o),o=h.call(p,u)}return o}function cn(o){return o=o[tt],o instanceof le?o:null}var Gt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(o){return typeof o=="function"?o:(o[Gt]||(o[Gt]=function(u){return o.handleEvent(u)}),o[Gt])}function Ee(){ae.call(this),this.i=new le(this),this.M=this,this.F=null}x(Ee,ae),Ee.prototype[Se]=!0,Ee.prototype.removeEventListener=function(o,u,h,p){ci(this,o,u,h,p)};function ze(o,u){var h,p=o.F;if(p)for(h=[];p;p=p.F)h.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new Ae(u,o);else if(u instanceof Ae)u.target=u.target||o;else{var k=u;u=new Ae(p,o),S(u,k)}if(k=!0,h)for(var N=h.length-1;0<=N;N--){var H=u.g=h[N];k=Sn(H,p,!0,u)&&k}if(H=u.g=o,k=Sn(H,p,!0,u)&&k,k=Sn(H,p,!1,u)&&k,h)for(N=0;N<h.length;N++)H=u.g=h[N],k=Sn(H,p,!1,u)&&k}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],p=0;p<h.length;p++)tr(h[p]);delete o.g[u],o.h--}}this.F=null},Ee.prototype.K=function(o,u,h,p){return this.i.add(String(o),u,!1,h,p)},Ee.prototype.L=function(o,u,h,p){return this.i.add(String(o),u,!0,h,p)};function Sn(o,u,h,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var k=!0,N=0;N<u.length;++N){var H=u[N];if(H&&!H.da&&H.capture==h){var Ie=H.listener,ot=H.ha||H.src;H.fa&&O(o.i,H),k=Ie.call(ot,p)!==!1&&k}}return k&&!p.defaultPrevented}function us(o,u,h){if(typeof o=="function")h&&(o=v(o,h));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Mr(o){o.g=us(()=>{o.g=null,o.i&&(o.i=!1,Mr(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Ad extends ae{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Mr(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hn(o){ae.call(this),this.h=o,this.g={}}x(hn,ae);var bo=[];function cs(o){z(o.g,function(u,h){this.g.hasOwnProperty(h)&&Ft(u)},o),o.g={}}hn.prototype.N=function(){hn.aa.N.call(this),cs(this)},hn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hs=l.JSON.stringify,hi=l.JSON.parse,Jl=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function nr(){}nr.prototype.h=null;function Uo(o){return o.h||(o.h=o.i())}function Ct(){}var jt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ds(){Ae.call(this,"d")}x(ds,Ae);function fs(){Ae.call(this,"c")}x(fs,Ae);var On={},Fr=null;function jr(){return Fr=Fr||new Ee}On.La="serverreachability";function Mn(o){Ae.call(this,On.La,o)}x(Mn,Ae);function Yt(o){const u=jr();ze(u,new Mn(u))}On.STAT_EVENT="statevent";function Re(o,u){Ae.call(this,On.STAT_EVENT,o),this.stat=u}x(Re,Ae);function Oe(o){const u=jr();ze(u,new Re(u,o))}On.Ma="timingevent";function ps(o,u){Ae.call(this,On.Ma,o),this.size=u}x(ps,Ae);function br(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function rr(){this.g=!0}rr.prototype.xa=function(){this.g=!1};function Bo(o,u,h,p,k,N){o.info(function(){if(o.g)if(N)for(var H="",Ie=N.split("&"),ot=0;ot<Ie.length;ot++){var fe=Ie[ot].split("=");if(1<fe.length){var vt=fe[0];fe=fe[1];var _t=vt.split("_");H=2<=_t.length&&_t[1]=="type"?H+(vt+"="+fe+"&"):H+(vt+"=redacted&")}}else H=null;else H=N;return"XMLHTTP REQ ("+p+") [attempt "+k+"]: "+u+`
`+h+`
`+H})}function Zl(o,u,h,p,k,N,H){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+k+"]: "+u+`
`+h+`
`+N+" "+H})}function Fn(o,u,h,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+b(o,h)+(p?" "+p:"")})}function eu(o,u){o.info(function(){return"TIMEOUT: "+u})}rr.prototype.info=function(){};function b(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var p=h[o];if(!(2>p.length)){var k=p[1];if(Array.isArray(k)&&!(1>k.length)){var N=k[0];if(N!="noop"&&N!="stop"&&N!="close")for(var H=1;H<k.length;H++)k[H]=""}}}}return hs(h)}catch{return u}}var V={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},me={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},J;function K(){}x(K,nr),K.prototype.g=function(){return new XMLHttpRequest},K.prototype.i=function(){return{}},J=new K;function ie(o,u,h,p){this.j=o,this.i=u,this.l=h,this.R=p||1,this.U=new hn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}var ue={},He={};function Me(o,u,h){o.L=1,o.v=qo(bn(u)),o.m=h,o.P=!0,Te(o,null)}function Te(o,u){o.F=Date.now(),bt(o),o.A=bn(o.v);var h=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),Od(h.i,"t",p),o.C=0,h=o.j.J,o.h=new Pe,o.g=Zd(o.j,h?u:null,!o.m),0<o.O&&(o.M=new Ad(v(o.Y,o,o.g),o.O)),u=o.U,h=o.g,p=o.ca;var k="readystatechange";Array.isArray(k)||(k&&(bo[0]=k.toString()),k=bo);for(var N=0;N<k.length;N++){var H=Qe(h,k[N],p||u.handleEvent,!1,u.h||u);if(!H)break;u.g[H.key]=H}u=o.H?m(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Yt(),Bo(o.i,o.u,o.A,o.l,o.R,o.m)}ie.prototype.ca=function(o){o=o.target;const u=this.M;u&&Un(o)==3?u.j():this.Y(o)},ie.prototype.Y=function(o){try{if(o==this.g)e:{const _t=Un(this.g);var u=this.g.Ba();const gi=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||zd(this.g)))){this.J||_t!=4||u==7||(u==8||0>=gi?Yt(3):Yt(2)),di(this);var h=this.g.Z();this.X=h;t:if(ir(this)){var p=zd(this.g);o="";var k=p.length,N=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),sr(this);var H="";break t}this.h.i=new l.TextDecoder}for(u=0;u<k;u++)this.h.h=!0,o+=this.h.i.decode(p[u],{stream:!(N&&u==k-1)});p.length=0,this.h.g+=o,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=h==200,Zl(this.i,this.u,this.A,this.l,this.R,_t,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,ot=this.g;if((Ie=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Ie)){var fe=Ie;break t}}fe=null}if(h=fe)Fn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fi(this,h);else{this.o=!1,this.s=3,Oe(12),An(this),sr(this);break e}}if(this.P){h=!0;let dn;for(;!this.J&&this.C<H.length;)if(dn=In(this,H),dn==He){_t==4&&(this.s=4,Oe(14),h=!1),Fn(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==ue){this.s=4,Oe(15),Fn(this.i,this.l,H,"[Invalid Chunk]"),h=!1;break}else Fn(this.i,this.l,dn,null),fi(this,dn);if(ir(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||H.length!=0||this.h.h||(this.s=1,Oe(16),h=!1),this.o=this.o&&h,!h)Fn(this.i,this.l,H,"[Invalid Chunked Response]"),An(this),sr(this);else if(0<H.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),ou(vt),vt.M=!0,Oe(11))}}else Fn(this.i,this.l,H,null),fi(this,H);_t==4&&An(this),this.o&&!this.J&&(_t==4?Gd(this.j,this):(this.o=!1,bt(this)))}else u_(this.g),h==400&&0<H.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),An(this),sr(this)}}}catch{}finally{}};function ir(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function In(o,u){var h=o.C,p=u.indexOf(`
`,h);return p==-1?He:(h=Number(u.substring(h,p)),isNaN(h)?ue:(p+=1,p+h>u.length?He:(u=u.slice(p,p+h),o.C=p+h,u)))}ie.prototype.cancel=function(){this.J=!0,An(this)};function bt(o){o.S=Date.now()+o.I,jn(o,o.I)}function jn(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=br(v(o.ba,o),u)}function di(o){o.B&&(l.clearTimeout(o.B),o.B=null)}ie.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(eu(this.i,this.A),this.L!=2&&(Yt(),Oe(17)),An(this),this.s=2,sr(this)):jn(this,this.S-o)};function sr(o){o.j.G==0||o.J||Gd(o.j,o)}function An(o){di(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,cs(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function fi(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||tu(h.h,o))){if(!o.K&&tu(h.h,o)&&h.G==3){try{var p=h.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var k=p;if(k[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)Jo(h),Yo(h);else break e;su(h),Oe(18)}}else h.za=k[1],0<h.za-h.T&&37500>k[2]&&h.F&&h.v==0&&!h.C&&(h.C=br(v(h.Za,h),6e3));if(1>=Rd(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Br(h,11)}else if((o.K||h.g==o)&&Jo(h),!T(u))for(k=h.Da.g.parse(u),u=0;u<k.length;u++){let fe=k[u];if(h.T=fe[0],fe=fe[1],h.G==2)if(fe[0]=="c"){h.K=fe[1],h.ia=fe[2];const vt=fe[3];vt!=null&&(h.la=vt,h.j.info("VER="+h.la));const _t=fe[4];_t!=null&&(h.Aa=_t,h.j.info("SVER="+h.Aa));const gi=fe[5];gi!=null&&typeof gi=="number"&&0<gi&&(p=1.5*gi,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;const dn=o.g;if(dn){const ea=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ea){var N=p.h;N.g||ea.indexOf("spdy")==-1&&ea.indexOf("quic")==-1&&ea.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(nu(N,N.h),N.h=null))}if(p.D){const au=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;au&&(p.ya=au,ke(p.I,p.D,au))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var H=o;if(p.qa=Jd(p,p.J?p.ia:null,p.W),H.K){Cd(p.h,H);var Ie=H,ot=p.L;ot&&(Ie.I=ot),Ie.B&&(di(Ie),bt(Ie)),p.g=H}else Kd(p);0<h.i.length&&Xo(h)}else fe[0]!="stop"&&fe[0]!="close"||Br(h,7);else h.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Br(h,7):iu(h):fe[0]!="noop"&&h.l&&h.l.ta(fe),h.v=0)}}Yt(4)}catch{}}var zo=class{constructor(o,u){this.g=o,this.map=u}};function ms(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $o(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Rd(o){return o.h?1:o.g?o.g.size:0}function tu(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function nu(o,u){o.g?o.g.add(u):o.h=u}function Cd(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}ms.prototype.cancel=function(){if(this.i=Pd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Pd(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const h of o.g.values())u=u.concat(h.D);return u}return D(o.i)}function Qv(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],h=o.length,p=0;p<h;p++)u.push(o[p]);return u}u=[],h=0;for(p in o)u[h++]=o[p];return u}function Gv(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(const p in o)u[h++]=p;return u}}}function kd(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=Gv(o),p=Qv(o),k=p.length,N=0;N<k;N++)u.call(void 0,p[N],h&&h[N],o)}var xd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yv(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var p=o[h].indexOf("="),k=null;if(0<=p){var N=o[h].substring(0,p);k=o[h].substring(p+1)}else N=o[h];u(N,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Ur(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Ur){this.h=o.h,Wo(this,o.j),this.o=o.o,this.g=o.g,Ho(this,o.s),this.l=o.l;var u=o.i,h=new vs;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),Nd(this,h),this.m=o.m}else o&&(u=String(o).match(xd))?(this.h=!1,Wo(this,u[1]||"",!0),this.o=gs(u[2]||""),this.g=gs(u[3]||"",!0),Ho(this,u[4]),this.l=gs(u[5]||"",!0),Nd(this,u[6]||"",!0),this.m=gs(u[7]||"")):(this.h=!1,this.i=new vs(null,this.h))}Ur.prototype.toString=function(){var o=[],u=this.j;u&&o.push(ys(u,Vd,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(ys(u,Vd,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(ys(h,h.charAt(0)=="/"?Zv:Jv,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",ys(h,t_)),o.join("")};function bn(o){return new Ur(o)}function Wo(o,u,h){o.j=h?gs(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Ho(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Nd(o,u,h){u instanceof vs?(o.i=u,n_(o.i,o.h)):(h||(u=ys(u,e_)),o.i=new vs(u,o.h))}function ke(o,u,h){o.i.set(u,h)}function qo(o){return ke(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function gs(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ys(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,Xv),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Xv(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Vd=/[#\/\?@]/g,Jv=/[#\?:]/g,Zv=/[#\?]/g,e_=/[#\?@]/g,t_=/#/g;function vs(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function or(o){o.g||(o.g=new Map,o.h=0,o.i&&Yv(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}t=vs.prototype,t.add=function(o,u){or(this),this.i=null,o=pi(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function Dd(o,u){or(o),u=pi(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Ld(o,u){return or(o),u=pi(o,u),o.g.has(u)}t.forEach=function(o,u){or(this),this.g.forEach(function(h,p){h.forEach(function(k){o.call(u,k,p,this)},this)},this)},t.na=function(){or(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let p=0;p<u.length;p++){const k=o[p];for(let N=0;N<k.length;N++)h.push(u[p])}return h},t.V=function(o){or(this);let u=[];if(typeof o=="string")Ld(this,o)&&(u=u.concat(this.g.get(pi(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},t.set=function(o,u){return or(this),this.i=null,o=pi(this,o),Ld(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},t.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Od(o,u,h){Dd(o,u),0<h.length&&(o.i=null,o.g.set(pi(o,u),D(h)),o.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var p=u[h];const N=encodeURIComponent(String(p)),H=this.V(p);for(p=0;p<H.length;p++){var k=N;H[p]!==""&&(k+="="+encodeURIComponent(String(H[p]))),o.push(k)}}return this.i=o.join("&")};function pi(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function n_(o,u){u&&!o.j&&(or(o),o.i=null,o.g.forEach(function(h,p){var k=p.toLowerCase();p!=k&&(Dd(this,p),Od(this,k,h))},o)),o.j=u}function r_(o,u){const h=new rr;if(l.Image){const p=new Image;p.onload=R(ar,h,"TestLoadImage: loaded",!0,u,p),p.onerror=R(ar,h,"TestLoadImage: error",!1,u,p),p.onabort=R(ar,h,"TestLoadImage: abort",!1,u,p),p.ontimeout=R(ar,h,"TestLoadImage: timeout",!1,u,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function i_(o,u){const h=new rr,p=new AbortController,k=setTimeout(()=>{p.abort(),ar(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(N=>{clearTimeout(k),N.ok?ar(h,"TestPingServer: ok",!0,u):ar(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(k),ar(h,"TestPingServer: error",!1,u)})}function ar(o,u,h,p,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),p(h)}catch{}}function s_(){this.g=new Jl}function o_(o,u,h){const p=h||"";try{kd(o,function(k,N){let H=k;d(k)&&(H=hs(k)),u.push(p+N+"="+encodeURIComponent(H))})}catch(k){throw u.push(p+"type="+encodeURIComponent("_badmap")),k}}function Ko(o){this.l=o.Ub||null,this.j=o.eb||!1}x(Ko,nr),Ko.prototype.g=function(){return new Qo(this.l,this.j)},Ko.prototype.i=function(o){return function(){return o}}({});function Qo(o,u){Ee.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Qo,Ee),t=Qo.prototype,t.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,ws(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_s(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ws(this)),this.g&&(this.readyState=3,ws(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Md(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Md(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?_s(this):ws(this),this.readyState==3&&Md(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,_s(this))},t.Qa=function(o){this.g&&(this.response=o,_s(this))},t.ga=function(){this.g&&_s(this)};function _s(o){o.readyState=4,o.l=null,o.j=null,o.v=null,ws(o)}t.setRequestHeader=function(o,u){this.u.append(o,u)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function ws(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Qo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Fd(o){let u="";return z(o,function(h,p){u+=p,u+=":",u+=h,u+=`\r
`}),u}function ru(o,u,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=Fd(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):ke(o,u,h))}function $e(o){Ee.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x($e,Ee);var a_=/^https?$/i,l_=["POST","PUT"];t=$e.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,u,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():J.g(),this.v=this.o?Uo(this.o):Uo(J),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(N){jd(this,N);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var k in p)h.set(k,p[k]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const N of p.keys())h.set(N,p.get(N));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(N=>N.toLowerCase()=="content-type"),k=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(l_,u,void 0))||p||k||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,H]of h)this.g.setRequestHeader(N,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bd(this),this.u=!0,this.g.send(o),this.u=!1}catch(N){jd(this,N)}};function jd(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,bd(o),Go(o)}function bd(o){o.A||(o.A=!0,ze(o,"complete"),ze(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ze(this,"complete"),ze(this,"abort"),Go(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Go(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ud(this):this.bb())},t.bb=function(){Ud(this)};function Ud(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Un(o)!=4||o.Z()!=2)){if(o.u&&Un(o)==4)us(o.Ea,0,o);else if(ze(o,"readystatechange"),Un(o)==4){o.h=!1;try{const H=o.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var p;if(p=H===0){var k=String(o.D).match(xd)[1]||null;!k&&l.self&&l.self.location&&(k=l.self.location.protocol.slice(0,-1)),p=!a_.test(k?k.toLowerCase():"")}h=p}if(h)ze(o,"complete"),ze(o,"success");else{o.m=6;try{var N=2<Un(o)?o.g.statusText:""}catch{N=""}o.l=N+" ["+o.Z()+"]",bd(o)}}finally{Go(o)}}}}function Go(o,u){if(o.g){Bd(o);const h=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||ze(o,"ready");try{h.onreadystatechange=p}catch{}}}function Bd(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function Un(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),hi(u)}};function zd(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function u_(o){const u={};o=(o.g&&2<=Un(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(T(o[p]))continue;var h=A(o[p]);const k=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const N=u[k]||[];u[k]=N,N.push(h)}_(u,function(p){return p.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Es(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function $d(o){this.Aa=0,this.i=[],this.j=new rr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Es("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Es("baseRetryDelayMs",5e3,o),this.cb=Es("retryDelaySeedMs",1e4,o),this.Wa=Es("forwardChannelMaxRetries",2,o),this.wa=Es("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new ms(o&&o.concurrentRequestLimit),this.Da=new s_,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=$d.prototype,t.la=8,t.G=1,t.connect=function(o,u,h,p){Oe(0),this.W=o,this.H=u||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Jd(this,null,this.W),Xo(this)};function iu(o){if(Wd(o),o.G==3){var u=o.U++,h=bn(o.I);if(ke(h,"SID",o.K),ke(h,"RID",u),ke(h,"TYPE","terminate"),Ts(o,h),u=new ie(o,o.j,u),u.L=2,u.v=qo(bn(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=u.v,h=!0),h||(u.g=Zd(u.j,null),u.g.ea(u.v)),u.F=Date.now(),bt(u)}Xd(o)}function Yo(o){o.g&&(ou(o),o.g.cancel(),o.g=null)}function Wd(o){Yo(o),o.u&&(l.clearTimeout(o.u),o.u=null),Jo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Xo(o){if(!$o(o.h)&&!o.s){o.s=!0;var u=o.Ga;ge||ee(),W||(ge(),W=!0),G.add(u,o),o.B=0}}function c_(o,u){return Rd(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=br(v(o.Ga,o,u),Yd(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const k=new ie(this,this.j,o);let N=this.o;if(this.S&&(N?(N=m(N),S(N,this.S)):N=this.S),this.m!==null||this.O||(k.H=N,N=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=qd(this,k,u),h=bn(this.I),ke(h,"RID",o),ke(h,"CVER",22),this.D&&ke(h,"X-HTTP-Session-Id",this.D),Ts(this,h),N&&(this.O?u="headers="+encodeURIComponent(String(Fd(N)))+"&"+u:this.m&&ru(h,this.m,N)),nu(this.h,k),this.Ua&&ke(h,"TYPE","init"),this.P?(ke(h,"$req",u),ke(h,"SID","null"),k.T=!0,Me(k,h,null)):Me(k,h,u),this.G=2}}else this.G==3&&(o?Hd(this,o):this.i.length==0||$o(this.h)||Hd(this))};function Hd(o,u){var h;u?h=u.l:h=o.U++;const p=bn(o.I);ke(p,"SID",o.K),ke(p,"RID",h),ke(p,"AID",o.T),Ts(o,p),o.m&&o.o&&ru(p,o.m,o.o),h=new ie(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=qd(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),nu(o.h,h),Me(h,p,u)}function Ts(o,u){o.H&&z(o.H,function(h,p){ke(u,p,h)}),o.l&&kd({},function(h,p){ke(u,p,h)})}function qd(o,u,h){h=Math.min(o.i.length,h);var p=o.l?v(o.l.Na,o.l,o):null;e:{var k=o.i;let N=-1;for(;;){const H=["count="+h];N==-1?0<h?(N=k[0].g,H.push("ofs="+N)):N=0:H.push("ofs="+N);let Ie=!0;for(let ot=0;ot<h;ot++){let fe=k[ot].g;const vt=k[ot].map;if(fe-=N,0>fe)N=Math.max(0,k[ot].g-100),Ie=!1;else try{o_(vt,H,"req"+fe+"_")}catch{p&&p(vt)}}if(Ie){p=H.join("&");break e}}}return o=o.i.splice(0,h),u.D=o,p}function Kd(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;ge||ee(),W||(ge(),W=!0),G.add(u,o),o.v=0}}function su(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=br(v(o.Fa,o),Yd(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Qd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=br(v(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),Yo(this),Qd(this))};function ou(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Qd(o){o.g=new ie(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=bn(o.qa);ke(u,"RID","rpc"),ke(u,"SID",o.K),ke(u,"AID",o.T),ke(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&ke(u,"TO",o.ja),ke(u,"TYPE","xmlhttp"),Ts(o,u),o.m&&o.o&&ru(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=qo(bn(u)),h.m=null,h.P=!0,Te(h,o)}t.Za=function(){this.C!=null&&(this.C=null,Yo(this),su(this),Oe(19))};function Jo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Gd(o,u){var h=null;if(o.g==u){Jo(o),ou(o),o.g=null;var p=2}else if(tu(o.h,u))h=u.D,Cd(o.h,u),p=1;else return;if(o.G!=0){if(u.o)if(p==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var k=o.B;p=jr(),ze(p,new ps(p,h)),Xo(o)}else Kd(o);else if(k=u.s,k==3||k==0&&0<u.X||!(p==1&&c_(o,u)||p==2&&su(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),k){case 1:Br(o,5);break;case 4:Br(o,10);break;case 3:Br(o,6);break;default:Br(o,2)}}}function Yd(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function Br(o,u){if(o.j.info("Error code "+u),u==2){var h=v(o.fb,o),p=o.Xa;const k=!p;p=new Ur(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Wo(p,"https"),qo(p),k?r_(p.toString(),h):i_(p.toString(),h)}else Oe(2);o.G=0,o.l&&o.l.sa(u),Xd(o),Wd(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Xd(o){if(o.G=0,o.ka=[],o.l){const u=Pd(o.h);(u.length!=0||o.i.length!=0)&&(M(o.ka,u),M(o.ka,o.i),o.h.i.length=0,D(o.i),o.i.length=0),o.l.ra()}}function Jd(o,u,h){var p=h instanceof Ur?bn(h):new Ur(h);if(p.g!="")u&&(p.g=u+"."+p.g),Ho(p,p.s);else{var k=l.location;p=k.protocol,u=u?u+"."+k.hostname:k.hostname,k=+k.port;var N=new Ur(null);p&&Wo(N,p),u&&(N.g=u),k&&Ho(N,k),h&&(N.l=h),p=N}return h=o.D,u=o.ya,h&&u&&ke(p,h,u),ke(p,"VER",o.la),Ts(o,p),p}function Zd(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new $e(new Ko({eb:h})):new $e(o.pa),u.Ha(o.J),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ef(){}t=ef.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Zo(){}Zo.prototype.g=function(o,u){return new Ut(o,u)};function Ut(o,u){Ee.call(this),this.g=new $d(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!T(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!T(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new mi(this)}x(Ut,Ee),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){iu(this.g)},Ut.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=hs(o),o=h);u.i.push(new zo(u.Ya++,o)),u.G==3&&Xo(u)},Ut.prototype.N=function(){this.g.l=null,delete this.j,iu(this.g),delete this.g,Ut.aa.N.call(this)};function tf(o){ds.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const h in u){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}x(tf,ds);function nf(){fs.call(this),this.status=1}x(nf,fs);function mi(o){this.g=o}x(mi,ef),mi.prototype.ua=function(){ze(this.g,"a")},mi.prototype.ta=function(o){ze(this.g,new tf(o))},mi.prototype.sa=function(o){ze(this.g,new nf)},mi.prototype.ra=function(){ze(this.g,"b")},Zo.prototype.createWebChannel=Zo.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,Dy=function(){return new Zo},Vy=function(){return jr()},Ny=On,Bc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},V.NO_ERROR=0,V.TIMEOUT=8,V.HTTP_ERROR=6,Oa=V,me.COMPLETE="complete",xy=me,Ct.EventType=jt,jt.OPEN="a",jt.CLOSE="b",jt.ERROR="c",jt.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,Ms=Ct,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,ky=$e}).apply(typeof va<"u"?va:typeof self<"u"?self:typeof window<"u"?window:{});const Sp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ss="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new Ty("@firebase/firestore");function Ns(){return ri.logLevel}function Q(t,...e){if(ri.logLevel<=he.DEBUG){const n=e.map(Xh);ri.debug(`Firestore (${ss}): ${t}`,...n)}}function Jn(t,...e){if(ri.logLevel<=he.ERROR){const n=e.map(Xh);ri.error(`Firestore (${ss}): ${t}`,...n)}}function Qi(t,...e){if(ri.logLevel<=he.WARN){const n=e.map(Xh);ri.warn(`Firestore (${ss}): ${t}`,...n)}}function Xh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${ss}) INTERNAL ASSERTION FAILED: `+t;throw Jn(e),new Error(e)}function we(t,e){t||Z()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends is{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(St.UNAUTHENTICATED))}shutdown(){}}class E1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class T1{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new Ly(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new St(e)}}class S1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=St.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class I1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new S1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new A1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=C1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function Gi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new et(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new et(0,0))}static max(){return new te(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _o.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _o?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends _o{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const P1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends _o{construct(e,n,r){return new ut(e,n,r)}static isValidIdentifier(e){return P1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ut(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Y(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new Y(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ut(n)}static emptyPath(){return new ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Le.fromString(e))}static fromName(e){return new X(Le.fromString(e).popFirst(5))}static empty(){return new X(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Le(e.slice()))}}function k1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new xr(i,X.empty(),e)}function x1(t){return new xr(t.readTime,t.key,-1)}class xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xr(te.min(),X.empty(),-1)}static max(){return new xr(te.max(),X.empty(),-1)}}function N1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==V1)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(f=>{a[d]=f,++l,l===s&&r(a)},f=>i(f))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function L1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jh.oe=-1;function Ul(t){return t==null}function ml(t){return t===0&&1/t==-1/0}function O1(t){return typeof t=="number"&&Number.isInteger(t)&&!ml(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function os(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function My(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||lt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _a(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _a(this.root,e,this.comparator,!1)}getReverseIterator(){return new _a(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _a(this.root,e,this.comparator,!0)}}class _a{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??lt.RED,this.left=i??lt.EMPTY,this.right=s??lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new lt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return lt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}lt.EMPTY=null,lt.RED=!0,lt.BLACK=!1;lt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,i,s){return this}insert(e,n,r){return new lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ap(this.data.getIterator())}getIteratorFrom(e){return new Ap(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ht(this.comparator);return n.data=e,n}}class Ap{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new yn([])}unionWith(e){let n=new ht(ut.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Fy("Invalid base64 string: "+s):s}}(e);return new ft(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const M1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(we(!!t),typeof t=="string"){let e=0;const n=M1.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ii(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ed(t){const e=t.mapValue.fields.__previous_value__;return Zh(e)?ed(e):e}function wo(t){const e=Nr(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n,r,i,s,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d}}class Eo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Eo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Eo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zh(t)?4:b1(t)?9007199254740991:j1(t)?10:11:Z()}function Dn(t,e){if(t===e)return!0;const n=si(t);if(n!==si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wo(t).isEqual(wo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Nr(i.timestampValue),l=Nr(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ii(i.bytesValue).isEqual(ii(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return qe(i.geoPointValue.latitude)===qe(s.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return qe(i.integerValue)===qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=qe(i.doubleValue),l=qe(s.doubleValue);return a===l?ml(a)===ml(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Gi(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Ip(a)!==Ip(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Dn(a[c],l[c])))return!1;return!0}(t,e);default:return Z()}}function To(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function Yi(t,e){if(t===e)return 0;const n=si(t),r=si(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=qe(s.integerValue||s.doubleValue),c=qe(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Rp(t.timestampValue,e.timestampValue);case 4:return Rp(wo(t),wo(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(s,a){const l=ii(s),c=ii(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=pe(l[d],c[d]);if(f!==0)return f}return pe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=pe(qe(s.latitude),qe(a.latitude));return l!==0?l:pe(qe(s.longitude),qe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Cp(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,c,d,f;const g=s.fields||{},v=a.fields||{},R=(l=g.value)===null||l===void 0?void 0:l.arrayValue,x=(c=v.value)===null||c===void 0?void 0:c.arrayValue,D=pe(((d=R==null?void 0:R.values)===null||d===void 0?void 0:d.length)||0,((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0);return D!==0?D:Cp(R,x)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===wa.mapValue&&a===wa.mapValue)return 0;if(s===wa.mapValue)return 1;if(a===wa.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),d=a.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let g=0;g<c.length&&g<f.length;++g){const v=pe(c[g],f[g]);if(v!==0)return v;const R=Yi(l[c[g]],d[f[g]]);if(R!==0)return R}return pe(c.length,f.length)}(t.mapValue,e.mapValue);default:throw Z()}}function Rp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=Nr(t),r=Nr(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function Cp(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Yi(n[i],r[i]);if(s)return s}return pe(n.length,r.length)}function Xi(t){return zc(t)}function zc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ii(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=zc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${zc(n.fields[a])}`;return i+"}"}(t.mapValue):Z()}function $c(t){return!!t&&"integerValue"in t}function td(t){return!!t&&"arrayValue"in t}function Pp(t){return!!t&&"nullValue"in t}function kp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ma(t){return!!t&&"mapValue"in t}function j1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Qs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return os(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function b1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ma(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qs(n)}setAll(e){let n=ut.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=Qs(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ma(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ma(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){os(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Zt(Qs(this.value))}}function jy(t){const e=[];return os(t.fields,(n,r)=>{const i=new ut([n]);if(Ma(r)){const s=jy(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new At(e,0,te.min(),te.min(),te.min(),Zt.empty(),0)}static newFoundDocument(e,n,r,i){return new At(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new At(e,2,n,te.min(),te.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new At(e,3,n,te.min(),te.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n){this.position=e,this.inclusive=n}}function xp(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=X.comparator(X.fromName(a.referenceValue),n.key):r=Yi(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Np(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n="asc"){this.field=e,this.dir=n}}function U1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{}class Je extends by{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new z1(e,n,r):n==="array-contains"?new H1(e,r):n==="in"?new q1(e,r):n==="not-in"?new K1(e,r):n==="array-contains-any"?new Q1(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new $1(e,r):new W1(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Yi(n,this.value)):n!==null&&si(this.value)===si(n)&&this.matchesComparison(Yi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends by{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ln(e,n)}matches(e){return Uy(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Uy(t){return t.op==="and"}function By(t){return B1(t)&&Uy(t)}function B1(t){for(const e of t.filters)if(e instanceof Ln)return!1;return!0}function Wc(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+Xi(t.value);if(By(t))return t.filters.map(e=>Wc(e)).join(",");{const e=t.filters.map(n=>Wc(n)).join(",");return`${t.op}(${e})`}}function zy(t,e){return t instanceof Je?function(r,i){return i instanceof Je&&r.op===i.op&&r.field.isEqual(i.field)&&Dn(r.value,i.value)}(t,e):t instanceof Ln?function(r,i){return i instanceof Ln&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&zy(a,i.filters[l]),!0):!1}(t,e):void Z()}function $y(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${Xi(n.value)}`}(t):t instanceof Ln?function(n){return n.op.toString()+" {"+n.getFilters().map($y).join(" ,")+"}"}(t):"Filter"}class z1 extends Je{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class $1 extends Je{constructor(e,n){super(e,"in",n),this.keys=Wy("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class W1 extends Je{constructor(e,n){super(e,"not-in",n),this.keys=Wy("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Wy(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class H1 extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return td(n)&&To(n.arrayValue,this.value)}}class q1 extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&To(this.value.arrayValue,n)}}class K1 extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(To(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!To(this.value.arrayValue,n)}}class Q1 extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!td(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>To(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.ue=null}}function Vp(t,e=null,n=[],r=[],i=null,s=null,a=null){return new G1(t,e,n,r,i,s,a)}function nd(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Wc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ul(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xi(r)).join(",")),e.ue=n}return e.ue}function rd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!U1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zy(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Np(t.startAt,e.startAt)&&Np(t.endAt,e.endAt)}function Hc(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Y1(t,e,n,r,i,s,a,l){return new Bl(t,e,n,r,i,s,a,l)}function Hy(t){return new Bl(t)}function Dp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function X1(t){return t.collectionGroup!==null}function Gs(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ht(ut.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new yl(s,r))}),n.has(ut.keyField().canonicalString())||e.ce.push(new yl(ut.keyField(),r))}return e.ce}function Nn(t){const e=ne(t);return e.le||(e.le=J1(e,Gs(t))),e.le}function J1(t,e){if(t.limitType==="F")return Vp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new yl(i.field,s)});const n=t.endAt?new gl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gl(t.startAt.position,t.startAt.inclusive):null;return Vp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function qc(t,e,n){return new Bl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zl(t,e){return rd(Nn(t),Nn(e))&&t.limitType===e.limitType}function qy(t){return`${nd(Nn(t))}|lt:${t.limitType}`}function vi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$y(i)).join(", ")}]`),Ul(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Xi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Xi(i)).join(",")),`Target(${r})`}(Nn(t))}; limitType=${t.limitType})`}function $l(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):X.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Gs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,c){const d=xp(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,Gs(r),i)||r.endAt&&!function(a,l,c){const d=xp(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,Gs(r),i))}(t,e)}function Z1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ky(t){return(e,n)=>{let r=!1;for(const i of Gs(t)){const s=eT(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function eT(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(s,a,l){const c=a.data.field(s),d=l.data.field(s);return c!==null&&d!==null?Yi(c,d):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){os(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return My(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=new Ue(X.comparator);function Zn(){return tT}const Qy=new Ue(X.comparator);function Fs(...t){let e=Qy;for(const n of t)e=e.insert(n.key,n);return e}function Gy(t){let e=Qy;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qr(){return Ys()}function Yy(){return Ys()}function Ys(){return new as(t=>t.toString(),(t,e)=>t.isEqual(e))}const nT=new Ue(X.comparator),rT=new ht(X.comparator);function oe(...t){let e=rT;for(const n of t)e=e.add(n);return e}const iT=new ht(pe);function sT(){return iT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ml(e)?"-0":e}}function Xy(t){return{integerValue:""+t}}function oT(t,e){return O1(e)?Xy(e):id(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this._=void 0}}function aT(t,e,n){return t instanceof vl?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Zh(s)&&(s=ed(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof So?Zy(t,e):t instanceof Io?ev(t,e):function(i,s){const a=Jy(i,s),l=Lp(a)+Lp(i.Pe);return $c(a)&&$c(i.Pe)?Xy(l):id(i.serializer,l)}(t,e)}function lT(t,e,n){return t instanceof So?Zy(t,e):t instanceof Io?ev(t,e):n}function Jy(t,e){return t instanceof _l?function(r){return $c(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class vl extends Wl{}class So extends Wl{constructor(e){super(),this.elements=e}}function Zy(t,e){const n=tv(e);for(const r of t.elements)n.some(i=>Dn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Io extends Wl{constructor(e){super(),this.elements=e}}function ev(t,e){let n=tv(e);for(const r of t.elements)n=n.filter(i=>!Dn(i,r));return{arrayValue:{values:n}}}class _l extends Wl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Lp(t){return qe(t.integerValue||t.doubleValue)}function tv(t){return td(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function uT(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof So&&i instanceof So||r instanceof Io&&i instanceof Io?Gi(r.elements,i.elements,Dn):r instanceof _l&&i instanceof _l?Dn(r.Pe,i.Pe):r instanceof vl&&i instanceof vl}(t.transform,e.transform)}class cT{constructor(e,n){this.version=e,this.transformResults=n}}class qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hl{}function nv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new iv(t.key,qn.none()):new Do(t.key,t.data,qn.none());{const n=t.data,r=Zt.empty();let i=new ht(ut.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new li(t.key,r,new yn(i.toArray()),qn.none())}}function hT(t,e,n){t instanceof Do?function(i,s,a){const l=i.value.clone(),c=Mp(i.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof li?function(i,s,a){if(!Fa(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=Mp(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(rv(i)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Xs(t,e,n,r){return t instanceof Do?function(s,a,l,c){if(!Fa(s.precondition,a))return l;const d=s.value.clone(),f=Fp(s.fieldTransforms,c,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof li?function(s,a,l,c){if(!Fa(s.precondition,a))return l;const d=Fp(s.fieldTransforms,c,a),f=a.data;return f.setAll(rv(s)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,a,l){return Fa(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function dT(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Jy(r.transform,i||null);s!=null&&(n===null&&(n=Zt.empty()),n.set(r.field,s))}return n||null}function Op(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gi(r,i,(s,a)=>uT(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Do extends Hl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class li extends Hl{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function rv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Mp(t,e,n){const r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,lT(a,l,n[i]))}return r}function Fp(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,aT(s,a,e))}return r}class iv extends Hl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fT extends Hl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&hT(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xs(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Yy();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const c=nv(a,l);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Gi(this.mutations,e.mutations,(n,r)=>Op(n,r))&&Gi(this.baseMutations,e.baseMutations,(n,r)=>Op(n,r))}}class sd{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=function(){return nT}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new sd(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,ce;function yT(t){switch(t){default:return Z();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function sv(t){if(t===void 0)return Jn("GRPC error has no .code"),j.UNKNOWN;switch(t){case Ge.OK:return j.OK;case Ge.CANCELLED:return j.CANCELLED;case Ge.UNKNOWN:return j.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return j.INTERNAL;case Ge.UNAVAILABLE:return j.UNAVAILABLE;case Ge.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Ge.NOT_FOUND:return j.NOT_FOUND;case Ge.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Ge.ABORTED:return j.ABORTED;case Ge.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Ge.DATA_LOSS:return j.DATA_LOSS;default:return Z()}}(ce=Ge||(Ge={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=new Xr([4294967295,4294967295],0);function jp(t){const e=vT().encode(t),n=new Py;return n.update(e),new Uint8Array(n.digest())}function bp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xr([n,r],0),new Xr([i,s],0)]}class od{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new js(`Invalid padding: ${n}`);if(r<0)throw new js(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new js(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new js(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Xr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Xr.fromNumber(r)));return i.compare(_T)===1&&(i=new Xr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=jp(e),[r,i]=bp(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new od(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=jp(e),[r,i]=bp(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class js extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Lo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ql(te.min(),i,new Ue(pe),Zn(),oe())}}class Lo{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Lo(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class ov{constructor(e,n){this.targetId=e,this.me=n}}class av{constructor(e,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Up{constructor(){this.fe=0,this.ge=zp(),this.pe=ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),n=oe(),r=oe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new Lo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=zp()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class wT{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zn(),this.qe=Bp(),this.Qe=new Ue(pe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Hc(s))if(r===0){const a=new X(s.path);this.Ue(n,a,At.newNoDocument(a,te.min()))}else we(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),c=l?this.Xe(l,e,a):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=ii(r).toUint8Array()}catch(c){if(c instanceof Fy)return Qi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new od(a,i,s)}catch(c){return Qi(c instanceof js?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const l=this.Je(a);if(l){if(s.current&&Hc(l.target)){const c=new X(l.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,At.newNoDocument(c,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=oe();this.qe.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new ql(e,n,this.Qe,this.ke,r);return this.ke=Zn(),this.qe=Bp(),this.Qe=new Ue(pe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Up,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ht(pe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Up),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Bp(){return new Ue(X.comparator)}function zp(){return new Ue(X.comparator)}const ET=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),TT=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),ST=(()=>({and:"AND",or:"OR"}))();class IT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kc(t,e){return t.useProto3Json||Ul(e)?e:{value:e}}function wl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AT(t,e){return wl(t,e.toTimestamp())}function Vn(t){return we(!!t),te.fromTimestamp(function(n){const r=Nr(n);return new et(r.seconds,r.nanos)}(t))}function ad(t,e){return Qc(t,e).canonicalString()}function Qc(t,e){const n=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function uv(t){const e=Le.fromString(t);return we(pv(e)),e}function Gc(t,e){return ad(t.databaseId,e.path)}function ju(t,e){const n=uv(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(hv(n))}function cv(t,e){return ad(t.databaseId,e)}function RT(t){const e=uv(t);return e.length===4?Le.emptyPath():hv(e)}function Yc(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hv(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $p(t,e,n){return{name:Gc(t,e),fields:n.value.mapValue.fields}}function CT(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(we(f===void 0||typeof f=="string"),ft.fromBase64String(f||"")):(we(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ft.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const f=d.code===void 0?j.UNKNOWN:sv(d.code);return new Y(f,d.message||"")}(a);n=new av(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ju(t,r.document.name),s=Vn(r.document.updateTime),a=r.document.createTime?Vn(r.document.createTime):te.min(),l=new Zt({mapValue:{fields:r.document.fields}}),c=At.newFoundDocument(i,s,a,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new ja(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ju(t,r.document),s=r.readTime?Vn(r.readTime):te.min(),a=At.newNoDocument(i,s),l=r.removedTargetIds||[];n=new ja([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ju(t,r.document),s=r.removedTargetIds||[];n=new ja([],s,i,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new gT(i,s),l=r.targetId;n=new ov(l,a)}}return n}function PT(t,e){let n;if(e instanceof Do)n={update:$p(t,e.key,e.value)};else if(e instanceof iv)n={delete:Gc(t,e.key)};else if(e instanceof li)n={update:$p(t,e.key,e.data),updateMask:FT(e.fieldMask)};else{if(!(e instanceof fT))return Z();n={verify:Gc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof vl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof So)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Io)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof _l)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:AT(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()}(t,e.precondition)),n}function kT(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?Vn(i.updateTime):Vn(s);return a.isEqual(te.min())&&(a=Vn(s)),new cT(a,i.transformResults||[])}(n,e))):[]}function xT(t,e){return{documents:[cv(t,e.path)]}}function NT(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cv(t,i);const s=function(d){if(d.length!==0)return fv(Ln.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(d){if(d.length!==0)return d.map(f=>function(v){return{field:_i(v.field),direction:LT(v.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Kc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function VT(t){let e=RT(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){we(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(g){const v=dv(g);return v instanceof Ln&&By(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(v=>function(x){return new yl(wi(x.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(g){let v;return v=typeof g=="object"?g.value:g,Ul(v)?null:v}(n.limit));let c=null;n.startAt&&(c=function(g){const v=!!g.before,R=g.values||[];return new gl(R,v)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const v=!g.before,R=g.values||[];return new gl(R,v)}(n.endAt)),Y1(e,i,a,s,l,"F",c,d)}function DT(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wi(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=wi(n.unaryFilter.field);return Je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=wi(n.unaryFilter.field);return Je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=wi(n.unaryFilter.field);return Je.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return Je.create(wi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ln.create(n.compositeFilter.filters.map(r=>dv(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function LT(t){return ET[t]}function OT(t){return TT[t]}function MT(t){return ST[t]}function _i(t){return{fieldPath:t.canonicalString()}}function wi(t){return ut.fromServerFormat(t.fieldPath)}function fv(t){return t instanceof Je?function(n){if(n.op==="=="){if(kp(n.value))return{unaryFilter:{field:_i(n.field),op:"IS_NAN"}};if(Pp(n.value))return{unaryFilter:{field:_i(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kp(n.value))return{unaryFilter:{field:_i(n.field),op:"IS_NOT_NAN"}};if(Pp(n.value))return{unaryFilter:{field:_i(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_i(n.field),op:OT(n.op),value:n.value}}}(t):t instanceof Ln?function(n){const r=n.getFilters().map(i=>fv(i));return r.length===1?r[0]:{compositeFilter:{op:MT(n.op),filters:r}}}(t):Z()}function FT(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,r,i,s=te.min(),a=te.min(),l=ft.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.ct=e}}function bT(t){const e=VT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.un=new BT}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(xr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class BT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ht(Le.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ht(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ji(0)}static kn(){return new Ji(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(){this.changes=new as(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Xs(r.mutation,i,yn.empty(),et.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const i=Qr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Fs();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Qr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=Zn();const a=Ys(),l=function(){return Ys()}();return n.forEach((c,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof li)?s=s.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Xs(f.mutation,d,f.mutation.getFieldMask(),et.now())):a.set(d.key,yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>{var g;return l.set(d,new $T(f,(g=a.get(d))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ys();let i=new Ue((a,l)=>a-l),s=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||yn.empty();f=l.applyToLocalView(d,f),r.set(c,f);const g=(i.get(l.batchId)||oe()).add(c);i=i.insert(l.batchId,g)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,g=Yy();f.forEach(v=>{if(!s.has(v)){const R=nv(n.get(v),r.get(v));R!==null&&g.set(v,R),s=s.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return F.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return X.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):X1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(Qr());let l=-1,c=s;return a.next(d=>F.forEach(d,(f,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{c=c.insert(f,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,oe())).next(f=>({batchId:l,changes:Gy(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let i=Fs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Fs();return this.indexManager.getCollectionParents(e,s).next(l=>F.forEach(l,c=>{const d=function(g,v){return new Bl(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((c,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,At.newInvalidDocument(f)))});let l=Fs();return a.forEach((c,d)=>{const f=s.get(c);f!==void 0&&Xs(f.mutation,d,yn.empty(),et.now()),$l(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Vn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:bT(i.bundledQuery),readTime:Vn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.overlays=new Ue(X.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qr();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=Qr(),s=n.length+1,a=new X(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ue((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=Qr(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Qr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=i)););return F.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new mT(n,r));let s=this.Ir.get(n);s===void 0&&(s=oe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this.Tr=new ht(nt.Er),this.dr=new ht(nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new nt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new X(new Le([])),r=new nt(n,e),i=new nt(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new Le([])),r=new nt(n,e),i=new nt(n,e+1);let s=oe();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new nt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||pe(e.wr,n.wr)}static Ar(e,n){return pe(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ht(nt.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new pT(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.br=this.br.add(new nt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),i=new nt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const l=this.Dr(a.wr);s.push(l)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ht(pe);return n.forEach(i=>{const s=new nt(i,0),a=new nt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;X.isDocumentKey(s)||(s=s.child(""));const a=new nt(new X(s),0);let l=new ht(pe);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.wr)),!0)},a),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new nt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new nt(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.Mr=e,this.docs=function(){return new Ue(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():At.newInvalidDocument(n))}getEntries(e,n){let r=Zn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():At.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Zn();const a=n.path,l=new X(a.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||N1(x1(f),r)<=0||(i.has(f.key)||$l(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new YT(this)}getSize(e){return F.resolve(this.size)}}class YT extends zT{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.persistence=e,this.Nr=new as(n=>nd(n),rd),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ld,this.targetCount=0,this.kr=Ji.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ji(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Jh(0),this.Kr=!1,this.Kr=!0,this.$r=new KT,this.referenceDelegate=e(this),this.Ur=new XT(this),this.indexManager=new UT,this.remoteDocumentCache=function(i){return new GT(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new jT(n),this.Gr=new HT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new QT(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new ZT(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class ZT extends D1{constructor(e){super(),this.currentSequenceNumber=e}}class ud{constructor(e){this.persistence=e,this.Jr=new ld,this.Yr=null}static Zr(e){return new ud(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=X.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=oe(),i=oe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cd(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return nE()?8:L1(eE())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new eS;return this.Xi(e,n,a).next(l=>{if(s.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ns()<=he.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",vi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Ns()<=he.DEBUG&&Q("QueryEngine","Query:",vi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ns()<=he.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",vi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(n))):F.resolve())}Yi(e,n){if(Dp(n))return F.resolve(null);let r=Nn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=qc(n,null,"F"),r=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=oe(...s);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,l);return this.ns(n,d,a,c.readTime)?this.Yi(e,qc(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,i){return Dp(n)||i.isEqual(te.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?F.resolve(null):(Ns()<=he.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vi(n)),this.rs(e,a,n,k1(i,-1)).next(l=>l))})}ts(e,n){let r=new ht(Ky(e));return n.forEach((i,s)=>{$l(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ns()<=he.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",vi(n)),this.Ji.getDocumentsMatchingQuery(e,n,xr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ue(pe),this._s=new as(s=>nd(s),rd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function rS(t,e,n,r){return new nS(t,e,n,r)}async function mv(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let c=oe();for(const d of i){a.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of s){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:l}))})})}function iS(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const g=d.batch,v=g.keys();let R=F.resolve();return v.forEach(x=>{R=R.next(()=>f.getEntry(c,x)).next(D=>{const M=d.docVersions.get(x);we(M!==null),D.version.compareTo(M)<0&&(g.applyToRemoteDocument(D,d),D.isValidDocument()&&(D.setReadTime(d.commitVersion),f.addEntry(D)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(c,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=oe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function gv(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function sS(t,e){const n=ne(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,g)=>{const v=i.get(g);if(!v)return;l.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,g)));let R=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?R=R.withResumeToken(ft.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):f.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(f.resumeToken,r)),i=i.insert(g,R),function(D,M,E){return D.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(v,R,f)&&l.push(n.Ur.updateTargetData(s,R))});let c=Zn(),d=oe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(oS(s,a,e.documentUpdates).next(f=>{c=f.Ps,d=f.Is})),!r.isEqual(te.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.os=i,s))}function oS(t,e,n){let r=oe(),i=oe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Zn();return n.forEach((l,c)=>{const d=s.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(te.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):Q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ps:a,Is:i}})}function aS(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lS(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new mr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Xc(t,e,n){const r=ne(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Vo(a))throw a;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Wp(t,e,n){const r=ne(t);let i=te.min(),s=oe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,f){const g=ne(c),v=g._s.get(f);return v!==void 0?F.resolve(g.os.get(v)):g.Ur.getTargetData(d,f)}(r,a,Nn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:te.min(),n?s:oe())).next(l=>(uS(r,Z1(e),l),{documents:l,Ts:s})))}function uS(t,e,n){let r=t.us.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Hp{constructor(){this.activeTargetIds=sT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cS{constructor(){this.so=new Hp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Hp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea=null;function bu(){return Ea===null?Ea=function(){return 268435456+Math.round(2147483648*Math.random())}():Ea++,"0x"+Ea.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="WebChannelConnection";class pS extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const l=bu(),c=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${l}:`,c,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,a),this.No(n,c,d,i).then(f=>(Q("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Qi("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",c,"request:",i),f})}Lo(n,r,i,s,a,l){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ss}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=dS[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=bu();return new Promise((a,l)=>{const c=new ky;c.setWithCredentials(!0),c.listenOnce(xy.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Oa.NO_ERROR:const f=c.getResponseJson();Q(Tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case Oa.TIMEOUT:Q(Tt,`RPC '${e}' ${s} timed out`),l(new Y(j.DEADLINE_EXCEEDED,"Request time out"));break;case Oa.HTTP_ERROR:const g=c.getStatus();if(Q(Tt,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const R=v==null?void 0:v.error;if(R&&R.status&&R.message){const x=function(M){const E=M.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(E)>=0?E:j.UNKNOWN}(R.status);l(new Y(x,R.message))}else l(new Y(j.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Y(j.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{Q(Tt,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);Q(Tt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=bu(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Dy(),l=Vy(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=s.join("");Q(Tt,`Creating RPC '${e}' stream ${i}: ${f}`,c);const g=a.createWebChannel(f,c);let v=!1,R=!1;const x=new fS({Io:M=>{R?Q(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(v||(Q(Tt,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),Q(Tt,`RPC '${e}' stream ${i} sending:`,M),g.send(M))},To:()=>g.close()}),D=(M,E,T)=>{M.listen(E,I=>{try{T(I)}catch(L){setTimeout(()=>{throw L},0)}})};return D(g,Ms.EventType.OPEN,()=>{R||(Q(Tt,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),D(g,Ms.EventType.CLOSE,()=>{R||(R=!0,Q(Tt,`RPC '${e}' stream ${i} transport closed`),x.So())}),D(g,Ms.EventType.ERROR,M=>{R||(R=!0,Qi(Tt,`RPC '${e}' stream ${i} transport errored:`,M),x.So(new Y(j.UNAVAILABLE,"The operation could not be completed")))}),D(g,Ms.EventType.MESSAGE,M=>{var E;if(!R){const T=M.data[0];we(!!T);const I=T,L=I.error||((E=I[0])===null||E===void 0?void 0:E.error);if(L){Q(Tt,`RPC '${e}' stream ${i} received error:`,L);const $=L.status;let z=function(y){const S=Ge[y];if(S!==void 0)return sv(S)}($),_=L.message;z===void 0&&(z=j.INTERNAL,_="Unknown error status: "+$+" with message "+L.message),R=!0,x.So(new Y(z,_)),g.close()}else Q(Tt,`RPC '${e}' stream ${i} received:`,T),x.bo(T)}}),D(l,Ny.STAT_EVENT,M=>{M.stat===Bc.PROXY?Q(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Bc.NOPROXY&&Q(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function Uu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t){return new IT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n,r,i,s,a,l,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new yv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Y(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mS extends vv{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=CT(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?Vn(a.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Yc(this.serializer),n.addTarget=function(s,a){let l;const c=a.target;if(l=Hc(c)?{documents:xT(s,c)}:{query:NT(s,c)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=lv(s,a.resumeToken);const d=Kc(s,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(te.min())>0){l.readTime=wl(s,a.snapshotVersion.toTimestamp());const d=Kc(s,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=DT(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Yc(this.serializer),n.removeTarget=e,this.a_(n)}}class gS extends vv{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=kT(e.writeResults,e.commitTime),r=Vn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Yc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>PT(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,Qc(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(j.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,Qc(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Y(j.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class vS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Jn(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{ui(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=ne(c);d.L_.add(4),await Oo(d),d.q_.set("Unknown"),d.L_.delete(4),await Ql(d)}(this))})}),this.q_=new vS(r,i)}}async function Ql(t){if(ui(t))for(const e of t.B_)await e(!0)}async function Oo(t){for(const e of t.B_)await e(!1)}function _v(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),pd(n)?fd(n):ls(n).r_()&&dd(n,e))}function hd(t,e){const n=ne(t),r=ls(n);n.N_.delete(e),r.r_()&&wv(n,e),n.N_.size===0&&(r.r_()?r.o_():ui(n)&&n.q_.set("Unknown"))}function dd(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ls(t).A_(e)}function wv(t,e){t.Q_.xe(e),ls(t).R_(e)}function fd(t){t.Q_=new wT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ls(t).start(),t.q_.v_()}function pd(t){return ui(t)&&!ls(t).n_()&&t.N_.size>0}function ui(t){return ne(t).L_.size===0}function Ev(t){t.Q_=void 0}async function wS(t){t.q_.set("Online")}async function ES(t){t.N_.forEach((e,n)=>{dd(t,e)})}async function TS(t,e){Ev(t),pd(t)?(t.q_.M_(e),fd(t)):t.q_.set("Unknown")}async function SS(t,e,n){if(t.q_.set("Online"),e instanceof av&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await El(t,r)}else if(e instanceof ja?t.Q_.Ke(e):e instanceof ov?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const r=await gv(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Q_.rt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const f=s.N_.get(c);if(!f)return;s.N_.set(c,f.withResumeToken(ft.EMPTY_BYTE_STRING,f.snapshotVersion)),wv(s,c);const g=new mr(f.target,c,d,f.sequenceNumber);dd(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await El(t,r)}}async function El(t,e,n){if(!Vo(e))throw e;t.L_.add(1),await Oo(t),t.q_.set("Offline"),n||(n=()=>gv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ql(t)})}function Tv(t,e){return e().catch(n=>El(t,n,e))}async function Gl(t){const e=ne(t),n=Vr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;IS(e);)try{const i=await aS(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,AS(e,i)}catch(i){await El(e,i)}Sv(e)&&Iv(e)}function IS(t){return ui(t)&&t.O_.length<10}function AS(t,e){t.O_.push(e);const n=Vr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Sv(t){return ui(t)&&!Vr(t).n_()&&t.O_.length>0}function Iv(t){Vr(t).start()}async function RS(t){Vr(t).p_()}async function CS(t){const e=Vr(t);for(const n of t.O_)e.m_(n.mutations)}async function PS(t,e,n){const r=t.O_.shift(),i=sd.from(r,e,n);await Tv(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Gl(t)}async function kS(t,e){e&&Vr(t).V_&&await async function(r,i){if(function(a){return yT(a)&&a!==j.ABORTED}(i.code)){const s=r.O_.shift();Vr(r).s_(),await Tv(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Gl(r)}}(t,e),Sv(t)&&Iv(t)}async function Kp(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=ui(n);n.L_.add(3),await Oo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ql(n)}async function xS(t,e){const n=ne(t);e?(n.L_.delete(2),await Ql(n)):e||(n.L_.add(2),await Oo(n),n.q_.set("Unknown"))}function ls(t){return t.K_||(t.K_=function(n,r,i){const s=ne(n);return s.w_(),new mS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:wS.bind(null,t),Ro:ES.bind(null,t),mo:TS.bind(null,t),d_:SS.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),pd(t)?fd(t):t.q_.set("Unknown")):(await t.K_.stop(),Ev(t))})),t.K_}function Vr(t){return t.U_||(t.U_=function(n,r,i){const s=ne(n);return s.w_(),new gS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:RS.bind(null,t),mo:kS.bind(null,t),f_:CS.bind(null,t),g_:PS.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Gl(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new md(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gd(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),Vo(t))return new Y(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=Fs(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new Ui(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ui)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ui;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(){this.W_=new Ue(X.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Zi{constructor(e,n,r,i,s,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Zi(e,n,Ui.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class VS{constructor(){this.queries=Gp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ne(n),s=i.queries;i.queries=Gp(),s.forEach((a,l)=>{for(const c of l.j_)c.onError(r)})})(this,new Y(j.ABORTED,"Firestore shutting down"))}}function Gp(){return new as(t=>qy(t),zl)}async function DS(t,e){const n=ne(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new NS,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=gd(a,`Initialization of query '${vi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&yd(n)}async function LS(t,e){const n=ne(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function OS(t,e){const n=ne(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.j_)l.X_(i)&&(r=!0);a.z_=i}}r&&yd(n)}function MS(t,e,n){const r=ne(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function yd(t){t.Y_.forEach(e=>{e.next()})}var Jc,Yp;(Yp=Jc||(Jc={})).ea="default",Yp.Cache="cache";class FS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Zi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Zi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Jc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e){this.key=e}}class Rv{constructor(e){this.key=e}}class jS{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=Ky(e),this.Ra=new Ui(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Qp,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{const v=i.get(f),R=$l(this.query,g)?g:null,x=!!v&&this.mutatedKeys.has(v.key),D=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let M=!1;v&&R?v.data.isEqual(R.data)?x!==D&&(r.track({type:3,doc:R}),M=!0):this.ga(v,R)||(r.track({type:2,doc:R}),M=!0,(c&&this.Aa(R,c)>0||d&&this.Aa(R,d)<0)&&(l=!0)):!v&&R?(r.track({type:0,doc:R}),M=!0):v&&!R&&(r.track({type:1,doc:v}),M=!0,(c||d)&&(l=!0)),M&&(R?(a=a.add(R),s=D?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,g)=>function(R,x){const D=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return D(R)-D(x)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,d=c!==this.Ea;return this.Ea=c,a.length!==0||d?{snapshot:new Zi(this.query,e.Ra,s,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Qp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Rv(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Av(r))}),n}ba(e){this.Ta=e.Ts,this.da=oe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Zi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class bS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class US{constructor(e){this.key=e,this.va=!1}}class BS{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new as(l=>qy(l),zl),this.Ma=new Map,this.xa=new Set,this.Oa=new Ue(X.comparator),this.Na=new Map,this.La=new ld,this.Ba={},this.ka=new Map,this.qa=Ji.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function zS(t,e,n=!0){const r=Vv(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Cv(r,e,n,!0),i}async function $S(t,e){const n=Vv(t);await Cv(n,e,!0,!1)}async function Cv(t,e,n,r){const i=await lS(t.localStore,Nn(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await WS(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&_v(t.remoteStore,i),l}async function WS(t,e,n,r,i){t.Ka=(g,v,R)=>async function(D,M,E,T){let I=M.view.ma(E);I.ns&&(I=await Wp(D.localStore,M.query,!1).then(({documents:_})=>M.view.ma(_,I)));const L=T&&T.targetChanges.get(M.targetId),$=T&&T.targetMismatches.get(M.targetId)!=null,z=M.view.applyChanges(I,D.isPrimaryClient,L,$);return Jp(D,M.targetId,z.wa),z.snapshot}(t,g,v,R);const s=await Wp(t.localStore,e,!0),a=new jS(e,s.Ts),l=a.ma(s.documents),c=Lo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=a.applyChanges(l,t.isPrimaryClient,c);Jp(t,n,d.wa);const f=new bS(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function HS(t,e,n){const r=ne(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!zl(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Xc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hd(r.remoteStore,i.targetId),Zc(r,i.targetId)}).catch(No)):(Zc(r,i.targetId),await Xc(r.localStore,i.targetId,!0))}async function qS(t,e){const n=ne(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hd(n.remoteStore,r.targetId))}async function KS(t,e,n){const r=eI(t);try{const i=await function(a,l){const c=ne(a),d=et.now(),f=l.reduce((R,x)=>R.add(x.key),oe());let g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",R=>{let x=Zn(),D=oe();return c.cs.getEntries(R,f).next(M=>{x=M,x.forEach((E,T)=>{T.isValidDocument()||(D=D.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(R,x)).next(M=>{g=M;const E=[];for(const T of l){const I=dT(T,g.get(T.key).overlayedDocument);I!=null&&E.push(new li(T.key,I,jy(I.value.mapValue),qn.exists(!0)))}return c.mutationQueue.addMutationBatch(R,d,E,l)}).next(M=>{v=M;const E=M.applyToLocalDocumentSet(g,D);return c.documentOverlayCache.saveOverlays(R,M.batchId,E)})}).then(()=>({batchId:v.batchId,changes:Gy(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,c){let d=a.Ba[a.currentUser.toKey()];d||(d=new Ue(pe)),d=d.insert(l,c),a.Ba[a.currentUser.toKey()]=d}(r,i.batchId,n),await Mo(r,i.changes),await Gl(r.remoteStore)}catch(i){const s=gd(i,"Failed to persist write");n.reject(s)}}async function Pv(t,e){const n=ne(t);try{const r=await sS(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?we(a.va):i.removedDocuments.size>0&&(we(a.va),a.va=!1))}),await Mo(n,r,e)}catch(r){await No(r)}}function Xp(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const l=a.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const c=ne(a);c.onlineState=l;let d=!1;c.queries.forEach((f,g)=>{for(const v of g.j_)v.Z_(l)&&(d=!0)}),d&&yd(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QS(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new Ue(X.comparator);a=a.insert(s,At.newNoDocument(s,te.min()));const l=oe().add(s),c=new ql(te.min(),new Map,new Ue(pe),a,l);await Pv(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),vd(r)}else await Xc(r.localStore,e,!1).then(()=>Zc(r,e,n)).catch(No)}async function GS(t,e){const n=ne(t),r=e.batch.batchId;try{const i=await iS(n.localStore,e);xv(n,r,null),kv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mo(n,i)}catch(i){await No(i)}}async function YS(t,e,n){const r=ne(t);try{const i=await function(a,l){const c=ne(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(g=>(we(g!==null),f=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);xv(r,e,n),kv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Mo(r,i)}catch(i){await No(i)}}function kv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function xv(t,e,n){const r=ne(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Zc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Nv(t,r)})}function Nv(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(hd(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),vd(t))}function Jp(t,e,n){for(const r of n)r instanceof Av?(t.La.addReference(r.key,e),XS(t,r)):r instanceof Rv?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Nv(t,r.key)):Z()}function XS(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),vd(t))}function vd(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(Le.fromString(e)),r=t.qa.next();t.Na.set(r,new US(n)),t.Oa=t.Oa.insert(n,r),_v(t.remoteStore,new mr(Nn(Hy(n.path)),r,"TargetPurposeLimboResolution",Jh.oe))}}async function Mo(t,e,n){const r=ne(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{a.push(r.Ka(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){i.push(d);const g=cd.Wi(c.targetId,d);s.push(g)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(c,d){const f=ne(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>F.forEach(d,v=>F.forEach(v.$i,R=>f.persistence.referenceDelegate.addReference(g,v.targetId,R)).next(()=>F.forEach(v.Ui,R=>f.persistence.referenceDelegate.removeReference(g,v.targetId,R)))))}catch(g){if(!Vo(g))throw g;Q("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const v=g.targetId;if(!g.fromCache){const R=f.os.get(v),x=R.snapshotVersion,D=R.withLastLimboFreeSnapshotVersion(x);f.os=f.os.insert(v,D)}}}(r.localStore,s))}async function JS(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await mv(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new Y(j.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mo(n,r.hs)}}function ZS(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return oe().add(r.key);{let i=oe();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const l=n.Fa.get(a);i=i.unionWith(l.view.Va)}return i}}function Vv(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QS.bind(null,e),e.Ca.d_=OS.bind(null,e.eventManager),e.Ca.$a=MS.bind(null,e.eventManager),e}function eI(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YS.bind(null,e),e}class Tl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return rS(this.persistence,new tS,e.initialUser,this.serializer)}Ga(e){return new JT(ud.Zr,this.serializer)}Wa(e){return new cS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tl.provider={build:()=>new Tl};class eh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JS.bind(null,this.syncEngine),await xS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VS}()}createDatastore(e){const n=Kl(e.databaseInfo.databaseId),r=function(s){return new pS(s)}(e.databaseInfo);return function(s,a,l,c){return new yS(s,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new _S(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Xp(this.syncEngine,n,0),function(){return qp.D()?new qp:new hS}())}createSyncEngine(e,n){return function(i,s,a,l,c,d,f){const g=new BS(i,s,a,l,c,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ne(i);Q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Oo(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}eh.provider={build:()=>new eh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=St.UNAUTHENTICATED,this.clientId=Oy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Q("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Q("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=gd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bu(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await mv(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Zp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rI(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Kp(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Kp(e.remoteStore,i)),t._onlineComponents=e}async function rI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Bu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Qi("Error using user provided cache. Falling back to memory cache: "+n),await Bu(t,new Tl)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Bu(t,new Tl);return t._offlineComponents}async function Dv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await Zp(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await Zp(t,new eh))),t._onlineComponents}function iI(t){return Dv(t).then(e=>e.syncEngine)}async function sI(t){const e=await Dv(t),n=e.eventManager;return n.onListen=zS.bind(null,e.syncEngine),n.onUnlisten=HS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$S.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qS.bind(null,e.syncEngine),n}function oI(t,e,n={}){const r=new Rr;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,d){const f=new tI({next:v=>{f.Za(),a.enqueueAndForget(()=>LS(s,g)),v.fromCache&&c.source==="server"?d.reject(new Y(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),g=new FS(l,f,{includeMetadataChanges:!0,_a:!0});return DS(s,g)}(await sI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t,e,n){if(!n)throw new Y(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aI(t,e,n,r){if(e===!0&&r===!0)throw new Y(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tm(t){if(!X.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nm(t){if(X.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _d(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Ao(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_d(t);throw new Y(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new w1;switch(r.type){case"firstParty":return new I1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=em.get(n);r&&(Q("ComponentProvider","Removing Datastore"),em.delete(n),r.terminate())}(this),Promise.resolve()}}function lI(t,e,n,r={}){var i;const s=(t=Ao(t,Yl))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=St.MOCK_USER;else{l=Zw(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Y(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new St(d)}t._authCredentials=new E1(new Ly(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xl(this.firestore,e,this._query)}}class rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}}class Cr extends Xl{constructor(e,n,r){super(e,n,Hy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new X(e))}withConverter(e){return new Cr(this.firestore,e,this._path)}}function Fo(t,e,...n){if(t=go(t),Ov("collection","path",e),t instanceof Yl){const r=Le.fromString(e,...n);return nm(r),new Cr(t,null,r)}{if(!(t instanceof rn||t instanceof Cr))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return nm(r),new Cr(t.firestore,null,r)}}function Mv(t,e,...n){if(t=go(t),arguments.length===1&&(e=Oy.newId()),Ov("doc","path",e),t instanceof Yl){const r=Le.fromString(e,...n);return tm(r),new rn(t,null,new X(r))}{if(!(t instanceof rn||t instanceof Cr))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return tm(r),new rn(t.firestore,t instanceof Cr?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new yv(this,"async_queue_retry"),this.Vu=()=>{const r=Uu();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Uu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Uu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Rr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Vo(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw Jn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=md.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class wd extends Yl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new im,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new im(e),this._firestoreClient=void 0,await e}}}function uI(t,e){const n=typeof t=="object"?t:l1(),r=typeof t=="string"?t:e||"(default)",i=i1(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Xw("firestore");s&&lI(i,...s)}return i}function Fv(t){if(t._terminated)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cI(t),t._firestoreClient}function cI(t){var e,n,r;const i=t._freezeSettings(),s=function(l,c,d,f){return new F1(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Lv(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new nI(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new es(ft.fromBase64String(e))}catch(n){throw new Y(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new es(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=/^__.*__$/;class dI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new li(e,this.data,this.fieldMask,n,this.fieldTransforms):new Do(e,this.data,n,this.fieldTransforms)}}function bv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class Id{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Id(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Sl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(bv(this.Cu)&&hI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class fI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Kl(e)}Qu(e,n,r,i=!1){return new Id({Cu:e,methodName:n,qu:r,path:ut.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pI(t){const e=t._freezeSettings(),n=Kl(t._databaseId);return new fI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mI(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);$v("Data must be an object, but it was:",a,r);const l=Bv(r,a);let c,d;if(s.merge)c=new yn(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const g of s.mergeFields){const v=gI(e,g,n);if(!a.contains(v))throw new Y(j.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);vI(f,v)||f.push(v)}c=new yn(f),d=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=a.fieldTransforms;return new dI(new Zt(l),c,d)}function Uv(t,e){if(zv(t=go(t)))return $v("Unsupported field value:",e,t),Bv(t,e);if(t instanceof jv)return function(r,i){if(!bv(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let c=Uv(l,i.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=go(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oT(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=et.fromDate(r);return{timestampValue:wl(i.serializer,s)}}if(r instanceof et){const s=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wl(i.serializer,s)}}if(r instanceof Td)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof es)return{bytesValue:lv(i.serializer,r._byteString)};if(r instanceof rn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ad(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sd)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return id(l.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${_d(r)}`)}(t,e)}function Bv(t,e){const n={};return My(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):os(t,(r,i)=>{const s=Uv(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function zv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Td||t instanceof es||t instanceof rn||t instanceof jv||t instanceof Sd)}function $v(t,e,n){if(!zv(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=_d(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function gI(t,e,n){if((e=go(e))instanceof Ed)return e._internalPath;if(typeof e=="string")return Wv(t,e);throw Sl("Field path arguments must be of type string or ",t,!1,void 0,n)}const yI=new RegExp("[~\\*/\\[\\]]");function Wv(t,e,n){if(e.search(yI)>=0)throw Sl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ed(...e.split("."))._internalPath}catch{throw Sl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sl(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new Y(j.INVALID_ARGUMENT,l+t+c)}function vI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _I(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _I extends Hv{data(){return super.data()}}function qv(t,e){return typeof e=="string"?Wv(t,e):e instanceof Ed?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class EI{convertValue(e,n="none"){switch(si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return os(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>qe(a.doubleValue));return new Sd(s)}convertGeoPoint(e){return new Td(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ed(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wo(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);we(pv(r));const i=new Eo(r.get(1),r.get(3)),s=new X(r.popFirst(5));return i.isEqual(n)||Jn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class SI extends Hv{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ba(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ba extends SI{data(e={}){return super.data(e)}}class II{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ba(this._firestore,this._userDataWriter,r.key,r,new Ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const c=new ba(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ta(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new ba(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ta(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:AI(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function AI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}class RI extends EI{constructor(e){super(),this.firestore=e}convertBytes(e){return new es(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function CI(t){t=Ao(t,Xl);const e=Ao(t.firestore,wd),n=Fv(e),r=new RI(e);return wI(t._query),oI(n,t._query).then(i=>new II(e,r,t,i))}function Kv(t,e,n){t=Ao(t,rn);const r=Ao(t.firestore,wd),i=TI(t.converter,e,n);return PI(r,[mI(pI(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,qn.none())])}function PI(t,e){return function(r,i){const s=new Rr;return r.asyncQueue.enqueueAndForget(async()=>KS(await iI(r),i,s)),s.promise}(Fv(t),e)}(function(e,n=!0){(function(i){ss=i})(a1),pl(new yo("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new wd(new T1(r.getProvider("auth-internal")),new R1(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Y(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eo(d.options.projectId,f)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),bi(Sp,"4.7.3",e),bi(Sp,"4.7.3","esm2017")})();const kI={apiKey:"AIzaSyB9AuQ47ZrbtU3F5HN-Gnk3LKE1ACfGzxk",authDomain:"cognac-movement-test.firebaseapp.com",databaseURL:"https://cognac-movement-test-default-rtdb.firebaseio.com",projectId:"cognac-movement-test",storageBucket:"cognac-movement-test.firebasestorage.app",messagingSenderId:"784152528183",appId:"1:784152528183:web:11414bdf11b1097964c6b2",measurementId:"G-J8TQMTS5Y2"},xI=Ay(kI),jo=uI(xI),NI=Fo(jo,"globalInvigorationSubjects");Fo(jo,"globalInvigorationTrials");Fo(jo,"globalInvigorationGames");const VI=async t=>{try{const e=t.id;if(!e)throw new Error("Subject ID is required");const n=Mv(NI,e);return await Kv(n,{...t,id:e,timestamp:new Date().toISOString()})}catch(e){throw console.error("Error saving subject data: ",e),e}},DI=t=>(t==null?void 0:t.workerId)||"UNK",LI=()=>({timestamp:new Date().toISOString(),userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,screenWidth:window.screen.width,screenHeight:window.screen.height,screenColorDepth:window.screen.colorDepth,windowWidth:window.innerWidth,windowHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,hasTouch:"ontouchstart"in window,maxTouchPoints:navigator.maxTouchPoints||0,browser:OI(),os:MI()}),OI=()=>{const t=navigator.userAgent;return t.includes("Chrome")?"Chrome":t.includes("Firefox")?"Firefox":t.includes("Safari")?"Safari":t.includes("Edge")?"Edge":"Unknown"},MI=()=>{const t=navigator.userAgent;return t.includes("Windows")?"Windows":t.includes("Mac")?"macOS":t.includes("Linux")?"Linux":t.includes("Android")?"Android":t.includes("iOS")?"iOS":"Unknown"},FI=async t=>{const e=DI(t),n=LI(),r={id:e,...t,systemInfo:n,sessionStart:new Date().toISOString(),experimentVersion:"1.0",status:"active"};try{return await VI(r),e}catch(i){throw console.error("Failed to initialize participant:",i),i}},sm=async(t,e,n)=>{try{const r=Fo(jo,"globalInvigorationTrials"),i=Mv(r,n);return await Kv(i,e)}catch(r){throw console.error("Error saving participant trial:",r),r}},tn={BLOCKS:{POOR:{baseRounds:15},RICH:{baseRounds:15}},ROUND_DURATIONS:{REACHING_PHASE:{mean:20,standardDeviation:2,min:15,max:25},REWARD_CUE_TIME:3,WARNING_THRESHOLD:2},REWARDS:{VALUES:[10,30,50],PRACTICE_VALUE:50,PROBABILITIES:{POOR:{10:.5,30:.3,50:.2},RICH:{10:.2,30:.3,50:.5}}},KEYS:{VALID_KEYS:["a","s","d","f"],SEQUENCE_LENGTH:10,PRACTICE_SEQUENCE_LENGTH:10,PREDEFINED_SEQUENCES:[["a","s","d","f","a","s","d","f","a","s"],["f","d","s","a","f","d","s","a","f","d"],["s","a","f","d","s","a","f","d","s","a"],["d","f","a","s","d","f","a","s","d","f"],["a","f","s","d","a","f","s","d","a","f"],["f","s","d","a","f","s","d","a","f","s"]]},TRACKING:{SAMPLE_RATE:16,WALL_THRESHOLD:50,REACH_DEFINITION:"wall_to_wall"}},jI=t=>{const e=t==="poor"?tn.BLOCKS.POOR.baseRounds:tn.BLOCKS.RICH.baseRounds;return t==="poor"?e*2-1:e*2+1},Ua=()=>{const t=tn.ROUND_DURATIONS.REACHING_PHASE,e=Math.random(),n=Math.random(),r=Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*n);let i=t.mean+r*t.standardDeviation;return i=Math.max(t.min,Math.min(t.max,i)),Math.round(i*10)/10},Ba=()=>{const t=tn.KEYS.PREDEFINED_SEQUENCES,e=Math.floor(Math.random()*t.length);return t[e]},bI=t=>{const e=tn.REWARDS.PROBABILITIES[t.toUpperCase()],n=Math.random();return n<e[10]?10:n<e[10]+e[30]?30:50},UI=t=>{const e=jI(t);let n=[];for(let r=0;r<e;r++)n.push(bI(t));return n},BI=t=>UI(t);const zI=({participantData:t,participantId:e,onGameComplete:n})=>{const[r,i]=B.useState(!1),[s,a]=B.useState(8),[l,c]=B.useState(0),[d,f]=B.useState(null),[g,v]=B.useState("reaching"),[R,x]=B.useState(!1),[D,M]=B.useState(0),[E,T]=B.useState({width:window.innerWidth,height:window.innerHeight}),[I,L]=B.useState(!1),$=B.useRef(null),z=B.useRef(!1),_=B.useRef(null),m=B.useRef(Date.now()),[y,S]=B.useState([]),[A,C]=B.useState(0),[w,Ve]=B.useState([]),[re,an]=B.useState("poor"),[ge,W]=B.useState(1),[G,ee]=B.useState(0),[ye,ae]=B.useState(!1),[Ae,pt]=B.useState("");B.useState("key");const[mt]=B.useState(Date.now()),[Be,Se]=B.useState([]),[gt,En]=B.useState([]),[tr,le]=B.useState([]),[O,yt]=B.useState([]),[tt,ve]=B.useState(null),[Qe,st]=B.useState(null),[ln,Kt]=B.useState([]),[ci,Ft]=B.useState([]),[un,Qt]=B.useState([]),[cn,Gt]=B.useState([]),[Tn,Ee]=B.useState([]),[ze,Sn]=B.useState(1),[us,Mr]=B.useState(null),[Ad,hn]=B.useState(1),[bo,cs]=B.useState(0),[hs,hi]=B.useState([]),[Jl,nr]=B.useState([]);B.useRef(!1);const Uo=B.useRef(!1),Ct=(b,V,me=null)=>{const J=Array.isArray(b)?b.slice(0,V):[];for(;J.length<V;)J.push(me);return J},jt=(b,V)=>Array.from({length:V},()=>b),ds=(b,V,me)=>{let J,K;const{leftBar:ie,rightBar:Pe}=ps(),ue=ie.x+ie.width,He=Pe.x;if(b>=ie.x&&b<=ue?(J="ASW",K="L"):b>=He&&b<=Pe.x+Pe.width?(J="ATW",K="R"):(I?J="WS":J="RO",K="N"),us&&us!==K&&K!=="N"){const Te=ze+1;Sn(Te),st(K),fs(Te-1,K,tt,{gameStateArray:Be.slice(),eventArray:gt.slice(),posXArray:tr.slice(),posYArray:O.slice(),timestampArray:un.slice()}),Se([]),En([]),le([]),yt([]),ve(K),st(null),Kt([]),Ft([]),Qt([]),Gt([]),Ee([]),Sn(Te),hn(1),hi([]),nr([])}Mr(K),Se(Te=>[...Te,J]);let Me="None";s<=3&&(Me="RC"),En(Te=>[...Te,Me]),le(Te=>[...Te,b]),yt(Te=>[...Te,V]),Qt(Te=>[...Te,me]),!tt&&K!=="N"&&ve(K)},fs=async(b,V,me,J)=>{var di,sr,An,fi,zo;if(!J||J.gameStateArray.length===0)return;const K=Math.max(((di=J.gameStateArray)==null?void 0:di.length)||0,((sr=J.eventArray)==null?void 0:sr.length)||0,((An=J.posXArray)==null?void 0:An.length)||0,((fi=J.posYArray)==null?void 0:fi.length)||0,((zo=J.timestampArray)==null?void 0:zo.length)||0),ie=Ct(J.gameStateArray,K,null),Pe=Ct(J.eventArray,K,"None"),ue=Ct(J.posXArray,K,null),He=Ct(J.posYArray,K,null),Me=Ct(J.timestampArray,K,null),Te=jt(null,K),ir=jt(null,K),In=jt(null,K),bt=jt(null,K),jn={participantId:e,sessionStartTime:mt,reachNumber:b,environment:re,round:ge,block:re==="poor"?1:2,startWall:me,endWall:V,gameStateArray:ie,eventArray:Pe,posXArray:ue,posYArray:He,reachTimestampArray:Me,keytapNumberArray:Te,keytapValueArray:ir,keyupTimestampArray:In,validityArray:bt,currScore:l,rewardValue:null};try{const $o=`${e}_block${re==="poor"?1:2}_round${ge}_reach${b}`;await sm(e,jn,$o),console.log(`Reach ${b} data saved successfully`)}catch(ms){console.error(`Failed to save reach ${b} data:`,ms)}},On=async()=>{if(ln.length===0)return;const b=Math.max(ln.length,ci.length,un.length,cn.length,Tn.length),V=Ct(ln,b,null),me=Ct(ci,b,null),J=Ct(un,b,null),K=Ct(cn,b,null),ie=Ct(Tn,b,null),Pe=Ct(hs,b,null),ue=Ct(Jl,b,null),He=jt(null,b),Me=jt(null,b),Te=jt(null,b),ir={participantId:e,sessionStartTime:mt,environment:re,round:ge,block:re==="poor"?1:2,rewardValue:G,keytapNumberArray:V,keytapValueArray:me,keyPressTimestampArray:J,keyupTimestampArray:K,validityArray:ie,gameStateArray:Pe,eventArray:ue,posXArray:He,posYArray:Me,reachTimestampArray:Te,startWall:null,endWall:null,reachNumber:null,currScore:l};try{const bt=`${e}_block${re==="poor"?1:2}_round${ge}`;await sm(e,ir,bt),console.log(`Round ${ge} data saved successfully`)}catch(In){console.error(`Failed to save round ${ge} data:`,In)}},Fr=E.width*.1,jr=E.height,Mn={x:0,y:0,width:Fr,height:jr},Yt={x:E.width-Fr,y:0,width:Fr,height:jr},Re={x:Math.max(E.width/2,400),y:Math.max(E.height/2-60,200)},Oe=Math.max(Math.min(E.width,E.height)*.12,30),ps=()=>({leftBar:Mn,rightBar:Yt,coinPosition:Re,coinRadius:Oe}),br=(b,V)=>{if(V===0)return b.beginPath(),b.arc(Re.x,Re.y,K,0,2*Math.PI),b.fillStyle="#f0f0f0",b.fill(),b.strokeStyle="#c0c0c0",b.lineWidth=4,b.stroke(),b.fillStyle="#888888",b.font=`bold ${K*.4}px Arial`,b.textAlign="center",b.textBaseline="middle",b.fillText("0",Re.x,Re.y-K*.7),0;let me,J;if(V===10)me=1,J=1;else if(V===30)me=3,J=2;else if(V===50)me=10,J=4;else return 0;const K=20,ie=K*1.8;let Pe=0;for(let He=0;He<J;He++){const Me=He+1,Te=Re.y+He*ie*.8,ir=Re.x-(Me-1)*ie/2;for(let In=0;In<Me&&Pe<me;In++){const bt=ir+In*ie;b.beginPath(),b.arc(bt,Te,K,0,2*Math.PI);const jn=b.createRadialGradient(bt-K*.3,Te-K*.3,0,bt,Te,K);jn.addColorStop(0,"#FFD700"),jn.addColorStop(.7,"#FFA500"),jn.addColorStop(1,"#FF8C00"),b.fillStyle=jn,b.fill(),b.strokeStyle="#FF8C00",b.lineWidth=2,b.stroke(),b.fillStyle="#B8860B",b.fillRect(bt-K*.1,Te-K*.4,K*.2,K*.8),Pe++}}const ue=J*ie*.8;return b.fillStyle="#FFD700",b.font='bold 24px "Arial", sans-serif',b.textAlign="center",b.textBaseline="top",b.fillText(`${V} points`,Re.x,Re.y+ue+30),ue};B.useEffect(()=>{const b=()=>{const me={width:window.innerWidth,height:window.innerHeight};T(me)},V={width:window.innerWidth,height:window.innerHeight};return T(V),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const rr=b=>{if(!r||g!=="coin"||!R)return;const V=b.key.toLowerCase();if(!["a","s","d","f"].includes(V)||y.length===0||A>=y.length)return;const J=Date.now(),K=y[A],ie=V===K,Pe=[...w];if(Pe[A]=ie?"correct":"incorrect",Ve(Pe),Kt(ue=>[...ue,A+1]),Ft(ue=>[...ue,V]),Qt(ue=>[...ue,J]),Ee(ue=>[...ue,ie?"correct":"incorrect"]),hi(ue=>[...ue,"SO"]),nr(ue=>[...ue,"RR"]),ie){const ue=A+1;if(ue<y.length)C(ue);else{c(Me=>Me+G),M(Me=>Me+1),ae(!0),pt(`+${G}!`),hi(Me=>[...Me,"SC"]),nr(Me=>[...Me,"RREC"]),setTimeout(()=>{ae(!1)},1e3),f(null),L(!1),_.current&&clearTimeout(_.current),v("reaching"),x(!1),C(0),Ve(new Array(y.length).fill("pending")),On();const He=ge+1;if(W(He),re==="poor"&&He>tn.BLOCKS.POOR.baseRounds*2-1)v("break");else if(re==="rich"&&He>tn.BLOCKS.RICH.baseRounds*2+1)i(!1),z.current=!0;else{const Me=Ua(),Te=Ba();a(Me),S(Te),Ve(new Array(Te.length).fill("pending"))}}}else ae(!0),pt("Wrong key!"),setTimeout(()=>{ae(!1)},1e3)},Bo=b=>{if(!r||g!=="coin"||!R)return;const V=b.key.toLowerCase();if(!["a","s","d","f"].includes(V)||y.length===0||A>=y.length)return;const J=Date.now();Gt(K=>[...K,J])};B.useEffect(()=>{if(!r||g!=="reaching")return;const b=setInterval(()=>{a(V=>{if(V<=1){v("coin"),x(!0);const me=BI(re),J=(ge-1)%me.length,K=me[J];return ee(K),C(0),Ve(new Array(y.length).fill("pending")),Kt([]),Ft([]),Qt([]),Gt([]),Ee([]),hn(1),0}return V-1})},1e3);return()=>clearInterval(b)},[r,g,ge,re,y.length]),B.useEffect(()=>{g==="coin"&&y.length>0&&(console.log("Starting reward tracking for sequence:",y),console.log("Reward tracking started successfully"))},[y,g,re,ge,G]),B.useEffect(()=>{if(r&&(window.addEventListener("keydown",rr),window.addEventListener("keyup",Bo)),g==="break"){const b=V=>{V.key===" "&&eu()};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)}return()=>{window.removeEventListener("keydown",rr),window.removeEventListener("keyup",Bo)}},[r,g,R,y,A,w,re,G,e,t,mt,n]),B.useEffect(()=>{g==="reaching"&&(Se([]),En([]),le([]),yt([]),ve(null),st(null),Kt([]),Ft([]),Qt([]),Gt([]),Ee([]),Sn(1),Mr(null),hn(1),hi([]),nr([]),cs(0),Uo.current=!1,console.log("Data collection arrays reset for new trial"))},[g,re,ge,G]),B.useEffect(()=>{const b=V=>{!r||g!=="coin"||!R||y.length===0||V.key.toLowerCase()};return window.addEventListener("keyup",b),()=>window.removeEventListener("keyup",b)},[r,g,R,y]);const Zl=b=>{if(!r||g!=="reaching")return;const me=$.current.getBoundingClientRect(),J=b.clientX-me.left,K=b.clientY-me.top,{leftBar:ie,rightBar:Pe}=ps(),ue=Date.now();ue-bo>=33&&(ds(J,K,ue),cs(ue)),J>=ie.x&&J<=ie.x+ie.width&&K>=ie.y&&K<=ie.y+ie.height?d!=="left"&&(f("left"),m.current=Date.now(),L(!1),_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{L(!0)},2e3)):J>=Pe.x&&J<=Pe.x+Pe.width&&K>=Pe.y&&K<=Pe.y+Pe.height&&d!=="right"&&(f("right"),m.current=Date.now(),L(!1),_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{L(!0)},2e3))},Fn=()=>{i(!0),c(0),W(1),an("poor"),v("reaching"),x(!1),f(null),L(!1),z.current=!1,Se([]),En([]),le([]),yt([]),ve(null),st(null),Kt([]),Ft([]),Qt([]),Gt([]),Ee([]),Sn(1),Mr(null),hn(1);const b=Ua(),V=Ba();a(b),S(V),Ve(new Array(V.length).fill("pending")),console.log("Game started with:",{roundDuration:b,sequence:V})};B.useEffect(()=>{if(e)Fn();else{const b=setTimeout(()=>{Fn()},100);return()=>clearTimeout(b)}},[e]),B.useEffect(()=>()=>{_.current&&clearTimeout(_.current)},[]),B.useEffect(()=>{const b=$.current;b&&(b.classList.remove("cursor-visible","cursor-hidden"),g==="coin"?b.classList.add("cursor-hidden"):b.classList.add("cursor-visible"))},[g]),B.useEffect(()=>{const b=$.current;b&&b.classList.add("cursor-visible")},[]),B.useEffect(()=>{const b=$.current;if(!b)return;const V=b.getContext("2d");if(V.clearRect(0,0,E.width,E.height),V.fillStyle="#000000",V.fillRect(0,0,E.width,E.height),g==="reaching")V.beginPath(),V.rect(Mn.x,Mn.y,Mn.width,Mn.height),V.fillStyle=d==="left"?"#27ae60":"#3498db",V.fill(),V.strokeStyle="#2980b9",V.lineWidth=3,V.stroke(),V.beginPath(),V.rect(Yt.x,Yt.y,Yt.width,Yt.height),V.fillStyle=d==="right"?"#27ae60":"#3498db",V.fill(),V.strokeStyle="#2980b9",V.lineWidth=3,V.stroke(),s<=3&&(V.beginPath(),V.arc(Re.x,Re.y,Oe,0,2*Math.PI),V.fillStyle="#808080",V.fill(),V.strokeStyle="#606060",V.lineWidth=3,V.stroke(),V.fillStyle="#ffffff",V.font=`bold ${Oe*.8}px Arial`,V.textAlign="center",V.textBaseline="middle",V.fillText("?",Re.x,Re.y)),V.fillStyle="#ffffff",V.font='bold 48px "Orbitron", "Courier New", monospace',V.textAlign="center",V.fillText(`Score: ${l}`,E.width/2,80),I&&(V.fillStyle="#FF6B6B",V.font='bold 20px "Orbitron", "Courier New", monospace',V.textAlign="center",V.fillText("Move Faster!",E.width/2,E.height-100)),ye&&(V.fillStyle="#00FF00",V.font='bold 36px "Orbitron", "Courier New", monospace',V.textAlign="center",V.fillText(Ae,E.width/2,E.height/2-100));else if(g==="coin"){if(V.fillStyle="#ffffff",V.font='bold 48px "Orbitron", "Courier New", monospace',V.textAlign="center",V.fillText(`Score: ${l}`,E.width/2,80),R)if(G===0){V.beginPath(),V.arc(Re.x,Re.y,Oe,0,2*Math.PI),V.fillStyle="#f0f0f0",V.fill(),V.strokeStyle="#c0c0c0",V.lineWidth=4,V.stroke();const me="0",J=Oe*.4;V.font=`bold ${J}px "Orbitron", "Courier New", monospace`,V.textAlign="center",V.textBaseline="middle";const K=Re.x,ie=Re.y-Oe*.7;V.fillStyle="rgba(0, 0, 0, 0.4)",V.fillText(me,K+1,ie+1),V.fillStyle="#888888",V.fillText(me,K,ie)}else{const me=br(V,G);if(y.length>0){const J=Re.x-y.length*40/2;let K;G===10?K=Re.y+me+120:K=Re.y+me+80,y.forEach((Pe,ue)=>{const He=J+ue*40;w[ue]==="correct"?V.fillStyle="#27ae60":w[ue]==="incorrect"?V.fillStyle="#e74c3c":ue===A?V.fillStyle="#f39c12":V.fillStyle="#7f8c8d",V.font='bold 36px "Arial", sans-serif',V.fillText(Pe.toUpperCase(),He,K)}),V.fillStyle="#FFD700",V.font='bold 24px "Arial", sans-serif',V.textAlign="center",y.length>0&&A<y.length&&V.fillText(`Press: ${y[A].toUpperCase()}`,Re.x,K+40);const ie=`${A}/${y.length}`;V.fillStyle="#ecf0f1",V.font='20px "Arial", sans-serif',V.textAlign="center",V.fillText(ie,Re.x,K+65)}}}else g==="break"&&(V.fillStyle="#000000",V.fillRect(0,0,E.width,E.height),V.fillStyle="#ffffff",V.font='bold 48px "Orbitron", "Courier New", monospace',V.textAlign="center",V.fillText(`Score: ${l}`,E.width/2,80),V.fillStyle="#FFFFFF",V.font='bold 32px "Orbitron", "Courier New", monospace',V.textAlign="center",V.fillText("Block 1 Complete!",E.width/2,E.height/2-100),V.font='20px "Orbitron", "Courier New", monospace',V.fillText("Take a short break.",E.width/2,E.height/2-40),V.fillText("Press SPACE to continue to Block 2",E.width/2,E.height/2+40),V.font='bold 24px "Orbitron", "Courier New", monospace',V.fillText(`Current Score: ${l}`,E.width/2,E.height/2+100))},[s,l,d,g,R,E,I,ye,y,A,w,re,G,Ae,r,ge,Mn,Yt,Re,Oe,Fr]),B.useEffect(()=>{const b=tn.BLOCKS.RICH.baseRounds*2+1;re==="rich"&&ge>=b&&!z.current&&(console.log(`RICH ENVIRONMENT COMPLETE - ENDING GAME (round ${b} reached)`),i(!1),x(!1),S([]),Ve([]),z.current=!0,n==null||n())},[re,ge,z,n]),B.useEffect(()=>{console.log("State changed:",{currentEnvironment:re,environmentRound:ge,gamePhase:g,gameActive:r})},[re,ge,g,r]);const eu=()=>{an("rich"),W(1),v("reaching"),x(!1),f(null),L(!1),Se([]),En([]),le([]),yt([]),ve(null),st(null),Kt([]),Ft([]),Qt([]),Gt([]),Ee([]),Sn(1),Mr(null),hn(1);const b=Ua(),V=Ba();a(b),S(V),Ve(new Array(V.length).fill("pending")),console.log("Switched to rich environment:",{roundDuration:b,sequence:V})};return P.jsx("div",{className:"game-container",children:P.jsx("div",{className:"canvas-container",children:P.jsx("canvas",{ref:$,width:E.width,height:E.height,onMouseMove:Zl,className:"game-canvas",style:{width:"100vw",height:"100vh",display:"block",backgroundColor:"#000000"}})})})},$I=({onPracticeComplete:t})=>{const[e,n]=B.useState(!1),[r,i]=B.useState(8),[s,a]=B.useState(0),[l,c]=B.useState(null),[d,f]=B.useState("reaching"),[g,v]=B.useState(0),[R,x]=B.useState(!1),[D,M]=B.useState(1),[E,T]=B.useState(0),[I,L]=B.useState({width:window.innerWidth,height:window.innerHeight}),[$,z]=B.useState(!1),[_,m]=B.useState(!1),y=B.useRef(null),S=B.useRef(!1),A=B.useRef(null),C=B.useRef(null),[w,Ve]=B.useState([]),[re,an]=B.useState(0),[ge,W]=B.useState([]),[G,ee]=B.useState({x:0,y:0}),ye=2,ae=()=>Ua(),Ae=()=>{const le=Ba(),O=tn.KEYS.PRACTICE_SEQUENCE_LENGTH;Ve(le),an(0),W(new Array(O).fill("pending"))},pt=I.width*.1,mt=I.height,Be={x:0,y:0,width:pt,height:mt},Se={x:I.width-pt,y:0,width:pt,height:mt},gt={x:I.width/2,y:I.height/2-80},En=()=>Math.min(I.width,I.height)*.12*.85;B.useEffect(()=>{const le=()=>{L({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",le),()=>window.removeEventListener("resize",le)},[]),B.useEffect(()=>{if(e&&d==="reaching"){const le=setInterval(()=>{i(O=>O<=1?(f("coin"),x(!0),Ae(),0):O-1)},1e3);return()=>clearInterval(le)}},[e,d]),B.useEffect(()=>{const le=O=>{if(!e||d!=="coin"||!R||w.length===0)return;const yt=O.key.toLowerCase(),tt=w[re];yt===tt?(W(ve=>{const Qe=[...ve];return Qe[re]="correct",Qe}),an(ve=>{const Qe=ve+1;return Qe>=w.length?(a(st=>st+tn.REWARDS.PRACTICE_VALUE),m(!0),setTimeout(()=>{m(!1)},2e3),T(st=>st+1),D>=ye?(n(!1),Ve([]),W([]),S.current||(S.current=!0,setTimeout(()=>{t()},2e3))):(M(st=>st+1),f("reaching"),i(ae()),x(!1),v(0),c(null),Ve([]),W([])),0):Qe})):(W(ve=>{const Qe=[...ve];return Qe[re]="incorrect",Qe}),setTimeout(()=>{W(ve=>{const Qe=[...ve];return Qe[re]==="incorrect"&&(Qe[re]="pending"),Qe})},500))};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[e,d,R,D,ye,s,E,t,w,re]);const tr=le=>{if(!e)return;const yt=y.current.getBoundingClientRect(),tt=le.clientX-yt.left,ve=le.clientY-yt.top;ee({x:tt,y:ve}),tt>=Be.x&&tt<=Be.x+Be.width&&ve>=Be.y&&ve<=Be.y+Be.height?l!=="left"&&(c("left"),A.current=Date.now(),z(!1),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{z(!0)},2e3)):tt>=Se.x&&tt<=Se.x+Se.width&&ve>=Se.y&&ve<=Se.y+Se.height&&l!=="right"&&(c("right"),A.current=Date.now(),z(!1),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{z(!0)},2e3))};return B.useEffect(()=>{n(!0),f("reaching"),i(ae())},[]),B.useEffect(()=>()=>{C.current&&clearTimeout(C.current)},[]),B.useEffect(()=>{const le=y.current;le&&(le.classList.remove("cursor-visible","cursor-hidden"),d==="coin"?le.classList.add("cursor-hidden"):le.classList.add("cursor-visible"))},[d]),B.useEffect(()=>{const le=y.current;le&&le.classList.add("cursor-visible")},[]),B.useEffect(()=>{const le=y.current;if(!le)return;const O=le.getContext("2d");if(O.clearRect(0,0,I.width,I.height),O.fillStyle="#000000",O.fillRect(0,0,I.width,I.height),d==="reaching")O.beginPath(),O.rect(Be.x,Be.y,Be.width,Be.height),O.fillStyle=l==="left"?"#27ae60":"#3498db",O.fill(),O.strokeStyle="#2980b9",O.lineWidth=3,O.stroke(),O.beginPath(),O.rect(Se.x,Se.y,Se.width,Se.height),O.fillStyle=l==="right"?"#27ae60":"#3498db",O.fill(),O.strokeStyle="#2980b9",O.lineWidth=3,O.stroke(),r<=3&&(O.beginPath(),O.arc(gt.x,gt.y,En(),0,2*Math.PI),O.fillStyle="#808080",O.fill(),O.strokeStyle="#606060",O.lineWidth=3,O.stroke(),O.fillStyle="#ffffff",O.font=`bold ${En()*.8}px "Arial", sans-serif`,O.textAlign="center",O.textBaseline="middle",O.fillText("?",gt.x,gt.y)),O.fillStyle="#ffffff",O.font='bold 48px "Orbitron", "Courier New", monospace',O.textAlign="center",O.fillText(`Score: ${s}`,I.width/2,80),O.fillStyle="#ffffff",O.font='16px "Press Start 2P", "Courier New", monospace',O.textAlign="center",O.fillText("Move your cursor back and forth between the bars!",I.width/2,I.height-50),$&&(O.fillStyle="#FF6B6B",O.font='bold 20px "Orbitron", "Courier New", monospace',O.textAlign="center",O.fillText("Move Faster!",I.width/2,I.height-100)),_&&(O.fillStyle="#00FF00",O.font='bold 36px "Orbitron", "Courier New", monospace',O.textAlign="center",O.fillText(`+${tn.REWARDS.PRACTICE_VALUE}`,I.width/2,I.height/2-100));else if(d==="coin"){if(R){((ve,Qe)=>{let Ft=0;for(let un=0;un<4;un++){const Qt=un+1,cn=Qe+un*36*.8,Gt=ve-(Qt-1)*36/2;for(let Tn=0;Tn<Qt&&Ft<10;Tn++){const Ee=Gt+Tn*36;O.beginPath(),O.arc(Ee,cn,20,0,2*Math.PI);const ze=O.createRadialGradient(Ee-20*.3,cn-20*.3,0,Ee,cn,20);ze.addColorStop(0,"#FFD700"),ze.addColorStop(.7,"#FFA500"),ze.addColorStop(1,"#FF8C00"),O.fillStyle=ze,O.fill(),O.strokeStyle="#FF8C00",O.lineWidth=2,O.stroke(),O.fillStyle="#B8860B",O.fillRect(Ee-2,cn-8,4,16),Ft++}}})(gt.x,gt.y),O.fillStyle="#FFD700",O.font='bold 24px "Arial", sans-serif',O.textAlign="center",O.textBaseline="top";const tt=80;O.fillText("50 points",gt.x,gt.y+tt+30)}if(w.length>0){const tt=gt.x-w.length*45/2,ve=gt.y+80+120;O.font='bold 36px "Arial", sans-serif',O.textAlign="center",O.textBaseline="middle",w.forEach((st,ln)=>{const Kt=tt+ln*45;ge[ln]==="correct"?O.fillStyle="#27ae60":ge[ln]==="incorrect"?O.fillStyle="#e74c3c":ln===re?O.fillStyle="#f39c12":O.fillStyle="#7f8c8d",O.fillText(st.toUpperCase(),Kt,ve)}),re<w.length&&(O.fillStyle="#FFD700",O.font='bold 24px "Arial", sans-serif',O.fillText(`Press: ${w[re].toUpperCase()}`,gt.x,ve+40));const Qe=`${re}/${w.length}`;O.fillStyle="#ecf0f1",O.font='20px "Arial", sans-serif',O.fillText(Qe,gt.x,ve+65)}O.fillStyle="#ffffff",O.font='bold 48px "Orbitron", "Courier New", monospace',O.textAlign="center",O.fillText(`Score: ${s}`,I.width/2,80),O.fillStyle="#ffffff",O.font='16px "Press Start 2P", "Courier New", monospace',O.textAlign="center",w.length>0?O.fillText("Press the highlighted keys in sequence to collect the coin!",I.width/2,I.height-50):O.fillText("Get ready to follow the key sequence!",I.width/2,I.height-50),_&&(O.fillStyle="#00FF00",O.font='bold 36px "Orbitron", "Courier New", monospace',O.textAlign="center",O.fillText(`+${tn.REWARDS.PRACTICE_VALUE}`,I.width/2,I.height/2-100)),d==="reaching"&&e&&(O.beginPath(),O.arc(G.x,G.y,8,0,2*Math.PI),O.fillStyle="#FFD700",O.fill(),O.strokeStyle="#FFA500",O.lineWidth=2,O.stroke())}},[r,s,l,d,R,g,D,ye,I,$,_,w,re,ge,G,e]),P.jsx("div",{className:"game-container",children:P.jsx("div",{className:"canvas-container",children:P.jsx("canvas",{ref:y,width:I.width,height:I.height,onMouseMove:tr,className:"game-canvas",style:{width:"100vw",height:"100vh",display:"block"}})})})},WI=()=>{const t=async e=>{try{console.log(`Exporting ${e}...`);const n=await CI(Fo(jo,e)),r=[];if(n.forEach(g=>{r.push({documentId:g.id,...g.data()})}),console.log(`Found ${r.length} documents in ${e}`),r.length===0){alert(`No data found in ${e}`);return}const i=new Set;r.forEach(g=>{Object.keys(g).forEach(v=>i.add(v))});const s=Array.from(i),a=[s.join(",")];r.forEach(g=>{const v=s.map(R=>{const x=g[R];return x==null?"":Array.isArray(x)?`"${JSON.stringify(x).replace(/"/g,'""')}"`:typeof x=="object"?`"${JSON.stringify(x).replace(/"/g,'""')}"`:`"${String(x).replace(/"/g,'""')}"`});a.push(v.join(","))});const l=a.join(`
`),c=new Blob([l],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(c),f=document.createElement("a");f.href=d,f.download=`${e}_export_${new Date().toISOString().split("T")[0]}.csv`,f.click(),console.log(` Exported ${r.length} documents to CSV`)}catch(n){console.error(` Error exporting ${e}:`,n),alert(`Export failed: ${n.message}`)}};return P.jsxs("div",{style:{padding:"20px",backgroundColor:"#f5f5f5",borderRadius:"8px",margin:"20px",maxWidth:"400px"},children:[P.jsx("h3",{style:{marginTop:0,color:"#333"},children:"Export Firebase Data to CSV"}),P.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[P.jsx("button",{onClick:()=>t("globalInvigorationTrials"),style:{padding:"12px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:" Export Trials Data"}),P.jsx("button",{onClick:()=>t("globalInvigorationSubjects"),style:{padding:"12px 20px",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:" Export Subjects Data"})]}),P.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"15px",marginBottom:0},children:"Downloads CSV files with all data from your Firebase collections"})]})};function HI(){const[t,e]=B.useState("consent"),[n,r]=B.useState(null),[i,s]=B.useState(null),[a,l]=B.useState(0),c=async()=>{try{document.documentElement.requestFullscreen?await document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?await document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen?await document.documentElement.msRequestFullscreen():(window.moveTo(0,0),window.resizeTo(screen.width,screen.height))}catch(D){console.warn("Could not enter fullscreen mode:",D);try{window.moveTo(0,0),window.resizeTo(screen.width,screen.height)}catch(M){console.warn("Could not maximize window:",M)}}},d=async()=>{await c(),e("survey")},f=async D=>{r(D);try{const M=await FI(D);s(M),console.log("Participant initialized with ID:",M)}catch(M){console.error("Failed to initialize participant data collection:",M)}l(0),e("instructions")},g=()=>{e("game")},v=()=>{e("practice")},R=()=>{l(3),e("instructions")},x=D=>{e("complete")};return P.jsxs("div",{className:"app",children:[t==="consent"&&P.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:9999},children:P.jsx("button",{onClick:()=>e("export"),style:{padding:"10px 15px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"bold",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},title:"Export Firebase data to CSV",children:" Export Data"})}),t==="consent"&&P.jsx(bw,{onConsent:d,onDecline:()=>e("decline")}),t==="survey"&&P.jsx(Uw,{onSubmit:f}),t==="instructions"&&P.jsx(Bw,{onStart:g,onPractice:v,currentPage:a,setCurrentPage:l}),t==="practice"&&P.jsx($I,{onPracticeComplete:R}),t==="game"&&P.jsx(zI,{participantData:n,participantId:i,onGameComplete:x}),t==="export"&&P.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",zIndex:1e4,display:"flex",justifyContent:"center",alignItems:"center"},children:P.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto"},children:[P.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[P.jsx("h2",{style:{margin:0},children:"Export Firebase Data"}),P.jsx("button",{onClick:()=>e("consent"),style:{padding:"8px 12px",backgroundColor:"#666",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:" Close"})]}),P.jsx(WI,{})]})}),t==="complete"&&P.jsxs("div",{className:"complete-message",children:[P.jsx("h1",{children:"Study Complete!"}),P.jsx("p",{children:"Thank you for participating in our research study."})]}),t==="decline"&&P.jsxs("div",{className:"decline-message",children:[P.jsx("h1",{children:"Thank you for your time"}),P.jsx("p",{children:"You have chosen not to participate in this study."})]})]})}const qI=zu.createRoot(document.getElementById("root"));qI.render(P.jsx(C_.StrictMode,{children:P.jsx(HI,{})}));
