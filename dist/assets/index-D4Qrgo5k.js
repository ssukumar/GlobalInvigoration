(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();function rm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Dc={exports:{}},Ko={},Lc={exports:{}},Ue={};var Zd;function jy(){if(Zd)return Ue;Zd=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),k=Symbol.iterator;function j(N){return N===null||typeof N!="object"?null:(N=k&&N[k]||N["@@iterator"],typeof N=="function"?N:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,ne={};function H(N,z,ae){this.props=N,this.context=z,this.refs=ne,this.updater=ae||$}H.prototype.isReactComponent={},H.prototype.setState=function(N,z){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,z,"setState")},H.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function ie(){}ie.prototype=H.prototype;function De(N,z,ae){this.props=N,this.context=z,this.refs=ne,this.updater=ae||$}var oe=De.prototype=new ie;oe.constructor=De,Z(oe,H.prototype),oe.isPureReactComponent=!0;var Ve=Array.isArray,ot=Object.prototype.hasOwnProperty,Be={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function E(N,z,ae){var ke,Te={},Ie=null,Ae=null;if(z!=null)for(ke in z.ref!==void 0&&(Ae=z.ref),z.key!==void 0&&(Ie=""+z.key),z)ot.call(z,ke)&&!P.hasOwnProperty(ke)&&(Te[ke]=z[ke]);var Re=arguments.length-2;if(Re===1)Te.children=ae;else if(1<Re){for(var Pe=Array(Re),mt=0;mt<Re;mt++)Pe[mt]=arguments[mt+2];Te.children=Pe}if(N&&N.defaultProps)for(ke in Re=N.defaultProps,Re)Te[ke]===void 0&&(Te[ke]=Re[ke]);return{$$typeof:i,type:N,key:Ie,ref:Ae,props:Te,_owner:Be.current}}function A(N,z){return{$$typeof:i,type:N.type,key:z,ref:N.ref,props:N.props,_owner:N._owner}}function C(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function V(N){var z={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ae){return z[ae]})}var D=/\/+/g;function S(N,z){return typeof N=="object"&&N!==null&&N.key!=null?V(""+N.key):z.toString(36)}function rt(N,z,ae,ke,Te){var Ie=typeof N;(Ie==="undefined"||Ie==="boolean")&&(N=null);var Ae=!1;if(N===null)Ae=!0;else switch(Ie){case"string":case"number":Ae=!0;break;case"object":switch(N.$$typeof){case i:case e:Ae=!0}}if(Ae)return Ae=N,Te=Te(Ae),N=ke===""?"."+S(Ae,0):ke,Ve(Te)?(ae="",N!=null&&(ae=N.replace(D,"$&/")+"/"),rt(Te,z,ae,"",function(mt){return mt})):Te!=null&&(C(Te)&&(Te=A(Te,ae+(!Te.key||Ae&&Ae.key===Te.key?"":(""+Te.key).replace(D,"$&/")+"/")+N)),z.push(Te)),1;if(Ae=0,ke=ke===""?".":ke+":",Ve(N))for(var Re=0;Re<N.length;Re++){Ie=N[Re];var Pe=ke+S(Ie,Re);Ae+=rt(Ie,z,ae,Pe,Te)}else if(Pe=j(N),typeof Pe=="function")for(N=Pe.call(N),Re=0;!(Ie=N.next()).done;)Ie=Ie.value,Pe=ke+S(Ie,Re++),Ae+=rt(Ie,z,ae,Pe,Te);else if(Ie==="object")throw z=String(N),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return Ae}function Ye(N,z,ae){if(N==null)return N;var ke=[],Te=0;return rt(N,ke,"","",function(Ie){return z.call(ae,Ie,Te++)}),ke}function It(N){if(N._status===-1){var z=N._result;z=z(),z.then(function(ae){(N._status===0||N._status===-1)&&(N._status=1,N._result=ae)},function(ae){(N._status===0||N._status===-1)&&(N._status=2,N._result=ae)}),N._status===-1&&(N._status=0,N._result=z)}if(N._status===1)return N._result.default;throw N._result}var ye={current:null},ee={transition:null},le={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:ee,ReactCurrentOwner:Be};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:Ye,forEach:function(N,z,ae){Ye(N,function(){z.apply(this,arguments)},ae)},count:function(N){var z=0;return Ye(N,function(){z++}),z},toArray:function(N){return Ye(N,function(z){return z})||[]},only:function(N){if(!C(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ue.Component=H,Ue.Fragment=r,Ue.Profiler=a,Ue.PureComponent=De,Ue.StrictMode=s,Ue.Suspense=y,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,Ue.act=se,Ue.cloneElement=function(N,z,ae){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var ke=Z({},N.props),Te=N.key,Ie=N.ref,Ae=N._owner;if(z!=null){if(z.ref!==void 0&&(Ie=z.ref,Ae=Be.current),z.key!==void 0&&(Te=""+z.key),N.type&&N.type.defaultProps)var Re=N.type.defaultProps;for(Pe in z)ot.call(z,Pe)&&!P.hasOwnProperty(Pe)&&(ke[Pe]=z[Pe]===void 0&&Re!==void 0?Re[Pe]:z[Pe])}var Pe=arguments.length-2;if(Pe===1)ke.children=ae;else if(1<Pe){Re=Array(Pe);for(var mt=0;mt<Pe;mt++)Re[mt]=arguments[mt+2];ke.children=Re}return{$$typeof:i,type:N.type,key:Te,ref:Ie,props:ke,_owner:Ae}},Ue.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:c,_context:N},N.Consumer=N},Ue.createElement=E,Ue.createFactory=function(N){var z=E.bind(null,N);return z.type=N,z},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(N){return{$$typeof:m,render:N}},Ue.isValidElement=C,Ue.lazy=function(N){return{$$typeof:I,_payload:{_status:-1,_result:N},_init:It}},Ue.memo=function(N,z){return{$$typeof:w,type:N,compare:z===void 0?null:z}},Ue.startTransition=function(N){var z=ee.transition;ee.transition={};try{N()}finally{ee.transition=z}},Ue.unstable_act=se,Ue.useCallback=function(N,z){return ye.current.useCallback(N,z)},Ue.useContext=function(N){return ye.current.useContext(N)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(N){return ye.current.useDeferredValue(N)},Ue.useEffect=function(N,z){return ye.current.useEffect(N,z)},Ue.useId=function(){return ye.current.useId()},Ue.useImperativeHandle=function(N,z,ae){return ye.current.useImperativeHandle(N,z,ae)},Ue.useInsertionEffect=function(N,z){return ye.current.useInsertionEffect(N,z)},Ue.useLayoutEffect=function(N,z){return ye.current.useLayoutEffect(N,z)},Ue.useMemo=function(N,z){return ye.current.useMemo(N,z)},Ue.useReducer=function(N,z,ae){return ye.current.useReducer(N,z,ae)},Ue.useRef=function(N){return ye.current.useRef(N)},Ue.useState=function(N){return ye.current.useState(N)},Ue.useSyncExternalStore=function(N,z,ae){return ye.current.useSyncExternalStore(N,z,ae)},Ue.useTransition=function(){return ye.current.useTransition()},Ue.version="18.3.1",Ue}var ep;function mh(){return ep||(ep=1,Lc.exports=jy()),Lc.exports}var tp;function by(){if(tp)return Ko;tp=1;var i=mh(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(m,y,w){var I,k={},j=null,$=null;w!==void 0&&(j=""+w),y.key!==void 0&&(j=""+y.key),y.ref!==void 0&&($=y.ref);for(I in y)s.call(y,I)&&!c.hasOwnProperty(I)&&(k[I]=y[I]);if(m&&m.defaultProps)for(I in y=m.defaultProps,y)k[I]===void 0&&(k[I]=y[I]);return{$$typeof:e,type:m,key:j,ref:$,props:k,_owner:a.current}}return Ko.Fragment=r,Ko.jsx=f,Ko.jsxs=f,Ko}var np;function By(){return np||(np=1,Dc.exports=by()),Dc.exports}var M=By(),Y=mh();const Uy=rm(Y);var Cl={},Oc={exports:{}},Ln={},Mc={exports:{}},Fc={};var rp;function zy(){return rp||(rp=1,(function(i){function e(ee,le){var se=ee.length;ee.push(le);e:for(;0<se;){var N=se-1>>>1,z=ee[N];if(0<a(z,le))ee[N]=le,ee[se]=z,se=N;else break e}}function r(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var le=ee[0],se=ee.pop();if(se!==le){ee[0]=se;e:for(var N=0,z=ee.length,ae=z>>>1;N<ae;){var ke=2*(N+1)-1,Te=ee[ke],Ie=ke+1,Ae=ee[Ie];if(0>a(Te,se))Ie<z&&0>a(Ae,Te)?(ee[N]=Ae,ee[Ie]=se,N=Ie):(ee[N]=Te,ee[ke]=se,N=ke);else if(Ie<z&&0>a(Ae,se))ee[N]=Ae,ee[Ie]=se,N=Ie;else break e}}return le}function a(ee,le){var se=ee.sortIndex-le.sortIndex;return se!==0?se:ee.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var y=[],w=[],I=1,k=null,j=3,$=!1,Z=!1,ne=!1,H=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,De=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(ee){for(var le=r(w);le!==null;){if(le.callback===null)s(w);else if(le.startTime<=ee)s(w),le.sortIndex=le.expirationTime,e(y,le);else break;le=r(w)}}function Ve(ee){if(ne=!1,oe(ee),!Z)if(r(y)!==null)Z=!0,It(ot);else{var le=r(w);le!==null&&ye(Ve,le.startTime-ee)}}function ot(ee,le){Z=!1,ne&&(ne=!1,ie(E),E=-1),$=!0;var se=j;try{for(oe(le),k=r(y);k!==null&&(!(k.expirationTime>le)||ee&&!V());){var N=k.callback;if(typeof N=="function"){k.callback=null,j=k.priorityLevel;var z=N(k.expirationTime<=le);le=i.unstable_now(),typeof z=="function"?k.callback=z:k===r(y)&&s(y),oe(le)}else s(y);k=r(y)}if(k!==null)var ae=!0;else{var ke=r(w);ke!==null&&ye(Ve,ke.startTime-le),ae=!1}return ae}finally{k=null,j=se,$=!1}}var Be=!1,P=null,E=-1,A=5,C=-1;function V(){return!(i.unstable_now()-C<A)}function D(){if(P!==null){var ee=i.unstable_now();C=ee;var le=!0;try{le=P(!0,ee)}finally{le?S():(Be=!1,P=null)}}else Be=!1}var S;if(typeof De=="function")S=function(){De(D)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,Ye=rt.port2;rt.port1.onmessage=D,S=function(){Ye.postMessage(null)}}else S=function(){H(D,0)};function It(ee){P=ee,Be||(Be=!0,S())}function ye(ee,le){E=H(function(){ee(i.unstable_now())},le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ee){ee.callback=null},i.unstable_continueExecution=function(){Z||$||(Z=!0,It(ot))},i.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ee?Math.floor(1e3/ee):5},i.unstable_getCurrentPriorityLevel=function(){return j},i.unstable_getFirstCallbackNode=function(){return r(y)},i.unstable_next=function(ee){switch(j){case 1:case 2:case 3:var le=3;break;default:le=j}var se=j;j=le;try{return ee()}finally{j=se}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ee,le){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var se=j;j=ee;try{return le()}finally{j=se}},i.unstable_scheduleCallback=function(ee,le,se){var N=i.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?N+se:N):se=N,ee){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=se+z,ee={id:I++,callback:le,priorityLevel:ee,startTime:se,expirationTime:z,sortIndex:-1},se>N?(ee.sortIndex=se,e(w,ee),r(y)===null&&ee===r(w)&&(ne?(ie(E),E=-1):ne=!0,ye(Ve,se-N))):(ee.sortIndex=z,e(y,ee),Z||$||(Z=!0,It(ot))),ee},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(ee){var le=j;return function(){var se=j;j=le;try{return ee.apply(this,arguments)}finally{j=se}}}})(Fc)),Fc}var ip;function $y(){return ip||(ip=1,Mc.exports=zy()),Mc.exports}var sp;function Wy(){if(sp)return Ln;sp=1;var i=mh(),e=$y();function r(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,n){f(t,n),f(t+"Capture",n)}function f(t,n){for(a[t]=n,t=0;t<n.length;t++)s.add(n[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},k={};function j(t){return y.call(k,t)?!0:y.call(I,t)?!1:w.test(t)?k[t]=!0:(I[t]=!0,!1)}function $(t,n,o,u){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Z(t,n,o,u){if(n===null||typeof n>"u"||$(t,n,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function ne(t,n,o,u,h,p,v){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=n,this.sanitizeURL=p,this.removeEmptyString=v}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){H[t]=new ne(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];H[n]=new ne(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){H[t]=new ne(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){H[t]=new ne(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){H[t]=new ne(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){H[t]=new ne(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){H[t]=new ne(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){H[t]=new ne(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){H[t]=new ne(t,5,!1,t.toLowerCase(),null,!1,!1)});var ie=/[\-:]([a-z])/g;function De(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(ie,De);H[n]=new ne(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(ie,De);H[n]=new ne(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(ie,De);H[n]=new ne(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){H[t]=new ne(t,1,!1,t.toLowerCase(),null,!1,!1)}),H.xlinkHref=new ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){H[t]=new ne(t,1,!1,t.toLowerCase(),null,!0,!0)});function oe(t,n,o,u){var h=H.hasOwnProperty(n)?H[n]:null;(h!==null?h.type!==0:u||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(Z(n,o,h,u)&&(o=null),u||h===null?j(n)&&(o===null?t.removeAttribute(n):t.setAttribute(n,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(n=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(n):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,n,o):t.setAttribute(n,o))))}var Ve=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ot=Symbol.for("react.element"),Be=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),V=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),Ye=Symbol.for("react.memo"),It=Symbol.for("react.lazy"),ye=Symbol.for("react.offscreen"),ee=Symbol.iterator;function le(t){return t===null||typeof t!="object"?null:(t=ee&&t[ee]||t["@@iterator"],typeof t=="function"?t:null)}var se=Object.assign,N;function z(t){if(N===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);N=n&&n[1]||""}return`
`+N+t}var ae=!1;function ke(t,n){if(!t||ae)return"";ae=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(B){var u=B}Reflect.construct(t,[],n)}else{try{n.call()}catch(B){u=B}t.call(n.prototype)}else{try{throw Error()}catch(B){u=B}t()}}catch(B){if(B&&u&&typeof B.stack=="string"){for(var h=B.stack.split(`
`),p=u.stack.split(`
`),v=h.length-1,T=p.length-1;1<=v&&0<=T&&h[v]!==p[T];)T--;for(;1<=v&&0<=T;v--,T--)if(h[v]!==p[T]){if(v!==1||T!==1)do if(v--,T--,0>T||h[v]!==p[T]){var R=`
`+h[v].replace(" at new "," at ");return t.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",t.displayName)),R}while(1<=v&&0<=T);break}}}finally{ae=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?z(t):""}function Te(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=ke(t.type,!1),t;case 11:return t=ke(t.type.render,!1),t;case 1:return t=ke(t.type,!0),t;default:return""}}function Ie(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case P:return"Fragment";case Be:return"Portal";case A:return"Profiler";case E:return"StrictMode";case S:return"Suspense";case rt:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case V:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case D:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ye:return n=t.displayName||null,n!==null?n:Ie(t.type)||"Memo";case It:n=t._payload,t=t._init;try{return Ie(t(n))}catch{}}return null}function Ae(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(n);case 8:return n===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Re(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pe(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function mt(t){var n=Pe(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),u=""+t[n];if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){u=""+v,p.call(this,v)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Ne(t){t._valueTracker||(t._valueTracker=mt(t))}function q(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var o=n.getValue(),u="";return t&&(u=Pe(t)?t.checked?"true":"false":t.value),t=u,t!==o?(n.setValue(t),!0):!1}function zt(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vt(t,n){var o=n.checked;return se({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Je(t,n){var o=n.defaultValue==null?"":n.defaultValue,u=n.checked!=null?n.checked:n.defaultChecked;o=Re(n.value!=null?n.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function at(t,n){n=n.checked,n!=null&&oe(t,"checked",n,!1)}function Gt(t,n){at(t,n);var o=Re(n.value),u=n.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?wr(t,n.type,o):n.hasOwnProperty("defaultValue")&&wr(t,n.type,Re(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function On(t,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var u=n.type;if(!(u!=="submit"&&u!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,o||n===t.value||(t.value=n),t.defaultValue=n}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function wr(t,n,o){(n!=="number"||zt(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var In=Array.isArray;function An(t,n,o,u){if(t=t.options,n){n={};for(var h=0;h<o.length;h++)n["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=n.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Re(o),n=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function an(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return se({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function or(t,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(r(92));if(In(o)){if(1<o.length)throw Error(r(93));o=o[0]}n=o}n==null&&(n=""),o=n}t._wrapperState={initialValue:Re(o)}}function Yt(t,n){var o=Re(n.value),u=Re(n.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),n.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function Fr(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function Ze(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?Ze(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nt,li=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(n,o,u,h)})}:t})(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(Nt=Nt||document.createElement("div"),Nt.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Nt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function Rn(t,n){if(n){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=n;return}}t.textContent=n}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mn=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(t){Mn.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),ui[n]=ui[t]})});function jr(t,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||ui.hasOwnProperty(t)&&ui[t]?(""+n).trim():n+"px"}function qn(t,n){t=t.style;for(var o in n)if(n.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=jr(o,n[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var ci=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hn(t,n){if(n){if(ci[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function br(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vn=null;function Br(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fn=null,_n=null,Xt=null;function hi(t){if(t=No(t)){if(typeof Fn!="function")throw Error(r(280));var n=t.stateNode;n&&(n=za(n),Fn(t.stateNode,t.type,n))}}function ln(t){_n?Xt?Xt.push(t):Xt=[t]:_n=t}function fi(){if(_n){var t=_n,n=Xt;if(Xt=_n=null,hi(t),n)for(t=0;t<n.length;t++)hi(n[t])}}function Kn(t,n){return t(n)}function ys(){}var wn=!1;function qi(t,n,o){if(wn)return t(n,o);wn=!0;try{return Kn(t,n,o)}finally{wn=!1,(_n!==null||Xt!==null)&&(ys(),fi())}}function gt(t,n){var o=t.stateNode;if(o===null)return null;var u=za(o);if(u===null)return null;o=u[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(r(231,n,typeof o));return o}var di=!1;if(m)try{var un={};Object.defineProperty(un,"passive",{get:function(){di=!0}}),window.addEventListener("test",un,un),window.removeEventListener("test",un,un)}catch{di=!1}function Ur(t,n,o,u,h,p,v,T,R){var B=Array.prototype.slice.call(arguments,3);try{n.apply(o,B)}catch(Q){this.onError(Q)}}var Qn=!1,pi=null,yt=!1,jn=null,go={onError:function(t){Qn=!0,pi=t}};function mi(t,n,o,u,h,p,v,T,R){Qn=!1,pi=null,Ur.apply(go,arguments)}function vs(t,n,o,u,h,p,v,T,R){if(mi.apply(this,arguments),Qn){if(Qn){var B=pi;Qn=!1,pi=null}else throw Error(r(198));yt||(yt=!0,jn=B)}}function cn(t){var n=t,o=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(o=n.return),t=n.return;while(t)}return n.tag===3?o:null}function Er(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function $t(t){if(cn(t)!==t)throw Error(r(188))}function ar(t){var n=t.alternate;if(!n){if(n=cn(t),n===null)throw Error(r(188));return n!==t?null:t}for(var o=t,u=n;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return $t(h),t;if(p===u)return $t(h),n;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=h,u=p;else{for(var v=!1,T=h.child;T;){if(T===o){v=!0,o=h,u=p;break}if(T===u){v=!0,u=h,o=p;break}T=T.sibling}if(!v){for(T=p.child;T;){if(T===o){v=!0,o=p,u=h;break}if(T===u){v=!0,u=p,o=h;break}T=T.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?t:n}function Xe(t){return t=ar(t),t!==null?Gn(t):null}function Gn(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=Gn(t);if(n!==null)return n;t=t.sibling}return null}var zr=e.unstable_scheduleCallback,gi=e.unstable_cancelCallback,Hi=e.unstable_shouldYield,_s=e.unstable_requestPaint,it=e.unstable_now,yi=e.unstable_getCurrentPriorityLevel,Tr=e.unstable_ImmediatePriority,Sr=e.unstable_UserBlockingPriority,W=e.unstable_NormalPriority,b=e.unstable_LowPriority,Fe=e.unstable_IdlePriority,he=null,ue=null;function Se(t){if(ue&&typeof ue.onCommitFiberRoot=="function")try{ue.onCommitFiberRoot(he,t,void 0,(t.current.flags&128)===128)}catch{}}var je=Math.clz32?Math.clz32:At,be=Math.log,ht=Math.LN2;function At(t){return t>>>=0,t===0?32:31-(be(t)/ht|0)|0}var Le=64,ut=4194304;function ft(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ct(t,n){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,v=o&268435455;if(v!==0){var T=v&~h;T!==0?u=ft(T):(p&=v,p!==0&&(u=ft(p)))}else v=o&~h,v!==0?u=ft(v):p!==0&&(u=ft(p));if(u===0)return 0;if(n!==0&&n!==u&&(n&h)===0&&(h=u&-u,p=n&-n,h>=p||h===16&&(p&4194240)!==0))return n;if((u&4)!==0&&(u|=o&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=u;0<n;)o=31-je(n),h=1<<o,u|=t[o],n&=~h;return u}function Dt(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function et(t,n){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var v=31-je(p),T=1<<v,R=h[v];R===-1?((T&o)===0||(T&u)!==0)&&(h[v]=Dt(T,n)):R<=n&&(t.expiredLanes|=T),p&=~T}}function kt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vi(){var t=Le;return Le<<=1,(Le&4194240)===0&&(Le=64),t}function $r(t){for(var n=[],o=0;31>o;o++)n.push(t);return n}function Wr(t,n,o){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-je(n),t[n]=o}function st(t,n){var o=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-je(o),p=1<<h;n[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function qr(t,n){var o=t.entangledLanes|=n;for(t=t.entanglements;o;){var u=31-je(o),h=1<<u;h&n|t[u]&n&&(t[u]|=n),o&=~h}}var ze=0;function _i(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Ea,ws,Ta,Sa,Ia,yo=!1,Ir=[],Jt=null,lr=null,ur=null,wi=new Map,Yn=new Map,Ar=[],cu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Aa(t,n){switch(t){case"focusin":case"focusout":Jt=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":wi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yn.delete(n.pointerId)}}function Cn(t,n,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:n,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},n!==null&&(n=No(n),n!==null&&ws(n)),t):(t.eventSystemFlags|=u,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function hu(t,n,o,u,h){switch(n){case"focusin":return Jt=Cn(Jt,t,n,o,u,h),!0;case"dragenter":return lr=Cn(lr,t,n,o,u,h),!0;case"mouseover":return ur=Cn(ur,t,n,o,u,h),!0;case"pointerover":var p=h.pointerId;return wi.set(p,Cn(wi.get(p)||null,t,n,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,Yn.set(p,Cn(Yn.get(p)||null,t,n,o,u,h)),!0}return!1}function Ra(t){var n=Xi(t.target);if(n!==null){var o=cn(n);if(o!==null){if(n=o.tag,n===13){if(n=Er(o),n!==null){t.blockedOn=n,Ia(t.priority,function(){Ta(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hr(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var o=Es(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);vn=u,o.target.dispatchEvent(u),vn=null}else return n=No(o),n!==null&&ws(n),t.blockedOn=o,!1;n.shift()}return!0}function Ki(t,n,o){Hr(t)&&o.delete(n)}function Ca(){yo=!1,Jt!==null&&Hr(Jt)&&(Jt=null),lr!==null&&Hr(lr)&&(lr=null),ur!==null&&Hr(ur)&&(ur=null),wi.forEach(Ki),Yn.forEach(Ki)}function cr(t,n){t.blockedOn===n&&(t.blockedOn=null,yo||(yo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ca)))}function hr(t){function n(h){return cr(h,t)}if(0<Ir.length){cr(Ir[0],t);for(var o=1;o<Ir.length;o++){var u=Ir[o];u.blockedOn===t&&(u.blockedOn=null)}}for(Jt!==null&&cr(Jt,t),lr!==null&&cr(lr,t),ur!==null&&cr(ur,t),wi.forEach(n),Yn.forEach(n),o=0;o<Ar.length;o++)u=Ar[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Ar.length&&(o=Ar[0],o.blockedOn===null);)Ra(o),o.blockedOn===null&&Ar.shift()}var Kr=Ve.ReactCurrentBatchConfig,Ei=!0;function vt(t,n,o,u){var h=ze,p=Kr.transition;Kr.transition=null;try{ze=1,vo(t,n,o,u)}finally{ze=h,Kr.transition=p}}function fu(t,n,o,u){var h=ze,p=Kr.transition;Kr.transition=null;try{ze=4,vo(t,n,o,u)}finally{ze=h,Kr.transition=p}}function vo(t,n,o,u){if(Ei){var h=Es(t,n,o,u);if(h===null)Su(t,n,u,Qi,o),Aa(t,u);else if(hu(h,t,n,o,u))u.stopPropagation();else if(Aa(t,u),n&4&&-1<cu.indexOf(t)){for(;h!==null;){var p=No(h);if(p!==null&&Ea(p),p=Es(t,n,o,u),p===null&&Su(t,n,u,Qi,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Su(t,n,u,null,o)}}var Qi=null;function Es(t,n,o,u){if(Qi=null,t=Br(u),t=Xi(t),t!==null)if(n=cn(t),n===null)t=null;else if(o=n.tag,o===13){if(t=Er(n),t!==null)return t;t=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Qi=t,null}function _o(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yi()){case Tr:return 1;case Sr:return 4;case W:case b:return 16;case Fe:return 536870912;default:return 16}default:return 16}}var bn=null,Ts=null,kn=null;function wo(){if(kn)return kn;var t,n=Ts,o=n.length,u,h="value"in bn?bn.value:bn.textContent,p=h.length;for(t=0;t<o&&n[t]===h[t];t++);var v=o-t;for(u=1;u<=v&&n[o-u]===h[p-u];u++);return kn=h.slice(t,1<u?1-u:void 0)}function Ss(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Rr(){return!0}function Eo(){return!1}function Zt(t){function n(o,u,h,p,v){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Rr:Eo,this.isPropagationStopped=Eo,this}return se(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),n}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Is=Zt(fr),Cr=se({},fr,{view:0,detail:0}),du=Zt(Cr),As,Qr,Ti,Gi=se({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ti&&(Ti&&t.type==="mousemove"?(As=t.screenX-Ti.screenX,Qr=t.screenY-Ti.screenY):Qr=As=0,Ti=t),As)},movementY:function(t){return"movementY"in t?t.movementY:Qr}}),Rs=Zt(Gi),To=se({},Gi,{dataTransfer:0}),ka=Zt(To),Cs=se({},Cr,{relatedTarget:0}),ks=Zt(Cs),Pa=se({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gr=Zt(Pa),xa=se({},fr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Va=Zt(xa),Na=se({},fr,{data:0}),So=Zt(Na),Ps={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Da={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function La(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Da[t])?!!n[t]:!1}function kr(){return La}var l=se({},Cr,{key:function(t){if(t.key){var n=Ps[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ss(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?En[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(t){return t.type==="keypress"?Ss(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ss(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=Zt(l),g=se({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_=Zt(g),L=se({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr}),U=Zt(L),re=se({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),tt=Zt(re),Ft=se({},Gi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),We=Zt(Ft),Wt=[9,13,27,32],Lt=m&&"CompositionEvent"in window,Xn=null;m&&"documentMode"in document&&(Xn=document.documentMode);var Bn=m&&"TextEvent"in window&&!Xn,Yi=m&&(!Lt||Xn&&8<Xn&&11>=Xn),xs=" ",Hh=!1;function Kh(t,n){switch(t){case"keyup":return Wt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vs=!1;function Og(t,n){switch(t){case"compositionend":return Qh(n);case"keypress":return n.which!==32?null:(Hh=!0,xs);case"textInput":return t=n.data,t===xs&&Hh?null:t;default:return null}}function Mg(t,n){if(Vs)return t==="compositionend"||!Lt&&Kh(t,n)?(t=wo(),kn=Ts=bn=null,Vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Yi&&n.locale!=="ko"?null:n.data;default:return null}}var Fg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Fg[t.type]:n==="textarea"}function Yh(t,n,o,u){ln(u),n=ba(n,"onChange"),0<n.length&&(o=new Is("onChange","change",null,o,u),t.push({event:o,listeners:n}))}var Io=null,Ao=null;function jg(t){mf(t,0)}function Oa(t){var n=Ms(t);if(q(n))return t}function bg(t,n){if(t==="change")return n}var Xh=!1;if(m){var pu;if(m){var mu="oninput"in document;if(!mu){var Jh=document.createElement("div");Jh.setAttribute("oninput","return;"),mu=typeof Jh.oninput=="function"}pu=mu}else pu=!1;Xh=pu&&(!document.documentMode||9<document.documentMode)}function Zh(){Io&&(Io.detachEvent("onpropertychange",ef),Ao=Io=null)}function ef(t){if(t.propertyName==="value"&&Oa(Ao)){var n=[];Yh(n,Ao,t,Br(t)),qi(jg,n)}}function Bg(t,n,o){t==="focusin"?(Zh(),Io=n,Ao=o,Io.attachEvent("onpropertychange",ef)):t==="focusout"&&Zh()}function Ug(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oa(Ao)}function zg(t,n){if(t==="click")return Oa(n)}function $g(t,n){if(t==="input"||t==="change")return Oa(n)}function Wg(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var dr=typeof Object.is=="function"?Object.is:Wg;function Ro(t,n){if(dr(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var o=Object.keys(t),u=Object.keys(n);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!y.call(n,h)||!dr(t[h],n[h]))return!1}return!0}function tf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nf(t,n){var o=tf(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=n&&u>=n)return{node:o,offset:n-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=tf(o)}}function rf(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?rf(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function sf(){for(var t=window,n=zt();n instanceof t.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)t=n.contentWindow;else break;n=zt(t.document)}return n}function gu(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function qg(t){var n=sf(),o=t.focusedElem,u=t.selectionRange;if(n!==o&&o&&o.ownerDocument&&rf(o.ownerDocument.documentElement,o)){if(u!==null&&gu(o)){if(n=u.start,t=u.end,t===void 0&&(t=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(t,o.value.length);else if(t=(n=o.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=nf(o,p);var v=nf(o,u);h&&v&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(n=n.createRange(),n.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(n),t.extend(v.node,v.offset)):(n.setEnd(v.node,v.offset),t.addRange(n)))}}for(n=[],t=o;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)t=n[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Hg=m&&"documentMode"in document&&11>=document.documentMode,Ns=null,yu=null,Co=null,vu=!1;function of(t,n,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;vu||Ns==null||Ns!==zt(u)||(u=Ns,"selectionStart"in u&&gu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Co&&Ro(Co,u)||(Co=u,u=ba(yu,"onSelect"),0<u.length&&(n=new Is("onSelect","select",null,n,o),t.push({event:n,listeners:u}),n.target=Ns)))}function Ma(t,n){var o={};return o[t.toLowerCase()]=n.toLowerCase(),o["Webkit"+t]="webkit"+n,o["Moz"+t]="moz"+n,o}var Ds={animationend:Ma("Animation","AnimationEnd"),animationiteration:Ma("Animation","AnimationIteration"),animationstart:Ma("Animation","AnimationStart"),transitionend:Ma("Transition","TransitionEnd")},_u={},af={};m&&(af=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function Fa(t){if(_u[t])return _u[t];if(!Ds[t])return t;var n=Ds[t],o;for(o in n)if(n.hasOwnProperty(o)&&o in af)return _u[t]=n[o];return t}var lf=Fa("animationend"),uf=Fa("animationiteration"),cf=Fa("animationstart"),hf=Fa("transitionend"),ff=new Map,df="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Si(t,n){ff.set(t,n),c(n,[t])}for(var wu=0;wu<df.length;wu++){var Eu=df[wu],Kg=Eu.toLowerCase(),Qg=Eu[0].toUpperCase()+Eu.slice(1);Si(Kg,"on"+Qg)}Si(lf,"onAnimationEnd"),Si(uf,"onAnimationIteration"),Si(cf,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(hf,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gg=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function pf(t,n,o){var u=t.type||"unknown-event";t.currentTarget=o,vs(u,n,void 0,t),t.currentTarget=null}function mf(t,n){n=(n&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(n)for(var v=u.length-1;0<=v;v--){var T=u[v],R=T.instance,B=T.currentTarget;if(T=T.listener,R!==p&&h.isPropagationStopped())break e;pf(h,T,B),p=R}else for(v=0;v<u.length;v++){if(T=u[v],R=T.instance,B=T.currentTarget,T=T.listener,R!==p&&h.isPropagationStopped())break e;pf(h,T,B),p=R}}}if(yt)throw t=jn,yt=!1,jn=null,t}function dt(t,n){var o=n[Pu];o===void 0&&(o=n[Pu]=new Set);var u=t+"__bubble";o.has(u)||(gf(n,t,2,!1),o.add(u))}function Tu(t,n,o){var u=0;n&&(u|=4),gf(o,t,u,n)}var ja="_reactListening"+Math.random().toString(36).slice(2);function Po(t){if(!t[ja]){t[ja]=!0,s.forEach(function(o){o!=="selectionchange"&&(Gg.has(o)||Tu(o,!1,t),Tu(o,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[ja]||(n[ja]=!0,Tu("selectionchange",!1,n))}}function gf(t,n,o,u){switch(_o(n)){case 1:var h=vt;break;case 4:h=fu;break;default:h=vo}o=h.bind(null,n,o,t),h=void 0,!di||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(n,o,{capture:!0,passive:h}):t.addEventListener(n,o,!0):h!==void 0?t.addEventListener(n,o,{passive:h}):t.addEventListener(n,o,!1)}function Su(t,n,o,u,h){var p=u;if((n&1)===0&&(n&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var T=u.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(v===4)for(v=u.return;v!==null;){var R=v.tag;if((R===3||R===4)&&(R=v.stateNode.containerInfo,R===h||R.nodeType===8&&R.parentNode===h))return;v=v.return}for(;T!==null;){if(v=Xi(T),v===null)return;if(R=v.tag,R===5||R===6){u=p=v;continue e}T=T.parentNode}}u=u.return}qi(function(){var B=p,Q=Br(o),J=[];e:{var K=ff.get(t);if(K!==void 0){var ce=Is,de=t;switch(t){case"keypress":if(Ss(o)===0)break e;case"keydown":case"keyup":ce=d;break;case"focusin":de="focus",ce=ks;break;case"focusout":de="blur",ce=ks;break;case"beforeblur":case"afterblur":ce=ks;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Rs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=ka;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=U;break;case lf:case uf:case cf:ce=Gr;break;case hf:ce=tt;break;case"scroll":ce=du;break;case"wheel":ce=We;break;case"copy":case"cut":case"paste":ce=Va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=_}var pe=(n&4)!==0,Pt=!pe&&t==="scroll",O=pe?K!==null?K+"Capture":null:K;pe=[];for(var x=B,F;x!==null;){F=x;var te=F.stateNode;if(F.tag===5&&te!==null&&(F=te,O!==null&&(te=gt(x,O),te!=null&&pe.push(xo(x,te,F)))),Pt)break;x=x.return}0<pe.length&&(K=new ce(K,de,null,o,Q),J.push({event:K,listeners:pe}))}}if((n&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",ce=t==="mouseout"||t==="pointerout",K&&o!==vn&&(de=o.relatedTarget||o.fromElement)&&(Xi(de)||de[Yr]))break e;if((ce||K)&&(K=Q.window===Q?Q:(K=Q.ownerDocument)?K.defaultView||K.parentWindow:window,ce?(de=o.relatedTarget||o.toElement,ce=B,de=de?Xi(de):null,de!==null&&(Pt=cn(de),de!==Pt||de.tag!==5&&de.tag!==6)&&(de=null)):(ce=null,de=B),ce!==de)){if(pe=Rs,te="onMouseLeave",O="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(pe=_,te="onPointerLeave",O="onPointerEnter",x="pointer"),Pt=ce==null?K:Ms(ce),F=de==null?K:Ms(de),K=new pe(te,x+"leave",ce,o,Q),K.target=Pt,K.relatedTarget=F,te=null,Xi(Q)===B&&(pe=new pe(O,x+"enter",de,o,Q),pe.target=F,pe.relatedTarget=Pt,te=pe),Pt=te,ce&&de)t:{for(pe=ce,O=de,x=0,F=pe;F;F=Ls(F))x++;for(F=0,te=O;te;te=Ls(te))F++;for(;0<x-F;)pe=Ls(pe),x--;for(;0<F-x;)O=Ls(O),F--;for(;x--;){if(pe===O||O!==null&&pe===O.alternate)break t;pe=Ls(pe),O=Ls(O)}pe=null}else pe=null;ce!==null&&yf(J,K,ce,pe,!1),de!==null&&Pt!==null&&yf(J,Pt,de,pe,!0)}}e:{if(K=B?Ms(B):window,ce=K.nodeName&&K.nodeName.toLowerCase(),ce==="select"||ce==="input"&&K.type==="file")var ge=bg;else if(Gh(K))if(Xh)ge=$g;else{ge=Ug;var _e=Bg}else(ce=K.nodeName)&&ce.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(ge=zg);if(ge&&(ge=ge(t,B))){Yh(J,ge,o,Q);break e}_e&&_e(t,K,B),t==="focusout"&&(_e=K._wrapperState)&&_e.controlled&&K.type==="number"&&wr(K,"number",K.value)}switch(_e=B?Ms(B):window,t){case"focusin":(Gh(_e)||_e.contentEditable==="true")&&(Ns=_e,yu=B,Co=null);break;case"focusout":Co=yu=Ns=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,of(J,o,Q);break;case"selectionchange":if(Hg)break;case"keydown":case"keyup":of(J,o,Q)}var we;if(Lt)e:{switch(t){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Vs?Kh(t,o)&&(Ce="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Ce="onCompositionStart");Ce&&(Yi&&o.locale!=="ko"&&(Vs||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Vs&&(we=wo()):(bn=Q,Ts="value"in bn?bn.value:bn.textContent,Vs=!0)),_e=ba(B,Ce),0<_e.length&&(Ce=new So(Ce,t,null,o,Q),J.push({event:Ce,listeners:_e}),we?Ce.data=we:(we=Qh(o),we!==null&&(Ce.data=we)))),(we=Bn?Og(t,o):Mg(t,o))&&(B=ba(B,"onBeforeInput"),0<B.length&&(Q=new So("onBeforeInput","beforeinput",null,o,Q),J.push({event:Q,listeners:B}),Q.data=we))}mf(J,n)})}function xo(t,n,o){return{instance:t,listener:n,currentTarget:o}}function ba(t,n){for(var o=n+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=gt(t,o),p!=null&&u.unshift(xo(t,p,h)),p=gt(t,n),p!=null&&u.push(xo(t,p,h))),t=t.return}return u}function Ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yf(t,n,o,u,h){for(var p=n._reactName,v=[];o!==null&&o!==u;){var T=o,R=T.alternate,B=T.stateNode;if(R!==null&&R===u)break;T.tag===5&&B!==null&&(T=B,h?(R=gt(o,p),R!=null&&v.unshift(xo(o,R,T))):h||(R=gt(o,p),R!=null&&v.push(xo(o,R,T)))),o=o.return}v.length!==0&&t.push({event:n,listeners:v})}var Yg=/\r\n?/g,Xg=/\u0000|\uFFFD/g;function vf(t){return(typeof t=="string"?t:""+t).replace(Yg,`
`).replace(Xg,"")}function Ba(t,n,o){if(n=vf(n),vf(t)!==n&&o)throw Error(r(425))}function Ua(){}var Iu=null,Au=null;function Ru(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Cu=typeof setTimeout=="function"?setTimeout:void 0,Jg=typeof clearTimeout=="function"?clearTimeout:void 0,_f=typeof Promise=="function"?Promise:void 0,Zg=typeof queueMicrotask=="function"?queueMicrotask:typeof _f<"u"?function(t){return _f.resolve(null).then(t).catch(ey)}:Cu;function ey(t){setTimeout(function(){throw t})}function ku(t,n){var o=n,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),hr(n);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);hr(n)}function Ii(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function wf(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return t;n--}else o==="/$"&&n++}t=t.previousSibling}return null}var Os=Math.random().toString(36).slice(2),Pr="__reactFiber$"+Os,Vo="__reactProps$"+Os,Yr="__reactContainer$"+Os,Pu="__reactEvents$"+Os,ty="__reactListeners$"+Os,ny="__reactHandles$"+Os;function Xi(t){var n=t[Pr];if(n)return n;for(var o=t.parentNode;o;){if(n=o[Yr]||o[Pr]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(t=wf(t);t!==null;){if(o=t[Pr])return o;t=wf(t)}return n}t=o,o=t.parentNode}return null}function No(t){return t=t[Pr]||t[Yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ms(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function za(t){return t[Vo]||null}var xu=[],Fs=-1;function Ai(t){return{current:t}}function pt(t){0>Fs||(t.current=xu[Fs],xu[Fs]=null,Fs--)}function ct(t,n){Fs++,xu[Fs]=t.current,t.current=n}var Ri={},hn=Ai(Ri),Pn=Ai(!1),Ji=Ri;function js(t,n){var o=t.type.contextTypes;if(!o)return Ri;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===n)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=n[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=h),h}function xn(t){return t=t.childContextTypes,t!=null}function $a(){pt(Pn),pt(hn)}function Ef(t,n,o){if(hn.current!==Ri)throw Error(r(168));ct(hn,n),ct(Pn,o)}function Tf(t,n,o){var u=t.stateNode;if(n=n.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in n))throw Error(r(108,Ae(t)||"Unknown",h));return se({},o,u)}function Wa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ri,Ji=hn.current,ct(hn,t),ct(Pn,Pn.current),!0}function Sf(t,n,o){var u=t.stateNode;if(!u)throw Error(r(169));o?(t=Tf(t,n,Ji),u.__reactInternalMemoizedMergedChildContext=t,pt(Pn),pt(hn),ct(hn,t)):pt(Pn),ct(Pn,o)}var Xr=null,qa=!1,Vu=!1;function If(t){Xr===null?Xr=[t]:Xr.push(t)}function ry(t){qa=!0,If(t)}function Ci(){if(!Vu&&Xr!==null){Vu=!0;var t=0,n=ze;try{var o=Xr;for(ze=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}Xr=null,qa=!1}catch(h){throw Xr!==null&&(Xr=Xr.slice(t+1)),zr(Tr,Ci),h}finally{ze=n,Vu=!1}}return null}var bs=[],Bs=0,Ha=null,Ka=0,Jn=[],Zn=0,Zi=null,Jr=1,Zr="";function es(t,n){bs[Bs++]=Ka,bs[Bs++]=Ha,Ha=t,Ka=n}function Af(t,n,o){Jn[Zn++]=Jr,Jn[Zn++]=Zr,Jn[Zn++]=Zi,Zi=t;var u=Jr;t=Zr;var h=32-je(u)-1;u&=~(1<<h),o+=1;var p=32-je(n)+h;if(30<p){var v=h-h%5;p=(u&(1<<v)-1).toString(32),u>>=v,h-=v,Jr=1<<32-je(n)+h|o<<h|u,Zr=p+t}else Jr=1<<p|o<<h|u,Zr=t}function Nu(t){t.return!==null&&(es(t,1),Af(t,1,0))}function Du(t){for(;t===Ha;)Ha=bs[--Bs],bs[Bs]=null,Ka=bs[--Bs],bs[Bs]=null;for(;t===Zi;)Zi=Jn[--Zn],Jn[Zn]=null,Zr=Jn[--Zn],Jn[Zn]=null,Jr=Jn[--Zn],Jn[Zn]=null}var Un=null,zn=null,_t=!1,pr=null;function Rf(t,n){var o=rr(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=t,n=t.deletions,n===null?(t.deletions=[o],t.flags|=16):n.push(o)}function Cf(t,n){switch(t.tag){case 5:var o=t.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,Un=t,zn=Ii(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,Un=t,zn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=Zi!==null?{id:Jr,overflow:Zr}:null,t.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=rr(18,null,null,0),o.stateNode=n,o.return=t,t.child=o,Un=t,zn=null,!0):!1;default:return!1}}function Lu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ou(t){if(_t){var n=zn;if(n){var o=n;if(!Cf(t,n)){if(Lu(t))throw Error(r(418));n=Ii(o.nextSibling);var u=Un;n&&Cf(t,n)?Rf(u,o):(t.flags=t.flags&-4097|2,_t=!1,Un=t)}}else{if(Lu(t))throw Error(r(418));t.flags=t.flags&-4097|2,_t=!1,Un=t}}}function kf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Un=t}function Qa(t){if(t!==Un)return!1;if(!_t)return kf(t),_t=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!Ru(t.type,t.memoizedProps)),n&&(n=zn)){if(Lu(t))throw Pf(),Error(r(418));for(;n;)Rf(t,n),n=Ii(n.nextSibling)}if(kf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(n===0){zn=Ii(t.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}t=t.nextSibling}zn=null}}else zn=Un?Ii(t.stateNode.nextSibling):null;return!0}function Pf(){for(var t=zn;t;)t=Ii(t.nextSibling)}function Us(){zn=Un=null,_t=!1}function Mu(t){pr===null?pr=[t]:pr.push(t)}var iy=Ve.ReactCurrentBatchConfig;function Do(t,n,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(r(309));var u=o.stateNode}if(!u)throw Error(r(147,t));var h=u,p=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===p?n.ref:(n=function(v){var T=h.refs;v===null?delete T[p]:T[p]=v},n._stringRef=p,n)}if(typeof t!="string")throw Error(r(284));if(!o._owner)throw Error(r(290,t))}return t}function Ga(t,n){throw t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function xf(t){var n=t._init;return n(t._payload)}function Vf(t){function n(O,x){if(t){var F=O.deletions;F===null?(O.deletions=[x],O.flags|=16):F.push(x)}}function o(O,x){if(!t)return null;for(;x!==null;)n(O,x),x=x.sibling;return null}function u(O,x){for(O=new Map;x!==null;)x.key!==null?O.set(x.key,x):O.set(x.index,x),x=x.sibling;return O}function h(O,x){return O=Oi(O,x),O.index=0,O.sibling=null,O}function p(O,x,F){return O.index=F,t?(F=O.alternate,F!==null?(F=F.index,F<x?(O.flags|=2,x):F):(O.flags|=2,x)):(O.flags|=1048576,x)}function v(O){return t&&O.alternate===null&&(O.flags|=2),O}function T(O,x,F,te){return x===null||x.tag!==6?(x=Cc(F,O.mode,te),x.return=O,x):(x=h(x,F),x.return=O,x)}function R(O,x,F,te){var ge=F.type;return ge===P?Q(O,x,F.props.children,te,F.key):x!==null&&(x.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===It&&xf(ge)===x.type)?(te=h(x,F.props),te.ref=Do(O,x,F),te.return=O,te):(te=_l(F.type,F.key,F.props,null,O.mode,te),te.ref=Do(O,x,F),te.return=O,te)}function B(O,x,F,te){return x===null||x.tag!==4||x.stateNode.containerInfo!==F.containerInfo||x.stateNode.implementation!==F.implementation?(x=kc(F,O.mode,te),x.return=O,x):(x=h(x,F.children||[]),x.return=O,x)}function Q(O,x,F,te,ge){return x===null||x.tag!==7?(x=ls(F,O.mode,te,ge),x.return=O,x):(x=h(x,F),x.return=O,x)}function J(O,x,F){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Cc(""+x,O.mode,F),x.return=O,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ot:return F=_l(x.type,x.key,x.props,null,O.mode,F),F.ref=Do(O,null,x),F.return=O,F;case Be:return x=kc(x,O.mode,F),x.return=O,x;case It:var te=x._init;return J(O,te(x._payload),F)}if(In(x)||le(x))return x=ls(x,O.mode,F,null),x.return=O,x;Ga(O,x)}return null}function K(O,x,F,te){var ge=x!==null?x.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return ge!==null?null:T(O,x,""+F,te);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case ot:return F.key===ge?R(O,x,F,te):null;case Be:return F.key===ge?B(O,x,F,te):null;case It:return ge=F._init,K(O,x,ge(F._payload),te)}if(In(F)||le(F))return ge!==null?null:Q(O,x,F,te,null);Ga(O,F)}return null}function ce(O,x,F,te,ge){if(typeof te=="string"&&te!==""||typeof te=="number")return O=O.get(F)||null,T(x,O,""+te,ge);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case ot:return O=O.get(te.key===null?F:te.key)||null,R(x,O,te,ge);case Be:return O=O.get(te.key===null?F:te.key)||null,B(x,O,te,ge);case It:var _e=te._init;return ce(O,x,F,_e(te._payload),ge)}if(In(te)||le(te))return O=O.get(F)||null,Q(x,O,te,ge,null);Ga(x,te)}return null}function de(O,x,F,te){for(var ge=null,_e=null,we=x,Ce=x=0,Kt=null;we!==null&&Ce<F.length;Ce++){we.index>Ce?(Kt=we,we=null):Kt=we.sibling;var Qe=K(O,we,F[Ce],te);if(Qe===null){we===null&&(we=Kt);break}t&&we&&Qe.alternate===null&&n(O,we),x=p(Qe,x,Ce),_e===null?ge=Qe:_e.sibling=Qe,_e=Qe,we=Kt}if(Ce===F.length)return o(O,we),_t&&es(O,Ce),ge;if(we===null){for(;Ce<F.length;Ce++)we=J(O,F[Ce],te),we!==null&&(x=p(we,x,Ce),_e===null?ge=we:_e.sibling=we,_e=we);return _t&&es(O,Ce),ge}for(we=u(O,we);Ce<F.length;Ce++)Kt=ce(we,O,Ce,F[Ce],te),Kt!==null&&(t&&Kt.alternate!==null&&we.delete(Kt.key===null?Ce:Kt.key),x=p(Kt,x,Ce),_e===null?ge=Kt:_e.sibling=Kt,_e=Kt);return t&&we.forEach(function(Mi){return n(O,Mi)}),_t&&es(O,Ce),ge}function pe(O,x,F,te){var ge=le(F);if(typeof ge!="function")throw Error(r(150));if(F=ge.call(F),F==null)throw Error(r(151));for(var _e=ge=null,we=x,Ce=x=0,Kt=null,Qe=F.next();we!==null&&!Qe.done;Ce++,Qe=F.next()){we.index>Ce?(Kt=we,we=null):Kt=we.sibling;var Mi=K(O,we,Qe.value,te);if(Mi===null){we===null&&(we=Kt);break}t&&we&&Mi.alternate===null&&n(O,we),x=p(Mi,x,Ce),_e===null?ge=Mi:_e.sibling=Mi,_e=Mi,we=Kt}if(Qe.done)return o(O,we),_t&&es(O,Ce),ge;if(we===null){for(;!Qe.done;Ce++,Qe=F.next())Qe=J(O,Qe.value,te),Qe!==null&&(x=p(Qe,x,Ce),_e===null?ge=Qe:_e.sibling=Qe,_e=Qe);return _t&&es(O,Ce),ge}for(we=u(O,we);!Qe.done;Ce++,Qe=F.next())Qe=ce(we,O,Ce,Qe.value,te),Qe!==null&&(t&&Qe.alternate!==null&&we.delete(Qe.key===null?Ce:Qe.key),x=p(Qe,x,Ce),_e===null?ge=Qe:_e.sibling=Qe,_e=Qe);return t&&we.forEach(function(Fy){return n(O,Fy)}),_t&&es(O,Ce),ge}function Pt(O,x,F,te){if(typeof F=="object"&&F!==null&&F.type===P&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case ot:e:{for(var ge=F.key,_e=x;_e!==null;){if(_e.key===ge){if(ge=F.type,ge===P){if(_e.tag===7){o(O,_e.sibling),x=h(_e,F.props.children),x.return=O,O=x;break e}}else if(_e.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===It&&xf(ge)===_e.type){o(O,_e.sibling),x=h(_e,F.props),x.ref=Do(O,_e,F),x.return=O,O=x;break e}o(O,_e);break}else n(O,_e);_e=_e.sibling}F.type===P?(x=ls(F.props.children,O.mode,te,F.key),x.return=O,O=x):(te=_l(F.type,F.key,F.props,null,O.mode,te),te.ref=Do(O,x,F),te.return=O,O=te)}return v(O);case Be:e:{for(_e=F.key;x!==null;){if(x.key===_e)if(x.tag===4&&x.stateNode.containerInfo===F.containerInfo&&x.stateNode.implementation===F.implementation){o(O,x.sibling),x=h(x,F.children||[]),x.return=O,O=x;break e}else{o(O,x);break}else n(O,x);x=x.sibling}x=kc(F,O.mode,te),x.return=O,O=x}return v(O);case It:return _e=F._init,Pt(O,x,_e(F._payload),te)}if(In(F))return de(O,x,F,te);if(le(F))return pe(O,x,F,te);Ga(O,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,x!==null&&x.tag===6?(o(O,x.sibling),x=h(x,F),x.return=O,O=x):(o(O,x),x=Cc(F,O.mode,te),x.return=O,O=x),v(O)):o(O,x)}return Pt}var zs=Vf(!0),Nf=Vf(!1),Ya=Ai(null),Xa=null,$s=null,Fu=null;function ju(){Fu=$s=Xa=null}function bu(t){var n=Ya.current;pt(Ya),t._currentValue=n}function Bu(t,n,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,u!==null&&(u.childLanes|=n)):u!==null&&(u.childLanes&n)!==n&&(u.childLanes|=n),t===o)break;t=t.return}}function Ws(t,n){Xa=t,Fu=$s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(Vn=!0),t.firstContext=null)}function er(t){var n=t._currentValue;if(Fu!==t)if(t={context:t,memoizedValue:n,next:null},$s===null){if(Xa===null)throw Error(r(308));$s=t,Xa.dependencies={lanes:0,firstContext:t}}else $s=$s.next=t;return n}var ts=null;function Uu(t){ts===null?ts=[t]:ts.push(t)}function Df(t,n,o,u){var h=n.interleaved;return h===null?(o.next=o,Uu(n)):(o.next=h.next,h.next=o),n.interleaved=o,ei(t,u)}function ei(t,n){t.lanes|=n;var o=t.alternate;for(o!==null&&(o.lanes|=n),o=t,t=t.return;t!==null;)t.childLanes|=n,o=t.alternate,o!==null&&(o.childLanes|=n),o=t,t=t.return;return o.tag===3?o.stateNode:null}var ki=!1;function zu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lf(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ti(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Pi(t,n,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(He&2)!==0){var h=u.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),u.pending=n,ei(t,o)}return h=u.interleaved,h===null?(n.next=n,Uu(u)):(n.next=h.next,h.next=n),u.interleaved=n,ei(t,o)}function Ja(t,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var u=n.lanes;u&=t.pendingLanes,o|=u,n.lanes=o,qr(t,o)}}function Of(t,n){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?h=p=n:p=p.next=n}else h=p=n;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=n:t.next=n,o.lastBaseUpdate=n}function Za(t,n,o,u){var h=t.updateQueue;ki=!1;var p=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var R=T,B=R.next;R.next=null,v===null?p=B:v.next=B,v=R;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==v&&(T===null?Q.firstBaseUpdate=B:T.next=B,Q.lastBaseUpdate=R))}if(p!==null){var J=h.baseState;v=0,Q=B=R=null,T=p;do{var K=T.lane,ce=T.eventTime;if((u&K)===K){Q!==null&&(Q=Q.next={eventTime:ce,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var de=t,pe=T;switch(K=n,ce=o,pe.tag){case 1:if(de=pe.payload,typeof de=="function"){J=de.call(ce,J,K);break e}J=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=pe.payload,K=typeof de=="function"?de.call(ce,J,K):de,K==null)break e;J=se({},J,K);break e;case 2:ki=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,K=h.effects,K===null?h.effects=[T]:K.push(T))}else ce={eventTime:ce,lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(B=Q=ce,R=J):Q=Q.next=ce,v|=K;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;K=T,T=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);if(Q===null&&(R=J),h.baseState=R,h.firstBaseUpdate=B,h.lastBaseUpdate=Q,n=h.shared.interleaved,n!==null){h=n;do v|=h.lane,h=h.next;while(h!==n)}else p===null&&(h.shared.lanes=0);is|=v,t.lanes=v,t.memoizedState=J}}function Mf(t,n,o){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var u=t[n],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(r(191,h));h.call(u)}}}var Lo={},xr=Ai(Lo),Oo=Ai(Lo),Mo=Ai(Lo);function ns(t){if(t===Lo)throw Error(r(174));return t}function $u(t,n){switch(ct(Mo,n),ct(Oo,t),ct(xr,Lo),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:lt(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=lt(n,t)}pt(xr),ct(xr,n)}function qs(){pt(xr),pt(Oo),pt(Mo)}function Ff(t){ns(Mo.current);var n=ns(xr.current),o=lt(n,t.type);n!==o&&(ct(Oo,t),ct(xr,o))}function Wu(t){Oo.current===t&&(pt(xr),pt(Oo))}var Et=Ai(0);function el(t){for(var n=t;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var qu=[];function Hu(){for(var t=0;t<qu.length;t++)qu[t]._workInProgressVersionPrimary=null;qu.length=0}var tl=Ve.ReactCurrentDispatcher,Ku=Ve.ReactCurrentBatchConfig,rs=0,Tt=null,jt=null,qt=null,nl=!1,Fo=!1,jo=0,sy=0;function fn(){throw Error(r(321))}function Qu(t,n){if(n===null)return!1;for(var o=0;o<n.length&&o<t.length;o++)if(!dr(t[o],n[o]))return!1;return!0}function Gu(t,n,o,u,h,p){if(rs=p,Tt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,tl.current=t===null||t.memoizedState===null?uy:cy,t=o(u,h),Fo){p=0;do{if(Fo=!1,jo=0,25<=p)throw Error(r(301));p+=1,qt=jt=null,n.updateQueue=null,tl.current=hy,t=o(u,h)}while(Fo)}if(tl.current=sl,n=jt!==null&&jt.next!==null,rs=0,qt=jt=Tt=null,nl=!1,n)throw Error(r(300));return t}function Yu(){var t=jo!==0;return jo=0,t}function Vr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Tt.memoizedState=qt=t:qt=qt.next=t,qt}function tr(){if(jt===null){var t=Tt.alternate;t=t!==null?t.memoizedState:null}else t=jt.next;var n=qt===null?Tt.memoizedState:qt.next;if(n!==null)qt=n,jt=t;else{if(t===null)throw Error(r(310));jt=t,t={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},qt===null?Tt.memoizedState=qt=t:qt=qt.next=t}return qt}function bo(t,n){return typeof n=="function"?n(t):n}function Xu(t){var n=tr(),o=n.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=t;var u=jt,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var v=h.next;h.next=p.next,p.next=v}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var T=v=null,R=null,B=p;do{var Q=B.lane;if((rs&Q)===Q)R!==null&&(R=R.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),u=B.hasEagerState?B.eagerState:t(u,B.action);else{var J={lane:Q,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};R===null?(T=R=J,v=u):R=R.next=J,Tt.lanes|=Q,is|=Q}B=B.next}while(B!==null&&B!==p);R===null?v=u:R.next=T,dr(u,n.memoizedState)||(Vn=!0),n.memoizedState=u,n.baseState=v,n.baseQueue=R,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,Tt.lanes|=p,is|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function Ju(t){var n=tr(),o=n.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=n.memoizedState;if(h!==null){o.pending=null;var v=h=h.next;do p=t(p,v.action),v=v.next;while(v!==h);dr(p,n.memoizedState)||(Vn=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),o.lastRenderedState=p}return[p,u]}function jf(){}function bf(t,n){var o=Tt,u=tr(),h=n(),p=!dr(u.memoizedState,h);if(p&&(u.memoizedState=h,Vn=!0),u=u.queue,Zu(zf.bind(null,o,u,t),[t]),u.getSnapshot!==n||p||qt!==null&&qt.memoizedState.tag&1){if(o.flags|=2048,Bo(9,Uf.bind(null,o,u,h,n),void 0,null),Ht===null)throw Error(r(349));(rs&30)!==0||Bf(o,n,h)}return h}function Bf(t,n,o){t.flags|=16384,t={getSnapshot:n,value:o},n=Tt.updateQueue,n===null?(n={lastEffect:null,stores:null},Tt.updateQueue=n,n.stores=[t]):(o=n.stores,o===null?n.stores=[t]:o.push(t))}function Uf(t,n,o,u){n.value=o,n.getSnapshot=u,$f(n)&&Wf(t)}function zf(t,n,o){return o(function(){$f(n)&&Wf(t)})}function $f(t){var n=t.getSnapshot;t=t.value;try{var o=n();return!dr(t,o)}catch{return!0}}function Wf(t){var n=ei(t,1);n!==null&&vr(n,t,1,-1)}function qf(t){var n=Vr();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:t},n.queue=t,t=t.dispatch=ly.bind(null,Tt,t),[n.memoizedState,t]}function Bo(t,n,o,u){return t={tag:t,create:n,destroy:o,deps:u,next:null},n=Tt.updateQueue,n===null?(n={lastEffect:null,stores:null},Tt.updateQueue=n,n.lastEffect=t.next=t):(o=n.lastEffect,o===null?n.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,n.lastEffect=t)),t}function Hf(){return tr().memoizedState}function rl(t,n,o,u){var h=Vr();Tt.flags|=t,h.memoizedState=Bo(1|n,o,void 0,u===void 0?null:u)}function il(t,n,o,u){var h=tr();u=u===void 0?null:u;var p=void 0;if(jt!==null){var v=jt.memoizedState;if(p=v.destroy,u!==null&&Qu(u,v.deps)){h.memoizedState=Bo(n,o,p,u);return}}Tt.flags|=t,h.memoizedState=Bo(1|n,o,p,u)}function Kf(t,n){return rl(8390656,8,t,n)}function Zu(t,n){return il(2048,8,t,n)}function Qf(t,n){return il(4,2,t,n)}function Gf(t,n){return il(4,4,t,n)}function Yf(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Xf(t,n,o){return o=o!=null?o.concat([t]):null,il(4,4,Yf.bind(null,n,t),o)}function ec(){}function Jf(t,n){var o=tr();n=n===void 0?null:n;var u=o.memoizedState;return u!==null&&n!==null&&Qu(n,u[1])?u[0]:(o.memoizedState=[t,n],t)}function Zf(t,n){var o=tr();n=n===void 0?null:n;var u=o.memoizedState;return u!==null&&n!==null&&Qu(n,u[1])?u[0]:(t=t(),o.memoizedState=[t,n],t)}function ed(t,n,o){return(rs&21)===0?(t.baseState&&(t.baseState=!1,Vn=!0),t.memoizedState=o):(dr(o,n)||(o=vi(),Tt.lanes|=o,is|=o,t.baseState=!0),n)}function oy(t,n){var o=ze;ze=o!==0&&4>o?o:4,t(!0);var u=Ku.transition;Ku.transition={};try{t(!1),n()}finally{ze=o,Ku.transition=u}}function td(){return tr().memoizedState}function ay(t,n,o){var u=Di(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},nd(t))rd(n,o);else if(o=Df(t,n,o,u),o!==null){var h=Sn();vr(o,t,u,h),id(o,n,u)}}function ly(t,n,o){var u=Di(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(nd(t))rd(n,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var v=n.lastRenderedState,T=p(v,o);if(h.hasEagerState=!0,h.eagerState=T,dr(T,v)){var R=n.interleaved;R===null?(h.next=h,Uu(n)):(h.next=R.next,R.next=h),n.interleaved=h;return}}catch{}finally{}o=Df(t,n,h,u),o!==null&&(h=Sn(),vr(o,t,u,h),id(o,n,u))}}function nd(t){var n=t.alternate;return t===Tt||n!==null&&n===Tt}function rd(t,n){Fo=nl=!0;var o=t.pending;o===null?n.next=n:(n.next=o.next,o.next=n),t.pending=n}function id(t,n,o){if((o&4194240)!==0){var u=n.lanes;u&=t.pendingLanes,o|=u,n.lanes=o,qr(t,o)}}var sl={readContext:er,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},uy={readContext:er,useCallback:function(t,n){return Vr().memoizedState=[t,n===void 0?null:n],t},useContext:er,useEffect:Kf,useImperativeHandle:function(t,n,o){return o=o!=null?o.concat([t]):null,rl(4194308,4,Yf.bind(null,n,t),o)},useLayoutEffect:function(t,n){return rl(4194308,4,t,n)},useInsertionEffect:function(t,n){return rl(4,2,t,n)},useMemo:function(t,n){var o=Vr();return n=n===void 0?null:n,t=t(),o.memoizedState=[t,n],t},useReducer:function(t,n,o){var u=Vr();return n=o!==void 0?o(n):n,u.memoizedState=u.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},u.queue=t,t=t.dispatch=ay.bind(null,Tt,t),[u.memoizedState,t]},useRef:function(t){var n=Vr();return t={current:t},n.memoizedState=t},useState:qf,useDebugValue:ec,useDeferredValue:function(t){return Vr().memoizedState=t},useTransition:function(){var t=qf(!1),n=t[0];return t=oy.bind(null,t[1]),Vr().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,o){var u=Tt,h=Vr();if(_t){if(o===void 0)throw Error(r(407));o=o()}else{if(o=n(),Ht===null)throw Error(r(349));(rs&30)!==0||Bf(u,n,o)}h.memoizedState=o;var p={value:o,getSnapshot:n};return h.queue=p,Kf(zf.bind(null,u,p,t),[t]),u.flags|=2048,Bo(9,Uf.bind(null,u,p,o,n),void 0,null),o},useId:function(){var t=Vr(),n=Ht.identifierPrefix;if(_t){var o=Zr,u=Jr;o=(u&~(1<<32-je(u)-1)).toString(32)+o,n=":"+n+"R"+o,o=jo++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=sy++,n=":"+n+"r"+o.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},cy={readContext:er,useCallback:Jf,useContext:er,useEffect:Zu,useImperativeHandle:Xf,useInsertionEffect:Qf,useLayoutEffect:Gf,useMemo:Zf,useReducer:Xu,useRef:Hf,useState:function(){return Xu(bo)},useDebugValue:ec,useDeferredValue:function(t){var n=tr();return ed(n,jt.memoizedState,t)},useTransition:function(){var t=Xu(bo)[0],n=tr().memoizedState;return[t,n]},useMutableSource:jf,useSyncExternalStore:bf,useId:td,unstable_isNewReconciler:!1},hy={readContext:er,useCallback:Jf,useContext:er,useEffect:Zu,useImperativeHandle:Xf,useInsertionEffect:Qf,useLayoutEffect:Gf,useMemo:Zf,useReducer:Ju,useRef:Hf,useState:function(){return Ju(bo)},useDebugValue:ec,useDeferredValue:function(t){var n=tr();return jt===null?n.memoizedState=t:ed(n,jt.memoizedState,t)},useTransition:function(){var t=Ju(bo)[0],n=tr().memoizedState;return[t,n]},useMutableSource:jf,useSyncExternalStore:bf,useId:td,unstable_isNewReconciler:!1};function mr(t,n){if(t&&t.defaultProps){n=se({},n),t=t.defaultProps;for(var o in t)n[o]===void 0&&(n[o]=t[o]);return n}return n}function tc(t,n,o,u){n=t.memoizedState,o=o(u,n),o=o==null?n:se({},n,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var ol={isMounted:function(t){return(t=t._reactInternals)?cn(t)===t:!1},enqueueSetState:function(t,n,o){t=t._reactInternals;var u=Sn(),h=Di(t),p=ti(u,h);p.payload=n,o!=null&&(p.callback=o),n=Pi(t,p,h),n!==null&&(vr(n,t,h,u),Ja(n,t,h))},enqueueReplaceState:function(t,n,o){t=t._reactInternals;var u=Sn(),h=Di(t),p=ti(u,h);p.tag=1,p.payload=n,o!=null&&(p.callback=o),n=Pi(t,p,h),n!==null&&(vr(n,t,h,u),Ja(n,t,h))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var o=Sn(),u=Di(t),h=ti(o,u);h.tag=2,n!=null&&(h.callback=n),n=Pi(t,h,u),n!==null&&(vr(n,t,u,o),Ja(n,t,u))}};function sd(t,n,o,u,h,p,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,v):n.prototype&&n.prototype.isPureReactComponent?!Ro(o,u)||!Ro(h,p):!0}function od(t,n,o){var u=!1,h=Ri,p=n.contextType;return typeof p=="object"&&p!==null?p=er(p):(h=xn(n)?Ji:hn.current,u=n.contextTypes,p=(u=u!=null)?js(t,h):Ri),n=new n(o,p),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=ol,t.stateNode=n,n._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),n}function ad(t,n,o,u){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,u),n.state!==t&&ol.enqueueReplaceState(n,n.state,null)}function nc(t,n,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},zu(t);var p=n.contextType;typeof p=="object"&&p!==null?h.context=er(p):(p=xn(n)?Ji:hn.current,h.context=js(t,p)),h.state=t.memoizedState,p=n.getDerivedStateFromProps,typeof p=="function"&&(tc(t,n,p,o),h.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(n=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),n!==h.state&&ol.enqueueReplaceState(h,h.state,null),Za(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Hs(t,n){try{var o="",u=n;do o+=Te(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:n,stack:h,digest:null}}function rc(t,n,o){return{value:t,source:null,stack:o??null,digest:n??null}}function ic(t,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var fy=typeof WeakMap=="function"?WeakMap:Map;function ld(t,n,o){o=ti(-1,o),o.tag=3,o.payload={element:null};var u=n.value;return o.callback=function(){dl||(dl=!0,_c=u),ic(t,n)},o}function ud(t,n,o){o=ti(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=n.value;o.payload=function(){return u(h)},o.callback=function(){ic(t,n)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){ic(t,n),typeof u!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var v=n.stack;this.componentDidCatch(n.value,{componentStack:v!==null?v:""})}),o}function cd(t,n,o){var u=t.pingCache;if(u===null){u=t.pingCache=new fy;var h=new Set;u.set(n,h)}else h=u.get(n),h===void 0&&(h=new Set,u.set(n,h));h.has(o)||(h.add(o),t=Ry.bind(null,t,n,o),n.then(t,t))}function hd(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function fd(t,n,o,u,h){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=ti(-1,1),n.tag=2,Pi(o,n,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var dy=Ve.ReactCurrentOwner,Vn=!1;function Tn(t,n,o,u){n.child=t===null?Nf(n,null,o,u):zs(n,t.child,o,u)}function dd(t,n,o,u,h){o=o.render;var p=n.ref;return Ws(n,h),u=Gu(t,n,o,u,p,h),o=Yu(),t!==null&&!Vn?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~h,ni(t,n,h)):(_t&&o&&Nu(n),n.flags|=1,Tn(t,n,u,h),n.child)}function pd(t,n,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Rc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=p,md(t,n,p,u,h)):(t=_l(o.type,null,u,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(p=t.child,(t.lanes&h)===0){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:Ro,o(v,u)&&t.ref===n.ref)return ni(t,n,h)}return n.flags|=1,t=Oi(p,u),t.ref=n.ref,t.return=n,n.child=t}function md(t,n,o,u,h){if(t!==null){var p=t.memoizedProps;if(Ro(p,u)&&t.ref===n.ref)if(Vn=!1,n.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Vn=!0);else return n.lanes=t.lanes,ni(t,n,h)}return sc(t,n,o,u,h)}function gd(t,n,o){var u=n.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(Qs,$n),$n|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,ct(Qs,$n),$n|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,ct(Qs,$n),$n|=u}else p!==null?(u=p.baseLanes|o,n.memoizedState=null):u=o,ct(Qs,$n),$n|=u;return Tn(t,n,h,o),n.child}function yd(t,n){var o=n.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function sc(t,n,o,u,h){var p=xn(o)?Ji:hn.current;return p=js(n,p),Ws(n,h),o=Gu(t,n,o,u,p,h),u=Yu(),t!==null&&!Vn?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~h,ni(t,n,h)):(_t&&u&&Nu(n),n.flags|=1,Tn(t,n,o,h),n.child)}function vd(t,n,o,u,h){if(xn(o)){var p=!0;Wa(n)}else p=!1;if(Ws(n,h),n.stateNode===null)ll(t,n),od(n,o,u),nc(n,o,u,h),u=!0;else if(t===null){var v=n.stateNode,T=n.memoizedProps;v.props=T;var R=v.context,B=o.contextType;typeof B=="object"&&B!==null?B=er(B):(B=xn(o)?Ji:hn.current,B=js(n,B));var Q=o.getDerivedStateFromProps,J=typeof Q=="function"||typeof v.getSnapshotBeforeUpdate=="function";J||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==u||R!==B)&&ad(n,v,u,B),ki=!1;var K=n.memoizedState;v.state=K,Za(n,u,v,h),R=n.memoizedState,T!==u||K!==R||Pn.current||ki?(typeof Q=="function"&&(tc(n,o,Q,u),R=n.memoizedState),(T=ki||sd(n,o,T,u,K,R,B))?(J||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(n.flags|=4194308)):(typeof v.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=u,n.memoizedState=R),v.props=u,v.state=R,v.context=B,u=T):(typeof v.componentDidMount=="function"&&(n.flags|=4194308),u=!1)}else{v=n.stateNode,Lf(t,n),T=n.memoizedProps,B=n.type===n.elementType?T:mr(n.type,T),v.props=B,J=n.pendingProps,K=v.context,R=o.contextType,typeof R=="object"&&R!==null?R=er(R):(R=xn(o)?Ji:hn.current,R=js(n,R));var ce=o.getDerivedStateFromProps;(Q=typeof ce=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==J||K!==R)&&ad(n,v,u,R),ki=!1,K=n.memoizedState,v.state=K,Za(n,u,v,h);var de=n.memoizedState;T!==J||K!==de||Pn.current||ki?(typeof ce=="function"&&(tc(n,o,ce,u),de=n.memoizedState),(B=ki||sd(n,o,B,u,K,de,R)||!1)?(Q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,de,R),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,de,R)),typeof v.componentDidUpdate=="function"&&(n.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===t.memoizedProps&&K===t.memoizedState||(n.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&K===t.memoizedState||(n.flags|=1024),n.memoizedProps=u,n.memoizedState=de),v.props=u,v.state=de,v.context=R,u=B):(typeof v.componentDidUpdate!="function"||T===t.memoizedProps&&K===t.memoizedState||(n.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&K===t.memoizedState||(n.flags|=1024),u=!1)}return oc(t,n,o,u,p,h)}function oc(t,n,o,u,h,p){yd(t,n);var v=(n.flags&128)!==0;if(!u&&!v)return h&&Sf(n,o,!1),ni(t,n,p);u=n.stateNode,dy.current=n;var T=v&&typeof o.getDerivedStateFromError!="function"?null:u.render();return n.flags|=1,t!==null&&v?(n.child=zs(n,t.child,null,p),n.child=zs(n,null,T,p)):Tn(t,n,T,p),n.memoizedState=u.state,h&&Sf(n,o,!0),n.child}function _d(t){var n=t.stateNode;n.pendingContext?Ef(t,n.pendingContext,n.pendingContext!==n.context):n.context&&Ef(t,n.context,!1),$u(t,n.containerInfo)}function wd(t,n,o,u,h){return Us(),Mu(h),n.flags|=256,Tn(t,n,o,u),n.child}var ac={dehydrated:null,treeContext:null,retryLane:0};function lc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ed(t,n,o){var u=n.pendingProps,h=Et.current,p=!1,v=(n.flags&128)!==0,T;if((T=v)||(T=t!==null&&t.memoizedState===null?!1:(h&2)!==0),T?(p=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),ct(Et,h&1),t===null)return Ou(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(v=u.children,t=u.fallback,p?(u=n.mode,p=n.child,v={mode:"hidden",children:v},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=wl(v,u,0,null),t=ls(t,u,o,null),p.return=n,t.return=n,p.sibling=t,n.child=p,n.child.memoizedState=lc(o),n.memoizedState=ac,t):uc(n,v));if(h=t.memoizedState,h!==null&&(T=h.dehydrated,T!==null))return py(t,n,v,u,T,h,o);if(p){p=u.fallback,v=n.mode,h=t.child,T=h.sibling;var R={mode:"hidden",children:u.children};return(v&1)===0&&n.child!==h?(u=n.child,u.childLanes=0,u.pendingProps=R,n.deletions=null):(u=Oi(h,R),u.subtreeFlags=h.subtreeFlags&14680064),T!==null?p=Oi(T,p):(p=ls(p,v,o,null),p.flags|=2),p.return=n,u.return=n,u.sibling=p,n.child=u,u=p,p=n.child,v=t.child.memoizedState,v=v===null?lc(o):{baseLanes:v.baseLanes|o,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=t.childLanes&~o,n.memoizedState=ac,u}return p=t.child,t=p.sibling,u=Oi(p,{mode:"visible",children:u.children}),(n.mode&1)===0&&(u.lanes=o),u.return=n,u.sibling=null,t!==null&&(o=n.deletions,o===null?(n.deletions=[t],n.flags|=16):o.push(t)),n.child=u,n.memoizedState=null,u}function uc(t,n){return n=wl({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function al(t,n,o,u){return u!==null&&Mu(u),zs(n,t.child,null,o),t=uc(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function py(t,n,o,u,h,p,v){if(o)return n.flags&256?(n.flags&=-257,u=rc(Error(r(422))),al(t,n,v,u)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(p=u.fallback,h=n.mode,u=wl({mode:"visible",children:u.children},h,0,null),p=ls(p,h,v,null),p.flags|=2,u.return=n,p.return=n,u.sibling=p,n.child=u,(n.mode&1)!==0&&zs(n,t.child,null,v),n.child.memoizedState=lc(v),n.memoizedState=ac,p);if((n.mode&1)===0)return al(t,n,v,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var T=u.dgst;return u=T,p=Error(r(419)),u=rc(p,u,void 0),al(t,n,v,u)}if(T=(v&t.childLanes)!==0,Vn||T){if(u=Ht,u!==null){switch(v&-v){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|v))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,ei(t,h),vr(u,t,h,-1))}return Ac(),u=rc(Error(r(421))),al(t,n,v,u)}return h.data==="$?"?(n.flags|=128,n.child=t.child,n=Cy.bind(null,t),h._reactRetry=n,null):(t=p.treeContext,zn=Ii(h.nextSibling),Un=n,_t=!0,pr=null,t!==null&&(Jn[Zn++]=Jr,Jn[Zn++]=Zr,Jn[Zn++]=Zi,Jr=t.id,Zr=t.overflow,Zi=n),n=uc(n,u.children),n.flags|=4096,n)}function Td(t,n,o){t.lanes|=n;var u=t.alternate;u!==null&&(u.lanes|=n),Bu(t.return,n,o)}function cc(t,n,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function Sd(t,n,o){var u=n.pendingProps,h=u.revealOrder,p=u.tail;if(Tn(t,n,u.children,o),u=Et.current,(u&2)!==0)u=u&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Td(t,o,n);else if(t.tag===19)Td(t,o,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(ct(Et,u),(n.mode&1)===0)n.memoizedState=null;else switch(h){case"forwards":for(o=n.child,h=null;o!==null;)t=o.alternate,t!==null&&el(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=n.child,n.child=null):(h=o.sibling,o.sibling=null),cc(n,!1,h,o,p);break;case"backwards":for(o=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&el(t)===null){n.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}cc(n,!0,o,null,p);break;case"together":cc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function ll(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function ni(t,n,o){if(t!==null&&(n.dependencies=t.dependencies),is|=n.lanes,(o&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,o=Oi(t,t.pendingProps),n.child=o,o.return=n;t.sibling!==null;)t=t.sibling,o=o.sibling=Oi(t,t.pendingProps),o.return=n;o.sibling=null}return n.child}function my(t,n,o){switch(n.tag){case 3:_d(n),Us();break;case 5:Ff(n);break;case 1:xn(n.type)&&Wa(n);break;case 4:$u(n,n.stateNode.containerInfo);break;case 10:var u=n.type._context,h=n.memoizedProps.value;ct(Ya,u._currentValue),u._currentValue=h;break;case 13:if(u=n.memoizedState,u!==null)return u.dehydrated!==null?(ct(Et,Et.current&1),n.flags|=128,null):(o&n.child.childLanes)!==0?Ed(t,n,o):(ct(Et,Et.current&1),t=ni(t,n,o),t!==null?t.sibling:null);ct(Et,Et.current&1);break;case 19:if(u=(o&n.childLanes)!==0,(t.flags&128)!==0){if(u)return Sd(t,n,o);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ct(Et,Et.current),u)break;return null;case 22:case 23:return n.lanes=0,gd(t,n,o)}return ni(t,n,o)}var Id,hc,Ad,Rd;Id=function(t,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},hc=function(){},Ad=function(t,n,o,u){var h=t.memoizedProps;if(h!==u){t=n.stateNode,ns(xr.current);var p=null;switch(o){case"input":h=Vt(t,h),u=Vt(t,u),p=[];break;case"select":h=se({},h,{value:void 0}),u=se({},u,{value:void 0}),p=[];break;case"textarea":h=an(t,h),u=an(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Ua)}Hn(o,u);var v;o=null;for(B in h)if(!u.hasOwnProperty(B)&&h.hasOwnProperty(B)&&h[B]!=null)if(B==="style"){var T=h[B];for(v in T)T.hasOwnProperty(v)&&(o||(o={}),o[v]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(a.hasOwnProperty(B)?p||(p=[]):(p=p||[]).push(B,null));for(B in u){var R=u[B];if(T=h?.[B],u.hasOwnProperty(B)&&R!==T&&(R!=null||T!=null))if(B==="style")if(T){for(v in T)!T.hasOwnProperty(v)||R&&R.hasOwnProperty(v)||(o||(o={}),o[v]="");for(v in R)R.hasOwnProperty(v)&&T[v]!==R[v]&&(o||(o={}),o[v]=R[v])}else o||(p||(p=[]),p.push(B,o)),o=R;else B==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,T=T?T.__html:void 0,R!=null&&T!==R&&(p=p||[]).push(B,R)):B==="children"?typeof R!="string"&&typeof R!="number"||(p=p||[]).push(B,""+R):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(a.hasOwnProperty(B)?(R!=null&&B==="onScroll"&&dt("scroll",t),p||T===R||(p=[])):(p=p||[]).push(B,R))}o&&(p=p||[]).push("style",o);var B=p;(n.updateQueue=B)&&(n.flags|=4)}},Rd=function(t,n,o,u){o!==u&&(n.flags|=4)};function Uo(t,n){if(!_t)switch(t.tailMode){case"hidden":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function dn(t){var n=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(n)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,n}function gy(t,n,o){var u=n.pendingProps;switch(Du(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(n),null;case 1:return xn(n.type)&&$a(),dn(n),null;case 3:return u=n.stateNode,qs(),pt(Pn),pt(hn),Hu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Qa(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,pr!==null&&(Tc(pr),pr=null))),hc(t,n),dn(n),null;case 5:Wu(n);var h=ns(Mo.current);if(o=n.type,t!==null&&n.stateNode!=null)Ad(t,n,o,u,h),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!u){if(n.stateNode===null)throw Error(r(166));return dn(n),null}if(t=ns(xr.current),Qa(n)){u=n.stateNode,o=n.type;var p=n.memoizedProps;switch(u[Pr]=n,u[Vo]=p,t=(n.mode&1)!==0,o){case"dialog":dt("cancel",u),dt("close",u);break;case"iframe":case"object":case"embed":dt("load",u);break;case"video":case"audio":for(h=0;h<ko.length;h++)dt(ko[h],u);break;case"source":dt("error",u);break;case"img":case"image":case"link":dt("error",u),dt("load",u);break;case"details":dt("toggle",u);break;case"input":Je(u,p),dt("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},dt("invalid",u);break;case"textarea":or(u,p),dt("invalid",u)}Hn(o,p),h=null;for(var v in p)if(p.hasOwnProperty(v)){var T=p[v];v==="children"?typeof T=="string"?u.textContent!==T&&(p.suppressHydrationWarning!==!0&&Ba(u.textContent,T,t),h=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&Ba(u.textContent,T,t),h=["children",""+T]):a.hasOwnProperty(v)&&T!=null&&v==="onScroll"&&dt("scroll",u)}switch(o){case"input":Ne(u),On(u,p,!0);break;case"textarea":Ne(u),Fr(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Ua)}u=h,n.updateQueue=u,u!==null&&(n.flags|=4)}else{v=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ze(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=v.createElement(o,{is:u.is}):(t=v.createElement(o),o==="select"&&(v=t,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):t=v.createElementNS(t,o),t[Pr]=n,t[Vo]=u,Id(t,n,!1,!1),n.stateNode=t;e:{switch(v=br(o,u),o){case"dialog":dt("cancel",t),dt("close",t),h=u;break;case"iframe":case"object":case"embed":dt("load",t),h=u;break;case"video":case"audio":for(h=0;h<ko.length;h++)dt(ko[h],t);h=u;break;case"source":dt("error",t),h=u;break;case"img":case"image":case"link":dt("error",t),dt("load",t),h=u;break;case"details":dt("toggle",t),h=u;break;case"input":Je(t,u),h=Vt(t,u),dt("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=se({},u,{value:void 0}),dt("invalid",t);break;case"textarea":or(t,u),h=an(t,u),dt("invalid",t);break;default:h=u}Hn(o,h),T=h;for(p in T)if(T.hasOwnProperty(p)){var R=T[p];p==="style"?qn(t,R):p==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&li(t,R)):p==="children"?typeof R=="string"?(o!=="textarea"||R!=="")&&Rn(t,R):typeof R=="number"&&Rn(t,""+R):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?R!=null&&p==="onScroll"&&dt("scroll",t):R!=null&&oe(t,p,R,v))}switch(o){case"input":Ne(t),On(t,u,!1);break;case"textarea":Ne(t),Fr(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Re(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?An(t,!!u.multiple,p,!1):u.defaultValue!=null&&An(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=Ua)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return dn(n),null;case 6:if(t&&n.stateNode!=null)Rd(t,n,t.memoizedProps,u);else{if(typeof u!="string"&&n.stateNode===null)throw Error(r(166));if(o=ns(Mo.current),ns(xr.current),Qa(n)){if(u=n.stateNode,o=n.memoizedProps,u[Pr]=n,(p=u.nodeValue!==o)&&(t=Un,t!==null))switch(t.tag){case 3:Ba(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ba(u.nodeValue,o,(t.mode&1)!==0)}p&&(n.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[Pr]=n,n.stateNode=u}return dn(n),null;case 13:if(pt(Et),u=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_t&&zn!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Pf(),Us(),n.flags|=98560,p=!1;else if(p=Qa(n),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(r(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Pr]=n}else Us(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;dn(n),p=!1}else pr!==null&&(Tc(pr),pr=null),p=!0;if(!p)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=o,n):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(Et.current&1)!==0?bt===0&&(bt=3):Ac())),n.updateQueue!==null&&(n.flags|=4),dn(n),null);case 4:return qs(),hc(t,n),t===null&&Po(n.stateNode.containerInfo),dn(n),null;case 10:return bu(n.type._context),dn(n),null;case 17:return xn(n.type)&&$a(),dn(n),null;case 19:if(pt(Et),p=n.memoizedState,p===null)return dn(n),null;if(u=(n.flags&128)!==0,v=p.rendering,v===null)if(u)Uo(p,!1);else{if(bt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(v=el(t),v!==null){for(n.flags|=128,Uo(p,!1),u=v.updateQueue,u!==null&&(n.updateQueue=u,n.flags|=4),n.subtreeFlags=0,u=o,o=n.child;o!==null;)p=o,t=u,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,t=v.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return ct(Et,Et.current&1|2),n.child}t=t.sibling}p.tail!==null&&it()>Gs&&(n.flags|=128,u=!0,Uo(p,!1),n.lanes=4194304)}else{if(!u)if(t=el(v),t!==null){if(n.flags|=128,u=!0,o=t.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),Uo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!_t)return dn(n),null}else 2*it()-p.renderingStartTime>Gs&&o!==1073741824&&(n.flags|=128,u=!0,Uo(p,!1),n.lanes=4194304);p.isBackwards?(v.sibling=n.child,n.child=v):(o=p.last,o!==null?o.sibling=v:n.child=v,p.last=v)}return p.tail!==null?(n=p.tail,p.rendering=n,p.tail=n.sibling,p.renderingStartTime=it(),n.sibling=null,o=Et.current,ct(Et,u?o&1|2:o&1),n):(dn(n),null);case 22:case 23:return Ic(),u=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(n.flags|=8192),u&&(n.mode&1)!==0?($n&1073741824)!==0&&(dn(n),n.subtreeFlags&6&&(n.flags|=8192)):dn(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function yy(t,n){switch(Du(n),n.tag){case 1:return xn(n.type)&&$a(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return qs(),pt(Pn),pt(hn),Hu(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return Wu(n),null;case 13:if(pt(Et),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Us()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return pt(Et),null;case 4:return qs(),null;case 10:return bu(n.type._context),null;case 22:case 23:return Ic(),null;case 24:return null;default:return null}}var ul=!1,pn=!1,vy=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Ks(t,n){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){Rt(t,n,u)}else o.current=null}function fc(t,n,o){try{o()}catch(u){Rt(t,n,u)}}var Cd=!1;function _y(t,n){if(Iu=Ei,t=sf(),gu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,T=-1,R=-1,B=0,Q=0,J=t,K=null;t:for(;;){for(var ce;J!==o||h!==0&&J.nodeType!==3||(T=v+h),J!==p||u!==0&&J.nodeType!==3||(R=v+u),J.nodeType===3&&(v+=J.nodeValue.length),(ce=J.firstChild)!==null;)K=J,J=ce;for(;;){if(J===t)break t;if(K===o&&++B===h&&(T=v),K===p&&++Q===u&&(R=v),(ce=J.nextSibling)!==null)break;J=K,K=J.parentNode}J=ce}o=T===-1||R===-1?null:{start:T,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(Au={focusedElem:t,selectionRange:o},Ei=!1,fe=n;fe!==null;)if(n=fe,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,fe=t;else for(;fe!==null;){n=fe;try{var de=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var pe=de.memoizedProps,Pt=de.memoizedState,O=n.stateNode,x=O.getSnapshotBeforeUpdate(n.elementType===n.type?pe:mr(n.type,pe),Pt);O.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var F=n.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(te){Rt(n,n.return,te)}if(t=n.sibling,t!==null){t.return=n.return,fe=t;break}fe=n.return}return de=Cd,Cd=!1,de}function zo(t,n,o){var u=n.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&fc(n,o,p)}h=h.next}while(h!==u)}}function cl(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==n)}}function dc(t){var n=t.ref;if(n!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof n=="function"?n(t):n.current=t}}function kd(t){var n=t.alternate;n!==null&&(t.alternate=null,kd(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[Pr],delete n[Vo],delete n[Pu],delete n[ty],delete n[ny])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Pd(t){return t.tag===5||t.tag===3||t.tag===4}function xd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pc(t,n,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(t,n):o.insertBefore(t,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(t,o)):(n=o,n.appendChild(t)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=Ua));else if(u!==4&&(t=t.child,t!==null))for(pc(t,n,o),t=t.sibling;t!==null;)pc(t,n,o),t=t.sibling}function mc(t,n,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?o.insertBefore(t,n):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(mc(t,n,o),t=t.sibling;t!==null;)mc(t,n,o),t=t.sibling}var en=null,gr=!1;function xi(t,n,o){for(o=o.child;o!==null;)Vd(t,n,o),o=o.sibling}function Vd(t,n,o){if(ue&&typeof ue.onCommitFiberUnmount=="function")try{ue.onCommitFiberUnmount(he,o)}catch{}switch(o.tag){case 5:pn||Ks(o,n);case 6:var u=en,h=gr;en=null,xi(t,n,o),en=u,gr=h,en!==null&&(gr?(t=en,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):en.removeChild(o.stateNode));break;case 18:en!==null&&(gr?(t=en,o=o.stateNode,t.nodeType===8?ku(t.parentNode,o):t.nodeType===1&&ku(t,o),hr(t)):ku(en,o.stateNode));break;case 4:u=en,h=gr,en=o.stateNode.containerInfo,gr=!0,xi(t,n,o),en=u,gr=h;break;case 0:case 11:case 14:case 15:if(!pn&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&fc(o,n,v),h=h.next}while(h!==u)}xi(t,n,o);break;case 1:if(!pn&&(Ks(o,n),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){Rt(o,n,T)}xi(t,n,o);break;case 21:xi(t,n,o);break;case 22:o.mode&1?(pn=(u=pn)||o.memoizedState!==null,xi(t,n,o),pn=u):xi(t,n,o);break;default:xi(t,n,o)}}function Nd(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new vy),n.forEach(function(u){var h=ky.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function yr(t,n){var o=n.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,v=n,T=v;e:for(;T!==null;){switch(T.tag){case 5:en=T.stateNode,gr=!1;break e;case 3:en=T.stateNode.containerInfo,gr=!0;break e;case 4:en=T.stateNode.containerInfo,gr=!0;break e}T=T.return}if(en===null)throw Error(r(160));Vd(p,v,h),en=null,gr=!1;var R=h.alternate;R!==null&&(R.return=null),h.return=null}catch(B){Rt(h,n,B)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Dd(n,t),n=n.sibling}function Dd(t,n){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yr(n,t),Nr(t),u&4){try{zo(3,t,t.return),cl(3,t)}catch(pe){Rt(t,t.return,pe)}try{zo(5,t,t.return)}catch(pe){Rt(t,t.return,pe)}}break;case 1:yr(n,t),Nr(t),u&512&&o!==null&&Ks(o,o.return);break;case 5:if(yr(n,t),Nr(t),u&512&&o!==null&&Ks(o,o.return),t.flags&32){var h=t.stateNode;try{Rn(h,"")}catch(pe){Rt(t,t.return,pe)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,v=o!==null?o.memoizedProps:p,T=t.type,R=t.updateQueue;if(t.updateQueue=null,R!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&at(h,p),br(T,v);var B=br(T,p);for(v=0;v<R.length;v+=2){var Q=R[v],J=R[v+1];Q==="style"?qn(h,J):Q==="dangerouslySetInnerHTML"?li(h,J):Q==="children"?Rn(h,J):oe(h,Q,J,B)}switch(T){case"input":Gt(h,p);break;case"textarea":Yt(h,p);break;case"select":var K=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var ce=p.value;ce!=null?An(h,!!p.multiple,ce,!1):K!==!!p.multiple&&(p.defaultValue!=null?An(h,!!p.multiple,p.defaultValue,!0):An(h,!!p.multiple,p.multiple?[]:"",!1))}h[Vo]=p}catch(pe){Rt(t,t.return,pe)}}break;case 6:if(yr(n,t),Nr(t),u&4){if(t.stateNode===null)throw Error(r(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(pe){Rt(t,t.return,pe)}}break;case 3:if(yr(n,t),Nr(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{hr(n.containerInfo)}catch(pe){Rt(t,t.return,pe)}break;case 4:yr(n,t),Nr(t);break;case 13:yr(n,t),Nr(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(vc=it())),u&4&&Nd(t);break;case 22:if(Q=o!==null&&o.memoizedState!==null,t.mode&1?(pn=(B=pn)||Q,yr(n,t),pn=B):yr(n,t),Nr(t),u&8192){if(B=t.memoizedState!==null,(t.stateNode.isHidden=B)&&!Q&&(t.mode&1)!==0)for(fe=t,Q=t.child;Q!==null;){for(J=fe=Q;fe!==null;){switch(K=fe,ce=K.child,K.tag){case 0:case 11:case 14:case 15:zo(4,K,K.return);break;case 1:Ks(K,K.return);var de=K.stateNode;if(typeof de.componentWillUnmount=="function"){u=K,o=K.return;try{n=u,de.props=n.memoizedProps,de.state=n.memoizedState,de.componentWillUnmount()}catch(pe){Rt(u,o,pe)}}break;case 5:Ks(K,K.return);break;case 22:if(K.memoizedState!==null){Md(J);continue}}ce!==null?(ce.return=K,fe=ce):Md(J)}Q=Q.sibling}e:for(Q=null,J=t;;){if(J.tag===5){if(Q===null){Q=J;try{h=J.stateNode,B?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=J.stateNode,R=J.memoizedProps.style,v=R!=null&&R.hasOwnProperty("display")?R.display:null,T.style.display=jr("display",v))}catch(pe){Rt(t,t.return,pe)}}}else if(J.tag===6){if(Q===null)try{J.stateNode.nodeValue=B?"":J.memoizedProps}catch(pe){Rt(t,t.return,pe)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===t)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===t)break e;for(;J.sibling===null;){if(J.return===null||J.return===t)break e;Q===J&&(Q=null),J=J.return}Q===J&&(Q=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:yr(n,t),Nr(t),u&4&&Nd(t);break;case 21:break;default:yr(n,t),Nr(t)}}function Nr(t){var n=t.flags;if(n&2){try{e:{for(var o=t.return;o!==null;){if(Pd(o)){var u=o;break e}o=o.return}throw Error(r(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Rn(h,""),u.flags&=-33);var p=xd(t);mc(t,p,h);break;case 3:case 4:var v=u.stateNode.containerInfo,T=xd(t);pc(t,T,v);break;default:throw Error(r(161))}}catch(R){Rt(t,t.return,R)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function wy(t,n,o){fe=t,Ld(t)}function Ld(t,n,o){for(var u=(t.mode&1)!==0;fe!==null;){var h=fe,p=h.child;if(h.tag===22&&u){var v=h.memoizedState!==null||ul;if(!v){var T=h.alternate,R=T!==null&&T.memoizedState!==null||pn;T=ul;var B=pn;if(ul=v,(pn=R)&&!B)for(fe=h;fe!==null;)v=fe,R=v.child,v.tag===22&&v.memoizedState!==null?Fd(h):R!==null?(R.return=v,fe=R):Fd(h);for(;p!==null;)fe=p,Ld(p),p=p.sibling;fe=h,ul=T,pn=B}Od(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,fe=p):Od(t)}}function Od(t){for(;fe!==null;){var n=fe;if((n.flags&8772)!==0){var o=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:pn||cl(5,n);break;case 1:var u=n.stateNode;if(n.flags&4&&!pn)if(o===null)u.componentDidMount();else{var h=n.elementType===n.type?o.memoizedProps:mr(n.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=n.updateQueue;p!==null&&Mf(n,p,u);break;case 3:var v=n.updateQueue;if(v!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}Mf(n,v,o)}break;case 5:var T=n.stateNode;if(o===null&&n.flags&4){o=T;var R=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&o.focus();break;case"img":R.src&&(o.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var B=n.alternate;if(B!==null){var Q=B.memoizedState;if(Q!==null){var J=Q.dehydrated;J!==null&&hr(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}pn||n.flags&512&&dc(n)}catch(K){Rt(n,n.return,K)}}if(n===t){fe=null;break}if(o=n.sibling,o!==null){o.return=n.return,fe=o;break}fe=n.return}}function Md(t){for(;fe!==null;){var n=fe;if(n===t){fe=null;break}var o=n.sibling;if(o!==null){o.return=n.return,fe=o;break}fe=n.return}}function Fd(t){for(;fe!==null;){var n=fe;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{cl(4,n)}catch(R){Rt(n,o,R)}break;case 1:var u=n.stateNode;if(typeof u.componentDidMount=="function"){var h=n.return;try{u.componentDidMount()}catch(R){Rt(n,h,R)}}var p=n.return;try{dc(n)}catch(R){Rt(n,p,R)}break;case 5:var v=n.return;try{dc(n)}catch(R){Rt(n,v,R)}}}catch(R){Rt(n,n.return,R)}if(n===t){fe=null;break}var T=n.sibling;if(T!==null){T.return=n.return,fe=T;break}fe=n.return}}var Ey=Math.ceil,hl=Ve.ReactCurrentDispatcher,gc=Ve.ReactCurrentOwner,nr=Ve.ReactCurrentBatchConfig,He=0,Ht=null,Ot=null,tn=0,$n=0,Qs=Ai(0),bt=0,$o=null,is=0,fl=0,yc=0,Wo=null,Nn=null,vc=0,Gs=1/0,ri=null,dl=!1,_c=null,Vi=null,pl=!1,Ni=null,ml=0,qo=0,wc=null,gl=-1,yl=0;function Sn(){return(He&6)!==0?it():gl!==-1?gl:gl=it()}function Di(t){return(t.mode&1)===0?1:(He&2)!==0&&tn!==0?tn&-tn:iy.transition!==null?(yl===0&&(yl=vi()),yl):(t=ze,t!==0||(t=window.event,t=t===void 0?16:_o(t.type)),t)}function vr(t,n,o,u){if(50<qo)throw qo=0,wc=null,Error(r(185));Wr(t,o,u),((He&2)===0||t!==Ht)&&(t===Ht&&((He&2)===0&&(fl|=o),bt===4&&Li(t,tn)),Dn(t,u),o===1&&He===0&&(n.mode&1)===0&&(Gs=it()+500,qa&&Ci()))}function Dn(t,n){var o=t.callbackNode;et(t,n);var u=Ct(t,t===Ht?tn:0);if(u===0)o!==null&&gi(o),t.callbackNode=null,t.callbackPriority=0;else if(n=u&-u,t.callbackPriority!==n){if(o!=null&&gi(o),n===1)t.tag===0?ry(bd.bind(null,t)):If(bd.bind(null,t)),Zg(function(){(He&6)===0&&Ci()}),o=null;else{switch(_i(u)){case 1:o=Tr;break;case 4:o=Sr;break;case 16:o=W;break;case 536870912:o=Fe;break;default:o=W}o=Kd(o,jd.bind(null,t))}t.callbackPriority=n,t.callbackNode=o}}function jd(t,n){if(gl=-1,yl=0,(He&6)!==0)throw Error(r(327));var o=t.callbackNode;if(Ys()&&t.callbackNode!==o)return null;var u=Ct(t,t===Ht?tn:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||n)n=vl(t,u);else{n=u;var h=He;He|=2;var p=Ud();(Ht!==t||tn!==n)&&(ri=null,Gs=it()+500,os(t,n));do try{Iy();break}catch(T){Bd(t,T)}while(!0);ju(),hl.current=p,He=h,Ot!==null?n=0:(Ht=null,tn=0,n=bt)}if(n!==0){if(n===2&&(h=kt(t),h!==0&&(u=h,n=Ec(t,h))),n===1)throw o=$o,os(t,0),Li(t,u),Dn(t,it()),o;if(n===6)Li(t,u);else{if(h=t.current.alternate,(u&30)===0&&!Ty(h)&&(n=vl(t,u),n===2&&(p=kt(t),p!==0&&(u=p,n=Ec(t,p))),n===1))throw o=$o,os(t,0),Li(t,u),Dn(t,it()),o;switch(t.finishedWork=h,t.finishedLanes=u,n){case 0:case 1:throw Error(r(345));case 2:as(t,Nn,ri);break;case 3:if(Li(t,u),(u&130023424)===u&&(n=vc+500-it(),10<n)){if(Ct(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Sn(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Cu(as.bind(null,t,Nn,ri),n);break}as(t,Nn,ri);break;case 4:if(Li(t,u),(u&4194240)===u)break;for(n=t.eventTimes,h=-1;0<u;){var v=31-je(u);p=1<<v,v=n[v],v>h&&(h=v),u&=~p}if(u=h,u=it()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Ey(u/1960))-u,10<u){t.timeoutHandle=Cu(as.bind(null,t,Nn,ri),u);break}as(t,Nn,ri);break;case 5:as(t,Nn,ri);break;default:throw Error(r(329))}}}return Dn(t,it()),t.callbackNode===o?jd.bind(null,t):null}function Ec(t,n){var o=Wo;return t.current.memoizedState.isDehydrated&&(os(t,n).flags|=256),t=vl(t,n),t!==2&&(n=Nn,Nn=o,n!==null&&Tc(n)),t}function Tc(t){Nn===null?Nn=t:Nn.push.apply(Nn,t)}function Ty(t){for(var n=t;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!dr(p(),h))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Li(t,n){for(n&=~yc,n&=~fl,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var o=31-je(n),u=1<<o;t[o]=-1,n&=~u}}function bd(t){if((He&6)!==0)throw Error(r(327));Ys();var n=Ct(t,0);if((n&1)===0)return Dn(t,it()),null;var o=vl(t,n);if(t.tag!==0&&o===2){var u=kt(t);u!==0&&(n=u,o=Ec(t,u))}if(o===1)throw o=$o,os(t,0),Li(t,n),Dn(t,it()),o;if(o===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,as(t,Nn,ri),Dn(t,it()),null}function Sc(t,n){var o=He;He|=1;try{return t(n)}finally{He=o,He===0&&(Gs=it()+500,qa&&Ci())}}function ss(t){Ni!==null&&Ni.tag===0&&(He&6)===0&&Ys();var n=He;He|=1;var o=nr.transition,u=ze;try{if(nr.transition=null,ze=1,t)return t()}finally{ze=u,nr.transition=o,He=n,(He&6)===0&&Ci()}}function Ic(){$n=Qs.current,pt(Qs)}function os(t,n){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Jg(o)),Ot!==null)for(o=Ot.return;o!==null;){var u=o;switch(Du(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&$a();break;case 3:qs(),pt(Pn),pt(hn),Hu();break;case 5:Wu(u);break;case 4:qs();break;case 13:pt(Et);break;case 19:pt(Et);break;case 10:bu(u.type._context);break;case 22:case 23:Ic()}o=o.return}if(Ht=t,Ot=t=Oi(t.current,null),tn=$n=n,bt=0,$o=null,yc=fl=is=0,Nn=Wo=null,ts!==null){for(n=0;n<ts.length;n++)if(o=ts[n],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var v=p.next;p.next=h,u.next=v}o.pending=u}ts=null}return t}function Bd(t,n){do{var o=Ot;try{if(ju(),tl.current=sl,nl){for(var u=Tt.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}nl=!1}if(rs=0,qt=jt=Tt=null,Fo=!1,jo=0,gc.current=null,o===null||o.return===null){bt=1,$o=n,Ot=null;break}e:{var p=t,v=o.return,T=o,R=n;if(n=tn,T.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var B=R,Q=T,J=Q.tag;if((Q.mode&1)===0&&(J===0||J===11||J===15)){var K=Q.alternate;K?(Q.updateQueue=K.updateQueue,Q.memoizedState=K.memoizedState,Q.lanes=K.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ce=hd(v);if(ce!==null){ce.flags&=-257,fd(ce,v,T,p,n),ce.mode&1&&cd(p,B,n),n=ce,R=B;var de=n.updateQueue;if(de===null){var pe=new Set;pe.add(R),n.updateQueue=pe}else de.add(R);break e}else{if((n&1)===0){cd(p,B,n),Ac();break e}R=Error(r(426))}}else if(_t&&T.mode&1){var Pt=hd(v);if(Pt!==null){(Pt.flags&65536)===0&&(Pt.flags|=256),fd(Pt,v,T,p,n),Mu(Hs(R,T));break e}}p=R=Hs(R,T),bt!==4&&(bt=2),Wo===null?Wo=[p]:Wo.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,n&=-n,p.lanes|=n;var O=ld(p,R,n);Of(p,O);break e;case 1:T=R;var x=p.type,F=p.stateNode;if((p.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Vi===null||!Vi.has(F)))){p.flags|=65536,n&=-n,p.lanes|=n;var te=ud(p,T,n);Of(p,te);break e}}p=p.return}while(p!==null)}$d(o)}catch(ge){n=ge,Ot===o&&o!==null&&(Ot=o=o.return);continue}break}while(!0)}function Ud(){var t=hl.current;return hl.current=sl,t===null?sl:t}function Ac(){(bt===0||bt===3||bt===2)&&(bt=4),Ht===null||(is&268435455)===0&&(fl&268435455)===0||Li(Ht,tn)}function vl(t,n){var o=He;He|=2;var u=Ud();(Ht!==t||tn!==n)&&(ri=null,os(t,n));do try{Sy();break}catch(h){Bd(t,h)}while(!0);if(ju(),He=o,hl.current=u,Ot!==null)throw Error(r(261));return Ht=null,tn=0,bt}function Sy(){for(;Ot!==null;)zd(Ot)}function Iy(){for(;Ot!==null&&!Hi();)zd(Ot)}function zd(t){var n=Hd(t.alternate,t,$n);t.memoizedProps=t.pendingProps,n===null?$d(t):Ot=n,gc.current=null}function $d(t){var n=t;do{var o=n.alternate;if(t=n.return,(n.flags&32768)===0){if(o=gy(o,n,$n),o!==null){Ot=o;return}}else{if(o=yy(o,n),o!==null){o.flags&=32767,Ot=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bt=6,Ot=null;return}}if(n=n.sibling,n!==null){Ot=n;return}Ot=n=t}while(n!==null);bt===0&&(bt=5)}function as(t,n,o){var u=ze,h=nr.transition;try{nr.transition=null,ze=1,Ay(t,n,o,u)}finally{nr.transition=h,ze=u}return null}function Ay(t,n,o,u){do Ys();while(Ni!==null);if((He&6)!==0)throw Error(r(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(st(t,p),t===Ht&&(Ot=Ht=null,tn=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||pl||(pl=!0,Kd(W,function(){return Ys(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=nr.transition,nr.transition=null;var v=ze;ze=1;var T=He;He|=4,gc.current=null,_y(t,o),Dd(o,t),qg(Au),Ei=!!Iu,Au=Iu=null,t.current=o,wy(o),_s(),He=T,ze=v,nr.transition=p}else t.current=o;if(pl&&(pl=!1,Ni=t,ml=h),p=t.pendingLanes,p===0&&(Vi=null),Se(o.stateNode),Dn(t,it()),n!==null)for(u=t.onRecoverableError,o=0;o<n.length;o++)h=n[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(dl)throw dl=!1,t=_c,_c=null,t;return(ml&1)!==0&&t.tag!==0&&Ys(),p=t.pendingLanes,(p&1)!==0?t===wc?qo++:(qo=0,wc=t):qo=0,Ci(),null}function Ys(){if(Ni!==null){var t=_i(ml),n=nr.transition,o=ze;try{if(nr.transition=null,ze=16>t?16:t,Ni===null)var u=!1;else{if(t=Ni,Ni=null,ml=0,(He&6)!==0)throw Error(r(331));var h=He;for(He|=4,fe=t.current;fe!==null;){var p=fe,v=p.child;if((fe.flags&16)!==0){var T=p.deletions;if(T!==null){for(var R=0;R<T.length;R++){var B=T[R];for(fe=B;fe!==null;){var Q=fe;switch(Q.tag){case 0:case 11:case 15:zo(8,Q,p)}var J=Q.child;if(J!==null)J.return=Q,fe=J;else for(;fe!==null;){Q=fe;var K=Q.sibling,ce=Q.return;if(kd(Q),Q===B){fe=null;break}if(K!==null){K.return=ce,fe=K;break}fe=ce}}}var de=p.alternate;if(de!==null){var pe=de.child;if(pe!==null){de.child=null;do{var Pt=pe.sibling;pe.sibling=null,pe=Pt}while(pe!==null)}}fe=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,fe=v;else e:for(;fe!==null;){if(p=fe,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:zo(9,p,p.return)}var O=p.sibling;if(O!==null){O.return=p.return,fe=O;break e}fe=p.return}}var x=t.current;for(fe=x;fe!==null;){v=fe;var F=v.child;if((v.subtreeFlags&2064)!==0&&F!==null)F.return=v,fe=F;else e:for(v=x;fe!==null;){if(T=fe,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:cl(9,T)}}catch(ge){Rt(T,T.return,ge)}if(T===v){fe=null;break e}var te=T.sibling;if(te!==null){te.return=T.return,fe=te;break e}fe=T.return}}if(He=h,Ci(),ue&&typeof ue.onPostCommitFiberRoot=="function")try{ue.onPostCommitFiberRoot(he,t)}catch{}u=!0}return u}finally{ze=o,nr.transition=n}}return!1}function Wd(t,n,o){n=Hs(o,n),n=ld(t,n,1),t=Pi(t,n,1),n=Sn(),t!==null&&(Wr(t,1,n),Dn(t,n))}function Rt(t,n,o){if(t.tag===3)Wd(t,t,o);else for(;n!==null;){if(n.tag===3){Wd(n,t,o);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Vi===null||!Vi.has(u))){t=Hs(o,t),t=ud(n,t,1),n=Pi(n,t,1),t=Sn(),n!==null&&(Wr(n,1,t),Dn(n,t));break}}n=n.return}}function Ry(t,n,o){var u=t.pingCache;u!==null&&u.delete(n),n=Sn(),t.pingedLanes|=t.suspendedLanes&o,Ht===t&&(tn&o)===o&&(bt===4||bt===3&&(tn&130023424)===tn&&500>it()-vc?os(t,0):yc|=o),Dn(t,n)}function qd(t,n){n===0&&((t.mode&1)===0?n=1:(n=ut,ut<<=1,(ut&130023424)===0&&(ut=4194304)));var o=Sn();t=ei(t,n),t!==null&&(Wr(t,n,o),Dn(t,o))}function Cy(t){var n=t.memoizedState,o=0;n!==null&&(o=n.retryLane),qd(t,o)}function ky(t,n){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(n),qd(t,o)}var Hd;Hd=function(t,n,o){if(t!==null)if(t.memoizedProps!==n.pendingProps||Pn.current)Vn=!0;else{if((t.lanes&o)===0&&(n.flags&128)===0)return Vn=!1,my(t,n,o);Vn=(t.flags&131072)!==0}else Vn=!1,_t&&(n.flags&1048576)!==0&&Af(n,Ka,n.index);switch(n.lanes=0,n.tag){case 2:var u=n.type;ll(t,n),t=n.pendingProps;var h=js(n,hn.current);Ws(n,o),h=Gu(null,n,u,t,h,o);var p=Yu();return n.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,xn(u)?(p=!0,Wa(n)):p=!1,n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,zu(n),h.updater=ol,n.stateNode=h,h._reactInternals=n,nc(n,u,t,o),n=oc(null,n,u,!0,p,o)):(n.tag=0,_t&&p&&Nu(n),Tn(null,n,h,o),n=n.child),n;case 16:u=n.elementType;e:{switch(ll(t,n),t=n.pendingProps,h=u._init,u=h(u._payload),n.type=u,h=n.tag=xy(u),t=mr(u,t),h){case 0:n=sc(null,n,u,t,o);break e;case 1:n=vd(null,n,u,t,o);break e;case 11:n=dd(null,n,u,t,o);break e;case 14:n=pd(null,n,u,mr(u.type,t),o);break e}throw Error(r(306,u,""))}return n;case 0:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:mr(u,h),sc(t,n,u,h,o);case 1:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:mr(u,h),vd(t,n,u,h,o);case 3:e:{if(_d(n),t===null)throw Error(r(387));u=n.pendingProps,p=n.memoizedState,h=p.element,Lf(t,n),Za(n,u,null,o);var v=n.memoizedState;if(u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){h=Hs(Error(r(423)),n),n=wd(t,n,u,o,h);break e}else if(u!==h){h=Hs(Error(r(424)),n),n=wd(t,n,u,o,h);break e}else for(zn=Ii(n.stateNode.containerInfo.firstChild),Un=n,_t=!0,pr=null,o=Nf(n,null,u,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Us(),u===h){n=ni(t,n,o);break e}Tn(t,n,u,o)}n=n.child}return n;case 5:return Ff(n),t===null&&Ou(n),u=n.type,h=n.pendingProps,p=t!==null?t.memoizedProps:null,v=h.children,Ru(u,h)?v=null:p!==null&&Ru(u,p)&&(n.flags|=32),yd(t,n),Tn(t,n,v,o),n.child;case 6:return t===null&&Ou(n),null;case 13:return Ed(t,n,o);case 4:return $u(n,n.stateNode.containerInfo),u=n.pendingProps,t===null?n.child=zs(n,null,u,o):Tn(t,n,u,o),n.child;case 11:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:mr(u,h),dd(t,n,u,h,o);case 7:return Tn(t,n,n.pendingProps,o),n.child;case 8:return Tn(t,n,n.pendingProps.children,o),n.child;case 12:return Tn(t,n,n.pendingProps.children,o),n.child;case 10:e:{if(u=n.type._context,h=n.pendingProps,p=n.memoizedProps,v=h.value,ct(Ya,u._currentValue),u._currentValue=v,p!==null)if(dr(p.value,v)){if(p.children===h.children&&!Pn.current){n=ni(t,n,o);break e}}else for(p=n.child,p!==null&&(p.return=n);p!==null;){var T=p.dependencies;if(T!==null){v=p.child;for(var R=T.firstContext;R!==null;){if(R.context===u){if(p.tag===1){R=ti(-1,o&-o),R.tag=2;var B=p.updateQueue;if(B!==null){B=B.shared;var Q=B.pending;Q===null?R.next=R:(R.next=Q.next,Q.next=R),B.pending=R}}p.lanes|=o,R=p.alternate,R!==null&&(R.lanes|=o),Bu(p.return,o,n),T.lanes|=o;break}R=R.next}}else if(p.tag===10)v=p.type===n.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(r(341));v.lanes|=o,T=v.alternate,T!==null&&(T.lanes|=o),Bu(v,o,n),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===n){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}Tn(t,n,h.children,o),n=n.child}return n;case 9:return h=n.type,u=n.pendingProps.children,Ws(n,o),h=er(h),u=u(h),n.flags|=1,Tn(t,n,u,o),n.child;case 14:return u=n.type,h=mr(u,n.pendingProps),h=mr(u.type,h),pd(t,n,u,h,o);case 15:return md(t,n,n.type,n.pendingProps,o);case 17:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:mr(u,h),ll(t,n),n.tag=1,xn(u)?(t=!0,Wa(n)):t=!1,Ws(n,o),od(n,u,h),nc(n,u,h,o),oc(null,n,u,!0,t,o);case 19:return Sd(t,n,o);case 22:return gd(t,n,o)}throw Error(r(156,n.tag))};function Kd(t,n){return zr(t,n)}function Py(t,n,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(t,n,o,u){return new Py(t,n,o,u)}function Rc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xy(t){if(typeof t=="function")return Rc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D)return 11;if(t===Ye)return 14}return 2}function Oi(t,n){var o=t.alternate;return o===null?(o=rr(t.tag,n,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=n,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,n=t.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function _l(t,n,o,u,h,p){var v=2;if(u=t,typeof t=="function")Rc(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case P:return ls(o.children,h,p,n);case E:v=8,h|=8;break;case A:return t=rr(12,o,n,h|2),t.elementType=A,t.lanes=p,t;case S:return t=rr(13,o,n,h),t.elementType=S,t.lanes=p,t;case rt:return t=rr(19,o,n,h),t.elementType=rt,t.lanes=p,t;case ye:return wl(o,h,p,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C:v=10;break e;case V:v=9;break e;case D:v=11;break e;case Ye:v=14;break e;case It:v=16,u=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return n=rr(v,o,n,h),n.elementType=t,n.type=u,n.lanes=p,n}function ls(t,n,o,u){return t=rr(7,t,u,n),t.lanes=o,t}function wl(t,n,o,u){return t=rr(22,t,u,n),t.elementType=ye,t.lanes=o,t.stateNode={isHidden:!1},t}function Cc(t,n,o){return t=rr(6,t,null,n),t.lanes=o,t}function kc(t,n,o){return n=rr(4,t.children!==null?t.children:[],t.key,n),n.lanes=o,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function Vy(t,n,o,u,h){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$r(0),this.expirationTimes=$r(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$r(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Pc(t,n,o,u,h,p,v,T,R){return t=new Vy(t,n,o,T,R),n===1?(n=1,p===!0&&(n|=8)):n=0,p=rr(3,null,null,n),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},zu(p),t}function Ny(t,n,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Be,key:u==null?null:""+u,children:t,containerInfo:n,implementation:o}}function Qd(t){if(!t)return Ri;t=t._reactInternals;e:{if(cn(t)!==t||t.tag!==1)throw Error(r(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(xn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(t.tag===1){var o=t.type;if(xn(o))return Tf(t,o,n)}return n}function Gd(t,n,o,u,h,p,v,T,R){return t=Pc(o,u,!0,t,h,p,v,T,R),t.context=Qd(null),o=t.current,u=Sn(),h=Di(o),p=ti(u,h),p.callback=n??null,Pi(o,p,h),t.current.lanes=h,Wr(t,h,u),Dn(t,u),t}function El(t,n,o,u){var h=n.current,p=Sn(),v=Di(h);return o=Qd(o),n.context===null?n.context=o:n.pendingContext=o,n=ti(p,v),n.payload={element:t},u=u===void 0?null:u,u!==null&&(n.callback=u),t=Pi(h,n,v),t!==null&&(vr(t,h,v,p),Ja(t,h,v)),v}function Tl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Yd(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<n?o:n}}function xc(t,n){Yd(t,n),(t=t.alternate)&&Yd(t,n)}function Dy(){return null}var Xd=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vc(t){this._internalRoot=t}Sl.prototype.render=Vc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));El(t,n,null,null)},Sl.prototype.unmount=Vc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;ss(function(){El(null,t,null,null)}),n[Yr]=null}};function Sl(t){this._internalRoot=t}Sl.prototype.unstable_scheduleHydration=function(t){if(t){var n=Sa();t={blockedOn:null,target:t,priority:n};for(var o=0;o<Ar.length&&n!==0&&n<Ar[o].priority;o++);Ar.splice(o,0,t),o===0&&Ra(t)}};function Nc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Il(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jd(){}function Ly(t,n,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var B=Tl(v);p.call(B)}}var v=Gd(n,u,t,0,null,!1,!1,"",Jd);return t._reactRootContainer=v,t[Yr]=v.current,Po(t.nodeType===8?t.parentNode:t),ss(),v}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var T=u;u=function(){var B=Tl(R);T.call(B)}}var R=Pc(t,0,!1,null,null,!1,!1,"",Jd);return t._reactRootContainer=R,t[Yr]=R.current,Po(t.nodeType===8?t.parentNode:t),ss(function(){El(n,R,o,u)}),R}function Al(t,n,o,u,h){var p=o._reactRootContainer;if(p){var v=p;if(typeof h=="function"){var T=h;h=function(){var R=Tl(v);T.call(R)}}El(n,v,t,h)}else v=Ly(o,n,t,h,u);return Tl(v)}Ea=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var o=ft(n.pendingLanes);o!==0&&(qr(n,o|1),Dn(n,it()),(He&6)===0&&(Gs=it()+500,Ci()))}break;case 13:ss(function(){var u=ei(t,1);if(u!==null){var h=Sn();vr(u,t,1,h)}}),xc(t,1)}},ws=function(t){if(t.tag===13){var n=ei(t,134217728);if(n!==null){var o=Sn();vr(n,t,134217728,o)}xc(t,134217728)}},Ta=function(t){if(t.tag===13){var n=Di(t),o=ei(t,n);if(o!==null){var u=Sn();vr(o,t,n,u)}xc(t,n)}},Sa=function(){return ze},Ia=function(t,n){var o=ze;try{return ze=t,n()}finally{ze=o}},Fn=function(t,n,o){switch(n){case"input":if(Gt(t,o),n=o.name,o.type==="radio"&&n!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var u=o[n];if(u!==t&&u.form===t.form){var h=za(u);if(!h)throw Error(r(90));q(u),Gt(u,h)}}}break;case"textarea":Yt(t,o);break;case"select":n=o.value,n!=null&&An(t,!!o.multiple,n,!1)}},Kn=Sc,ys=ss;var Oy={usingClientEntryPoint:!1,Events:[No,Ms,za,ln,fi,Sc]},Ho={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},My={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ve.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xe(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||Dy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{he=Rl.inject(My),ue=Rl}catch{}}return Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oy,Ln.createPortal=function(t,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nc(n))throw Error(r(200));return Ny(t,n,null,o)},Ln.createRoot=function(t,n){if(!Nc(t))throw Error(r(299));var o=!1,u="",h=Xd;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),n=Pc(t,1,!1,null,null,o,!1,u,h),t[Yr]=n.current,Po(t.nodeType===8?t.parentNode:t),new Vc(n)},Ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=Xe(n),t=t===null?null:t.stateNode,t},Ln.flushSync=function(t){return ss(t)},Ln.hydrate=function(t,n,o){if(!Il(n))throw Error(r(200));return Al(null,t,n,!0,o)},Ln.hydrateRoot=function(t,n,o){if(!Nc(t))throw Error(r(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",v=Xd;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),n=Gd(n,null,t,1,o??null,h,!1,p,v),t[Yr]=n.current,Po(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,h]:n.mutableSourceEagerHydrationData.push(o,h);return new Sl(n)},Ln.render=function(t,n,o){if(!Il(n))throw Error(r(200));return Al(null,t,n,!1,o)},Ln.unmountComponentAtNode=function(t){if(!Il(t))throw Error(r(40));return t._reactRootContainer?(ss(function(){Al(null,null,t,!1,function(){t._reactRootContainer=null,t[Yr]=null})}),!0):!1},Ln.unstable_batchedUpdates=Sc,Ln.unstable_renderSubtreeIntoContainer=function(t,n,o,u){if(!Il(o))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return Al(t,n,o,!1,u)},Ln.version="18.3.1-next-f1338f8080-20240426",Ln}var op;function qy(){if(op)return Oc.exports;op=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Oc.exports=Wy(),Oc.exports}var ap;function Hy(){if(ap)return Cl;ap=1;var i=qy();return Cl.createRoot=i.createRoot,Cl.hydrateRoot=i.hydrateRoot,Cl}var Ky=Hy();const Qy=rm(Ky),Gy=({onConsent:i,onDecline:e})=>M.jsxs("div",{className:"consent-container",children:[M.jsx("h1",{children:M.jsx("b",{children:M.jsx("u",{children:"Welcome"})})}),M.jsx("h2",{children:"but first, we need your consent to proceed..."}),M.jsx("hr",{}),M.jsxs("div",{className:"legal well",children:[M.jsx("p",{children:'We would like to invite you to take part in the following study named "Swipe and Type Study"'}),M.jsxs("p",{children:["This will take approximately 50 minutes, and you will be compensated $20 upon completion.",M.jsx("br",{}),"Please understand that we ",M.jsx("em",{children:"reserve the right to not compensate entries"})," that fail to follow instructions."]}),M.jsx("div",{className:"consent-form",children:M.jsx("iframe",{frameBorder:"1",src:"https://drive.google.com/file/d/1_jkO8vZMrpOrZMgEhpZuFgGcBjGE72Yg/preview",title:"Consent Form"})})]}),M.jsx("h4",{children:'If you agree and consent to these terms, please click "I Agree" to continue.'}),M.jsxs("div",{className:"button-container",children:[M.jsx("button",{className:"btn btn-danger",onClick:e,children:"I do NOT consent"}),M.jsx("button",{className:"btn btn-primary",onClick:i,children:"I Agree"})]})]});function Yy({onSubmit:i}){const[e,r]=Y.useState({workerId:"",name:"",age:"",gender:"",handedness:"",mouseDpi:"",repeat:"",ethnicity:"",race:""}),s=c=>{const{name:f,value:m}=c.target;r(y=>({...y,[f]:m}))},a=async c=>{c.preventDefault();try{i(e)}catch(f){console.error("Error handling form submission:",f)}};return M.jsxs("div",{className:"survey-container",children:[M.jsx("h1",{children:"Participant Information"}),M.jsxs("form",{onSubmit:a,children:[M.jsxs("div",{children:[M.jsx("label",{children:"Worker ID: "}),M.jsx("input",{type:"text",required:!0,name:"workerId",value:e.workerId,onChange:s})]}),M.jsxs("div",{children:[M.jsx("label",{children:"Name: "}),M.jsx("input",{type:"text",required:!0,name:"name",value:e.name,onChange:s})]}),M.jsxs("div",{children:[M.jsx("label",{children:"Age: "}),M.jsx("input",{type:"number",required:!0,name:"age",value:e.age,onChange:s})]}),M.jsxs("div",{children:[M.jsx("label",{children:"Gender: "}),M.jsxs("select",{required:!0,name:"gender",value:e.gender,onChange:s,children:[M.jsx("option",{value:"",children:"Select an option"}),M.jsx("option",{value:"male",children:"Male"}),M.jsx("option",{value:"female",children:"Female"}),M.jsx("option",{value:"other",children:"Other"})]})]}),M.jsxs("div",{children:[M.jsx("label",{children:"Handedness: "}),M.jsxs("select",{required:!0,name:"handedness",value:e.handedness,onChange:s,children:[M.jsx("option",{value:"",children:"Select an option"}),M.jsx("option",{value:"right",children:"Right Handed"}),M.jsx("option",{value:"left",children:"Left Handed"})]})]}),M.jsxs("div",{children:[M.jsx("label",{children:"Mouse DPI (optional): "}),M.jsx("input",{type:"number",name:"mouseDpi",value:e.mouseDpi,onChange:s,placeholder:"e.g., 800, 1200, 1600"})]}),M.jsxs("div",{children:[M.jsx("label",{children:"Have you done our experiments before? "}),M.jsxs("select",{required:!0,name:"repeat",value:e.repeat,onChange:s,children:[M.jsx("option",{value:"",children:"Select an option"}),M.jsx("option",{value:"yes",children:"Yes"}),M.jsx("option",{value:"no",children:"No"}),M.jsx("option",{value:"idk",children:"I don't remember"})]})]}),M.jsx("h2",{children:"Optional Information"}),M.jsxs("div",{children:[M.jsx("label",{children:"Ethnicity: "}),M.jsxs("select",{name:"ethnicity",value:e.ethnicity,onChange:s,children:[M.jsx("option",{value:"",children:"Select an option"}),M.jsx("option",{value:"hispanic",children:"Hispanic/Latinx"}),M.jsx("option",{value:"other",children:"Other"})]})]}),M.jsxs("div",{children:[M.jsx("label",{children:"Race: "}),M.jsxs("select",{name:"race",value:e.race,onChange:s,children:[M.jsx("option",{value:"",children:"Select an option"}),M.jsx("option",{value:"white",children:"White"}),M.jsx("option",{value:"black",children:"Black"}),M.jsx("option",{value:"asian",children:"Asian"}),M.jsx("option",{value:"native",children:"Native American"}),M.jsx("option",{value:"other",children:"Other"})]})]}),M.jsx("button",{type:"submit",className:"submit-button",children:"Submit"})]})]})}const Xy=({onStart:i,onPractice:e,currentPage:r=0,setCurrentPage:s})=>{const[a,c]=Y.useState(0),f=r!==void 0?r:a,m=s||c,y=[{title:"Welcome to the Swipe-and-Type Study!",content:M.jsxs("div",{className:"instructions-content",children:[M.jsx("h2",{children:"Game Overview "}),M.jsx("p",{children:"In this game you will help a character move forward by taking alternating left and right steps. To make a step you will swipe your cursor left and right between two bars on the sides of the screen. Occasionally you will be given an opportunity to collect a reward by typing a short key sequence."})]})},{title:"Swiping to Move Forward",content:M.jsxs("div",{className:"instructions-content",children:[M.jsx("h2",{children:"Help the explorer take steps to move forward"}),M.jsx("p",{children:"Imagine you are guiding an explorer walking on a road. Each time the explorer takes a left step and a right step, they move one step forward. To make a left step, swipe your cursor to the left bar; to make a right step, swipe to the right bar. Make sure to alternate these swipes makes the explorer advance."}),M.jsx("h3",{children:"How your swipes map to steps"}),M.jsxs("ul",{children:[M.jsxs("li",{children:["Swipe to the ",M.jsx("strong",{children:"left bar"})," to take a left step."]}),M.jsxs("li",{children:["Swipe to the ",M.jsx("strong",{children:"right bar"})," to take a right step."]}),M.jsx("li",{children:"Left then right (or right then left) counts as forward movement."})]}),M.jsx("h3",{children:"Remember"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Keep moving back and forth at a steady pace; do not stop or stay on one side for too long."}),M.jsxs("li",{children:["If you slow down too much, a ",M.jsx("strong",{children:"Move Faster!"})," warning will appear."]}),M.jsx("li",{children:"You have to swipe all the way to the bar to register a step; the bar will disappear once reached."})]}),M.jsx("div",{className:"screenshot-placeholder",role:"img","aria-label":"Movement video",children:M.jsxs("video",{className:"instruction-screenshot",controls:!0,width:"100%",children:[M.jsx("source",{src:"/videos/movement-demo.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})})]})},{title:"Opprtunities to Collect Rewards",content:M.jsxs("div",{className:"instructions-content",children:[M.jsx("h2",{children:"When Rewards Appear"}),M.jsx("p",{children:"Once you have started moving, after a delay, a small cue and a countdown will tell you a reward is coming. You will be cued regarding the value of the reward once it's imminent. When the reward is ready to be collected, a short key sequence will be shown."}),M.jsx("h3",{children:"How to collect a reward"}),M.jsxs("ol",{children:[M.jsxs("li",{children:["Watch the screen for the key sequence (letters will appear like: ",M.jsx("strong",{children:"A S D F"}),")."]}),M.jsxs("li",{children:["Type the keys in the exact order shown, using the keys ",M.jsx("strong",{children:"A, S, D, F"}),"."]}),M.jsx("li",{children:"If you complete the full sequence correctly, you receive the reward (points)"})]}),M.jsx("p",{children:"The reward counts toward your score. Practice keeping a steady movement so you can be ready when a reward appears."}),M.jsx("div",{className:"screenshot-placeholder",role:"img","aria-label":"Reward video",children:M.jsxs("video",{className:"instruction-screenshot",controls:!0,width:"100%",children:[M.jsx("source",{src:"/videos/reward-demo.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})})]})},{title:"Ready to Begin?",content:M.jsxs("div",{className:"instructions-content",children:[M.jsx("h2",{children:"In summary..."}),M.jsx("p",{children:"Swipe left and right between the bars to take alternating steps and move the explorer forward. When a reward appears, type the displayed key sequence exactly to collect it."}),M.jsxs("div",{className:"final-reminder",children:[M.jsx("h3",{children:"Quick Checklist"}),M.jsxs("ol",{children:[M.jsx("li",{children:"Keep swiping between the left and right bars at a steady pace."}),M.jsx("li",{children:"When a reward cue appears, type the shown key sequence (A, S, D, F) in order."}),M.jsx("li",{children:"Complete the practice round if available to get comfortable with movement and typing."})]})]})]})}],w=()=>{f<y.length-1&&m(f+1)},I=()=>{f>0&&m(f-1)},k=f===y.length-1,j=f===0;return M.jsx("div",{className:"instructions-container",children:M.jsxs("div",{className:"instructions",children:[M.jsx("h1",{children:y[f].title}),M.jsxs("div",{className:"page-indicator",children:["Page ",f+1," of ",y.length]}),y[f].content,M.jsxs("div",{className:"navigation-container",children:[!k&&M.jsxs("div",{className:"page-navigation",children:[M.jsx("button",{onClick:I,className:"nav-button prev-button",disabled:j,children:" Previous"}),M.jsx("button",{onClick:w,className:"nav-button next-button",children:"Next "})]}),k&&M.jsxs("div",{className:"button-container",children:[M.jsx("button",{onClick:I,className:"nav-button prev-button",children:" Previous"}),M.jsx("button",{onClick:e,className:"practice-button",children:"Practice"}),M.jsx("button",{onClick:i,className:"start-button",children:"Start Game"})]})]})]})})};var lp={};const im=function(i){const e=[];let r=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},Jy=function(i){const e=[];let r=0,s=0;for(;r<i.length;){const a=i[r++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[r++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[r++],f=i[r++],m=i[r++],y=((a&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=i[r++],f=i[r++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},sm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],f=a+1<i.length,m=f?i[a+1]:0,y=a+2<i.length,w=y?i[a+2]:0,I=c>>2,k=(c&3)<<4|m>>4;let j=(m&15)<<2|w>>6,$=w&63;y||($=64,f||(j=64)),s.push(r[I],r[k],r[j],r[$])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(im(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Jy(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=r[i.charAt(a++)],m=a<i.length?r[i.charAt(a)]:0;++a;const w=a<i.length?r[i.charAt(a)]:64;++a;const k=a<i.length?r[i.charAt(a)]:64;if(++a,c==null||m==null||w==null||k==null)throw new Zy;const j=c<<2|m>>4;if(s.push(j),w!==64){const $=m<<4&240|w>>2;if(s.push($),k!==64){const Z=w<<6&192|k;s.push(Z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Zy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ev=function(i){const e=im(i);return sm.encodeByteArray(e,!0)},Bl=function(i){return ev(i).replace(/\./g,"")},tv=function(i){try{return sm.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const rv=()=>nv().__FIREBASE_DEFAULTS__,iv=()=>{if(typeof process>"u"||typeof lp>"u")return;const i=lp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},sv=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&tv(i[1]);return e&&JSON.parse(e)},gh=()=>{try{return rv()||iv()||sv()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},ov=i=>{var e,r;return(r=(e=gh())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[i]},av=i=>{const e=ov(i);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),s]:[e.substring(0,r),s]},om=()=>{var i;return(i=gh())===null||i===void 0?void 0:i.config};class lv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,s)=>{r?this.reject(r):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,s))}}}function uv(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Bl(JSON.stringify(r)),Bl(JSON.stringify(f)),""].join(".")}function cv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hv(){var i;const e=(i=gh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fv(){return!hv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dv(){try{return typeof indexedDB=="object"}catch{return!1}}function pv(){return new Promise((i,e)=>{try{let r=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(r){e(r)}})}const mv="FirebaseError";class co extends Error{constructor(e,r,s){super(r),this.code=e,this.customData=s,this.name=mv,Object.setPrototypeOf(this,co.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,am.prototype.create)}}class am{constructor(e,r,s){this.service=e,this.serviceName=r,this.errors=s}create(e,...r){const s=r[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?gv(c,s):"Error",m=`${this.serviceName}: ${f} (${a}).`;return new co(a,m,s)}}function gv(i,e){return i.replace(yv,(r,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const yv=/\{\$([^}]+)}/g;function Kc(i,e){if(i===e)return!0;const r=Object.keys(i),s=Object.keys(e);for(const a of r){if(!s.includes(a))return!1;const c=i[a],f=e[a];if(up(c)&&up(f)){if(!Kc(c,f))return!1}else if(c!==f)return!1}for(const a of s)if(!r.includes(a))return!1;return!0}function up(i){return i!==null&&typeof i=="object"}function ra(i){return i&&i._delegate?i._delegate:i}class ia{constructor(e,r,s){this.name=e,this.instanceFactory=r,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const us="[DEFAULT]";class vv{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const s=new lv;if(this.instancesDeferred.set(r,s),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const s=this.normalizeInstanceIdentifier(e?.identifier),a=(r=e?.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wv(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[r,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:r});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&f.resolve(a)}return a}onInit(e,r){var s;const a=this.normalizeInstanceIdentifier(r),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const f=this.instances.get(a);return f&&e(f,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,r){const s=this.onInitCallbacks.get(r);if(s)for(const a of s)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:_v(e),options:r}),this.instances.set(e,s),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _v(i){return i===us?void 0:i}function wv(i){return i.instantiationMode==="EAGER"}class Ev{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new vv(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}var Ke;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ke||(Ke={}));const Tv={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},Sv=Ke.INFO,Iv={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},Av=(i,e,...r)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=Iv[e];if(a)console[a](`[${s}]  ${i.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lm{constructor(e){this.name=e,this._logLevel=Sv,this._logHandler=Av,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const Rv=(i,e)=>e.some(r=>i instanceof r);let cp,hp;function Cv(){return cp||(cp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kv(){return hp||(hp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const um=new WeakMap,Qc=new WeakMap,cm=new WeakMap,jc=new WeakMap,yh=new WeakMap;function Pv(i){const e=new Promise((r,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{r(ji(i.result)),a()},f=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(r=>{r instanceof IDBCursor&&um.set(r,i)}).catch(()=>{}),yh.set(e,i),e}function xv(i){if(Qc.has(i))return;const e=new Promise((r,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{r(),a()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});Qc.set(i,e)}let Gc={get(i,e,r){if(i instanceof IDBTransaction){if(e==="done")return Qc.get(i);if(e==="objectStoreNames")return i.objectStoreNames||cm.get(i);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ji(i[e])},set(i,e,r){return i[e]=r,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Vv(i){Gc=i(Gc)}function Nv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const s=i.call(bc(this),e,...r);return cm.set(s,e.sort?e.sort():[e]),ji(s)}:kv().includes(i)?function(...e){return i.apply(bc(this),e),ji(um.get(this))}:function(...e){return ji(i.apply(bc(this),e))}}function Dv(i){return typeof i=="function"?Nv(i):(i instanceof IDBTransaction&&xv(i),Rv(i,Cv())?new Proxy(i,Gc):i)}function ji(i){if(i instanceof IDBRequest)return Pv(i);if(jc.has(i))return jc.get(i);const e=Dv(i);return e!==i&&(jc.set(i,e),yh.set(e,i)),e}const bc=i=>yh.get(i);function Lv(i,e,{blocked:r,upgrade:s,blocking:a,terminated:c}={}){const f=indexedDB.open(i,e),m=ji(f);return s&&f.addEventListener("upgradeneeded",y=>{s(ji(f.result),y.oldVersion,y.newVersion,ji(f.transaction),y)}),r&&f.addEventListener("blocked",y=>r(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",w=>a(w.oldVersion,w.newVersion,w))}).catch(()=>{}),m}const Ov=["get","getKey","getAll","getAllKeys","count"],Mv=["put","add","delete","clear"],Bc=new Map;function fp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Bc.get(e))return Bc.get(e);const r=e.replace(/FromIndex$/,""),s=e!==r,a=Mv.includes(r);if(!(r in(s?IDBIndex:IDBObjectStore).prototype)||!(a||Ov.includes(r)))return;const c=async function(f,...m){const y=this.transaction(f,a?"readwrite":"readonly");let w=y.store;return s&&(w=w.index(m.shift())),(await Promise.all([w[r](...m),a&&y.done]))[0]};return Bc.set(e,c),c}Vv(i=>({...i,get:(e,r,s)=>fp(e,r)||i.get(e,r,s),has:(e,r)=>!!fp(e,r)||i.has(e,r)}));class Fv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(jv(r)){const s=r.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(r=>r).join(" ")}}function jv(i){const e=i.getComponent();return e?.type==="VERSION"}const Yc="@firebase/app",dp="0.10.13";const si=new lm("@firebase/app"),bv="@firebase/app-compat",Bv="@firebase/analytics-compat",Uv="@firebase/analytics",zv="@firebase/app-check-compat",$v="@firebase/app-check",Wv="@firebase/auth",qv="@firebase/auth-compat",Hv="@firebase/database",Kv="@firebase/data-connect",Qv="@firebase/database-compat",Gv="@firebase/functions",Yv="@firebase/functions-compat",Xv="@firebase/installations",Jv="@firebase/installations-compat",Zv="@firebase/messaging",e_="@firebase/messaging-compat",t_="@firebase/performance",n_="@firebase/performance-compat",r_="@firebase/remote-config",i_="@firebase/remote-config-compat",s_="@firebase/storage",o_="@firebase/storage-compat",a_="@firebase/firestore",l_="@firebase/vertexai-preview",u_="@firebase/firestore-compat",c_="firebase",h_="10.14.1";const Xc="[DEFAULT]",f_={[Yc]:"fire-core",[bv]:"fire-core-compat",[Uv]:"fire-analytics",[Bv]:"fire-analytics-compat",[$v]:"fire-app-check",[zv]:"fire-app-check-compat",[Wv]:"fire-auth",[qv]:"fire-auth-compat",[Hv]:"fire-rtdb",[Kv]:"fire-data-connect",[Qv]:"fire-rtdb-compat",[Gv]:"fire-fn",[Yv]:"fire-fn-compat",[Xv]:"fire-iid",[Jv]:"fire-iid-compat",[Zv]:"fire-fcm",[e_]:"fire-fcm-compat",[t_]:"fire-perf",[n_]:"fire-perf-compat",[r_]:"fire-rc",[i_]:"fire-rc-compat",[s_]:"fire-gcs",[o_]:"fire-gcs-compat",[a_]:"fire-fst",[u_]:"fire-fst-compat",[l_]:"fire-vertex","fire-js":"fire-js",[c_]:"fire-js-all"};const Ul=new Map,d_=new Map,Jc=new Map;function pp(i,e){try{i.container.addComponent(e)}catch(r){si.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,r)}}function zl(i){const e=i.name;if(Jc.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;Jc.set(e,i);for(const r of Ul.values())pp(r,i);for(const r of d_.values())pp(r,i);return!0}function p_(i,e){const r=i.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),i.container.getProvider(e)}const m_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new am("app","Firebase",m_);class g_{constructor(e,r,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}const y_=h_;function hm(i,e={}){let r=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Xc,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw bi.create("bad-app-name",{appName:String(a)});if(r||(r=om()),!r)throw bi.create("no-options");const c=Ul.get(a);if(c){if(Kc(r,c.options)&&Kc(s,c.config))return c;throw bi.create("duplicate-app",{appName:a})}const f=new Ev(a);for(const y of Jc.values())f.addComponent(y);const m=new g_(r,s,f);return Ul.set(a,m),m}function v_(i=Xc){const e=Ul.get(i);if(!e&&i===Xc&&om())return hm();if(!e)throw bi.create("no-app",{appName:i});return e}function to(i,e,r){var s;let a=(s=f_[i])!==null&&s!==void 0?s:i;r&&(a+=`-${r}`);const c=a.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(m.join(" "));return}zl(new ia(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const __="firebase-heartbeat-database",w_=1,sa="firebase-heartbeat-store";let Uc=null;function fm(){return Uc||(Uc=Lv(__,w_,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(sa)}catch(r){console.warn(r)}}}}).catch(i=>{throw bi.create("idb-open",{originalErrorMessage:i.message})})),Uc}async function E_(i){try{const r=(await fm()).transaction(sa),s=await r.objectStore(sa).get(dm(i));return await r.done,s}catch(e){if(e instanceof co)si.warn(e.message);else{const r=bi.create("idb-get",{originalErrorMessage:e?.message});si.warn(r.message)}}}async function mp(i,e){try{const s=(await fm()).transaction(sa,"readwrite");await s.objectStore(sa).put(e,dm(i)),await s.done}catch(r){if(r instanceof co)si.warn(r.message);else{const s=bi.create("idb-set",{originalErrorMessage:r?.message});si.warn(s.message)}}}function dm(i){return`${i.name}!${i.options.appId}`}const T_=1024,S_=720*60*60*1e3;class I_{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new R_(r),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=gp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const m=new Date(f.date).valueOf();return Date.now()-m<=S_}),this._storage.overwrite(this._heartbeatsCache))}catch(s){si.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=gp(),{heartbeatsToSend:s,unsentEntries:a}=A_(this._heartbeatsCache.heartbeats),c=Bl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(r){return si.warn(r),""}}}function gp(){return new Date().toISOString().substring(0,10)}function A_(i,e=T_){const r=[];let s=i.slice();for(const a of i){const c=r.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),yp(r)>e){c.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),yp(r)>e){r.pop();break}s=s.slice(1)}return{heartbeatsToSend:r,unsentEntries:s}}class R_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dv()?pv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await E_(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return mp(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return mp(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function yp(i){return Bl(JSON.stringify({version:2,heartbeats:i})).length}function C_(i){zl(new ia("platform-logger",e=>new Fv(e),"PRIVATE")),zl(new ia("heartbeat",e=>new I_(e),"PRIVATE")),to(Yc,dp,i),to(Yc,dp,"esm2017"),to("fire-js","")}C_("");var k_="firebase",P_="10.14.1";to(k_,P_,"app");var vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var hs,pm;(function(){var i;function e(P,E){function A(){}A.prototype=E.prototype,P.D=E.prototype,P.prototype=new A,P.prototype.constructor=P,P.C=function(C,V,D){for(var S=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)S[rt-2]=arguments[rt];return E.prototype[V].apply(C,S)}}function r(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,r),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(P,E,A){A||(A=0);var C=Array(16);if(typeof E=="string")for(var V=0;16>V;++V)C[V]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(V=0;16>V;++V)C[V]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=P.g[0],A=P.g[1],V=P.g[2];var D=P.g[3],S=E+(D^A&(V^D))+C[0]+3614090360&4294967295;E=A+(S<<7&4294967295|S>>>25),S=D+(V^E&(A^V))+C[1]+3905402710&4294967295,D=E+(S<<12&4294967295|S>>>20),S=V+(A^D&(E^A))+C[2]+606105819&4294967295,V=D+(S<<17&4294967295|S>>>15),S=A+(E^V&(D^E))+C[3]+3250441966&4294967295,A=V+(S<<22&4294967295|S>>>10),S=E+(D^A&(V^D))+C[4]+4118548399&4294967295,E=A+(S<<7&4294967295|S>>>25),S=D+(V^E&(A^V))+C[5]+1200080426&4294967295,D=E+(S<<12&4294967295|S>>>20),S=V+(A^D&(E^A))+C[6]+2821735955&4294967295,V=D+(S<<17&4294967295|S>>>15),S=A+(E^V&(D^E))+C[7]+4249261313&4294967295,A=V+(S<<22&4294967295|S>>>10),S=E+(D^A&(V^D))+C[8]+1770035416&4294967295,E=A+(S<<7&4294967295|S>>>25),S=D+(V^E&(A^V))+C[9]+2336552879&4294967295,D=E+(S<<12&4294967295|S>>>20),S=V+(A^D&(E^A))+C[10]+4294925233&4294967295,V=D+(S<<17&4294967295|S>>>15),S=A+(E^V&(D^E))+C[11]+2304563134&4294967295,A=V+(S<<22&4294967295|S>>>10),S=E+(D^A&(V^D))+C[12]+1804603682&4294967295,E=A+(S<<7&4294967295|S>>>25),S=D+(V^E&(A^V))+C[13]+4254626195&4294967295,D=E+(S<<12&4294967295|S>>>20),S=V+(A^D&(E^A))+C[14]+2792965006&4294967295,V=D+(S<<17&4294967295|S>>>15),S=A+(E^V&(D^E))+C[15]+1236535329&4294967295,A=V+(S<<22&4294967295|S>>>10),S=E+(V^D&(A^V))+C[1]+4129170786&4294967295,E=A+(S<<5&4294967295|S>>>27),S=D+(A^V&(E^A))+C[6]+3225465664&4294967295,D=E+(S<<9&4294967295|S>>>23),S=V+(E^A&(D^E))+C[11]+643717713&4294967295,V=D+(S<<14&4294967295|S>>>18),S=A+(D^E&(V^D))+C[0]+3921069994&4294967295,A=V+(S<<20&4294967295|S>>>12),S=E+(V^D&(A^V))+C[5]+3593408605&4294967295,E=A+(S<<5&4294967295|S>>>27),S=D+(A^V&(E^A))+C[10]+38016083&4294967295,D=E+(S<<9&4294967295|S>>>23),S=V+(E^A&(D^E))+C[15]+3634488961&4294967295,V=D+(S<<14&4294967295|S>>>18),S=A+(D^E&(V^D))+C[4]+3889429448&4294967295,A=V+(S<<20&4294967295|S>>>12),S=E+(V^D&(A^V))+C[9]+568446438&4294967295,E=A+(S<<5&4294967295|S>>>27),S=D+(A^V&(E^A))+C[14]+3275163606&4294967295,D=E+(S<<9&4294967295|S>>>23),S=V+(E^A&(D^E))+C[3]+4107603335&4294967295,V=D+(S<<14&4294967295|S>>>18),S=A+(D^E&(V^D))+C[8]+1163531501&4294967295,A=V+(S<<20&4294967295|S>>>12),S=E+(V^D&(A^V))+C[13]+2850285829&4294967295,E=A+(S<<5&4294967295|S>>>27),S=D+(A^V&(E^A))+C[2]+4243563512&4294967295,D=E+(S<<9&4294967295|S>>>23),S=V+(E^A&(D^E))+C[7]+1735328473&4294967295,V=D+(S<<14&4294967295|S>>>18),S=A+(D^E&(V^D))+C[12]+2368359562&4294967295,A=V+(S<<20&4294967295|S>>>12),S=E+(A^V^D)+C[5]+4294588738&4294967295,E=A+(S<<4&4294967295|S>>>28),S=D+(E^A^V)+C[8]+2272392833&4294967295,D=E+(S<<11&4294967295|S>>>21),S=V+(D^E^A)+C[11]+1839030562&4294967295,V=D+(S<<16&4294967295|S>>>16),S=A+(V^D^E)+C[14]+4259657740&4294967295,A=V+(S<<23&4294967295|S>>>9),S=E+(A^V^D)+C[1]+2763975236&4294967295,E=A+(S<<4&4294967295|S>>>28),S=D+(E^A^V)+C[4]+1272893353&4294967295,D=E+(S<<11&4294967295|S>>>21),S=V+(D^E^A)+C[7]+4139469664&4294967295,V=D+(S<<16&4294967295|S>>>16),S=A+(V^D^E)+C[10]+3200236656&4294967295,A=V+(S<<23&4294967295|S>>>9),S=E+(A^V^D)+C[13]+681279174&4294967295,E=A+(S<<4&4294967295|S>>>28),S=D+(E^A^V)+C[0]+3936430074&4294967295,D=E+(S<<11&4294967295|S>>>21),S=V+(D^E^A)+C[3]+3572445317&4294967295,V=D+(S<<16&4294967295|S>>>16),S=A+(V^D^E)+C[6]+76029189&4294967295,A=V+(S<<23&4294967295|S>>>9),S=E+(A^V^D)+C[9]+3654602809&4294967295,E=A+(S<<4&4294967295|S>>>28),S=D+(E^A^V)+C[12]+3873151461&4294967295,D=E+(S<<11&4294967295|S>>>21),S=V+(D^E^A)+C[15]+530742520&4294967295,V=D+(S<<16&4294967295|S>>>16),S=A+(V^D^E)+C[2]+3299628645&4294967295,A=V+(S<<23&4294967295|S>>>9),S=E+(V^(A|~D))+C[0]+4096336452&4294967295,E=A+(S<<6&4294967295|S>>>26),S=D+(A^(E|~V))+C[7]+1126891415&4294967295,D=E+(S<<10&4294967295|S>>>22),S=V+(E^(D|~A))+C[14]+2878612391&4294967295,V=D+(S<<15&4294967295|S>>>17),S=A+(D^(V|~E))+C[5]+4237533241&4294967295,A=V+(S<<21&4294967295|S>>>11),S=E+(V^(A|~D))+C[12]+1700485571&4294967295,E=A+(S<<6&4294967295|S>>>26),S=D+(A^(E|~V))+C[3]+2399980690&4294967295,D=E+(S<<10&4294967295|S>>>22),S=V+(E^(D|~A))+C[10]+4293915773&4294967295,V=D+(S<<15&4294967295|S>>>17),S=A+(D^(V|~E))+C[1]+2240044497&4294967295,A=V+(S<<21&4294967295|S>>>11),S=E+(V^(A|~D))+C[8]+1873313359&4294967295,E=A+(S<<6&4294967295|S>>>26),S=D+(A^(E|~V))+C[15]+4264355552&4294967295,D=E+(S<<10&4294967295|S>>>22),S=V+(E^(D|~A))+C[6]+2734768916&4294967295,V=D+(S<<15&4294967295|S>>>17),S=A+(D^(V|~E))+C[13]+1309151649&4294967295,A=V+(S<<21&4294967295|S>>>11),S=E+(V^(A|~D))+C[4]+4149444226&4294967295,E=A+(S<<6&4294967295|S>>>26),S=D+(A^(E|~V))+C[11]+3174756917&4294967295,D=E+(S<<10&4294967295|S>>>22),S=V+(E^(D|~A))+C[2]+718787259&4294967295,V=D+(S<<15&4294967295|S>>>17),S=A+(D^(V|~E))+C[9]+3951481745&4294967295,P.g[0]=P.g[0]+E&4294967295,P.g[1]=P.g[1]+(V+(S<<21&4294967295|S>>>11))&4294967295,P.g[2]=P.g[2]+V&4294967295,P.g[3]=P.g[3]+D&4294967295}s.prototype.u=function(P,E){E===void 0&&(E=P.length);for(var A=E-this.blockSize,C=this.B,V=this.h,D=0;D<E;){if(V==0)for(;D<=A;)a(this,P,D),D+=this.blockSize;if(typeof P=="string"){for(;D<E;)if(C[V++]=P.charCodeAt(D++),V==this.blockSize){a(this,C),V=0;break}}else for(;D<E;)if(C[V++]=P[D++],V==this.blockSize){a(this,C),V=0;break}}this.h=V,this.o+=E},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var E=1;E<P.length-8;++E)P[E]=0;var A=8*this.o;for(E=P.length-8;E<P.length;++E)P[E]=A&255,A/=256;for(this.u(P),P=Array(16),E=A=0;4>E;++E)for(var C=0;32>C;C+=8)P[A++]=this.g[E]>>>C&255;return P};function c(P,E){var A=m;return Object.prototype.hasOwnProperty.call(A,P)?A[P]:A[P]=E(P)}function f(P,E){this.h=E;for(var A=[],C=!0,V=P.length-1;0<=V;V--){var D=P[V]|0;C&&D==E||(A[V]=D,C=!1)}this.g=A}var m={};function y(P){return-128<=P&&128>P?c(P,function(E){return new f([E|0],0>E?-1:0)}):new f([P|0],0>P?-1:0)}function w(P){if(isNaN(P)||!isFinite(P))return k;if(0>P)return H(w(-P));for(var E=[],A=1,C=0;P>=A;C++)E[C]=P/A|0,A*=4294967296;return new f(E,0)}function I(P,E){if(P.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(P.charAt(0)=="-")return H(I(P.substring(1),E));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=w(Math.pow(E,8)),C=k,V=0;V<P.length;V+=8){var D=Math.min(8,P.length-V),S=parseInt(P.substring(V,V+D),E);8>D?(D=w(Math.pow(E,D)),C=C.j(D).add(w(S))):(C=C.j(A),C=C.add(w(S)))}return C}var k=y(0),j=y(1),$=y(16777216);i=f.prototype,i.m=function(){if(ne(this))return-H(this).m();for(var P=0,E=1,A=0;A<this.g.length;A++){var C=this.i(A);P+=(0<=C?C:4294967296+C)*E,E*=4294967296}return P},i.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(Z(this))return"0";if(ne(this))return"-"+H(this).toString(P);for(var E=w(Math.pow(P,6)),A=this,C="";;){var V=Ve(A,E).g;A=ie(A,V.j(E));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(P);if(A=V,Z(A))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},i.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function Z(P){if(P.h!=0)return!1;for(var E=0;E<P.g.length;E++)if(P.g[E]!=0)return!1;return!0}function ne(P){return P.h==-1}i.l=function(P){return P=ie(this,P),ne(P)?-1:Z(P)?0:1};function H(P){for(var E=P.g.length,A=[],C=0;C<E;C++)A[C]=~P.g[C];return new f(A,~P.h).add(j)}i.abs=function(){return ne(this)?H(this):this},i.add=function(P){for(var E=Math.max(this.g.length,P.g.length),A=[],C=0,V=0;V<=E;V++){var D=C+(this.i(V)&65535)+(P.i(V)&65535),S=(D>>>16)+(this.i(V)>>>16)+(P.i(V)>>>16);C=S>>>16,D&=65535,S&=65535,A[V]=S<<16|D}return new f(A,A[A.length-1]&-2147483648?-1:0)};function ie(P,E){return P.add(H(E))}i.j=function(P){if(Z(this)||Z(P))return k;if(ne(this))return ne(P)?H(this).j(H(P)):H(H(this).j(P));if(ne(P))return H(this.j(H(P)));if(0>this.l($)&&0>P.l($))return w(this.m()*P.m());for(var E=this.g.length+P.g.length,A=[],C=0;C<2*E;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var V=0;V<P.g.length;V++){var D=this.i(C)>>>16,S=this.i(C)&65535,rt=P.i(V)>>>16,Ye=P.i(V)&65535;A[2*C+2*V]+=S*Ye,De(A,2*C+2*V),A[2*C+2*V+1]+=D*Ye,De(A,2*C+2*V+1),A[2*C+2*V+1]+=S*rt,De(A,2*C+2*V+1),A[2*C+2*V+2]+=D*rt,De(A,2*C+2*V+2)}for(C=0;C<E;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=E;C<2*E;C++)A[C]=0;return new f(A,0)};function De(P,E){for(;(P[E]&65535)!=P[E];)P[E+1]+=P[E]>>>16,P[E]&=65535,E++}function oe(P,E){this.g=P,this.h=E}function Ve(P,E){if(Z(E))throw Error("division by zero");if(Z(P))return new oe(k,k);if(ne(P))return E=Ve(H(P),E),new oe(H(E.g),H(E.h));if(ne(E))return E=Ve(P,H(E)),new oe(H(E.g),E.h);if(30<P.g.length){if(ne(P)||ne(E))throw Error("slowDivide_ only works with positive integers.");for(var A=j,C=E;0>=C.l(P);)A=ot(A),C=ot(C);var V=Be(A,1),D=Be(C,1);for(C=Be(C,2),A=Be(A,2);!Z(C);){var S=D.add(C);0>=S.l(P)&&(V=V.add(A),D=S),C=Be(C,1),A=Be(A,1)}return E=ie(P,V.j(E)),new oe(V,E)}for(V=k;0<=P.l(E);){for(A=Math.max(1,Math.floor(P.m()/E.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=w(A),S=D.j(E);ne(S)||0<S.l(P);)A-=C,D=w(A),S=D.j(E);Z(D)&&(D=j),V=V.add(D),P=ie(P,S)}return new oe(V,P)}i.A=function(P){return Ve(this,P).h},i.and=function(P){for(var E=Math.max(this.g.length,P.g.length),A=[],C=0;C<E;C++)A[C]=this.i(C)&P.i(C);return new f(A,this.h&P.h)},i.or=function(P){for(var E=Math.max(this.g.length,P.g.length),A=[],C=0;C<E;C++)A[C]=this.i(C)|P.i(C);return new f(A,this.h|P.h)},i.xor=function(P){for(var E=Math.max(this.g.length,P.g.length),A=[],C=0;C<E;C++)A[C]=this.i(C)^P.i(C);return new f(A,this.h^P.h)};function ot(P){for(var E=P.g.length+1,A=[],C=0;C<E;C++)A[C]=P.i(C)<<1|P.i(C-1)>>>31;return new f(A,P.h)}function Be(P,E){var A=E>>5;E%=32;for(var C=P.g.length-A,V=[],D=0;D<C;D++)V[D]=0<E?P.i(D+A)>>>E|P.i(D+A+1)<<32-E:P.i(D+A);return new f(V,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,pm=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=w,f.fromString=I,hs=f}).apply(typeof vp<"u"?vp:typeof self<"u"?self:typeof window<"u"?window:{});var kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mm,Go,gm,Dl,Zc,ym,vm,_m;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,g){return l==Array.prototype||l==Object.prototype||(l[d]=g.value),l};function r(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof kl=="object"&&kl];for(var d=0;d<l.length;++d){var g=l[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=r(this);function a(l,d){if(d)e:{var g=s;l=l.split(".");for(var _=0;_<l.length-1;_++){var L=l[_];if(!(L in g))break e;g=g[L]}l=l[l.length-1],_=g[l],d=d(_),d!=_&&d!=null&&e(g,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var g=0,_=!1,L={next:function(){if(!_&&g<l.length){var U=g++;return{value:d(U,l[U]),done:!1}}return _=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}a("Array.prototype.values",function(l){return l||function(){return c(this,function(d,g){return g})}});var f=f||{},m=this||self;function y(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function w(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function I(l,d,g){return l.call.apply(l.bind,arguments)}function k(l,d,g){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,_),l.apply(d,L)}}return function(){return l.apply(d,arguments)}}function j(l,d,g){return j=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?I:k,j.apply(null,arguments)}function $(l,d){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function Z(l,d){function g(){}g.prototype=d.prototype,l.aa=d.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(_,L,U){for(var re=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)re[tt-2]=arguments[tt];return d.prototype[L].apply(_,re)}}function ne(l){const d=l.length;if(0<d){const g=Array(d);for(let _=0;_<d;_++)g[_]=l[_];return g}return[]}function H(l,d){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(y(_)){const L=l.length||0,U=_.length||0;l.length=L+U;for(let re=0;re<U;re++)l[L+re]=_[re]}else l.push(_)}}class ie{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function De(l){return/^[\s\xa0]*$/.test(l)}function oe(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function Ve(l){return Ve[" "](l),l}Ve[" "]=function(){};var ot=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function Be(l,d,g){for(const _ in l)d.call(g,l[_],_,l)}function P(l,d){for(const g in l)d.call(void 0,l[g],g,l)}function E(l){const d={};for(const g in l)d[g]=l[g];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,d){let g,_;for(let L=1;L<arguments.length;L++){_=arguments[L];for(g in _)l[g]=_[g];for(let U=0;U<A.length;U++)g=A[U],Object.prototype.hasOwnProperty.call(_,g)&&(l[g]=_[g])}}function V(l){var d=1;l=l.split(":");const g=[];for(;0<d&&l.length;)g.push(l.shift()),d--;return l.length&&g.push(l.join(":")),g}function D(l){m.setTimeout(()=>{throw l},0)}function S(){var l=le;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class rt{constructor(){this.h=this.g=null}add(d,g){const _=Ye.get();_.set(d,g),this.h?this.h.next=_:this.g=_,this.h=_}}var Ye=new ie(()=>new It,l=>l.reset());class It{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,ee=!1,le=new rt,se=()=>{const l=m.Promise.resolve(void 0);ye=()=>{l.then(N)}};var N=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(g){D(g)}var d=Ye;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}ee=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ke=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};m.addEventListener("test",g,d),m.removeEventListener("test",g,d)}catch{}return l})();function Te(l,d){if(ae.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(ot){e:{try{Ve(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else g=="mouseover"?d=l.fromElement:g=="mouseout"&&(d=l.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ie[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Te.aa.h.call(this)}}Z(Te,ae);var Ie={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),Re=0;function Pe(l,d,g,_,L){this.listener=l,this.proxy=null,this.src=d,this.type=g,this.capture=!!_,this.ha=L,this.key=++Re,this.da=this.fa=!1}function mt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ne(l){this.src=l,this.g={},this.h=0}Ne.prototype.add=function(l,d,g,_,L){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var re=zt(l,d,_,L);return-1<re?(d=l[re],g||(d.fa=!1)):(d=new Pe(d,this.src,U,!!_,L),d.fa=g,l.push(d)),d};function q(l,d){var g=d.type;if(g in l.g){var _=l.g[g],L=Array.prototype.indexOf.call(_,d,void 0),U;(U=0<=L)&&Array.prototype.splice.call(_,L,1),U&&(mt(d),l.g[g].length==0&&(delete l.g[g],l.h--))}}function zt(l,d,g,_){for(var L=0;L<l.length;++L){var U=l[L];if(!U.da&&U.listener==d&&U.capture==!!g&&U.ha==_)return L}return-1}var Vt="closure_lm_"+(1e6*Math.random()|0),Je={};function at(l,d,g,_,L){if(Array.isArray(d)){for(var U=0;U<d.length;U++)at(l,d[U],g,_,L);return null}return g=Fr(g),l&&l[Ae]?l.K(d,g,w(_)?!!_.capture:!1,L):Gt(l,d,g,!1,_,L)}function Gt(l,d,g,_,L,U){if(!d)throw Error("Invalid event type");var re=w(L)?!!L.capture:!!L,tt=or(l);if(tt||(l[Vt]=tt=new Ne(l)),g=tt.add(d,g,_,re,U),g.proxy)return g;if(_=On(),g.proxy=_,_.src=l,_.listener=g,l.addEventListener)ke||(L=re),L===void 0&&(L=!1),l.addEventListener(d.toString(),_,L);else if(l.attachEvent)l.attachEvent(An(d.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function On(){function l(g){return d.call(l.src,l.listener,g)}const d=an;return l}function wr(l,d,g,_,L){if(Array.isArray(d))for(var U=0;U<d.length;U++)wr(l,d[U],g,_,L);else _=w(_)?!!_.capture:!!_,g=Fr(g),l&&l[Ae]?(l=l.i,d=String(d).toString(),d in l.g&&(U=l.g[d],g=zt(U,g,_,L),-1<g&&(mt(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete l.g[d],l.h--)))):l&&(l=or(l))&&(d=l.g[d.toString()],l=-1,d&&(l=zt(d,g,_,L)),(g=-1<l?d[l]:null)&&In(g))}function In(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Ae])q(d.i,l);else{var g=l.type,_=l.proxy;d.removeEventListener?d.removeEventListener(g,_,l.capture):d.detachEvent?d.detachEvent(An(g),_):d.addListener&&d.removeListener&&d.removeListener(_),(g=or(d))?(q(g,l),g.h==0&&(g.src=null,d[Vt]=null)):mt(l)}}}function An(l){return l in Je?Je[l]:Je[l]="on"+l}function an(l,d){if(l.da)l=!0;else{d=new Te(d,this);var g=l.listener,_=l.ha||l.src;l.fa&&In(l),l=g.call(_,d)}return l}function or(l){return l=l[Vt],l instanceof Ne?l:null}var Yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fr(l){return typeof l=="function"?l:(l[Yt]||(l[Yt]=function(d){return l.handleEvent(d)}),l[Yt])}function Ze(){z.call(this),this.i=new Ne(this),this.M=this,this.F=null}Z(Ze,z),Ze.prototype[Ae]=!0,Ze.prototype.removeEventListener=function(l,d,g,_){wr(this,l,d,g,_)};function lt(l,d){var g,_=l.F;if(_)for(g=[];_;_=_.F)g.push(_);if(l=l.M,_=d.type||d,typeof d=="string")d=new ae(d,l);else if(d instanceof ae)d.target=d.target||l;else{var L=d;d=new ae(_,l),C(d,L)}if(L=!0,g)for(var U=g.length-1;0<=U;U--){var re=d.g=g[U];L=Nt(re,_,!0,d)&&L}if(re=d.g=l,L=Nt(re,_,!0,d)&&L,L=Nt(re,_,!1,d)&&L,g)for(U=0;U<g.length;U++)re=d.g=g[U],L=Nt(re,_,!1,d)&&L}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var g=l.g[d],_=0;_<g.length;_++)mt(g[_]);delete l.g[d],l.h--}}this.F=null},Ze.prototype.K=function(l,d,g,_){return this.i.add(String(l),d,!1,g,_)},Ze.prototype.L=function(l,d,g,_){return this.i.add(String(l),d,!0,g,_)};function Nt(l,d,g,_){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,U=0;U<d.length;++U){var re=d[U];if(re&&!re.da&&re.capture==g){var tt=re.listener,Ft=re.ha||re.src;re.fa&&q(l.i,re),L=tt.call(Ft,_)!==!1&&L}}return L&&!_.defaultPrevented}function li(l,d,g){if(typeof l=="function")g&&(l=j(l,g));else if(l&&typeof l.handleEvent=="function")l=j(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:m.setTimeout(l,d||0)}function Rn(l){l.g=li(()=>{l.g=null,l.i&&(l.i=!1,Rn(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ui extends z{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Rn(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mn(l){z.call(this),this.h=l,this.g={}}Z(Mn,z);var jr=[];function qn(l){Be(l.g,function(d,g){this.g.hasOwnProperty(g)&&In(d)},l),l.g={}}Mn.prototype.N=function(){Mn.aa.N.call(this),qn(this)},Mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ci=m.JSON.stringify,Hn=m.JSON.parse,br=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function vn(){}vn.prototype.h=null;function Br(l){return l.h||(l.h=l.i())}function Fn(){}var _n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xt(){ae.call(this,"d")}Z(Xt,ae);function hi(){ae.call(this,"c")}Z(hi,ae);var ln={},fi=null;function Kn(){return fi=fi||new Ze}ln.La="serverreachability";function ys(l){ae.call(this,ln.La,l)}Z(ys,ae);function wn(l){const d=Kn();lt(d,new ys(d))}ln.STAT_EVENT="statevent";function qi(l,d){ae.call(this,ln.STAT_EVENT,l),this.stat=d}Z(qi,ae);function gt(l){const d=Kn();lt(d,new qi(d,l))}ln.Ma="timingevent";function di(l,d){ae.call(this,ln.Ma,l),this.size=d}Z(di,ae);function un(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},d)}function Ur(){this.g=!0}Ur.prototype.xa=function(){this.g=!1};function Qn(l,d,g,_,L,U){l.info(function(){if(l.g)if(U)for(var re="",tt=U.split("&"),Ft=0;Ft<tt.length;Ft++){var We=tt[Ft].split("=");if(1<We.length){var Wt=We[0];We=We[1];var Lt=Wt.split("_");re=2<=Lt.length&&Lt[1]=="type"?re+(Wt+"="+We+"&"):re+(Wt+"=redacted&")}}else re=null;else re=U;return"XMLHTTP REQ ("+_+") [attempt "+L+"]: "+d+`
`+g+`
`+re})}function pi(l,d,g,_,L,U,re){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+L+"]: "+d+`
`+g+`
`+U+" "+re})}function yt(l,d,g,_){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+go(l,g)+(_?" "+_:"")})}function jn(l,d){l.info(function(){return"TIMEOUT: "+d})}Ur.prototype.info=function(){};function go(l,d){if(!l.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var _=g[l];if(!(2>_.length)){var L=_[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var re=1;re<L.length;re++)L[re]=""}}}}return ci(g)}catch{return d}}var mi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cn;function Er(){}Z(Er,vn),Er.prototype.g=function(){return new XMLHttpRequest},Er.prototype.i=function(){return{}},cn=new Er;function $t(l,d,g,_){this.j=l,this.i=d,this.l=g,this.R=_||1,this.U=new Mn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ar}function ar(){this.i=null,this.g="",this.h=!1}var Xe={},Gn={};function zr(l,d,g){l.L=1,l.v=qr(kt(d)),l.m=g,l.P=!0,gi(l,null)}function gi(l,d){l.F=Date.now(),it(l),l.A=kt(l.v);var g=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),wi(g.i,"t",_),l.C=0,g=l.j.J,l.h=new ar,l.g=Na(l.j,g?d:null,!l.m),0<l.O&&(l.M=new ui(j(l.Y,l,l.g),l.O)),d=l.U,g=l.g,_=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(jr[0]=L.toString()),L=jr);for(var U=0;U<L.length;U++){var re=at(g,L[U],_||d.handleEvent,!1,d.h||d);if(!re)break;d.g[re.key]=re}d=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),wn(),Qn(l.i,l.u,l.A,l.l,l.R,l.m)}$t.prototype.ca=function(l){l=l.target;const d=this.M;d&&kn(l)==3?d.j():this.Y(l)},$t.prototype.Y=function(l){try{if(l==this.g)e:{const Lt=kn(this.g);var d=this.g.Ba();const Xn=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||wo(this.g)))){this.J||Lt!=4||d==7||(d==8||0>=Xn?wn(3):wn(2)),Tr(this);var g=this.g.Z();this.X=g;t:if(Hi(this)){var _=wo(this.g);l="";var L=_.length,U=kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){W(this),Sr(this);var re="";break t}this.h.i=new m.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,l+=this.h.i.decode(_[d],{stream:!(U&&d==L-1)});_.length=0,this.h.g+=l,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=g==200,pi(this.i,this.u,this.A,this.l,this.R,Lt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Ft=this.g;if((tt=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!De(tt)){var We=tt;break t}}We=null}if(g=We)yt(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,b(this,g);else{this.o=!1,this.s=3,gt(12),W(this),Sr(this);break e}}if(this.P){g=!0;let Bn;for(;!this.J&&this.C<re.length;)if(Bn=_s(this,re),Bn==Gn){Lt==4&&(this.s=4,gt(14),g=!1),yt(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==Xe){this.s=4,gt(15),yt(this.i,this.l,re,"[Invalid Chunk]"),g=!1;break}else yt(this.i,this.l,Bn,null),b(this,Bn);if(Hi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||re.length!=0||this.h.h||(this.s=1,gt(16),g=!1),this.o=this.o&&g,!g)yt(this.i,this.l,re,"[Invalid Chunked Response]"),W(this),Sr(this);else if(0<re.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),To(Wt),Wt.M=!0,gt(11))}}else yt(this.i,this.l,re,null),b(this,re);Lt==4&&W(this),this.o&&!this.J&&(Lt==4?ks(this.j,this):(this.o=!1,it(this)))}else Ss(this.g),g==400&&0<re.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),W(this),Sr(this)}}}catch{}finally{}};function Hi(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function _s(l,d){var g=l.C,_=d.indexOf(`
`,g);return _==-1?Gn:(g=Number(d.substring(g,_)),isNaN(g)?Xe:(_+=1,_+g>d.length?Gn:(d=d.slice(_,_+g),l.C=_+g,d)))}$t.prototype.cancel=function(){this.J=!0,W(this)};function it(l){l.S=Date.now()+l.I,yi(l,l.I)}function yi(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=un(j(l.ba,l),d)}function Tr(l){l.B&&(m.clearTimeout(l.B),l.B=null)}$t.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(jn(this.i,this.A),this.L!=2&&(wn(),gt(17)),W(this),this.s=2,Sr(this)):yi(this,this.S-l)};function Sr(l){l.j.G==0||l.J||ks(l.j,l)}function W(l){Tr(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,qn(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function b(l,d){try{var g=l.j;if(g.G!=0&&(g.g==l||je(g.h,l))){if(!l.K&&je(g.h,l)&&g.G==3){try{var _=g.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var L=_;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Cs(g),fr(g);else break e;Rs(g),gt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=un(j(g.Za,g),6e3));if(1>=Se(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Gr(g,11)}else if((l.K||g.g==l)&&Cs(g),!De(d))for(L=g.Da.g.parse(d),d=0;d<L.length;d++){let We=L[d];if(g.T=We[0],We=We[1],g.G==2)if(We[0]=="c"){g.K=We[1],g.ia=We[2];const Wt=We[3];Wt!=null&&(g.la=Wt,g.j.info("VER="+g.la));const Lt=We[4];Lt!=null&&(g.Aa=Lt,g.j.info("SVER="+g.Aa));const Xn=We[5];Xn!=null&&typeof Xn=="number"&&0<Xn&&(_=1.5*Xn,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Bn=l.g;if(Bn){const Yi=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yi){var U=_.h;U.g||Yi.indexOf("spdy")==-1&&Yi.indexOf("quic")==-1&&Yi.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(be(U,U.h),U.h=null))}if(_.D){const xs=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;xs&&(_.ya=xs,st(_.I,_.D,xs))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var re=l;if(_.qa=Va(_,_.J?_.ia:null,_.W),re.K){ht(_.h,re);var tt=re,Ft=_.L;Ft&&(tt.I=Ft),tt.B&&(Tr(tt),it(tt)),_.g=re}else Gi(_);0<g.i.length&&Cr(g)}else We[0]!="stop"&&We[0]!="close"||Gr(g,7);else g.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Gr(g,7):Zt(g):We[0]!="noop"&&g.l&&g.l.ta(We),g.v=0)}}wn(4)}catch{}}var Fe=class{constructor(l,d){this.g=l,this.map=d}};function he(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ue(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Se(l){return l.h?1:l.g?l.g.size:0}function je(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function be(l,d){l.g?l.g.add(d):l.h=d}function ht(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}he.prototype.cancel=function(){if(this.i=At(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function At(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const g of l.g.values())d=d.concat(g.D);return d}return ne(l.i)}function Le(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(y(l)){for(var d=[],g=l.length,_=0;_<g;_++)d.push(l[_]);return d}d=[],g=0;for(_ in l)d[g++]=l[_];return d}function ut(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(y(l)||typeof l=="string"){var d=[];l=l.length;for(var g=0;g<l;g++)d.push(g);return d}d=[],g=0;for(const _ in l)d[g++]=_;return d}}}function ft(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(y(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var g=ut(l),_=Le(l),L=_.length,U=0;U<L;U++)d.call(void 0,_[U],g&&g[U],l)}var Ct=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dt(l,d){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var _=l[g].indexOf("="),L=null;if(0<=_){var U=l[g].substring(0,_);L=l[g].substring(_+1)}else U=l[g];d(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function et(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof et){this.h=l.h,vi(this,l.j),this.o=l.o,this.g=l.g,$r(this,l.s),this.l=l.l;var d=l.i,g=new Ir;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),Wr(this,g),this.m=l.m}else l&&(d=String(l).match(Ct))?(this.h=!1,vi(this,d[1]||"",!0),this.o=ze(d[2]||""),this.g=ze(d[3]||"",!0),$r(this,d[4]),this.l=ze(d[5]||"",!0),Wr(this,d[6]||"",!0),this.m=ze(d[7]||"")):(this.h=!1,this.i=new Ir(null,this.h))}et.prototype.toString=function(){var l=[],d=this.j;d&&l.push(_i(d,ws,!0),":");var g=this.g;return(g||d=="file")&&(l.push("//"),(d=this.o)&&l.push(_i(d,ws,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(_i(g,g.charAt(0)=="/"?Sa:Ta,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",_i(g,yo)),l.join("")};function kt(l){return new et(l)}function vi(l,d,g){l.j=g?ze(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function $r(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Wr(l,d,g){d instanceof Ir?(l.i=d,Ar(l.i,l.h)):(g||(d=_i(d,Ia)),l.i=new Ir(d,l.h))}function st(l,d,g){l.i.set(d,g)}function qr(l){return st(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ze(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function _i(l,d,g){return typeof l=="string"?(l=encodeURI(l).replace(d,Ea),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ea(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ws=/[#\/\?@]/g,Ta=/[#\?:]/g,Sa=/[#\?]/g,Ia=/[#\?@]/g,yo=/#/g;function Ir(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Jt(l){l.g||(l.g=new Map,l.h=0,l.i&&Dt(l.i,function(d,g){l.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}i=Ir.prototype,i.add=function(l,d){Jt(this),this.i=null,l=Yn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(d),this.h+=1,this};function lr(l,d){Jt(l),d=Yn(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function ur(l,d){return Jt(l),d=Yn(l,d),l.g.has(d)}i.forEach=function(l,d){Jt(this),this.g.forEach(function(g,_){g.forEach(function(L){l.call(d,L,_,this)},this)},this)},i.na=function(){Jt(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let _=0;_<d.length;_++){const L=l[_];for(let U=0;U<L.length;U++)g.push(d[_])}return g},i.V=function(l){Jt(this);let d=[];if(typeof l=="string")ur(this,l)&&(d=d.concat(this.g.get(Yn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)d=d.concat(l[g])}return d},i.set=function(l,d){return Jt(this),this.i=null,l=Yn(this,l),ur(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function wi(l,d,g){lr(l,d),0<g.length&&(l.i=null,l.g.set(Yn(l,d),ne(g)),l.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var _=d[g];const U=encodeURIComponent(String(_)),re=this.V(_);for(_=0;_<re.length;_++){var L=U;re[_]!==""&&(L+="="+encodeURIComponent(String(re[_]))),l.push(L)}}return this.i=l.join("&")};function Yn(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Ar(l,d){d&&!l.j&&(Jt(l),l.i=null,l.g.forEach(function(g,_){var L=_.toLowerCase();_!=L&&(lr(this,_),wi(this,L,g))},l)),l.j=d}function cu(l,d){const g=new Ur;if(m.Image){const _=new Image;_.onload=$(Cn,g,"TestLoadImage: loaded",!0,d,_),_.onerror=$(Cn,g,"TestLoadImage: error",!1,d,_),_.onabort=$(Cn,g,"TestLoadImage: abort",!1,d,_),_.ontimeout=$(Cn,g,"TestLoadImage: timeout",!1,d,_),m.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else d(!1)}function Aa(l,d){const g=new Ur,_=new AbortController,L=setTimeout(()=>{_.abort(),Cn(g,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:_.signal}).then(U=>{clearTimeout(L),U.ok?Cn(g,"TestPingServer: ok",!0,d):Cn(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Cn(g,"TestPingServer: error",!1,d)})}function Cn(l,d,g,_,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),_(g)}catch{}}function hu(){this.g=new br}function Ra(l,d,g){const _=g||"";try{ft(l,function(L,U){let re=L;w(L)&&(re=ci(L)),d.push(_+U+"="+encodeURIComponent(re))})}catch(L){throw d.push(_+"type="+encodeURIComponent("_badmap")),L}}function Hr(l){this.l=l.Ub||null,this.j=l.eb||!1}Z(Hr,vn),Hr.prototype.g=function(){return new Ki(this.l,this.j)},Hr.prototype.i=(function(l){return function(){return l}})({});function Ki(l,d){Ze.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Z(Ki,Ze),i=Ki.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,hr(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||m).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cr(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,hr(this)),this.g&&(this.readyState=3,hr(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ca(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ca(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?cr(this):hr(this),this.readyState==3&&Ca(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,cr(this))},i.Qa=function(l){this.g&&(this.response=l,cr(this))},i.ga=function(){this.g&&cr(this)};function cr(l){l.readyState=4,l.l=null,l.j=null,l.v=null,hr(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=d.next();return l.join(`\r
`)};function hr(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Kr(l){let d="";return Be(l,function(g,_){d+=_,d+=":",d+=g,d+=`\r
`}),d}function Ei(l,d,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=Kr(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):st(l,d,g))}function vt(l){Ze.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Z(vt,Ze);var fu=/^https?$/i,vo=["POST","PUT"];i=vt.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cn.g(),this.v=this.o?Br(this.o):Br(cn),this.g.onreadystatechange=j(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(U){Qi(this,U);return}if(l=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var L in _)g.set(L,_[L]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const U of _.keys())g.set(U,_.get(U));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),L=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(vo,d,void 0))||_||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,re]of g)this.g.setRequestHeader(U,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ts(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){Qi(this,U)}};function Qi(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Es(l),bn(l)}function Es(l){l.A||(l.A=!0,lt(l,"complete"),lt(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,lt(this,"complete"),lt(this,"abort"),bn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bn(this,!0)),vt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?_o(this):this.bb())},i.bb=function(){_o(this)};function _o(l){if(l.h&&typeof f<"u"&&(!l.v[1]||kn(l)!=4||l.Z()!=2)){if(l.u&&kn(l)==4)li(l.Ea,0,l);else if(lt(l,"readystatechange"),kn(l)==4){l.h=!1;try{const re=l.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var _;if(_=re===0){var L=String(l.D).match(Ct)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),_=!fu.test(L?L.toLowerCase():"")}g=_}if(g)lt(l,"complete"),lt(l,"success");else{l.m=6;try{var U=2<kn(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",Es(l)}}finally{bn(l)}}}}function bn(l,d){if(l.g){Ts(l);const g=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||lt(l,"ready");try{g.onreadystatechange=_}catch{}}}function Ts(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function kn(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<kn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),Hn(d)}};function wo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Ss(l){const d={};l=(l.g&&2<=kn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(De(l[_]))continue;var g=V(l[_]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=d[L]||[];d[L]=U,U.push(g)}P(d,function(_){return _.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rr(l,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||d}function Eo(l){this.Aa=0,this.i=[],this.j=new Ur,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rr("baseRetryDelayMs",5e3,l),this.cb=Rr("retryDelaySeedMs",1e4,l),this.Wa=Rr("forwardChannelMaxRetries",2,l),this.wa=Rr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new he(l&&l.concurrentRequestLimit),this.Da=new hu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Eo.prototype,i.la=8,i.G=1,i.connect=function(l,d,g,_){gt(0),this.W=l,this.H=d||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Va(this,null,this.W),Cr(this)};function Zt(l){if(Is(l),l.G==3){var d=l.U++,g=kt(l.I);if(st(g,"SID",l.K),st(g,"RID",d),st(g,"TYPE","terminate"),Qr(l,g),d=new $t(l,l.j,d),d.L=2,d.v=qr(kt(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=d.v,g=!0),g||(d.g=Na(d.j,null),d.g.ea(d.v)),d.F=Date.now(),it(d)}xa(l)}function fr(l){l.g&&(To(l),l.g.cancel(),l.g=null)}function Is(l){fr(l),l.u&&(m.clearTimeout(l.u),l.u=null),Cs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function Cr(l){if(!ue(l.h)&&!l.s){l.s=!0;var d=l.Ga;ye||se(),ee||(ye(),ee=!0),le.add(d,l),l.B=0}}function du(l,d){return Se(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=un(j(l.Ga,l,d),Pa(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new $t(this,this.j,l);let U=this.o;if(this.S&&(U?(U=E(U),C(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Ti(this,L,d),g=kt(this.I),st(g,"RID",l),st(g,"CVER",22),this.D&&st(g,"X-HTTP-Session-Id",this.D),Qr(this,g),U&&(this.O?d="headers="+encodeURIComponent(String(Kr(U)))+"&"+d:this.m&&Ei(g,this.m,U)),be(this.h,L),this.Ua&&st(g,"TYPE","init"),this.P?(st(g,"$req",d),st(g,"SID","null"),L.T=!0,zr(L,g,null)):zr(L,g,d),this.G=2}}else this.G==3&&(l?As(this,l):this.i.length==0||ue(this.h)||As(this))};function As(l,d){var g;d?g=d.l:g=l.U++;const _=kt(l.I);st(_,"SID",l.K),st(_,"RID",g),st(_,"AID",l.T),Qr(l,_),l.m&&l.o&&Ei(_,l.m,l.o),g=new $t(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Ti(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),be(l.h,g),zr(g,_,d)}function Qr(l,d){l.H&&Be(l.H,function(g,_){st(d,_,g)}),l.l&&ft({},function(g,_){st(d,_,g)})}function Ti(l,d,g){g=Math.min(l.i.length,g);var _=l.l?j(l.l.Na,l.l,l):null;e:{var L=l.i;let U=-1;for(;;){const re=["count="+g];U==-1?0<g?(U=L[0].g,re.push("ofs="+U)):U=0:re.push("ofs="+U);let tt=!0;for(let Ft=0;Ft<g;Ft++){let We=L[Ft].g;const Wt=L[Ft].map;if(We-=U,0>We)U=Math.max(0,L[Ft].g-100),tt=!1;else try{Ra(Wt,re,"req"+We+"_")}catch{_&&_(Wt)}}if(tt){_=re.join("&");break e}}}return l=l.i.splice(0,g),d.D=l,_}function Gi(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;ye||se(),ee||(ye(),ee=!0),le.add(d,l),l.v=0}}function Rs(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=un(j(l.Fa,l),Pa(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,ka(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=un(j(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),fr(this),ka(this))};function To(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function ka(l){l.g=new $t(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=kt(l.qa);st(d,"RID","rpc"),st(d,"SID",l.K),st(d,"AID",l.T),st(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&st(d,"TO",l.ja),st(d,"TYPE","xmlhttp"),Qr(l,d),l.m&&l.o&&Ei(d,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=qr(kt(d)),g.m=null,g.P=!0,gi(g,l)}i.Za=function(){this.C!=null&&(this.C=null,fr(this),Rs(this),gt(19))};function Cs(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function ks(l,d){var g=null;if(l.g==d){Cs(l),To(l),l.g=null;var _=2}else if(je(l.h,d))g=d.D,ht(l.h,d),_=1;else return;if(l.G!=0){if(d.o)if(_==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var L=l.B;_=Kn(),lt(_,new di(_,g)),Cr(l)}else Gi(l);else if(L=d.s,L==3||L==0&&0<d.X||!(_==1&&du(l,d)||_==2&&Rs(l)))switch(g&&0<g.length&&(d=l.h,d.i=d.i.concat(g)),L){case 1:Gr(l,5);break;case 4:Gr(l,10);break;case 3:Gr(l,6);break;default:Gr(l,2)}}}function Pa(l,d){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*d}function Gr(l,d){if(l.j.info("Error code "+d),d==2){var g=j(l.fb,l),_=l.Xa;const L=!_;_=new et(_||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||vi(_,"https"),qr(_),L?cu(_.toString(),g):Aa(_.toString(),g)}else gt(2);l.G=0,l.l&&l.l.sa(d),xa(l),Is(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function xa(l){if(l.G=0,l.ka=[],l.l){const d=At(l.h);(d.length!=0||l.i.length!=0)&&(H(l.ka,d),H(l.ka,l.i),l.h.i.length=0,ne(l.i),l.i.length=0),l.l.ra()}}function Va(l,d,g){var _=g instanceof et?kt(g):new et(g);if(_.g!="")d&&(_.g=d+"."+_.g),$r(_,_.s);else{var L=m.location;_=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var U=new et(null);_&&vi(U,_),d&&(U.g=d),L&&$r(U,L),g&&(U.l=g),_=U}return g=l.D,d=l.ya,g&&d&&st(_,g,d),st(_,"VER",l.la),Qr(l,_),_}function Na(l,d,g){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new vt(new Hr({eb:g})):new vt(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function So(){}i=So.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ps(){}Ps.prototype.g=function(l,d){return new En(l,d)};function En(l,d){Ze.call(this),this.g=new Eo(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!De(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!De(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new kr(this)}Z(En,Ze),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Zt(this.g)},En.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=ci(l),l=g);d.i.push(new Fe(d.Ya++,l)),d.G==3&&Cr(d)},En.prototype.N=function(){this.g.l=null,delete this.j,Zt(this.g),delete this.g,En.aa.N.call(this)};function Da(l){Xt.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const g in d){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}Z(Da,Xt);function La(){hi.call(this),this.status=1}Z(La,hi);function kr(l){this.g=l}Z(kr,So),kr.prototype.ua=function(){lt(this.g,"a")},kr.prototype.ta=function(l){lt(this.g,new Da(l))},kr.prototype.sa=function(l){lt(this.g,new La)},kr.prototype.ra=function(){lt(this.g,"b")},Ps.prototype.createWebChannel=Ps.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,_m=function(){return new Ps},vm=function(){return Kn()},ym=ln,Zc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mi.NO_ERROR=0,mi.TIMEOUT=8,mi.HTTP_ERROR=6,Dl=mi,vs.COMPLETE="complete",gm=vs,Fn.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,Go=Fn,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,mm=vt}).apply(typeof kl<"u"?kl:typeof self<"u"?self:typeof window<"u"?window:{});const _p="@firebase/firestore";class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");let ho="10.14.0";const fs=new lm("@firebase/firestore");function Qo(){return fs.logLevel}function me(i,...e){if(fs.logLevel<=Ke.DEBUG){const r=e.map(vh);fs.debug(`Firestore (${ho}): ${i}`,...r)}}function oi(i,...e){if(fs.logLevel<=Ke.ERROR){const r=e.map(vh);fs.error(`Firestore (${ho}): ${i}`,...r)}}function ro(i,...e){if(fs.logLevel<=Ke.WARN){const r=e.map(vh);fs.warn(`Firestore (${ho}): ${i}`,...r)}}function vh(i){if(typeof i=="string")return i;try{return(function(r){return JSON.stringify(r)})(i)}catch{return i}}function xe(i="Unexpected state"){const e=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: `+i;throw oi(e),new Error(e)}function nt(i,e){i||xe()}function Me(i,e){return i}const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends co{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bi{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}class wm{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(gn.UNAUTHENTICATED)))}shutdown(){}}class V_{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class N_{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){nt(this.o===void 0);let s=this.i;const a=y=>this.i!==s?(s=this.i,r(y)):Promise.resolve();let c=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Bi,e.enqueueRetryable((()=>a(this.currentUser)))};const f=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await a(this.currentUser)}))},m=y=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Bi)}}),0),f()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nt(typeof s.accessToken=="string"),new wm(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string"),new gn(e)}}class D_{constructor(e,r,s){this.l=e,this.h=r,this.P=s,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class L_{constructor(e,r,s){this.l=e,this.h=r,this.P=s}getToken(){return Promise.resolve(new D_(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class O_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M_{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){nt(this.o===void 0);const s=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.R;return this.R=c.token,me("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?r(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const a=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(nt(typeof r.token=="string"),this.R=r.token,new O_(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function F_(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let s=0;s<i;s++)r[s]=Math.floor(256*Math.random());return r}class Em{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=F_(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<r&&(s+=e.charAt(a[c]%e.length))}return s}}function Ge(i,e){return i<e?-1:i>e?1:0}function io(i,e,r){return i.length===e.length&&i.every(((s,a)=>r(s,e[a])))}class Ut{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ve(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ve(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ve(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*r));return new Ut(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Ut(0,0))}static max(){return new Oe(new Ut(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class oa{constructor(e,r,s){r===void 0?r=0:r>e.length&&xe(),s===void 0?s=e.length-r:s>e.length-r&&xe(),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return oa.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof oa?e.forEach((s=>{r.push(s)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let a=0;a<s;a++){const c=e.get(a),f=r.get(a);if(c<f)return-1;if(c>f)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class wt extends oa{construct(e,r,s){return new wt(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new ve(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter((a=>a.length>0)))}return new wt(r)}static emptyPath(){return new wt([])}}const j_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends oa{construct(e,r,s){return new rn(e,r,s)}static isValidIdentifier(e){return j_.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new rn(["__name__"])}static fromServerFormat(e){const r=[];let s="",a=0;const c=()=>{if(s.length===0)throw new ve(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let f=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new ve(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ve(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,a+=2}else m==="`"?(f=!f,a++):m!=="."||f?(s+=m,a++):(c(),a++)}if(c(),f)throw new ve(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(r)}static emptyPath(){return new rn([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(wt.fromString(e))}static fromName(e){return new Ee(wt.fromString(e).popFirst(5))}static empty(){return new Ee(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return wt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new wt(e.slice()))}}function b_(i,e){const r=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=Oe.fromTimestamp(s===1e9?new Ut(r+1,0):new Ut(r,s));return new zi(a,Ee.empty(),e)}function B_(i){return new zi(i.readTime,i.key,-1)}class zi{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new zi(Oe.min(),Ee.empty(),-1)}static max(){return new zi(Oe.max(),Ee.empty(),-1)}}function U_(i,e){let r=i.readTime.compareTo(e.readTime);return r!==0?r:(r=Ee.comparator(i.documentKey,e.documentKey),r!==0?r:Ge(i.largestBatchId,e.largestBatchId))}const z_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function da(i){if(i.code!==X.FAILED_PRECONDITION||i.message!==z_)throw i;me("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new G(((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(r,c).next(s,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof G?r:G.resolve(r)}catch(r){return G.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):G.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):G.reject(r)}static resolve(e){return new G(((r,s)=>{r(e)}))}static reject(e){return new G(((r,s)=>{s(e)}))}static waitFor(e){return new G(((r,s)=>{let a=0,c=0,f=!1;e.forEach((m=>{++a,m.next((()=>{++c,f&&c===a&&r()}),(y=>s(y)))})),f=!0,c===a&&r()}))}static or(e){let r=G.resolve(!1);for(const s of e)r=r.next((a=>a?G.resolve(a):s()));return r}static forEach(e,r){const s=[];return e.forEach(((a,c)=>{s.push(r.call(this,a,c))})),this.waitFor(s)}static mapArray(e,r){return new G(((s,a)=>{const c=e.length,f=new Array(c);let m=0;for(let y=0;y<c;y++){const w=y;r(e[w]).next((I=>{f[w]=I,++m,m===c&&s(f)}),(I=>a(I)))}}))}static doWhile(e,r){return new G(((s,a)=>{const c=()=>{e()===!0?r().next((()=>{c()}),a):s()};c()}))}}function W_(i){const e=i.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function pa(i){return i.name==="IndexedDbTransactionError"}class _h{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=s=>this.ie(s),this.se=s=>r.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_h.oe=-1;function Jl(i){return i==null}function $l(i){return i===0&&1/i==-1/0}function q_(i){return typeof i=="number"&&Number.isInteger(i)&&!$l(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function wp(i){let e=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&e++;return e}function fo(i,e){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&e(r,i[r])}function Tm(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class St{constructor(e,r){this.comparator=e,this.root=r||nn.EMPTY}insert(e,r){return new St(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return r+s.left.size;a<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,s)=>(e(r,s),!1)))}toString(){const e=[];return this.inorderTraversal(((r,s)=>(e.push(`${r}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pl(this.root,e,this.comparator,!0)}}class Pl{constructor(e,r,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=r?s(e.key,r):1,r&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,r,s,a,c){this.key=e,this.value=r,this.color=s??nn.RED,this.left=a??nn.EMPTY,this.right=c??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,a,c){return new nn(e??this.key,r??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,r,s),null):c===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return nn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,r,s,a,c){return this}insert(e,r,s){return new nn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sn{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,s)=>(e(r),!1)))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let s;for(s=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Ep(this.data.getIterator())}getIteratorFrom(e){return new Ep(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((s=>{r=r.add(s)})),r}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new sn(this.comparator);return r.data=e,r}}class Ep{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _r{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new _r([])}unionWith(e){let r=new sn(rn.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new _r(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return io(this.fields,e.fields,((r,s)=>r.isEqual(s)))}}class Sm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class on{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Sm("Invalid base64 string: "+c):c}})(e);return new on(r)}static fromUint8Array(e){const r=(function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c})(e);return new on(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const s=new Uint8Array(r.length);for(let a=0;a<r.length;a++)s[a]=r.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const H_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(i){if(nt(!!i),typeof i=="string"){let e=0;const r=H_.exec(i);if(nt(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:xt(i.seconds),nanos:xt(i.nanos)}}function xt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ds(i){return typeof i=="string"?on.fromBase64String(i):on.fromUint8Array(i)}function wh(i){var e,r;return((r=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Eh(i){const e=i.mapValue.fields.__previous_value__;return wh(e)?Eh(e):e}function aa(i){const e=$i(i.mapValue.fields.__local_write_time__.timestampValue);return new Ut(e.seconds,e.nanos)}class K_{constructor(e,r,s,a,c,f,m,y,w){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=w}}class la{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new la("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof la&&e.projectId===this.projectId&&e.database===this.database}}const xl={mapValue:{}};function ps(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?wh(i)?4:G_(i)?9007199254740991:Q_(i)?10:11:xe()}function Or(i,e){if(i===e)return!0;const r=ps(i);if(r!==ps(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return aa(i).isEqual(aa(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=$i(a.timestampValue),m=$i(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,c){return ds(a.bytesValue).isEqual(ds(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,c){return xt(a.geoPointValue.latitude)===xt(c.geoPointValue.latitude)&&xt(a.geoPointValue.longitude)===xt(c.geoPointValue.longitude)})(i,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return xt(a.integerValue)===xt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=xt(a.doubleValue),m=xt(c.doubleValue);return f===m?$l(f)===$l(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return io(i.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:case 11:return(function(a,c){const f=a.mapValue.fields||{},m=c.mapValue.fields||{};if(wp(f)!==wp(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!Or(f[y],m[y])))return!1;return!0})(i,e);default:return xe()}}function ua(i,e){return(i.values||[]).find((r=>Or(r,e)))!==void 0}function so(i,e){if(i===e)return 0;const r=ps(i),s=ps(e);if(r!==s)return Ge(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ge(i.booleanValue,e.booleanValue);case 2:return(function(c,f){const m=xt(c.integerValue||c.doubleValue),y=xt(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(i,e);case 3:return Tp(i.timestampValue,e.timestampValue);case 4:return Tp(aa(i),aa(e));case 5:return Ge(i.stringValue,e.stringValue);case 6:return(function(c,f){const m=ds(c),y=ds(f);return m.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(c,f){const m=c.split("/"),y=f.split("/");for(let w=0;w<m.length&&w<y.length;w++){const I=Ge(m[w],y[w]);if(I!==0)return I}return Ge(m.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,f){const m=Ge(xt(c.latitude),xt(f.latitude));return m!==0?m:Ge(xt(c.longitude),xt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Sp(i.arrayValue,e.arrayValue);case 10:return(function(c,f){var m,y,w,I;const k=c.fields||{},j=f.fields||{},$=(m=k.value)===null||m===void 0?void 0:m.arrayValue,Z=(y=j.value)===null||y===void 0?void 0:y.arrayValue,ne=Ge(((w=$?.values)===null||w===void 0?void 0:w.length)||0,((I=Z?.values)===null||I===void 0?void 0:I.length)||0);return ne!==0?ne:Sp($,Z)})(i.mapValue,e.mapValue);case 11:return(function(c,f){if(c===xl.mapValue&&f===xl.mapValue)return 0;if(c===xl.mapValue)return 1;if(f===xl.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),w=f.fields||{},I=Object.keys(w);y.sort(),I.sort();for(let k=0;k<y.length&&k<I.length;++k){const j=Ge(y[k],I[k]);if(j!==0)return j;const $=so(m[y[k]],w[I[k]]);if($!==0)return $}return Ge(y.length,I.length)})(i.mapValue,e.mapValue);default:throw xe()}}function Tp(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ge(i,e);const r=$i(i),s=$i(e),a=Ge(r.seconds,s.seconds);return a!==0?a:Ge(r.nanos,s.nanos)}function Sp(i,e){const r=i.values||[],s=e.values||[];for(let a=0;a<r.length&&a<s.length;++a){const c=so(r[a],s[a]);if(c)return c}return Ge(r.length,s.length)}function oo(i){return eh(i)}function eh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(r){const s=$i(r);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(r){return ds(r).toBase64()})(i.bytesValue):"referenceValue"in i?(function(r){return Ee.fromName(r).toString()})(i.referenceValue):"geoPointValue"in i?(function(r){return`geo(${r.latitude},${r.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(r){let s="[",a=!0;for(const c of r.values||[])a?a=!1:s+=",",s+=eh(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(r){const s=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const f of s)c?c=!1:a+=",",a+=`${f}:${eh(r.fields[f])}`;return a+"}"})(i.mapValue):xe()}function th(i){return!!i&&"integerValue"in i}function Th(i){return!!i&&"arrayValue"in i}function Ip(i){return!!i&&"nullValue"in i}function Ap(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ll(i){return!!i&&"mapValue"in i}function Q_(i){var e,r;return((r=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Jo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return fo(i.mapValue.fields,((r,s)=>e.mapValue.fields[r]=Jo(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Jo(i.arrayValue.values[r]);return e}return Object.assign({},i)}function G_(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class ir{constructor(e){this.value=e}static empty(){return new ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!Ll(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jo(r)}setAll(e){let r=rn.emptyPath(),s={},a=[];e.forEach(((f,m)=>{if(!r.isImmediateParentOf(m)){const y=this.getFieldsMap(r);this.applyChanges(y,s,a),s={},a=[],r=m.popLast()}f?s[m.lastSegment()]=Jo(f):a.push(m.lastSegment())}));const c=this.getFieldsMap(r);this.applyChanges(c,s,a)}delete(e){const r=this.field(e.popLast());Ll(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=r.mapValue.fields[e.get(s)];Ll(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,s){fo(r,((a,c)=>e[a]=c));for(const a of s)delete e[a]}clone(){return new ir(Jo(this.value))}}function Im(i){const e=[];return fo(i.fields,((r,s)=>{const a=new rn([r]);if(Ll(s)){const c=Im(s.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)})),new _r(e)}class yn{constructor(e,r,s,a,c,f,m){this.key=e,this.documentType=r,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new yn(e,0,Oe.min(),Oe.min(),Oe.min(),ir.empty(),0)}static newFoundDocument(e,r,s,a){return new yn(e,1,r,Oe.min(),s,a,0)}static newNoDocument(e,r){return new yn(e,2,r,Oe.min(),Oe.min(),ir.empty(),0)}static newUnknownDocument(e,r){return new yn(e,3,r,Oe.min(),Oe.min(),ir.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wl{constructor(e,r){this.position=e,this.inclusive=r}}function Rp(i,e,r){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],f=i.position[a];if(c.field.isKeyField()?s=Ee.comparator(Ee.fromName(f.referenceValue),r.key):s=so(f,r.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Cp(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!Or(i.position[r],e.position[r]))return!1;return!0}class ql{constructor(e,r="asc"){this.field=e,this.dir=r}}function Y_(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Am{}class Bt extends Am{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,s):new J_(e,r,s):r==="array-contains"?new t0(e,s):r==="in"?new n0(e,s):r==="not-in"?new r0(e,s):r==="array-contains-any"?new i0(e,s):new Bt(e,r,s)}static createKeyFieldInFilter(e,r,s){return r==="in"?new Z_(e,s):new e0(e,s)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(so(r,this.value)):r!==null&&ps(this.value)===ps(r)&&this.matchesComparison(so(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mr extends Am{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Mr(e,r)}matches(e){return Rm(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Rm(i){return i.op==="and"}function Cm(i){return X_(i)&&Rm(i)}function X_(i){for(const e of i.filters)if(e instanceof Mr)return!1;return!0}function nh(i){if(i instanceof Bt)return i.field.canonicalString()+i.op.toString()+oo(i.value);if(Cm(i))return i.filters.map((e=>nh(e))).join(",");{const e=i.filters.map((r=>nh(r))).join(",");return`${i.op}(${e})`}}function km(i,e){return i instanceof Bt?(function(s,a){return a instanceof Bt&&s.op===a.op&&s.field.isEqual(a.field)&&Or(s.value,a.value)})(i,e):i instanceof Mr?(function(s,a){return a instanceof Mr&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((c,f,m)=>c&&km(f,a.filters[m])),!0):!1})(i,e):void xe()}function Pm(i){return i instanceof Bt?(function(r){return`${r.field.canonicalString()} ${r.op} ${oo(r.value)}`})(i):i instanceof Mr?(function(r){return r.op.toString()+" {"+r.getFilters().map(Pm).join(" ,")+"}"})(i):"Filter"}class J_ extends Bt{constructor(e,r,s){super(e,r,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const r=Ee.comparator(e.key,this.key);return this.matchesComparison(r)}}class Z_ extends Bt{constructor(e,r){super(e,"in",r),this.keys=xm("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class e0 extends Bt{constructor(e,r){super(e,"not-in",r),this.keys=xm("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function xm(i,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((s=>Ee.fromName(s.referenceValue)))}class t0 extends Bt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Th(r)&&ua(r.arrayValue,this.value)}}class n0 extends Bt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ua(this.value.arrayValue,r)}}class r0 extends Bt{constructor(e,r){super(e,"not-in",r)}matches(e){if(ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!ua(this.value.arrayValue,r)}}class i0 extends Bt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Th(r)||!r.arrayValue.values)&&r.arrayValue.values.some((s=>ua(this.value.arrayValue,s)))}}class s0{constructor(e,r=null,s=[],a=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=m,this.ue=null}}function kp(i,e=null,r=[],s=[],a=null,c=null,f=null){return new s0(i,e,r,s,a,c,f)}function Sh(i){const e=Me(i);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((s=>nh(s))).join(","),r+="|ob:",r+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Jl(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((s=>oo(s))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((s=>oo(s))).join(",")),e.ue=r}return e.ue}function Ih(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<i.orderBy.length;r++)if(!Y_(i.orderBy[r],e.orderBy[r]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let r=0;r<i.filters.length;r++)if(!km(i.filters[r],e.filters[r]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Cp(i.startAt,e.startAt)&&Cp(i.endAt,e.endAt)}function rh(i){return Ee.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Zl{constructor(e,r=null,s=[],a=[],c=null,f="F",m=null,y=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function o0(i,e,r,s,a,c,f,m){return new Zl(i,e,r,s,a,c,f,m)}function Vm(i){return new Zl(i)}function Pp(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function a0(i){return i.collectionGroup!==null}function Zo(i){const e=Me(i);if(e.ce===null){e.ce=[];const r=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),r.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new sn(rn.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((w=>{w.isInequality()&&(m=m.add(w.field))}))})),m})(e).forEach((c=>{r.has(c.canonicalString())||c.isKeyField()||e.ce.push(new ql(c,s))})),r.has(rn.keyField().canonicalString())||e.ce.push(new ql(rn.keyField(),s))}return e.ce}function Dr(i){const e=Me(i);return e.le||(e.le=l0(e,Zo(i))),e.le}function l0(i,e){if(i.limitType==="F")return kp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new ql(a.field,c)}));const r=i.endAt?new Wl(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Wl(i.startAt.position,i.startAt.inclusive):null;return kp(i.path,i.collectionGroup,e,i.filters,i.limit,r,s)}}function ih(i,e,r){return new Zl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,r,i.startAt,i.endAt)}function eu(i,e){return Ih(Dr(i),Dr(e))&&i.limitType===e.limitType}function Nm(i){return`${Sh(Dr(i))}|lt:${i.limitType}`}function Xs(i){return`Query(target=${(function(r){let s=r.path.canonicalString();return r.collectionGroup!==null&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map((a=>Pm(a))).join(", ")}]`),Jl(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map((a=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(a))).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map((a=>oo(a))).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map((a=>oo(a))).join(",")),`Target(${s})`})(Dr(i))}; limitType=${i.limitType})`}function tu(i,e){return e.isFoundDocument()&&(function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ee.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,a){for(const c of Zo(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0})(i,e)&&(function(s,a){return!(s.startAt&&!(function(f,m,y){const w=Rp(f,m,y);return f.inclusive?w<=0:w<0})(s.startAt,Zo(s),a)||s.endAt&&!(function(f,m,y){const w=Rp(f,m,y);return f.inclusive?w>=0:w>0})(s.endAt,Zo(s),a))})(i,e)}function u0(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Dm(i){return(e,r)=>{let s=!1;for(const a of Zo(i)){const c=c0(a,e,r);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function c0(i,e,r){const s=i.field.isKeyField()?Ee.comparator(e.key,r.key):(function(c,f,m){const y=f.data.field(c),w=m.data.field(c);return y!==null&&w!==null?so(y,w):xe()})(i.field,e,r);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return xe()}}class po{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,r){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,r]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[r]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,((r,s)=>{for(const[a,c]of s)e(a,c)}))}isEmpty(){return Tm(this.inner)}size(){return this.innerSize}}const h0=new St(Ee.comparator);function ai(){return h0}const Lm=new St(Ee.comparator);function Yo(...i){let e=Lm;for(const r of i)e=e.insert(r.key,r);return e}function Om(i){let e=Lm;return i.forEach(((r,s)=>e=e.insert(r,s.overlayedDocument))),e}function cs(){return ea()}function Mm(){return ea()}function ea(){return new po((i=>i.toString()),((i,e)=>i.isEqual(e)))}const f0=new St(Ee.comparator),d0=new sn(Ee.comparator);function $e(...i){let e=d0;for(const r of i)e=e.add(r);return e}const p0=new sn(Ge);function m0(){return p0}function Ah(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$l(e)?"-0":e}}function Fm(i){return{integerValue:""+i}}function g0(i,e){return q_(e)?Fm(e):Ah(i,e)}class nu{constructor(){this._=void 0}}function y0(i,e,r){return i instanceof Hl?(function(a,c){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&wh(c)&&(c=Eh(c)),c&&(f.fields.__previous_value__=c),{mapValue:f}})(r,e):i instanceof ca?bm(i,e):i instanceof ha?Bm(i,e):(function(a,c){const f=jm(a,c),m=xp(f)+xp(a.Pe);return th(f)&&th(a.Pe)?Fm(m):Ah(a.serializer,m)})(i,e)}function v0(i,e,r){return i instanceof ca?bm(i,e):i instanceof ha?Bm(i,e):r}function jm(i,e){return i instanceof Kl?(function(s){return th(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Hl extends nu{}class ca extends nu{constructor(e){super(),this.elements=e}}function bm(i,e){const r=Um(e);for(const s of i.elements)r.some((a=>Or(a,s)))||r.push(s);return{arrayValue:{values:r}}}class ha extends nu{constructor(e){super(),this.elements=e}}function Bm(i,e){let r=Um(e);for(const s of i.elements)r=r.filter((a=>!Or(a,s)));return{arrayValue:{values:r}}}class Kl extends nu{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function xp(i){return xt(i.integerValue||i.doubleValue)}function Um(i){return Th(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function _0(i,e){return i.field.isEqual(e.field)&&(function(s,a){return s instanceof ca&&a instanceof ca||s instanceof ha&&a instanceof ha?io(s.elements,a.elements,Or):s instanceof Kl&&a instanceof Kl?Or(s.Pe,a.Pe):s instanceof Hl&&a instanceof Hl})(i.transform,e.transform)}class w0{constructor(e,r){this.version=e,this.transformResults=r}}class ii{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ii}static exists(e){return new ii(void 0,e)}static updateTime(e){return new ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ol(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class ru{}function zm(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Wm(i.key,ii.none()):new ma(i.key,i.data,ii.none());{const r=i.data,s=ir.empty();let a=new sn(rn.comparator);for(let c of e.fields)if(!a.has(c)){let f=r.field(c);f===null&&c.length>1&&(c=c.popLast(),f=r.field(c)),f===null?s.delete(c):s.set(c,f),a=a.add(c)}return new ms(i.key,s,new _r(a.toArray()),ii.none())}}function E0(i,e,r){i instanceof ma?(function(a,c,f){const m=a.value.clone(),y=Np(a.fieldTransforms,c,f.transformResults);m.setAll(y),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,r):i instanceof ms?(function(a,c,f){if(!Ol(a.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Np(a.fieldTransforms,c,f.transformResults),y=c.data;y.setAll($m(a)),y.setAll(m),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(i,e,r):(function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,r)}function ta(i,e,r,s){return i instanceof ma?(function(c,f,m,y){if(!Ol(c.precondition,f))return m;const w=c.value.clone(),I=Dp(c.fieldTransforms,y,f);return w.setAll(I),f.convertToFoundDocument(f.version,w).setHasLocalMutations(),null})(i,e,r,s):i instanceof ms?(function(c,f,m,y){if(!Ol(c.precondition,f))return m;const w=Dp(c.fieldTransforms,y,f),I=f.data;return I.setAll($m(c)),I.setAll(w),f.convertToFoundDocument(f.version,I).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((k=>k.field)))})(i,e,r,s):(function(c,f,m){return Ol(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,r)}function T0(i,e){let r=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=jm(s.transform,a||null);c!=null&&(r===null&&(r=ir.empty()),r.set(s.field,c))}return r||null}function Vp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&io(s,a,((c,f)=>_0(c,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ma extends ru{constructor(e,r,s,a=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ms extends ru{constructor(e,r,s,a,c=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function $m(i){const e=new Map;return i.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const s=i.data.field(r);e.set(r,s)}})),e}function Np(i,e,r){const s=new Map;nt(i.length===r.length);for(let a=0;a<r.length;a++){const c=i[a],f=c.transform,m=e.data.field(c.field);s.set(c.field,v0(f,m,r[a]))}return s}function Dp(i,e,r){const s=new Map;for(const a of i){const c=a.transform,f=r.data.field(a.field);s.set(a.field,y0(c,f,e))}return s}class Wm extends ru{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S0 extends ru{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class I0{constructor(e,r,s,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&E0(c,e,s[a])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=ta(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=ta(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=Mm();return this.mutations.forEach((a=>{const c=e.get(a.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=r.has(a.key)?null:m;const y=zm(f,m);y!==null&&s.set(a.key,y),f.isValidDocument()||f.convertToNoDocument(Oe.min())})),s}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),$e())}isEqual(e){return this.batchId===e.batchId&&io(this.mutations,e.mutations,((r,s)=>Vp(r,s)))&&io(this.baseMutations,e.baseMutations,((r,s)=>Vp(r,s)))}}class Rh{constructor(e,r,s,a){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=a}static from(e,r,s){nt(e.mutations.length===s.length);let a=(function(){return f0})();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new Rh(e,r,s,a)}}class A0{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class R0{constructor(e,r){this.count=e,this.unchangedNames=r}}var Mt,qe;function C0(i){switch(i){default:return xe();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function qm(i){if(i===void 0)return oi("GRPC error has no .code"),X.UNKNOWN;switch(i){case Mt.OK:return X.OK;case Mt.CANCELLED:return X.CANCELLED;case Mt.UNKNOWN:return X.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return X.INTERNAL;case Mt.UNAVAILABLE:return X.UNAVAILABLE;case Mt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Mt.NOT_FOUND:return X.NOT_FOUND;case Mt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Mt.ABORTED:return X.ABORTED;case Mt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Mt.DATA_LOSS:return X.DATA_LOSS;default:return xe()}}(qe=Mt||(Mt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";function k0(){return new TextEncoder}const P0=new hs([4294967295,4294967295],0);function Lp(i){const e=k0().encode(i),r=new pm;return r.update(e),new Uint8Array(r.digest())}function Op(i){const e=new DataView(i.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new hs([r,s],0),new hs([a,c],0)]}class Ch{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new Xo(`Invalid padding: ${r}`);if(s<0)throw new Xo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Xo(`Invalid hash count: ${s}`);if(e.length===0&&r!==0)throw new Xo(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=hs.fromNumber(this.Ie)}Ee(e,r,s){let a=e.add(r.multiply(hs.fromNumber(s)));return a.compare(P0)===1&&(a=new hs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Lp(e),[s,a]=Op(r);for(let c=0;c<this.hashCount;c++){const f=this.Ee(s,a,c);if(!this.de(f))return!1}return!0}static create(e,r,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Ch(c,a,r);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.Ie===0)return;const r=Lp(e),[s,a]=Op(r);for(let c=0;c<this.hashCount;c++){const f=this.Ee(s,a,c);this.Ae(f)}}Ae(e){const r=Math.floor(e/8),s=e%8;this.bitmap[r]|=1<<s}}class Xo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class iu{constructor(e,r,s,a,c){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const a=new Map;return a.set(e,ga.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new iu(Oe.min(),a,new St(Ge),ai(),$e())}}class ga{constructor(e,r,s,a,c){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new ga(s,r,$e(),$e(),$e())}}class Ml{constructor(e,r,s,a){this.Re=e,this.removedTargetIds=r,this.key=s,this.Ve=a}}class Hm{constructor(e,r){this.targetId=e,this.me=r}}class Km{constructor(e,r,s=on.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=a}}class Mp{constructor(){this.fe=0,this.ge=jp(),this.pe=on.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=$e(),r=$e(),s=$e();return this.ge.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:s=s.add(a);break;default:xe()}})),new ga(this.pe,this.ye,e,r,s)}Ce(){this.we=!1,this.ge=jp()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,nt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class x0{constructor(e){this.Le=e,this.Be=new Map,this.ke=ai(),this.qe=Fp(),this.Qe=new St(Ge)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const s=this.Ge(r);switch(e.state){case 0:this.ze(r)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),s.De(e.resumeToken));break;default:xe()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((s,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,s=e.me.count,a=this.Je(r);if(a){const c=a.target;if(rh(c))if(s===0){const f=new Ee(c.path);this.Ue(r,f,yn.newNoDocument(f,Oe.min()))}else nt(s===1);else{const f=this.Ye(r);if(f!==s){const m=this.Ze(e),y=m?this.Xe(m,e,f):1;if(y!==0){this.je(r);const w=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,w)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=r;let f,m;try{f=ds(s).toUint8Array()}catch(y){if(y instanceof Sm)return ro("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Ch(f,a,c)}catch(y){return ro(y instanceof Xo?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.Ie===0?null:m}Xe(e,r,s){return r.me.count===s-this.nt(e,r.targetId)?0:2}nt(e,r){const s=this.Le.getRemoteKeysForTarget(r);let a=0;return s.forEach((c=>{const f=this.Le.tt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.Ue(r,c,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((c,f)=>{const m=this.Je(f);if(m){if(c.current&&rh(m.target)){const y=new Ee(m.target.path);this.ke.get(y)!==null||this.it(f,y)||this.Ue(f,y,yn.newNoDocument(y,e))}c.be&&(r.set(f,c.ve()),c.Ce())}}));let s=$e();this.qe.forEach(((c,f)=>{let m=!0;f.forEachWhile((y=>{const w=this.Je(y);return!w||w.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.ke.forEach(((c,f)=>f.setReadTime(e)));const a=new iu(e,r,this.Qe,this.ke,s);return this.ke=ai(),this.qe=Fp(),this.Qe=new St(Ge),a}$e(e,r){if(!this.ze(e))return;const s=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,s),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,s){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),s&&(this.ke=this.ke.insert(r,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Mp,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new sn(Ge),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||me("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Mp),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Fp(){return new St(Ee.comparator)}function jp(){return new St(Ee.comparator)}const V0={asc:"ASCENDING",desc:"DESCENDING"},N0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D0={and:"AND",or:"OR"};class L0{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function sh(i,e){return i.useProto3Json||Jl(e)?e:{value:e}}function Ql(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qm(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function O0(i,e){return Ql(i,e.toTimestamp())}function Lr(i){return nt(!!i),Oe.fromTimestamp((function(r){const s=$i(r);return new Ut(s.seconds,s.nanos)})(i))}function kh(i,e){return oh(i,e).canonicalString()}function oh(i,e){const r=(function(a){return new wt(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?r:r.child(e)}function Gm(i){const e=wt.fromString(i);return nt(eg(e)),e}function ah(i,e){return kh(i.databaseId,e.path)}function zc(i,e){const r=Gm(e);if(r.get(1)!==i.databaseId.projectId)throw new ve(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new ve(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new Ee(Xm(r))}function Ym(i,e){return kh(i.databaseId,e)}function M0(i){const e=Gm(i);return e.length===4?wt.emptyPath():Xm(e)}function lh(i){return new wt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Xm(i){return nt(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function bp(i,e,r){return{name:ah(i,e),fields:r.value.mapValue.fields}}function F0(i,e){let r;if("targetChange"in e){e.targetChange;const s=(function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:xe()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(w,I){return w.useProto3Json?(nt(I===void 0||typeof I=="string"),on.fromBase64String(I||"")):(nt(I===void 0||I instanceof Buffer||I instanceof Uint8Array),on.fromUint8Array(I||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(w){const I=w.code===void 0?X.UNKNOWN:qm(w.code);return new ve(I,w.message||"")})(f);r=new Km(s,a,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=zc(i,s.document.name),c=Lr(s.document.updateTime),f=s.document.createTime?Lr(s.document.createTime):Oe.min(),m=new ir({mapValue:{fields:s.document.fields}}),y=yn.newFoundDocument(a,c,f,m),w=s.targetIds||[],I=s.removedTargetIds||[];r=new Ml(w,I,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=zc(i,s.document),c=s.readTime?Lr(s.readTime):Oe.min(),f=yn.newNoDocument(a,c),m=s.removedTargetIds||[];r=new Ml([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=zc(i,s.document),c=s.removedTargetIds||[];r=new Ml([],c,a,null)}else{if(!("filter"in e))return xe();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,f=new R0(a,c),m=s.targetId;r=new Hm(m,f)}}return r}function j0(i,e){let r;if(e instanceof ma)r={update:bp(i,e.key,e.value)};else if(e instanceof Wm)r={delete:ah(i,e.key)};else if(e instanceof ms)r={update:bp(i,e.key,e.data),updateMask:K0(e.fieldMask)};else{if(!(e instanceof S0))return xe();r={verify:ah(i,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((s=>(function(c,f){const m=f.transform;if(m instanceof Hl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ca)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ha)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Kl)return{fieldPath:f.field.canonicalString(),increment:m.Pe};throw xe()})(0,s)))),e.precondition.isNone||(r.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:O0(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:xe()})(i,e.precondition)),r}function b0(i,e){return i&&i.length>0?(nt(e!==void 0),i.map((r=>(function(a,c){let f=a.updateTime?Lr(a.updateTime):Lr(c);return f.isEqual(Oe.min())&&(f=Lr(c)),new w0(f,a.transformResults||[])})(r,e)))):[]}function B0(i,e){return{documents:[Ym(i,e.path)]}}function U0(i,e){const r={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=Ym(i,a);const c=(function(w){if(w.length!==0)return Zm(Mr.create(w,"and"))})(e.filters);c&&(r.structuredQuery.where=c);const f=(function(w){if(w.length!==0)return w.map((I=>(function(j){return{field:Js(j.field),direction:W0(j.dir)}})(I)))})(e.orderBy);f&&(r.structuredQuery.orderBy=f);const m=sh(i,e.limit);return m!==null&&(r.structuredQuery.limit=m),e.startAt&&(r.structuredQuery.startAt=(function(w){return{before:w.inclusive,values:w.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(w){return{before:!w.inclusive,values:w.position}})(e.endAt)),{_t:r,parent:a}}function z0(i){let e=M0(i.parent);const r=i.structuredQuery,s=r.from?r.from.length:0;let a=null;if(s>0){nt(s===1);const I=r.from[0];I.allDescendants?a=I.collectionId:e=e.child(I.collectionId)}let c=[];r.where&&(c=(function(k){const j=Jm(k);return j instanceof Mr&&Cm(j)?j.getFilters():[j]})(r.where));let f=[];r.orderBy&&(f=(function(k){return k.map((j=>(function(Z){return new ql(Zs(Z.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Z.direction))})(j)))})(r.orderBy));let m=null;r.limit&&(m=(function(k){let j;return j=typeof k=="object"?k.value:k,Jl(j)?null:j})(r.limit));let y=null;r.startAt&&(y=(function(k){const j=!!k.before,$=k.values||[];return new Wl($,j)})(r.startAt));let w=null;return r.endAt&&(w=(function(k){const j=!k.before,$=k.values||[];return new Wl($,j)})(r.endAt)),o0(e,a,f,c,m,"F",y,w)}function $0(i,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Jm(i){return i.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=Zs(r.unaryFilter.field);return Bt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Zs(r.unaryFilter.field);return Bt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Zs(r.unaryFilter.field);return Bt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Zs(r.unaryFilter.field);return Bt.create(f,"!=",{nullValue:"NULL_VALUE"});default:return xe()}})(i):i.fieldFilter!==void 0?(function(r){return Bt.create(Zs(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}})(r.fieldFilter.op),r.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(r){return Mr.create(r.compositeFilter.filters.map((s=>Jm(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return xe()}})(r.compositeFilter.op))})(i):xe()}function W0(i){return V0[i]}function q0(i){return N0[i]}function H0(i){return D0[i]}function Js(i){return{fieldPath:i.canonicalString()}}function Zs(i){return rn.fromServerFormat(i.fieldPath)}function Zm(i){return i instanceof Bt?(function(r){if(r.op==="=="){if(Ap(r.value))return{unaryFilter:{field:Js(r.field),op:"IS_NAN"}};if(Ip(r.value))return{unaryFilter:{field:Js(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Ap(r.value))return{unaryFilter:{field:Js(r.field),op:"IS_NOT_NAN"}};if(Ip(r.value))return{unaryFilter:{field:Js(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Js(r.field),op:q0(r.op),value:r.value}}})(i):i instanceof Mr?(function(r){const s=r.getFilters().map((a=>Zm(a)));return s.length===1?s[0]:{compositeFilter:{op:H0(r.op),filters:s}}})(i):xe()}function K0(i){const e=[];return i.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function eg(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Fi{constructor(e,r,s,a,c=Oe.min(),f=Oe.min(),m=on.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Q0{constructor(e){this.ct=e}}function G0(i){const e=z0({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ih(e,e.limit,"L"):e}class Y0{constructor(){this.un=new X0}addToCollectionParentIndex(e,r){return this.un.add(r),G.resolve()}getCollectionParents(e,r){return G.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return G.resolve()}deleteFieldIndex(e,r){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,r){return G.resolve()}getDocumentsMatchingTarget(e,r){return G.resolve(null)}getIndexType(e,r){return G.resolve(0)}getFieldIndexes(e,r){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,r){return G.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,r){return G.resolve(zi.min())}updateCollectionGroup(e,r,s){return G.resolve()}updateIndexEntries(e,r){return G.resolve()}}class X0{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),a=this.index[r]||new sn(wt.comparator),c=!a.has(s);return this.index[r]=a.add(s),c}has(e){const r=e.lastSegment(),s=e.popLast(),a=this.index[r];return a&&a.has(s)}getEntries(e){return(this.index[e]||new sn(wt.comparator)).toArray()}}class ao{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ao(0)}static kn(){return new ao(-1)}}class J0{constructor(){this.changes=new po((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return s!==void 0?G.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Z0{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class ew{constructor(e,r,s,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(s!==null&&ta(s.mutation,a,_r.empty(),Ut.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((s=>this.getLocalViewOfDocuments(e,s,$e()).next((()=>s))))}getLocalViewOfDocuments(e,r,s=$e()){const a=cs();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,s).next((c=>{let f=Yo();return c.forEach(((m,y)=>{f=f.insert(m,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,r){const s=cs();return this.populateOverlays(e,s,r).next((()=>this.computeViews(e,r,s,$e())))}populateOverlays(e,r,s){const a=[];return s.forEach((c=>{r.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((f,m)=>{r.set(f,m)}))}))}computeViews(e,r,s,a){let c=ai();const f=ea(),m=(function(){return ea()})();return r.forEach(((y,w)=>{const I=s.get(w.key);a.has(w.key)&&(I===void 0||I.mutation instanceof ms)?c=c.insert(w.key,w):I!==void 0?(f.set(w.key,I.mutation.getFieldMask()),ta(I.mutation,w,I.mutation.getFieldMask(),Ut.now())):f.set(w.key,_r.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((w,I)=>f.set(w,I))),r.forEach(((w,I)=>{var k;return m.set(w,new Z0(I,(k=f.get(w))!==null&&k!==void 0?k:null))})),m)))}recalculateAndSaveOverlays(e,r){const s=ea();let a=new St(((f,m)=>f-m)),c=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((f=>{for(const m of f)m.keys().forEach((y=>{const w=r.get(y);if(w===null)return;let I=s.get(y)||_r.empty();I=m.applyToLocalView(w,I),s.set(y,I);const k=(a.get(m.batchId)||$e()).add(y);a=a.insert(m.batchId,k)}))})).next((()=>{const f=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),w=y.key,I=y.value,k=Mm();I.forEach((j=>{if(!c.has(j)){const $=zm(r.get(j),s.get(j));$!==null&&k.set(j,$),c=c.add(j)}})),f.push(this.documentOverlayCache.saveOverlays(e,w,k))}return G.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,r,s,a){return(function(f){return Ee.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):a0(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,a):this.getDocumentsMatchingCollectionQuery(e,r,s,a)}getNextDocuments(e,r,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,a).next((c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,a-c.size):G.resolve(cs());let m=-1,y=c;return f.next((w=>G.forEach(w,((I,k)=>(m<k.largestBatchId&&(m=k.largestBatchId),c.get(I)?G.resolve():this.remoteDocumentCache.getEntry(e,I).next((j=>{y=y.insert(I,j)}))))).next((()=>this.populateOverlays(e,w,c))).next((()=>this.computeViews(e,y,w,$e()))).next((I=>({batchId:m,changes:Om(I)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ee(r)).next((s=>{let a=Yo();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,s,a){const c=r.collectionGroup;let f=Yo();return this.indexManager.getCollectionParents(e,c).next((m=>G.forEach(m,(y=>{const w=(function(k,j){return new Zl(j,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(r,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,w,s,a).next((I=>{I.forEach(((k,j)=>{f=f.insert(k,j)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,r,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,c,a)))).next((f=>{c.forEach(((y,w)=>{const I=w.getKey();f.get(I)===null&&(f=f.insert(I,yn.newInvalidDocument(I)))}));let m=Yo();return f.forEach(((y,w)=>{const I=c.get(y);I!==void 0&&ta(I.mutation,w,_r.empty(),Ut.now()),tu(r,w)&&(m=m.insert(y,w))})),m}))}}class tw{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return G.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:Lr(a.createTime)}})(r)),G.resolve()}getNamedQuery(e,r){return G.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:G0(a.bundledQuery),readTime:Lr(a.readTime)}})(r)),G.resolve()}}class nw{constructor(){this.overlays=new St(Ee.comparator),this.Ir=new Map}getOverlay(e,r){return G.resolve(this.overlays.get(r))}getOverlays(e,r){const s=cs();return G.forEach(r,(a=>this.getOverlay(e,a).next((c=>{c!==null&&s.set(a,c)})))).next((()=>s))}saveOverlays(e,r,s){return s.forEach(((a,c)=>{this.ht(e,r,c)})),G.resolve()}removeOverlaysForBatchId(e,r,s){const a=this.Ir.get(s);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Ir.delete(s)),G.resolve()}getOverlaysForCollection(e,r,s){const a=cs(),c=r.length+1,f=new Ee(r.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,w=y.getKey();if(!r.isPrefixOf(w.path))break;w.path.length===c&&y.largestBatchId>s&&a.set(y.getKey(),y)}return G.resolve(a)}getOverlaysForCollectionGroup(e,r,s,a){let c=new St(((w,I)=>w-I));const f=this.overlays.getIterator();for(;f.hasNext();){const w=f.getNext().value;if(w.getKey().getCollectionGroup()===r&&w.largestBatchId>s){let I=c.get(w.largestBatchId);I===null&&(I=cs(),c=c.insert(w.largestBatchId,I)),I.set(w.getKey(),w)}}const m=cs(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((w,I)=>m.set(w,I))),!(m.size()>=a)););return G.resolve(m)}ht(e,r,s){const a=this.overlays.get(s.key);if(a!==null){const f=this.Ir.get(a.largestBatchId).delete(s.key);this.Ir.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new A0(r,s));let c=this.Ir.get(r);c===void 0&&(c=$e(),this.Ir.set(r,c)),this.Ir.set(r,c.add(s.key))}}class rw{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,G.resolve()}}class Ph{constructor(){this.Tr=new sn(Qt.Er),this.dr=new sn(Qt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const s=new Qt(e,r);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,r){e.forEach((s=>this.addReference(s,r)))}removeReference(e,r){this.Vr(new Qt(e,r))}mr(e,r){e.forEach((s=>this.removeReference(s,r)))}gr(e){const r=new Ee(new wt([])),s=new Qt(r,e),a=new Qt(r,e+1),c=[];return this.dr.forEachInRange([s,a],(f=>{this.Vr(f),c.push(f.key)})),c}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Ee(new wt([])),s=new Qt(r,e),a=new Qt(r,e+1);let c=$e();return this.dr.forEachInRange([s,a],(f=>{c=c.add(f.key)})),c}containsKey(e){const r=new Qt(e,0),s=this.Tr.firstAfterOrEqual(r);return s!==null&&e.isEqual(s.key)}}class Qt{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Ee.comparator(e.key,r.key)||Ge(e.wr,r.wr)}static Ar(e,r){return Ge(e.wr,r.wr)||Ee.comparator(e.key,r.key)}}class iw{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new sn(Qt.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,s,a){const c=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new I0(c,r,s,a);this.mutationQueue.push(f);for(const m of a)this.br=this.br.add(new Qt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return G.resolve(f)}lookupMutationBatch(e,r){return G.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const s=r+1,a=this.vr(s),c=a<0?0:a;return G.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new Qt(r,0),a=new Qt(r,Number.POSITIVE_INFINITY),c=[];return this.br.forEachInRange([s,a],(f=>{const m=this.Dr(f.wr);c.push(m)})),G.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new sn(Ge);return r.forEach((a=>{const c=new Qt(a,0),f=new Qt(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([c,f],(m=>{s=s.add(m.wr)}))})),G.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,a=s.length+1;let c=s;Ee.isDocumentKey(c)||(c=c.child(""));const f=new Qt(new Ee(c),0);let m=new sn(Ge);return this.br.forEachWhile((y=>{const w=y.key.path;return!!s.isPrefixOf(w)&&(w.length===a&&(m=m.add(y.wr)),!0)}),f),G.resolve(this.Cr(m))}Cr(e){const r=[];return e.forEach((s=>{const a=this.Dr(s);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){nt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return G.forEach(r.mutations,(a=>{const c=new Qt(a.key,r.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=s}))}On(e){}containsKey(e,r){const s=new Qt(r,0),a=this.br.firstAfterOrEqual(s);return G.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class sw{constructor(e){this.Mr=e,this.docs=(function(){return new St(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,a=this.docs.get(s),c=a?a.size:0,f=this.Mr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return G.resolve(s?s.document.mutableCopy():yn.newInvalidDocument(r))}getEntries(e,r){let s=ai();return r.forEach((a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():yn.newInvalidDocument(a))})),G.resolve(s)}getDocumentsMatchingQuery(e,r,s,a){let c=ai();const f=r.path,m=new Ee(f.child("")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:w,value:{document:I}}=y.getNext();if(!f.isPrefixOf(w.path))break;w.path.length>f.length+1||U_(B_(I),s)<=0||(a.has(I.key)||tu(r,I))&&(c=c.insert(I.key,I.mutableCopy()))}return G.resolve(c)}getAllFromCollectionGroup(e,r,s,a){xe()}Or(e,r){return G.forEach(this.docs,(s=>r(s)))}newChangeBuffer(e){return new ow(this)}getSize(e){return G.resolve(this.size)}}class ow extends J0{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(s)})),G.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}class aw{constructor(e){this.persistence=e,this.Nr=new po((r=>Sh(r)),Ih),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ph,this.targetCount=0,this.kr=ao.Bn()}forEachTarget(e,r){return this.Nr.forEach(((s,a)=>r(a))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Lr&&(this.Lr=r),G.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new ao(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,G.resolve()}updateTargetData(e,r){return this.Kn(r),G.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,r,s){let a=0;const c=[];return this.Nr.forEach(((f,m)=>{m.sequenceNumber<=r&&s.get(m.targetId)===null&&(this.Nr.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),G.waitFor(c).next((()=>a))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,r){const s=this.Nr.get(r)||null;return G.resolve(s)}addMatchingKeys(e,r,s){return this.Br.Rr(r,s),G.resolve()}removeMatchingKeys(e,r,s){this.Br.mr(r,s);const a=this.persistence.referenceDelegate,c=[];return a&&r.forEach((f=>{c.push(a.markPotentiallyOrphaned(e,f))})),G.waitFor(c)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),G.resolve()}getMatchingKeysForTargetId(e,r){const s=this.Br.yr(r);return G.resolve(s)}containsKey(e,r){return G.resolve(this.Br.containsKey(r))}}class lw{constructor(e,r){this.qr={},this.overlays={},this.Qr=new _h(0),this.Kr=!1,this.Kr=!0,this.$r=new rw,this.referenceDelegate=e(this),this.Ur=new aw(this),this.indexManager=new Y0,this.remoteDocumentCache=(function(a){return new sw(a)})((s=>this.referenceDelegate.Wr(s))),this.serializer=new Q0(r),this.Gr=new tw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new nw,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.qr[e.toKey()];return s||(s=new iw(r,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,s){me("MemoryPersistence","Starting transaction:",e);const a=new uw(this.Qr.next());return this.referenceDelegate.zr(),s(a).next((c=>this.referenceDelegate.jr(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Hr(e,r){return G.or(Object.values(this.qr).map((s=>()=>s.containsKey(e,r))))}}class uw extends $_{constructor(e){super(),this.currentSequenceNumber=e}}class xh{constructor(e){this.persistence=e,this.Jr=new Ph,this.Yr=null}static Zr(e){return new xh(e)}get Xr(){if(this.Yr)return this.Yr;throw xe()}addReference(e,r,s){return this.Jr.addReference(s,r),this.Xr.delete(s.toString()),G.resolve()}removeReference(e,r,s){return this.Jr.removeReference(s,r),this.Xr.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),G.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((c=>this.Xr.add(c.toString())))})).next((()=>s.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,(s=>{const a=Ee.fromPath(s);return this.ei(e,a).next((c=>{c||r.removeEntry(a,Oe.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((s=>{s?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return G.or([()=>G.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Vh{constructor(e,r,s,a){this.targetId=e,this.fromCache=r,this.$i=s,this.Ui=a}static Wi(e,r){let s=$e(),a=$e();for(const c of r.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Vh(e,r.fromCache,s,a)}}class cw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class hw{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return fv()?8:W_(cv())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,s,a){const c={result:null};return this.Yi(e,r).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.Zi(e,r,a,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new cw;return this.Xi(e,r,f).next((m=>{if(c.result=m,this.zi)return this.es(e,r,f,m.size)}))})).next((()=>c.result))}es(e,r,s,a){return s.documentReadCount<this.ji?(Qo()<=Ke.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Xs(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Qo()<=Ke.DEBUG&&me("QueryEngine","Query:",Xs(r),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Hi*a?(Qo()<=Ke.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Xs(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dr(r))):G.resolve())}Yi(e,r){if(Pp(r))return G.resolve(null);let s=Dr(r);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=ih(r,null,"F"),s=Dr(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const f=$e(...c);return this.Ji.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((y=>{const w=this.ts(r,m);return this.ns(r,w,f,y.readTime)?this.Yi(e,ih(r,null,"F")):this.rs(e,w,r,y)}))))})))))}Zi(e,r,s,a){return Pp(r)||a.isEqual(Oe.min())?G.resolve(null):this.Ji.getDocuments(e,s).next((c=>{const f=this.ts(r,c);return this.ns(r,f,s,a)?G.resolve(null):(Qo()<=Ke.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Xs(r)),this.rs(e,f,r,b_(a,-1)).next((m=>m)))}))}ts(e,r){let s=new sn(Dm(e));return r.forEach(((a,c)=>{tu(e,c)&&(s=s.add(c))})),s}ns(e,r,s,a){if(e.limit===null)return!1;if(s.size!==r.size)return!0;const c=e.limitType==="F"?r.last():r.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Xi(e,r,s){return Qo()<=Ke.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Xs(r)),this.Ji.getDocumentsMatchingQuery(e,r,zi.min(),s)}rs(e,r,s,a){return this.Ji.getDocumentsMatchingQuery(e,s,a).next((c=>(r.forEach((f=>{c=c.insert(f.key,f)})),c)))}}class fw{constructor(e,r,s,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new St(Ge),this._s=new po((c=>Sh(c)),Ih),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ew(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function dw(i,e,r,s){return new fw(i,e,r,s)}async function tg(i,e){const r=Me(i);return await r.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return r.mutationQueue.getAllMutationBatches(s).next((c=>(a=c,r.ls(e),r.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],m=[];let y=$e();for(const w of a){f.push(w.batchId);for(const I of w.mutations)y=y.add(I.key)}for(const w of c){m.push(w.batchId);for(const I of w.mutations)y=y.add(I.key)}return r.localDocuments.getDocuments(s,y).next((w=>({hs:w,removedBatchIds:f,addedBatchIds:m})))}))}))}function pw(i,e){const r=Me(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),c=r.cs.newChangeBuffer({trackRemovals:!0});return(function(m,y,w,I){const k=w.batch,j=k.keys();let $=G.resolve();return j.forEach((Z=>{$=$.next((()=>I.getEntry(y,Z))).next((ne=>{const H=w.docVersions.get(Z);nt(H!==null),ne.version.compareTo(H)<0&&(k.applyToRemoteDocument(ne,w),ne.isValidDocument()&&(ne.setReadTime(w.commitVersion),I.addEntry(ne)))}))})),$.next((()=>m.mutationQueue.removeMutationBatch(y,k)))})(r,s,e,c).next((()=>c.apply(s))).next((()=>r.mutationQueue.performConsistencyCheck(s))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let y=$e();for(let w=0;w<m.mutationResults.length;++w)m.mutationResults[w].transformResults.length>0&&(y=y.add(m.batch.mutations[w].key));return y})(e)))).next((()=>r.localDocuments.getDocuments(s,a)))}))}function ng(i){const e=Me(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function mw(i,e){const r=Me(i),s=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const m=[];e.targetChanges.forEach(((I,k)=>{const j=a.get(k);if(!j)return;m.push(r.Ur.removeMatchingKeys(c,I.removedDocuments,k).next((()=>r.Ur.addMatchingKeys(c,I.addedDocuments,k))));let $=j.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(k)!==null?$=$.withResumeToken(on.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):I.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(I.resumeToken,s)),a=a.insert(k,$),(function(ne,H,ie){return ne.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=3e8?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(j,$,I)&&m.push(r.Ur.updateTargetData(c,$))}));let y=ai(),w=$e();if(e.documentUpdates.forEach((I=>{e.resolvedLimboDocuments.has(I)&&m.push(r.persistence.referenceDelegate.updateLimboDocument(c,I))})),m.push(gw(c,f,e.documentUpdates).next((I=>{y=I.Ps,w=I.Is}))),!s.isEqual(Oe.min())){const I=r.Ur.getLastRemoteSnapshotVersion(c).next((k=>r.Ur.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(I)}return G.waitFor(m).next((()=>f.apply(c))).next((()=>r.localDocuments.getLocalViewOfDocuments(c,y,w))).next((()=>y))})).then((c=>(r.os=a,c)))}function gw(i,e,r){let s=$e(),a=$e();return r.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let f=ai();return r.forEach(((m,y)=>{const w=c.get(m);y.isFoundDocument()!==w.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual(Oe.min())?(e.removeEntry(m,y.readTime),f=f.insert(m,y)):!w.isValidDocument()||y.version.compareTo(w.version)>0||y.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(y),f=f.insert(m,y)):me("LocalStore","Ignoring outdated watch update for ",m,". Current version:",w.version," Watch version:",y.version)})),{Ps:f,Is:a}}))}function yw(i,e){const r=Me(i);return r.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function vw(i,e){const r=Me(i);return r.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return r.Ur.getTargetData(s,e).next((c=>c?(a=c,G.resolve(a)):r.Ur.allocateTargetId(s).next((f=>(a=new Fi(e,f,"TargetPurposeListen",s.currentSequenceNumber),r.Ur.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=r.os.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(s.targetId,s),r._s.set(e,s.targetId)),s}))}async function uh(i,e,r){const s=Me(i),a=s.os.get(e),c=r?"readwrite":"readwrite-primary";try{r||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!pa(f))throw f;me("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.os=s.os.remove(e),s._s.delete(a.target)}function Bp(i,e,r){const s=Me(i);let a=Oe.min(),c=$e();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,w,I){const k=Me(y),j=k._s.get(I);return j!==void 0?G.resolve(k.os.get(j)):k.Ur.getTargetData(w,I)})(s,f,Dr(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(f,m.targetId).next((y=>{c=y}))})).next((()=>s.ss.getDocumentsMatchingQuery(f,e,r?a:Oe.min(),r?c:$e()))).next((m=>(_w(s,u0(e),m),{documents:m,Ts:c})))))}function _w(i,e,r){let s=i.us.get(e)||Oe.min();r.forEach(((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.us.set(e,s)}class Up{constructor(){this.activeTargetIds=m0()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ww{constructor(){this.so=new Up,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,s){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Up,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ew{_o(e){}shutdown(){}}class zp{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Vl=null;function $c(){return Vl===null?Vl=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vl++,"0x"+Vl.toString(16)}const Tw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sw{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const mn="WebChannelConnection";class Iw extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+r.host,this.vo=`projects/${a}/databases/${c}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}get Fo(){return!1}Mo(r,s,a,c,f){const m=$c(),y=this.xo(r,s.toUriEncodedString());me("RestConnection",`Sending RPC '${r}' ${m}:`,y,a);const w={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(w,c,f),this.No(r,y,w,a).then((I=>(me("RestConnection",`Received RPC '${r}' ${m}: `,I),I)),(I=>{throw ro("RestConnection",`RPC '${r}' ${m} failed with error: `,I,"url: ",y,"request:",a),I}))}Lo(r,s,a,c,f,m){return this.Mo(r,s,a,c,f)}Oo(r,s,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ho})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((c,f)=>r[f]=c)),a&&a.headers.forEach(((c,f)=>r[f]=c))}xo(r,s){const a=Tw[r];return`${this.Do}/v1/${s}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,s,a){const c=$c();return new Promise(((f,m)=>{const y=new mm;y.setWithCredentials(!0),y.listenOnce(gm.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Dl.NO_ERROR:const I=y.getResponseJson();me(mn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(I)),f(I);break;case Dl.TIMEOUT:me(mn,`RPC '${e}' ${c} timed out`),m(new ve(X.DEADLINE_EXCEEDED,"Request time out"));break;case Dl.HTTP_ERROR:const k=y.getStatus();if(me(mn,`RPC '${e}' ${c} failed with status:`,k,"response text:",y.getResponseText()),k>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const $=j?.error;if($&&$.status&&$.message){const Z=(function(H){const ie=H.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ie)>=0?ie:X.UNKNOWN})($.status);m(new ve(Z,$.message))}else m(new ve(X.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new ve(X.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{me(mn,`RPC '${e}' ${c} completed.`)}}));const w=JSON.stringify(a);me(mn,`RPC '${e}' ${c} sending request:`,a),y.send(r,"POST",w,s,15)}))}Bo(e,r,s){const a=$c(),c=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=_m(),m=vm(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(y.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Oo(y.initMessageHeaders,r,s),y.encodeInitMessageHeaders=!0;const I=c.join("");me(mn,`Creating RPC '${e}' stream ${a}: ${I}`,y);const k=f.createWebChannel(I,y);let j=!1,$=!1;const Z=new Sw({Io:H=>{$?me(mn,`Not sending because RPC '${e}' stream ${a} is closed:`,H):(j||(me(mn,`Opening RPC '${e}' stream ${a} transport.`),k.open(),j=!0),me(mn,`RPC '${e}' stream ${a} sending:`,H),k.send(H))},To:()=>k.close()}),ne=(H,ie,De)=>{H.listen(ie,(oe=>{try{De(oe)}catch(Ve){setTimeout((()=>{throw Ve}),0)}}))};return ne(k,Go.EventType.OPEN,(()=>{$||(me(mn,`RPC '${e}' stream ${a} transport opened.`),Z.yo())})),ne(k,Go.EventType.CLOSE,(()=>{$||($=!0,me(mn,`RPC '${e}' stream ${a} transport closed`),Z.So())})),ne(k,Go.EventType.ERROR,(H=>{$||($=!0,ro(mn,`RPC '${e}' stream ${a} transport errored:`,H),Z.So(new ve(X.UNAVAILABLE,"The operation could not be completed")))})),ne(k,Go.EventType.MESSAGE,(H=>{var ie;if(!$){const De=H.data[0];nt(!!De);const oe=De,Ve=oe.error||((ie=oe[0])===null||ie===void 0?void 0:ie.error);if(Ve){me(mn,`RPC '${e}' stream ${a} received error:`,Ve);const ot=Ve.status;let Be=(function(A){const C=Mt[A];if(C!==void 0)return qm(C)})(ot),P=Ve.message;Be===void 0&&(Be=X.INTERNAL,P="Unknown error status: "+ot+" with message "+Ve.message),$=!0,Z.So(new ve(Be,P)),k.close()}else me(mn,`RPC '${e}' stream ${a} received:`,De),Z.bo(De)}})),ne(m,ym.STAT_EVENT,(H=>{H.stat===Zc.PROXY?me(mn,`RPC '${e}' stream ${a} detected buffering proxy`):H.stat===Zc.NOPROXY&&me(mn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{Z.wo()}),0),Z}}function Wc(){return typeof document<"u"?document:null}function su(i){return new L0(i,!0)}class rg{constructor(e,r,s=1e3,a=1.5,c=6e4){this.ui=e,this.timerId=r,this.ko=s,this.qo=a,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-s);a>0&&me("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class ig{constructor(e,r,s,a,c,f,m,y){this.ui=e,this.Ho=s,this.Jo=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new rg(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===X.RESOURCE_EXHAUSTED?(oi(r.toString()),oi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.Yo===r&&this.P_(s,a)}),(s=>{e((()=>{const a=new ve(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(a)}))}))}P_(e,r){const s=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{s((()=>this.listener.Eo()))})),this.stream.Ro((()=>{s((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{s((()=>this.I_(a)))})),this.stream.onMessage((a=>{s((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Aw extends ig{constructor(e,r,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,a,f),this.serializer=c}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=F0(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Oe.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Oe.min():f.readTime?Lr(f.readTime):Oe.min()})(e);return this.listener.d_(r,s)}A_(e){const r={};r.database=lh(this.serializer),r.addTarget=(function(c,f){let m;const y=f.target;if(m=rh(y)?{documents:B0(c,y)}:{query:U0(c,y)._t},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=Qm(c,f.resumeToken);const w=sh(c,f.expectedCount);w!==null&&(m.expectedCount=w)}else if(f.snapshotVersion.compareTo(Oe.min())>0){m.readTime=Ql(c,f.snapshotVersion.toTimestamp());const w=sh(c,f.expectedCount);w!==null&&(m.expectedCount=w)}return m})(this.serializer,e);const s=$0(this.serializer,e);s&&(r.labels=s),this.a_(r)}R_(e){const r={};r.database=lh(this.serializer),r.removeTarget=e,this.a_(r)}}class Rw extends ig{constructor(e,r,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,a,f),this.serializer=c}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return nt(!!e.streamToken),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=b0(e.writeResults,e.commitTime),s=Lr(e.commitTime);return this.listener.g_(s,r)}p_(){const e={};e.database=lh(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((s=>j0(this.serializer,s)))};this.a_(r)}}class Cw extends class{}{constructor(e,r,s,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new ve(X.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Mo(e,oh(r,s),a,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(X.UNKNOWN,c.toString())}))}Lo(e,r,s,a,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Lo(e,oh(r,s),a,f,m,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ve(X.UNKNOWN,f.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class kw{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(oi(r),this.D_=!1):me("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class Pw{constructor(e,r,s,a,c){this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=c,this.k_._o((f=>{s.enqueueAndForget((async()=>{gs(this)&&(me("RemoteStore","Restarting streams for network reachability change."),await(async function(y){const w=Me(y);w.L_.add(4),await ya(w),w.q_.set("Unknown"),w.L_.delete(4),await ou(w)})(this))}))})),this.q_=new kw(s,a)}}async function ou(i){if(gs(i))for(const e of i.B_)await e(!0)}async function ya(i){for(const e of i.B_)await e(!1)}function sg(i,e){const r=Me(i);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Oh(r)?Lh(r):mo(r).r_()&&Dh(r,e))}function Nh(i,e){const r=Me(i),s=mo(r);r.N_.delete(e),s.r_()&&og(r,e),r.N_.size===0&&(s.r_()?s.o_():gs(r)&&r.q_.set("Unknown"))}function Dh(i,e){if(i.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const r=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}mo(i).A_(e)}function og(i,e){i.Q_.xe(e),mo(i).R_(e)}function Lh(i){i.Q_=new x0({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>i.N_.get(e)||null,tt:()=>i.datastore.serializer.databaseId}),mo(i).start(),i.q_.v_()}function Oh(i){return gs(i)&&!mo(i).n_()&&i.N_.size>0}function gs(i){return Me(i).L_.size===0}function ag(i){i.Q_=void 0}async function xw(i){i.q_.set("Online")}async function Vw(i){i.N_.forEach(((e,r)=>{Dh(i,e)}))}async function Nw(i,e){ag(i),Oh(i)?(i.q_.M_(e),Lh(i)):i.q_.set("Unknown")}async function Dw(i,e,r){if(i.q_.set("Online"),e instanceof Km&&e.state===2&&e.cause)try{await(async function(a,c){const f=c.cause;for(const m of c.targetIds)a.N_.has(m)&&(await a.remoteSyncer.rejectListen(m,f),a.N_.delete(m),a.Q_.removeTarget(m))})(i,e)}catch(s){me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Gl(i,s)}else if(e instanceof Ml?i.Q_.Ke(e):e instanceof Hm?i.Q_.He(e):i.Q_.We(e),!r.isEqual(Oe.min()))try{const s=await ng(i.localStore);r.compareTo(s)>=0&&await(function(c,f){const m=c.Q_.rt(f);return m.targetChanges.forEach(((y,w)=>{if(y.resumeToken.approximateByteSize()>0){const I=c.N_.get(w);I&&c.N_.set(w,I.withResumeToken(y.resumeToken,f))}})),m.targetMismatches.forEach(((y,w)=>{const I=c.N_.get(y);if(!I)return;c.N_.set(y,I.withResumeToken(on.EMPTY_BYTE_STRING,I.snapshotVersion)),og(c,y);const k=new Fi(I.target,y,w,I.sequenceNumber);Dh(c,k)})),c.remoteSyncer.applyRemoteEvent(m)})(i,r)}catch(s){me("RemoteStore","Failed to raise snapshot:",s),await Gl(i,s)}}async function Gl(i,e,r){if(!pa(e))throw e;i.L_.add(1),await ya(i),i.q_.set("Offline"),r||(r=()=>ng(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{me("RemoteStore","Retrying IndexedDB access"),await r(),i.L_.delete(1),await ou(i)}))}function lg(i,e){return e().catch((r=>Gl(i,r,e)))}async function au(i){const e=Me(i),r=Wi(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Lw(e);)try{const a=await yw(e.localStore,s);if(a===null){e.O_.length===0&&r.o_();break}s=a.batchId,Ow(e,a)}catch(a){await Gl(e,a)}ug(e)&&cg(e)}function Lw(i){return gs(i)&&i.O_.length<10}function Ow(i,e){i.O_.push(e);const r=Wi(i);r.r_()&&r.V_&&r.m_(e.mutations)}function ug(i){return gs(i)&&!Wi(i).n_()&&i.O_.length>0}function cg(i){Wi(i).start()}async function Mw(i){Wi(i).p_()}async function Fw(i){const e=Wi(i);for(const r of i.O_)e.m_(r.mutations)}async function jw(i,e,r){const s=i.O_.shift(),a=Rh.from(s,e,r);await lg(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await au(i)}async function bw(i,e){e&&Wi(i).V_&&await(async function(s,a){if((function(f){return C0(f)&&f!==X.ABORTED})(a.code)){const c=s.O_.shift();Wi(s).s_(),await lg(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a))),await au(s)}})(i,e),ug(i)&&cg(i)}async function $p(i,e){const r=Me(i);r.asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials");const s=gs(r);r.L_.add(3),await ya(r),s&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await ou(r)}async function Bw(i,e){const r=Me(i);e?(r.L_.delete(2),await ou(r)):e||(r.L_.add(2),await ya(r),r.q_.set("Unknown"))}function mo(i){return i.K_||(i.K_=(function(r,s,a){const c=Me(r);return c.w_(),new Aw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Eo:xw.bind(null,i),Ro:Vw.bind(null,i),mo:Nw.bind(null,i),d_:Dw.bind(null,i)}),i.B_.push((async e=>{e?(i.K_.s_(),Oh(i)?Lh(i):i.q_.set("Unknown")):(await i.K_.stop(),ag(i))}))),i.K_}function Wi(i){return i.U_||(i.U_=(function(r,s,a){const c=Me(r);return c.w_(),new Rw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Mw.bind(null,i),mo:bw.bind(null,i),f_:Fw.bind(null,i),g_:jw.bind(null,i)}),i.B_.push((async e=>{e?(i.U_.s_(),await au(i)):(await i.U_.stop(),i.O_.length>0&&(me("RemoteStore",`Stopping write stream with ${i.O_.length} pending writes`),i.O_=[]))}))),i.U_}class Mh{constructor(e,r,s,a,c){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,a,c){const f=Date.now()+s,m=new Mh(e,r,f,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fh(i,e){if(oi("AsyncQueue",`${e}: ${i}`),pa(i))return new ve(X.UNAVAILABLE,`${e}: ${i}`);throw i}class no{constructor(e){this.comparator=e?(r,s)=>e(r,s)||Ee.comparator(r.key,s.key):(r,s)=>Ee.comparator(r.key,s.key),this.keyedMap=Yo(),this.sortedSet=new St(this.comparator)}static emptySet(e){return new no(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,s)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof no)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const s=new no;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}class Wp{constructor(){this.W_=new St(Ee.comparator)}track(e){const r=e.doc.key,s=this.W_.get(r);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(r,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(r,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(r):e.type===1&&s.type===2?this.W_=this.W_.insert(r,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):xe():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,s)=>{e.push(s)})),e}}class lo{constructor(e,r,s,a,c,f,m,y,w){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=w}static fromInitialDocuments(e,r,s,a,c){const f=[];return r.forEach((m=>{f.push({type:0,doc:m})})),new lo(e,r,no.emptySet(r),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==s[a].type||!r[a].doc.isEqual(s[a].doc))return!1;return!0}}class Uw{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class zw{constructor(){this.queries=qp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,s){const a=Me(r),c=a.queries;a.queries=qp(),c.forEach(((f,m)=>{for(const y of m.j_)y.onError(s)}))})(this,new ve(X.ABORTED,"Firestore shutting down"))}}function qp(){return new po((i=>Nm(i)),eu)}async function $w(i,e){const r=Me(i);let s=3;const a=e.query;let c=r.queries.get(a);c?!c.H_()&&e.J_()&&(s=2):(c=new Uw,s=e.J_()?0:1);try{switch(s){case 0:c.z_=await r.onListen(a,!0);break;case 1:c.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(f){const m=Fh(f,`Initialization of query '${Xs(e.query)}' failed`);return void e.onError(m)}r.queries.set(a,c),c.j_.push(e),e.Z_(r.onlineState),c.z_&&e.X_(c.z_)&&jh(r)}async function Ww(i,e){const r=Me(i),s=e.query;let a=3;const c=r.queries.get(s);if(c){const f=c.j_.indexOf(e);f>=0&&(c.j_.splice(f,1),c.j_.length===0?a=e.J_()?0:1:!c.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}}function qw(i,e){const r=Me(i);let s=!1;for(const a of e){const c=a.query,f=r.queries.get(c);if(f){for(const m of f.j_)m.X_(a)&&(s=!0);f.z_=a}}s&&jh(r)}function Hw(i,e,r){const s=Me(i),a=s.queries.get(e);if(a)for(const c of a.j_)c.onError(r);s.queries.delete(e)}function jh(i){i.Y_.forEach((e=>{e.next()}))}var ch,Hp;(Hp=ch||(ch={})).ea="default",Hp.Cache="cache";class Kw{constructor(e,r,s){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new lo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const s=r!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ch.Cache}}class hg{constructor(e){this.key=e}}class fg{constructor(e){this.key=e}}class Qw{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=$e(),this.mutatedKeys=$e(),this.Aa=Dm(e),this.Ra=new no(this.Aa)}get Va(){return this.Ta}ma(e,r){const s=r?r.fa:new Wp,a=r?r.Ra:this.Ra;let c=r?r.mutatedKeys:this.mutatedKeys,f=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,w=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((I,k)=>{const j=a.get(I),$=tu(this.query,k)?k:null,Z=!!j&&this.mutatedKeys.has(j.key),ne=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let H=!1;j&&$?j.data.isEqual($.data)?Z!==ne&&(s.track({type:3,doc:$}),H=!0):this.ga(j,$)||(s.track({type:2,doc:$}),H=!0,(y&&this.Aa($,y)>0||w&&this.Aa($,w)<0)&&(m=!0)):!j&&$?(s.track({type:0,doc:$}),H=!0):j&&!$&&(s.track({type:1,doc:j}),H=!0,(y||w)&&(m=!0)),H&&($?(f=f.add($),c=ne?c.add(I):c.delete(I)):(f=f.delete(I),c=c.delete(I)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const I=this.query.limitType==="F"?f.last():f.first();f=f.delete(I.key),c=c.delete(I.key),s.track({type:1,doc:I})}return{Ra:f,fa:s,ns:m,mutatedKeys:c}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,a){const c=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const f=e.fa.G_();f.sort(((I,k)=>(function($,Z){const ne=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return ne($)-ne(Z)})(I.type,k.type)||this.Aa(I.doc,k.doc))),this.pa(s),a=a!=null&&a;const m=r&&!a?this.ya():[],y=this.da.size===0&&this.current&&!a?1:0,w=y!==this.Ea;return this.Ea=y,f.length!==0||w?{snapshot:new lo(this.query,e.Ra,c,f,e.mutatedKeys,y===0,w,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Wp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=$e(),this.Ra.forEach((s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))}));const r=[];return e.forEach((s=>{this.da.has(s)||r.push(new fg(s))})),this.da.forEach((s=>{e.has(s)||r.push(new hg(s))})),r}ba(e){this.Ta=e.Ts,this.da=$e();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return lo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Gw{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class Yw{constructor(e){this.key=e,this.va=!1}}class Xw{constructor(e,r,s,a,c,f){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Ca={},this.Fa=new po((m=>Nm(m)),eu),this.Ma=new Map,this.xa=new Set,this.Oa=new St(Ee.comparator),this.Na=new Map,this.La=new Ph,this.Ba={},this.ka=new Map,this.qa=ao.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Jw(i,e,r=!0){const s=vg(i);let a;const c=s.Fa.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Da()):a=await dg(s,e,r,!0),a}async function Zw(i,e){const r=vg(i);await dg(r,e,!0,!1)}async function dg(i,e,r,s){const a=await vw(i.localStore,Dr(e)),c=a.targetId,f=i.sharedClientState.addLocalQueryTarget(c,r);let m;return s&&(m=await eE(i,e,c,f==="current",a.resumeToken)),i.isPrimaryClient&&r&&sg(i.remoteStore,a),m}async function eE(i,e,r,s,a){i.Ka=(k,j,$)=>(async function(ne,H,ie,De){let oe=H.view.ma(ie);oe.ns&&(oe=await Bp(ne.localStore,H.query,!1).then((({documents:P})=>H.view.ma(P,oe))));const Ve=De&&De.targetChanges.get(H.targetId),ot=De&&De.targetMismatches.get(H.targetId)!=null,Be=H.view.applyChanges(oe,ne.isPrimaryClient,Ve,ot);return Qp(ne,H.targetId,Be.wa),Be.snapshot})(i,k,j,$);const c=await Bp(i.localStore,e,!0),f=new Qw(e,c.Ts),m=f.ma(c.documents),y=ga.createSynthesizedTargetChangeForCurrentChange(r,s&&i.onlineState!=="Offline",a),w=f.applyChanges(m,i.isPrimaryClient,y);Qp(i,r,w.wa);const I=new Gw(e,r,f);return i.Fa.set(e,I),i.Ma.has(r)?i.Ma.get(r).push(e):i.Ma.set(r,[e]),w.snapshot}async function tE(i,e,r){const s=Me(i),a=s.Fa.get(e),c=s.Ma.get(a.targetId);if(c.length>1)return s.Ma.set(a.targetId,c.filter((f=>!eu(f,e)))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await uh(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),r&&Nh(s.remoteStore,a.targetId),hh(s,a.targetId)})).catch(da)):(hh(s,a.targetId),await uh(s.localStore,a.targetId,!0))}async function nE(i,e){const r=Me(i),s=r.Fa.get(e),a=r.Ma.get(s.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),Nh(r.remoteStore,s.targetId))}async function rE(i,e,r){const s=cE(i);try{const a=await(function(f,m){const y=Me(f),w=Ut.now(),I=m.reduce((($,Z)=>$.add(Z.key)),$e());let k,j;return y.persistence.runTransaction("Locally write mutations","readwrite",($=>{let Z=ai(),ne=$e();return y.cs.getEntries($,I).next((H=>{Z=H,Z.forEach(((ie,De)=>{De.isValidDocument()||(ne=ne.add(ie))}))})).next((()=>y.localDocuments.getOverlayedDocuments($,Z))).next((H=>{k=H;const ie=[];for(const De of m){const oe=T0(De,k.get(De.key).overlayedDocument);oe!=null&&ie.push(new ms(De.key,oe,Im(oe.value.mapValue),ii.exists(!0)))}return y.mutationQueue.addMutationBatch($,w,ie,m)})).next((H=>{j=H;const ie=H.applyToLocalDocumentSet(k,ne);return y.documentOverlayCache.saveOverlays($,H.batchId,ie)}))})).then((()=>({batchId:j.batchId,changes:Om(k)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(f,m,y){let w=f.Ba[f.currentUser.toKey()];w||(w=new St(Ge)),w=w.insert(m,y),f.Ba[f.currentUser.toKey()]=w})(s,a.batchId,r),await va(s,a.changes),await au(s.remoteStore)}catch(a){const c=Fh(a,"Failed to persist write");r.reject(c)}}async function pg(i,e){const r=Me(i);try{const s=await mw(r.localStore,e);e.targetChanges.forEach(((a,c)=>{const f=r.Na.get(c);f&&(nt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.va=!0:a.modifiedDocuments.size>0?nt(f.va):a.removedDocuments.size>0&&(nt(f.va),f.va=!1))})),await va(r,s,e)}catch(s){await da(s)}}function Kp(i,e,r){const s=Me(i);if(s.isPrimaryClient&&r===0||!s.isPrimaryClient&&r===1){const a=[];s.Fa.forEach(((c,f)=>{const m=f.view.Z_(e);m.snapshot&&a.push(m.snapshot)})),(function(f,m){const y=Me(f);y.onlineState=m;let w=!1;y.queries.forEach(((I,k)=>{for(const j of k.j_)j.Z_(m)&&(w=!0)})),w&&jh(y)})(s.eventManager,e),a.length&&s.Ca.d_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function iE(i,e,r){const s=Me(i);s.sharedClientState.updateQueryState(e,"rejected",r);const a=s.Na.get(e),c=a&&a.key;if(c){let f=new St(Ee.comparator);f=f.insert(c,yn.newNoDocument(c,Oe.min()));const m=$e().add(c),y=new iu(Oe.min(),new Map,new St(Ge),f,m);await pg(s,y),s.Oa=s.Oa.remove(c),s.Na.delete(e),bh(s)}else await uh(s.localStore,e,!1).then((()=>hh(s,e,r))).catch(da)}async function sE(i,e){const r=Me(i),s=e.batch.batchId;try{const a=await pw(r.localStore,e);gg(r,s,null),mg(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),await va(r,a)}catch(a){await da(a)}}async function oE(i,e,r){const s=Me(i);try{const a=await(function(f,m){const y=Me(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(w=>{let I;return y.mutationQueue.lookupMutationBatch(w,m).next((k=>(nt(k!==null),I=k.keys(),y.mutationQueue.removeMutationBatch(w,k)))).next((()=>y.mutationQueue.performConsistencyCheck(w))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(w,I,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,I))).next((()=>y.localDocuments.getDocuments(w,I)))}))})(s.localStore,e);gg(s,e,r),mg(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),await va(s,a)}catch(a){await da(a)}}function mg(i,e){(i.ka.get(e)||[]).forEach((r=>{r.resolve()})),i.ka.delete(e)}function gg(i,e,r){const s=Me(i);let a=s.Ba[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(r?c.reject(r):c.resolve(),a=a.remove(e)),s.Ba[s.currentUser.toKey()]=a}}function hh(i,e,r=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Ma.get(e))i.Fa.delete(s),r&&i.Ca.$a(s,r);i.Ma.delete(e),i.isPrimaryClient&&i.La.gr(e).forEach((s=>{i.La.containsKey(s)||yg(i,s)}))}function yg(i,e){i.xa.delete(e.path.canonicalString());const r=i.Oa.get(e);r!==null&&(Nh(i.remoteStore,r),i.Oa=i.Oa.remove(e),i.Na.delete(r),bh(i))}function Qp(i,e,r){for(const s of r)s instanceof hg?(i.La.addReference(s.key,e),aE(i,s)):s instanceof fg?(me("SyncEngine","Document no longer in limbo: "+s.key),i.La.removeReference(s.key,e),i.La.containsKey(s.key)||yg(i,s.key)):xe()}function aE(i,e){const r=e.key,s=r.path.canonicalString();i.Oa.get(r)||i.xa.has(s)||(me("SyncEngine","New document in limbo: "+r),i.xa.add(s),bh(i))}function bh(i){for(;i.xa.size>0&&i.Oa.size<i.maxConcurrentLimboResolutions;){const e=i.xa.values().next().value;i.xa.delete(e);const r=new Ee(wt.fromString(e)),s=i.qa.next();i.Na.set(s,new Yw(r)),i.Oa=i.Oa.insert(r,s),sg(i.remoteStore,new Fi(Dr(Vm(r.path)),s,"TargetPurposeLimboResolution",_h.oe))}}async function va(i,e,r){const s=Me(i),a=[],c=[],f=[];s.Fa.isEmpty()||(s.Fa.forEach(((m,y)=>{f.push(s.Ka(y,e,r).then((w=>{var I;if((w||r)&&s.isPrimaryClient){const k=w?!w.fromCache:(I=r?.targetChanges.get(y.targetId))===null||I===void 0?void 0:I.current;s.sharedClientState.updateQueryState(y.targetId,k?"current":"not-current")}if(w){a.push(w);const k=Vh.Wi(y.targetId,w);c.push(k)}})))})),await Promise.all(f),s.Ca.d_(a),await(async function(y,w){const I=Me(y);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>G.forEach(w,(j=>G.forEach(j.$i,($=>I.persistence.referenceDelegate.addReference(k,j.targetId,$))).next((()=>G.forEach(j.Ui,($=>I.persistence.referenceDelegate.removeReference(k,j.targetId,$)))))))))}catch(k){if(!pa(k))throw k;me("LocalStore","Failed to update sequence numbers: "+k)}for(const k of w){const j=k.targetId;if(!k.fromCache){const $=I.os.get(j),Z=$.snapshotVersion,ne=$.withLastLimboFreeSnapshotVersion(Z);I.os=I.os.insert(j,ne)}}})(s.localStore,c))}async function lE(i,e){const r=Me(i);if(!r.currentUser.isEqual(e)){me("SyncEngine","User change. New user:",e.toKey());const s=await tg(r.localStore,e);r.currentUser=e,(function(c,f){c.ka.forEach((m=>{m.forEach((y=>{y.reject(new ve(X.CANCELLED,f))}))})),c.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await va(r,s.hs)}}function uE(i,e){const r=Me(i),s=r.Na.get(e);if(s&&s.va)return $e().add(s.key);{let a=$e();const c=r.Ma.get(e);if(!c)return a;for(const f of c){const m=r.Fa.get(f);a=a.unionWith(m.view.Va)}return a}}function vg(i){const e=Me(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=pg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iE.bind(null,e),e.Ca.d_=qw.bind(null,e.eventManager),e.Ca.$a=Hw.bind(null,e.eventManager),e}function cE(i){const e=Me(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oE.bind(null,e),e}class Yl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=su(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return dw(this.persistence,new hw,e.initialUser,this.serializer)}Ga(e){return new lw(xh.Zr,this.serializer)}Wa(e){return new ww}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yl.provider={build:()=>new Yl};class fh{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Kp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=lE.bind(null,this.syncEngine),await Bw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new zw})()}createDatastore(e){const r=su(e.databaseInfo.databaseId),s=(function(c){return new Iw(c)})(e.databaseInfo);return(function(c,f,m,y){return new Cw(c,f,m,y)})(e.authCredentials,e.appCheckCredentials,s,r)}createRemoteStore(e){return(function(s,a,c,f,m){return new Pw(s,a,c,f,m)})(this.localStore,this.datastore,e.asyncQueue,(r=>Kp(this.syncEngine,r,0)),(function(){return zp.D()?new zp:new Ew})())}createSyncEngine(e,r){return(function(a,c,f,m,y,w,I){const k=new Xw(a,c,f,m,y,w);return I&&(k.Qa=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const c=Me(a);me("RemoteStore","RemoteStore shutting down."),c.L_.add(5),await ya(c),c.k_.shutdown(),c.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}fh.provider={build:()=>new fh};class hE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):oi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}class fE{constructor(e,r,s,a,c){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=a,this.user=gn.UNAUTHENTICATED,this.clientId=Em.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{me("FirestoreClient","Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(me("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const s=Fh(r,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function qc(i,e){i.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider");const r=i.configuration;await e.initialize(r);let s=r.initialUser;i.setCredentialChangeListener((async a=>{s.isEqual(a)||(await tg(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Gp(i,e){i.asyncQueue.verifyOperationInProgress();const r=await dE(i);me("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,i.configuration),i.setCredentialChangeListener((s=>$p(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,a)=>$p(e.remoteStore,a))),i._onlineComponents=e}async function dE(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){me("FirestoreClient","Using user provided OfflineComponentProvider");try{await qc(i,i._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===X.FAILED_PRECONDITION||a.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;ro("Error using user provided cache. Falling back to memory cache: "+r),await qc(i,new Yl)}}else me("FirestoreClient","Using default OfflineComponentProvider"),await qc(i,new Yl);return i._offlineComponents}async function _g(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(me("FirestoreClient","Using user provided OnlineComponentProvider"),await Gp(i,i._uninitializedComponentsProvider._online)):(me("FirestoreClient","Using default OnlineComponentProvider"),await Gp(i,new fh))),i._onlineComponents}function pE(i){return _g(i).then((e=>e.syncEngine))}async function mE(i){const e=await _g(i),r=e.eventManager;return r.onListen=Jw.bind(null,e.syncEngine),r.onUnlisten=tE.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Zw.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=nE.bind(null,e.syncEngine),r}function gE(i,e,r={}){const s=new Bi;return i.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,y,w){const I=new hE({next:j=>{I.Za(),f.enqueueAndForget((()=>Ww(c,k))),j.fromCache&&y.source==="server"?w.reject(new ve(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(j)},error:j=>w.reject(j)}),k=new Kw(m,I,{includeMetadataChanges:!0,_a:!0});return $w(c,k)})(await mE(i),i.asyncQueue,e,r,s))),s.promise}function wg(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const Yp=new Map;function Eg(i,e,r){if(!r)throw new ve(X.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function yE(i,e,r,s){if(e===!0&&s===!0)throw new ve(X.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function Xp(i){if(!Ee.isDocumentKey(i))throw new ve(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Jp(i){if(Ee.isDocumentKey(i))throw new ve(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Bh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":xe()}function fa(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ve(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Bh(i);throw new ve(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return i}class Zp{constructor(e){var r,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wg((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ve(X.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ve(X.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ve(X.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lu{constructor(e,r,s,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zp(e),e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new x_;switch(s.type){case"firstParty":return new L_(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ve(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const s=Yp.get(r);s&&(me("ComponentProvider","Removing Datastore"),Yp.delete(r),s.terminate())})(this),Promise.resolve()}}function vE(i,e,r,s={}){var a;const c=(i=fa(i,lu))._getSettings(),f=`${e}:${r}`;if(c.host!=="firestore.googleapis.com"&&c.host!==f&&ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:f,ssl:!1})),s.mockUserToken){let m,y;if(typeof s.mockUserToken=="string")m=s.mockUserToken,y=gn.MOCK_USER;else{m=uv(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new ve(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new gn(w)}i._authCredentials=new V_(new wm(m,y))}}class uu{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new uu(this.firestore,e,this._query)}}class sr{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ui(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sr(this.firestore,e,this._key)}}class Ui extends uu{constructor(e,r,s){super(e,r,Vm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sr(this.firestore,null,new Ee(e))}withConverter(e){return new Ui(this.firestore,e,this._path)}}function _a(i,e,...r){if(i=ra(i),Eg("collection","path",e),i instanceof lu){const s=wt.fromString(e,...r);return Jp(s),new Ui(i,null,s)}{if(!(i instanceof sr||i instanceof Ui))throw new ve(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(wt.fromString(e,...r));return Jp(s),new Ui(i.firestore,null,s)}}function Tg(i,e,...r){if(i=ra(i),arguments.length===1&&(e=Em.newId()),Eg("doc","path",e),i instanceof lu){const s=wt.fromString(e,...r);return Xp(s),new sr(i,null,new Ee(s))}{if(!(i instanceof sr||i instanceof Ui))throw new ve(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(wt.fromString(e,...r));return Xp(s),new sr(i.firestore,i instanceof Ui?i.converter:null,new Ee(s))}}class em{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new rg(this,"async_queue_retry"),this.Vu=()=>{const s=Wc();s&&me("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const r=Wc();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Wc();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new Bi;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pa(e))throw e;me("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((s=>{this.Eu=s,this.du=!1;const a=(function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m})(s);throw oi("INTERNAL UNHANDLED ERROR: ",a),s})).then((s=>(this.du=!1,s))))));return this.mu=r,r}enqueueAfterDelay(e,r,s){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=Mh.createAndSchedule(this,e,r,s,(c=>this.yu(c)));return this.Tu.push(a),a}fu(){this.Eu&&xe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,s)=>r.targetTimeMs-s.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}class Uh extends lu{constructor(e,r,s,a){super(e,r,s,a),this.type="firestore",this._queue=new em,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new em(e),this._firestoreClient=void 0,await e}}}function _E(i,e){const r=typeof i=="object"?i:v_(),s=typeof i=="string"?i:"(default)",a=p_(r,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=av("firestore");c&&vE(a,...c)}return a}function Sg(i){if(i._terminated)throw new ve(X.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||wE(i),i._firestoreClient}function wE(i){var e,r,s;const a=i._freezeSettings(),c=(function(m,y,w,I){return new K_(m,y,w,I.host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,wg(I.experimentalLongPollingOptions),I.useFetchStreams)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new fE(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&(function(m){const y=m?._online.build();return{_offline:m?._offline.build(y),_online:y}})(i._componentsProvider))}class uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uo(on.fromBase64String(e))}catch(r){throw new ve(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new uo(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zh{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ve(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ig{constructor(e){this._methodName=e}}class $h{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ve(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ve(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}}class Wh{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0})(this._values,e._values)}}const EE=/^__.*__$/;class TE{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return this.fieldMask!==null?new ms(e,this.data,this.fieldMask,r,this.fieldTransforms):new ma(e,this.data,r,this.fieldTransforms)}}function Ag(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class qh{constructor(e,r,s,a,c,f){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new qh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const s=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:s,xu:!1});return a.Ou(e),a}Nu(e){var r;const s=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:s,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Ag(this.Cu)&&EE.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class SE{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||su(e)}Qu(e,r,s,a=!1){return new qh({Cu:e,methodName:r,qu:s,path:rn.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function IE(i){const e=i._freezeSettings(),r=su(i._databaseId);return new SE(i._databaseId,!!e.ignoreUndefinedProperties,r)}function AE(i,e,r,s,a,c={}){const f=i.Qu(c.merge||c.mergeFields?2:0,e,r,a);Pg("Data must be an object, but it was:",f,s);const m=Cg(s,f);let y,w;if(c.merge)y=new _r(f.fieldMask),w=f.fieldTransforms;else if(c.mergeFields){const I=[];for(const k of c.mergeFields){const j=RE(e,k,r);if(!f.contains(j))throw new ve(X.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);kE(I,j)||I.push(j)}y=new _r(I),w=f.fieldTransforms.filter((k=>y.covers(k.field)))}else y=null,w=f.fieldTransforms;return new TE(new ir(m),y,w)}function Rg(i,e){if(kg(i=ra(i)))return Pg("Unsupported field value:",e,i),Cg(i,e);if(i instanceof Ig)return(function(s,a){if(!Ag(a.Cu))throw a.Bu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(s,a){const c=[];let f=0;for(const m of s){let y=Rg(m,a.Lu(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}})(i,e)}return(function(s,a){if((s=ra(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return g0(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Ut.fromDate(s);return{timestampValue:Ql(a.serializer,c)}}if(s instanceof Ut){const c=new Ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ql(a.serializer,c)}}if(s instanceof $h)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof uo)return{bytesValue:Qm(a.serializer,s._byteString)};if(s instanceof sr){const c=a.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw a.Bu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:kh(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Wh)return(function(f,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw m.Bu("VectorValues must only contain numeric values.");return Ah(m.serializer,y)}))}}}}}})(s,a);throw a.Bu(`Unsupported field value: ${Bh(s)}`)})(i,e)}function Cg(i,e){const r={};return Tm(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fo(i,((s,a)=>{const c=Rg(a,e.Mu(s));c!=null&&(r[s]=c)})),{mapValue:{fields:r}}}function kg(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ut||i instanceof $h||i instanceof uo||i instanceof sr||i instanceof Ig||i instanceof Wh)}function Pg(i,e,r){if(!kg(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const s=Bh(r);throw s==="an object"?e.Bu(i+" a custom object"):e.Bu(i+" "+s)}}function RE(i,e,r){if((e=ra(e))instanceof zh)return e._internalPath;if(typeof e=="string")return xg(i,e);throw Xl("Field path arguments must be of type string or ",i,!1,void 0,r)}const CE=new RegExp("[~\\*/\\[\\]]");function xg(i,e,r){if(e.search(CE)>=0)throw Xl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new zh(...e.split("."))._internalPath}catch{throw Xl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function Xl(i,e,r,s,a){const c=s&&!s.isEmpty(),f=a!==void 0;let m=`Function ${e}() called with invalid data`;r&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${s}`),f&&(y+=` in document ${a}`),y+=")"),new ve(X.INVALID_ARGUMENT,m+i+y)}function kE(i,e){return i.some((r=>r.isEqual(e)))}class Vg{constructor(e,r,s,a,c){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new sr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Ng("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class PE extends Vg{data(){return super.data()}}function Ng(i,e){return typeof e=="string"?xg(i,e):e instanceof zh?e._internalPath:e._delegate._internalPath}function xE(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ve(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VE{convertValue(e,r="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return fo(e,((a,c)=>{s[a]=this.convertValue(c,r)})),s}convertVectorValue(e){var r,s,a;const c=(a=(s=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map((f=>xt(f.doubleValue)));return new Wh(c)}convertGeoPoint(e){return new $h(xt(e.latitude),xt(e.longitude))}convertArray(e,r){return(e.values||[]).map((s=>this.convertValue(s,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const s=Eh(e);return s==null?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(aa(e));default:return null}}convertTimestamp(e){const r=$i(e);return new Ut(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=wt.fromString(e);nt(eg(s));const a=new la(s.get(1),s.get(3)),c=new Ee(s.popFirst(5));return a.isEqual(r)||oi(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),c}}function NE(i,e,r){let s;return s=i?i.toFirestore(e):e,s}class Nl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DE extends Vg{constructor(e,r,s,a,c,f){super(e,r,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Fl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(Ng("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class Fl extends DE{data(e={}){return super.data(e)}}class LE{constructor(e,r,s,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Nl(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((s=>{e.call(r,new Fl(this._firestore,this._userDataWriter,s.key,s,new Nl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ve(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map((m=>{const y=new Fl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Nl(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const y=new Fl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Nl(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let w=-1,I=-1;return m.type!==0&&(w=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),I=f.indexOf(m.doc.key)),{type:OE(m.type),doc:y,oldIndex:w,newIndex:I}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function OE(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}class ME extends VE{constructor(e){super(),this.firestore=e}convertBytes(e){return new uo(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,r)}}function FE(i){i=fa(i,uu);const e=fa(i.firestore,Uh),r=Sg(e),s=new ME(e);return xE(i._query),gE(r,i._query).then((a=>new LE(e,s,i,a)))}function Dg(i,e,r){i=fa(i,sr);const s=fa(i.firestore,Uh),a=NE(i.converter,e);return jE(s,[AE(IE(s),"setDoc",i._key,a,i.converter!==null,r).toMutation(i._key,ii.none())])}function jE(i,e){return(function(s,a){const c=new Bi;return s.asyncQueue.enqueueAndForget((async()=>rE(await pE(s),a,c))),c.promise})(Sg(i),e)}(function(e,r=!0){(function(a){ho=a})(y_),zl(new ia("firestore",((s,{instanceIdentifier:a,options:c})=>{const f=s.getProvider("app").getImmediate(),m=new Uh(new N_(s.getProvider("auth-internal")),new M_(s.getProvider("app-check-internal")),(function(w,I){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new ve(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(w.options.projectId,I)})(f,a),f);return c=Object.assign({useFetchStreams:r},c),m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),to(_p,"4.7.3",e),to(_p,"4.7.3","esm2017")})();const bE={apiKey:"AIzaSyDM0aI8K004dIFGPuHM6JB6q27V8MYsgmg,",authDomain:"global-invigoration-1e80c.firebaseapp.com",databaseURL:"https://global-invigoration-1e80c-default-rtdb.firebaseio.com",projectId:"global-invigoration-1e80c",storageBucket:"global-invigoration-1e80c.firebasestorage.app",messagingSenderId:"157354882430",appId:"1:157354882430:web:e99a9a5ad30edaca466f2f",measurementId:"G-YN57YHMV80"},BE=hm(bE),wa=_E(BE),UE=_a(wa,"globalInvigorationSubjects");_a(wa,"globalInvigorationTrials");_a(wa,"globalInvigorationGames");const zE=async i=>{try{const e=i.id;if(!e)throw new Error("Subject ID is required");const r=Tg(UE,e);return await Dg(r,{...i,id:e,timestamp:new Date().toISOString()})}catch(e){throw console.error("Error saving subject data: ",e),e}},$E=i=>i?.workerId||"UNK",WE=()=>({timestamp:new Date().toISOString(),userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,screenWidth:window.screen.width,screenHeight:window.screen.height,screenColorDepth:window.screen.colorDepth,windowWidth:window.innerWidth,windowHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,hasTouch:"ontouchstart"in window,maxTouchPoints:navigator.maxTouchPoints||0,browser:qE(),os:HE()}),qE=()=>{const i=navigator.userAgent;return i.includes("Chrome")?"Chrome":i.includes("Firefox")?"Firefox":i.includes("Safari")?"Safari":i.includes("Edge")?"Edge":"Unknown"},HE=()=>{const i=navigator.userAgent;return i.includes("Windows")?"Windows":i.includes("Mac")?"macOS":i.includes("Linux")?"Linux":i.includes("Android")?"Android":i.includes("iOS")?"iOS":"Unknown"},KE=async i=>{const e=$E(i),r=WE(),s={id:e,...i,systemInfo:r,sessionStart:new Date().toISOString(),experimentVersion:"1.0",status:"active"};try{return await zE(s),e}catch(a){throw console.error("Failed to initialize participant:",a),a}},tm=async(i,e,r)=>{try{const s=_a(wa,"globalInvigorationTrials"),a=Tg(s,r);return await Dg(a,e)}catch(s){throw console.error("Error saving participant trial:",s),s}},Wn={BLOCKS:{POOR:{baseRounds:5},RICH:{baseRounds:5},ORDER:["poor","rich","rich","poor"]},ROUND_DURATIONS:{REACHING_PHASE:{mean:20,standardDeviation:2,min:15,max:25}},REWARDS:{PRACTICE_VALUE:30,ARRAYS:{POOR:[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,60,60,60,60,60,60,60,60,60,100,100,100,100,100,100],RICH:[10,10,10,10,10,10,60,60,60,60,60,60,60,60,60,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100]}},KEYS:{VALID_KEYS:["a","s","d","f"],SEQUENCE_LENGTH:10,PRACTICE_SEQUENCE_LENGTH:10}},QE=i=>{const e=i==="poor"?Wn.BLOCKS.POOR.baseRounds:Wn.BLOCKS.RICH.baseRounds;return e},jl=()=>{const i=Wn.ROUND_DURATIONS.REACHING_PHASE,e=Math.random(),r=Math.random(),s=Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*r);let a=i.mean+s*i.standardDeviation;return a=Math.max(i.min,Math.min(i.max,a)),Math.round(a*10)/10},bl=()=>{const i=Wn.KEYS.VALID_KEYS.slice(),e=Wn.KEYS.SEQUENCE_LENGTH,r=[];let s=na(i),a=0;for(let c=0;c<e;c++){a>=s.length&&(s=na(i),a=0);const f=s[a];if(c>0&&f===r[c-1]){let m=!1;for(let y=a+1;y<s.length;y++)if(s[y]!==r[c-1]){[s[a],s[y]]=[s[y],s[a]],m=!0;break}m||(s=na(i),a=0,i.length>1&&s[a]===r[c-1]&&(a=1))}r.push(s[a]),a++}return r},na=i=>{const e=[...i];for(let r=e.length-1;r>0;r--){const s=Math.floor(Math.random()*(r+1));[e[r],e[s]]=[e[s],e[r]]}return e},Hc={},nm=i=>{const e=Wn.REWARDS.ARRAYS[i.toUpperCase()];return e?na(e):(console.warn(`Unknown environment: ${i}, defaulting to POOR rewards`),na(Wn.REWARDS.ARRAYS.POOR))},GE=i=>{const e=eo(i);if(!e)return console.warn(`Invalid block index: ${i}`),nm("poor");const r=`block_${i}`;if(Hc[r])return Hc[r];const s=nm(e);return Hc[r]=s,s},dh=Wn.BLOCKS.ORDER,eo=i=>i<0||i>=dh.length?null:dh[i],Lg=i=>{const e=eo(i);return e?QE(e):(console.warn(`Invalid block index: ${i}`),0)},ph=i=>{const e=i+1;return e<dh.length?e:null},YE=(i,e)=>{const r=Lg(i);return e<=r?"continue":ph(i)!==null?"break":"end"},XE=({participantData:i,participantId:e,onGameComplete:r})=>{const[s,a]=Y.useState(!1),[c,f]=Y.useState(8),[m,y]=Y.useState(0),[w,I]=Y.useState(null),[k,j]=Y.useState("reaching"),[$,Z]=Y.useState(!1),[ne,H]=Y.useState(0),[ie,De]=Y.useState({width:window.innerWidth,height:window.innerHeight}),[oe,Ve]=Y.useState(!1),[ot,Be]=Y.useState(0),P=Y.useRef(null),E=Y.useRef(!1),A=Y.useRef(null),C=Y.useRef(Date.now()),V=Y.useRef({x:null,y:null}),D=Y.useRef(null),[S,rt]=Y.useState(!0),[Ye,It]=Y.useState(!0),[ye,ee]=Y.useState([]),[le,se]=Y.useState(0),[N,z]=Y.useState([]),[ae,ke]=Y.useState(0),[Te,Ie]=Y.useState(null),[Ae,Re]=Y.useState(null),[Pe,mt]=Y.useState(1),[Ne,q]=Y.useState(0),[zt,Vt]=Y.useState(0),[Je,at]=Y.useState(!1),[Gt,On]=Y.useState(""),[wr]=Y.useState("key"),[In]=Y.useState(Date.now()),[An,an]=Y.useState([]),[or,Yt]=Y.useState([]),[Fr,Ze]=Y.useState([]),[lt,Nt]=Y.useState([]),[li,Rn]=Y.useState(null),[ui,Mn]=Y.useState(null),[jr,qn]=Y.useState([]),[ci,Hn]=Y.useState([]),[br,vn]=Y.useState([]),[Br,Fn]=Y.useState([]),[_n,Xt]=Y.useState([]),[hi,ln]=Y.useState(1),[fi,Kn]=Y.useState(null),[ys,wn]=Y.useState(1),[qi,gt]=Y.useState(0),[di,un]=Y.useState([]),[Ur,Qn]=Y.useState([]);Y.useRef(!1);const pi=Y.useRef(!1),yt=(W,b,Fe=null)=>{const he=Array.isArray(W)?W.slice(0,b):[];for(;he.length<b;)he.push(Fe);return he},jn=(W,b)=>Array.from({length:b},()=>W),go=(W,b,Fe)=>{let he,ue;const{leftBar:Se,rightBar:je}=zr(),be=Se.x+Se.width,ht=je.x;if(W>=Se.x&&W<=be?(he="ASW",ue="L"):W>=ht&&W<=je.x+je.width?(he="ATW",ue="R"):(oe?he="WS":he="RO",ue="N"),fi&&fi!==ue&&ue!=="N"){const Le=hi+1;ln(Le),Mn(ue),mi(Le-1,ue,li,{gameStateArray:An.slice(),eventArray:or.slice(),posXArray:Fr.slice(),posYArray:lt.slice(),timestampArray:br.slice()}),an([]),Yt([]),Ze([]),Nt([]),Rn(ue),Mn(null),qn([]),Hn([]),vn([]),Fn([]),Xt([]),ln(Le),wn(1),un([]),Qn([])}Kn(ue),an(Le=>[...Le,he]);let At="None";c<=3&&(At="RC"),Yt(Le=>[...Le,At]),Ze(Le=>[...Le,W]),Nt(Le=>[...Le,b]),vn(Le=>[...Le,Fe]),!li&&ue!=="N"&&Rn(ue)},mi=async(W,b,Fe,he)=>{if(!he||he.gameStateArray.length===0)return;const ue=Math.max(he.gameStateArray?.length||0,he.eventArray?.length||0,he.posXArray?.length||0,he.posYArray?.length||0,he.timestampArray?.length||0),Se=yt(he.gameStateArray,ue,null),je=yt(he.eventArray,ue,"None"),be=yt(he.posXArray,ue,null),ht=yt(he.posYArray,ue,null),At=yt(he.timestampArray,ue,null),Le=jn(null,ue),ut=jn(null,ue),ft=jn(null,ue),Ct=jn(null,ue),Dt={participantId:e,sessionStartTime:In,reachNumber:W,environment:Te,round:Pe,block:ae+1,startWall:Fe,endWall:b,gameStateArray:Se,eventArray:je,posXArray:be,posYArray:ht,reachTimestampArray:At,keytapNumberArray:Le,keytapValueArray:ut,keyupTimestampArray:ft,validityArray:Ct,currScore:m,rewardValue:null};try{const et=ae+1,kt=`${e}_block${et}_round${Pe}_reach${W}`;await tm(e,Dt,kt),console.log(`Reach ${W} data saved successfully`)}catch(et){console.error(`Failed to save reach ${W} data:`,et)}},vs=async()=>{if(jr.length===0)return;const W=Math.max(jr.length,ci.length,br.length,Br.length,_n.length),b=yt(jr,W,null),Fe=yt(ci,W,null),he=yt(br,W,null),ue=yt(Br,W,null),Se=yt(_n,W,null),je=yt(di,W,null),be=yt(Ur,W,null),ht=jn(null,W),At=jn(null,W),Le=jn(null,W),ut={participantId:e,sessionStartTime:In,environment:Te,round:Pe,block:ae+1,rewardValue:Ne,keytapNumberArray:b,keytapValueArray:Fe,keyPressTimestampArray:he,keyupTimestampArray:ue,validityArray:Se,gameStateArray:je,eventArray:be,posXArray:ht,posYArray:At,reachTimestampArray:Le,startWall:null,endWall:null,reachNumber:null,currScore:m};try{const ft=ae+1,Ct=`${e}_block${ft}_round${Pe}`;await tm(e,ut,Ct),console.log(`Round ${Pe} data saved successfully`)}catch(ft){console.error(`Failed to save round ${Pe} data:`,ft)}},cn=ie.width*.1,Er=ie.height,$t={x:0,y:0,width:cn,height:Er},ar={x:ie.width-cn,y:0,width:cn,height:Er},Xe={x:Math.max(ie.width/2,400),y:Math.max(ie.height/2-120,120)},Gn=Math.max(Math.min(ie.width,ie.height)*.12,30),zr=()=>({leftBar:$t,rightBar:ar,coinPosition:Xe,coinRadius:Gn}),gi=(W,b,Fe=!1)=>{if(b===0)return W.beginPath(),W.arc(Xe.x,Xe.y,Se,0,2*Math.PI),W.fillStyle=Fe?"#dcdcdc":"#f0f0f0",W.fill(),W.strokeStyle=Fe?"#bfbfbf":"#c0c0c0",W.lineWidth=4,W.stroke(),W.fillStyle="#888888",W.font=`bold ${Se*.4}px Arial`,W.textAlign="center",W.textBaseline="middle",W.fillText("0",Xe.x,Xe.y-Se*.7),0;let he,ue;if(b===10)he=1,ue=1;else if(b===60)he=6,ue=3;else if(b===100)he=10,ue=4;else return 0;const Se=Math.max(28,Math.floor(Math.min(ie.width,ie.height)*.035)),je=Se*1.8;let be=0;for(let At=0;At<ue;At++){const Le=At+1,ut=Xe.y+At*je*.8,ft=Xe.x-(Le-1)*je/2;for(let Ct=0;Ct<Le&&be<he;Ct++){const Dt=ft+Ct*je;if(W.beginPath(),W.arc(Dt,ut,Se,0,2*Math.PI),Fe){const et=W.createRadialGradient(Dt-Se*.3,ut-Se*.3,0,Dt,ut,Se);et.addColorStop(0,"#e6e6e6"),et.addColorStop(.7,"#bfbfbf"),et.addColorStop(1,"#9a9a9a"),W.fillStyle=et,W.fill(),W.strokeStyle="#7f7f7f",W.lineWidth=2,W.stroke(),W.fillStyle="#8c8c8c";const kt=Se*.12;W.fillRect(Dt-kt/2,ut-Se*.55,kt,Se*1.1)}else{const et=W.createRadialGradient(Dt-Se*.3,ut-Se*.3,0,Dt,ut,Se);et.addColorStop(0,"#FFD700"),et.addColorStop(.7,"#FFA500"),et.addColorStop(1,"#FF8C00"),W.fillStyle=et,W.fill(),W.strokeStyle="#FF8C00",W.lineWidth=2,W.stroke(),W.fillStyle="#B8860B",W.fillRect(Dt-Se*.1,ut-Se*.4,Se*.2,Se*.8)}be++}}const ht=ue*je*.8;return Fe||(W.fillStyle="#FFD700",W.font='bold 32px "Arial", sans-serif',W.textAlign="center",W.textBaseline="top",W.fillText(`${b} points`,Xe.x,Xe.y+ht+30)),ht};Y.useEffect(()=>{const W=()=>{const Fe={width:window.innerWidth,height:window.innerHeight};De(Fe)},b={width:window.innerWidth,height:window.innerHeight};return De(b),window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)},[]);const Hi=W=>{if(!s||k!=="coin"||!$)return;const b=W.key.toLowerCase();if(!["a","s","d","f"].includes(b)||ye.length===0||le>=ye.length)return;const he=Date.now(),ue=ye[le],Se=b===ue,je=[...N];if(je[le]=Se?"correct":"incorrect",z(je),qn(be=>[...be,le+1]),Hn(be=>[...be,b]),vn(be=>[...be,he]),Xt(be=>[...be,Se?"correct":"incorrect"]),un(be=>[...be,"SO"]),Qn(be=>[...be,"RR"]),Se){const be=le+1;if(be<ye.length)se(be);else{y(Le=>Le+Ne),H(Le=>Le+1),at(!0),On(`+${Ne}!`),un(Le=>[...Le,"SC"]),Qn(Le=>[...Le,"RREC"]),setTimeout(()=>{at(!1)},1e3),I(null),Ve(!1),A.current&&clearTimeout(A.current),j("reaching"),Z(!1),se(0),z(new Array(ye.length).fill("pending")),vs();const ht=Pe+1;mt(ht);const At=YE(ae,ht);if(At==="break"){const Le=ph(ae);Re(Le),j("break")}else if(At==="end")a(!1),E.current=!0,r?.();else{const Le=jl(),ut=bl();f(Le),ee(ut),z(new Array(ut.length).fill("pending")),yi(ae,ht)}}}else at(!0),On("Wrong key!"),setTimeout(()=>{at(!1)},1e3)},_s=W=>{if(!s||k!=="coin"||!$)return;const b=W.key.toLowerCase();if(!["a","s","d","f"].includes(b)||ye.length===0||le>=ye.length)return;const he=Date.now();Fn(ue=>[...ue,he])};Y.useEffect(()=>{if(!s||k!=="reaching")return;const W=setInterval(()=>{f(b=>b<=1?(j("coin"),Z(!0),q(zt),se(0),z(new Array(ye.length).fill("pending")),qn([]),Hn([]),vn([]),Fn([]),Xt([]),wn(1),0):b-1)},1e3);return()=>clearInterval(W)},[s,k,Pe,Te,ye.length]),Y.useEffect(()=>{k==="coin"&&ye.length>0&&(console.log("Starting reward tracking for sequence:",ye),console.log("Reward tracking started successfully"))},[ye,k,Te,Pe,Ne]),Y.useEffect(()=>{if(s&&(window.addEventListener("keydown",Hi),window.addEventListener("keyup",_s)),k==="break"){const W=b=>{b.key===" "&&Sr()};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)}return()=>{window.removeEventListener("keydown",Hi),window.removeEventListener("keyup",_s)}},[s,k,$,ye,le,N,Te,Ne,e,i,In,r]),Y.useEffect(()=>{k==="reaching"&&(an([]),Yt([]),Ze([]),Nt([]),Rn(null),Mn(null),qn([]),Hn([]),vn([]),Fn([]),Xt([]),ln(1),Kn(null),wn(1),un([]),Qn([]),gt(0),pi.current=!1,console.log("Data collection arrays reset for new trial"))},[k,Te,Pe,Ne]),Y.useEffect(()=>{const W=b=>{!s||k!=="coin"||!$||ye.length===0||b.key.toLowerCase()};return window.addEventListener("keyup",W),()=>window.removeEventListener("keyup",W)},[s,k,$,ye]);const it=W=>{if(!s||k!=="reaching")return;const Fe=P.current.getBoundingClientRect(),he=W.clientX-Fe.left,ue=W.clientY-Fe.top,{leftBar:Se,rightBar:je}=zr(),be=V.current;if(be.x!==null&&be.y!==null){const Dt=he-be.x,et=ue-be.y,kt=Math.sqrt(Dt*Dt+et*et);kt>0&&(Ye&&Dt>0||S&&Dt<0)&&Be(ze=>(ze+kt*.28)%35)}V.current={x:he,y:ue};const ht=Date.now();ht-qi>=33&&(go(he,ue,ht),gt(ht));const Le=he>=Se.x&&he<=Se.x+Se.width&&ue>=Se.y&&ue<=Se.y+Se.height,ut=he>=je.x&&he<=je.x+je.width&&ue>=je.y&&ue<=je.y+je.height,ft=Le?"left":ut?"right":null,Ct=D.current;ft!==Ct&&(ft==="left"?(rt(!1),It(!0),w!=="left"&&(I("left"),C.current=Date.now(),Ve(!1),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{Ve(!0)},2e3))):ft==="right"&&(It(!1),rt(!0),w!=="right"&&(I("right"),C.current=Date.now(),Ve(!1),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{Ve(!0)},2e3))),D.current=ft)},yi=(W,b)=>{const Fe=GE(W),he=(b-1)%Fe.length,ue=Fe[he];Vt(ue);const Se=eo(W);console.log(`Block ${W} (${Se}), Round ${b} reward value set to: ${ue}`)},Tr=()=>{const b=eo(0);a(!0),y(0),ke(0),Ie(b),mt(1),Re(null),j("reaching"),Z(!1),I(null),Ve(!1),E.current=!1,an([]),Yt([]),Ze([]),Nt([]),Rn(null),Mn(null),qn([]),Hn([]),vn([]),Fn([]),Xt([]),ln(1),Kn(null),wn(1);const Fe=jl(),he=bl();f(Fe),ee(he),z(new Array(he.length).fill("pending")),yi(0,1),console.log("Game started with:",{initialBlockIndex:0,initialEnvironment:b,roundDuration:Fe,sequence:he})};Y.useEffect(()=>{if(e)Tr();else{const W=setTimeout(()=>{Tr()},100);return()=>clearTimeout(W)}},[e]),Y.useEffect(()=>()=>{A.current&&clearTimeout(A.current)},[]),Y.useEffect(()=>{const W=P.current;W&&(W.classList.remove("cursor-visible","cursor-hidden"),k==="coin"?W.classList.add("cursor-hidden"):W.classList.add("cursor-visible"))},[k]),Y.useEffect(()=>{const W=P.current;W&&W.classList.add("cursor-visible")},[]),Y.useEffect(()=>{const W=P.current;if(!W)return;const b=W.getContext("2d");if(b.clearRect(0,0,ie.width,ie.height),b.fillStyle="#000000",b.fillRect(0,0,ie.width,ie.height),k==="reaching"){S&&(b.beginPath(),b.rect($t.x,$t.y,$t.width,$t.height),b.fillStyle=w==="left"?"#27ae60":"#3498db",b.fill(),b.strokeStyle="#2980b9",b.lineWidth=3,b.stroke()),Ye&&(b.beginPath(),b.rect(ar.x,ar.y,ar.width,ar.height),b.fillStyle=w==="right"?"#27ae60":"#3498db",b.fill(),b.strokeStyle="#2980b9",b.lineWidth=3,b.stroke());const ue=ie.width/2,Se=20,je=15;if(b.strokeStyle="#FFD700",b.lineWidth=3,b.setLineDash([Se,je]),b.lineDashOffset=-ot,b.beginPath(),b.moveTo(ue,-ie.height),b.lineTo(ue,ie.height*2),b.stroke(),b.setLineDash([]),c<=3){const be=zt,ht=gi(b,be,!0),At=Math.max(0,Math.ceil(c)),Le=`${be} points`,ut=`in ${At}...`,ft=32;b.fillStyle="#FFD700",b.strokeStyle="rgba(0,0,0,0.6)",b.font=`bold ${ft}px "Arial", sans-serif`,b.textAlign="center",b.textBaseline="top",b.lineWidth=6;const Ct=Xe.y+ht+30;b.strokeText(Le,Xe.x,Ct),b.fillText(Le,Xe.x,Ct);const Dt=ft;b.font=`bold ${Dt}px "Arial", sans-serif`;const et=Ct+ft+6;b.strokeText(ut,Xe.x,et),b.fillText(ut,Xe.x,et)}b.fillStyle="#ffffff",b.font='bold 64px "Orbitron", "Courier New", monospace',b.textAlign="center",b.fillText(`Score: ${m}`,ie.width/2,100),oe&&(b.fillStyle="#FF6B6B",b.font='bold 20px "Orbitron", "Courier New", monospace',b.textAlign="center",b.fillText("Move Faster!",ie.width/2,ie.height-100)),Je&&(b.fillStyle="#00FF00",b.font='bold 36px "Orbitron", "Courier New", monospace',b.textAlign="center",b.fillText(Gt,ie.width/2,ie.height/2-100))}else if(k==="coin"){if(b.fillStyle="#ffffff",b.font='bold 64px "Orbitron", "Courier New", monospace',b.textAlign="center",b.fillText(`Score: ${m}`,ie.width/2,100),$)if(Ne===0){b.beginPath(),b.arc(Xe.x,Xe.y,Gn,0,2*Math.PI),b.fillStyle="#f0f0f0",b.fill(),b.strokeStyle="#c0c0c0",b.lineWidth=4,b.stroke();const Fe="0",he=Gn*.4;b.font=`bold ${he}px "Orbitron", "Courier New", monospace`,b.textAlign="center",b.textBaseline="middle";const ue=Xe.x,Se=Xe.y-Gn*.7;b.fillStyle="rgba(0, 0, 0, 0.4)",b.fillText(Fe,ue+1,Se+1),b.fillStyle="#888888",b.fillText(Fe,ue,Se)}else{const Fe=gi(b,Ne);if(ye.length>0){const he=Xe.x-ye.length*40/2;let ue;Ne===10?ue=Xe.y+Fe+120:ue=Xe.y+Fe+80,ye.forEach((je,be)=>{const ht=he+be*48;N[be]==="correct"?b.fillStyle="#27ae60":N[be]==="incorrect"?b.fillStyle="#e74c3c":be===le?b.fillStyle="#f39c12":b.fillStyle="#7f8c8d",b.font='bold 48px "Arial", sans-serif',b.fillText(je.toUpperCase(),ht,ue)}),b.fillStyle="#FFD700",b.font='bold 32px "Arial", sans-serif',b.textAlign="center",ye.length>0&&le<ye.length&&b.fillText(`Press: ${ye[le].toUpperCase()}`,Xe.x,ue+48);const Se=`${le}/${ye.length}`;b.fillStyle="#ecf0f1",b.font='28px "Arial", sans-serif',b.textAlign="center",b.fillText(Se,Xe.x,ue+78)}}}else if(k==="break"){b.fillStyle="#000000",b.fillRect(0,0,ie.width,ie.height),b.fillStyle="#ffffff",b.font='bold 48px "Orbitron", "Courier New", monospace',b.textAlign="center",b.fillText(`Score: ${m}`,ie.width/2,80);const Fe=ae+1;if(b.fillStyle="#FFFFFF",b.font='bold 32px "Orbitron", "Courier New", monospace',b.textAlign="center",b.fillText(`Block ${Fe} Complete!`,ie.width/2,ie.height/2-100),b.font='20px "Orbitron", "Courier New", monospace',b.fillText("Take a short break.",ie.width/2,ie.height/2-40),Ae!==null){const he=Ae+1;eo(Ae),b.fillText(`Press SPACE to continue to Block ${he}`,ie.width/2,ie.height/2+40)}b.font='bold 24px "Orbitron", "Courier New", monospace',b.fillText(`Current Score: ${m}`,ie.width/2,ie.height/2+100)}},[c,m,w,k,$,ie,oe,Je,ye,le,N,Te,Ne,Gt,s,Pe,$t,ar,Xe,Gn,cn,ot]),Y.useEffect(()=>{if(!s||k==="break"||k!=="reaching")return;const W=ph(ae),b=Lg(ae);W===null&&Pe>b&&!E.current&&(console.log(`GAME COMPLETE - Last block finished (block ${ae}, round ${Pe})`),a(!1),Z(!1),ee([]),z([]),E.current=!0,r?.())},[ae,Pe,s,k,E,r]),Y.useEffect(()=>{console.log("State changed:",{currentEnvironment:Te,environmentRound:Pe,gamePhase:k,gameActive:s})},[Te,Pe,k,s]);const Sr=()=>{if(Ae===null){console.warn("No next block available");return}const W=Ae,b=eo(W);ke(W),Ie(b),Re(null),mt(1),j("reaching"),Z(!1),I(null),Ve(!1),an([]),Yt([]),Ze([]),Nt([]),Rn(null),Mn(null),qn([]),Hn([]),vn([]),Fn([]),Xt([]),ln(1),Kn(null),wn(1);const Fe=jl(),he=bl();f(Fe),ee(he),z(new Array(he.length).fill("pending")),yi(W,1),console.log("Switched to block:",{nextBlockIndex:W,nextEnvironment:b,roundDuration:Fe,sequence:he})};return M.jsx("div",{className:"game-container",children:M.jsx("div",{className:"canvas-container",children:M.jsx("canvas",{ref:P,width:ie.width,height:ie.height,onMouseMove:it,className:"game-canvas",style:{width:"100vw",height:"100vh",display:"block",backgroundColor:"#000000"}})})})},JE=({onPracticeComplete:i})=>{const[e,r]=Y.useState(!1),[s,a]=Y.useState(8),[c,f]=Y.useState(0),[m,y]=Y.useState(null),[w,I]=Y.useState("reaching"),[k,j]=Y.useState(0),[$,Z]=Y.useState(!1),[ne,H]=Y.useState(1),[ie,De]=Y.useState(0),[oe,Ve]=Y.useState({width:window.innerWidth,height:window.innerHeight}),[ot,Be]=Y.useState(!1),[P,E]=Y.useState(!1),A=Y.useRef(null),C=Y.useRef(!1),V=Y.useRef(null),D=Y.useRef(null),[S,rt]=Y.useState([]),[Ye,It]=Y.useState(0),[ye,ee]=Y.useState([]),[le,se]=Y.useState({x:0,y:0}),N=2,z=()=>jl(),ae=()=>{const Ne=bl(),q=Wn.KEYS.PRACTICE_SEQUENCE_LENGTH;rt(Ne),It(0),ee(new Array(q).fill("pending"))},ke=oe.width*.1,Te=oe.height,Ie={x:0,y:0,width:ke,height:Te},Ae={x:oe.width-ke,y:0,width:ke,height:Te},Re={x:oe.width/2,y:oe.height/2-80},Pe=()=>Math.min(oe.width,oe.height)*.12*.85;Y.useEffect(()=>{const Ne=()=>{Ve({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",Ne),()=>window.removeEventListener("resize",Ne)},[]),Y.useEffect(()=>{if(e&&w==="reaching"){const Ne=setInterval(()=>{a(q=>q<=1?(I("coin"),Z(!0),ae(),0):q-1)},1e3);return()=>clearInterval(Ne)}},[e,w]),Y.useEffect(()=>{const Ne=q=>{if(!e||w!=="coin"||!$||S.length===0)return;const zt=q.key.toLowerCase(),Vt=S[Ye];zt===Vt?(ee(Je=>{const at=[...Je];return at[Ye]="correct",at}),It(Je=>{const at=Je+1;return at>=S.length?(f(Gt=>Gt+Wn.REWARDS.PRACTICE_VALUE),E(!0),setTimeout(()=>{E(!1)},2e3),De(Gt=>Gt+1),ne>=N?(r(!1),rt([]),ee([]),C.current||(C.current=!0,setTimeout(()=>{i()},2e3))):(H(Gt=>Gt+1),I("reaching"),a(z()),Z(!1),j(0),y(null),rt([]),ee([])),0):at})):(ee(Je=>{const at=[...Je];return at[Ye]="incorrect",at}),setTimeout(()=>{ee(Je=>{const at=[...Je];return at[Ye]==="incorrect"&&(at[Ye]="pending"),at})},500))};return window.addEventListener("keydown",Ne),()=>window.removeEventListener("keydown",Ne)},[e,w,$,ne,N,c,ie,i,S,Ye]);const mt=Ne=>{if(!e)return;const zt=A.current.getBoundingClientRect(),Vt=Ne.clientX-zt.left,Je=Ne.clientY-zt.top;se({x:Vt,y:Je}),Vt>=Ie.x&&Vt<=Ie.x+Ie.width&&Je>=Ie.y&&Je<=Ie.y+Ie.height?m!=="left"&&(y("left"),V.current=Date.now(),Be(!1),D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{Be(!0)},2e3)):Vt>=Ae.x&&Vt<=Ae.x+Ae.width&&Je>=Ae.y&&Je<=Ae.y+Ae.height&&m!=="right"&&(y("right"),V.current=Date.now(),Be(!1),D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{Be(!0)},2e3))};return Y.useEffect(()=>{r(!0),I("reaching"),a(z())},[]),Y.useEffect(()=>()=>{D.current&&clearTimeout(D.current)},[]),Y.useEffect(()=>{const Ne=A.current;Ne&&(Ne.classList.remove("cursor-visible","cursor-hidden"),w==="coin"?Ne.classList.add("cursor-hidden"):Ne.classList.add("cursor-visible"))},[w]),Y.useEffect(()=>{const Ne=A.current;Ne&&Ne.classList.add("cursor-visible")},[]),Y.useEffect(()=>{const Ne=A.current;if(!Ne)return;const q=Ne.getContext("2d");if(q.clearRect(0,0,oe.width,oe.height),q.fillStyle="#000000",q.fillRect(0,0,oe.width,oe.height),w==="reaching")q.beginPath(),q.rect(Ie.x,Ie.y,Ie.width,Ie.height),q.fillStyle=m==="left"?"#27ae60":"#3498db",q.fill(),q.strokeStyle="#2980b9",q.lineWidth=3,q.stroke(),q.beginPath(),q.rect(Ae.x,Ae.y,Ae.width,Ae.height),q.fillStyle=m==="right"?"#27ae60":"#3498db",q.fill(),q.strokeStyle="#2980b9",q.lineWidth=3,q.stroke(),s<=3&&(q.beginPath(),q.arc(Re.x,Re.y,Pe(),0,2*Math.PI),q.fillStyle="#808080",q.fill(),q.strokeStyle="#606060",q.lineWidth=3,q.stroke(),q.fillStyle="#ffffff",q.font=`bold ${Pe()*.6}px "Arial", sans-serif`,q.textAlign="center",q.textBaseline="middle",q.fillText(Wn.REWARDS.PRACTICE_VALUE.toString(),Re.x,Re.y)),q.fillStyle="#ffffff",q.font='bold 48px "Orbitron", "Courier New", monospace',q.textAlign="center",q.fillText(`Score: ${c}`,oe.width/2,80),q.fillStyle="#ffffff",q.font='16px "Press Start 2P", "Courier New", monospace',q.textAlign="center",q.fillText("Move your cursor back and forth between the bars!",oe.width/2,oe.height-50),ot&&(q.fillStyle="#FF6B6B",q.font='bold 20px "Orbitron", "Courier New", monospace',q.textAlign="center",q.fillText("Move Faster!",oe.width/2,oe.height-100)),P&&(q.fillStyle="#00FF00",q.font='bold 36px "Orbitron", "Courier New", monospace',q.textAlign="center",q.fillText(`+${Wn.REWARDS.PRACTICE_VALUE}`,oe.width/2,oe.height/2-100));else if(w==="coin"){if($&&(((Je,at)=>{let An=0;for(let an=0;an<4;an++){const or=an+1,Yt=at+an*36*.8,Fr=Je-(or-1)*36/2;for(let Ze=0;Ze<or&&An<10;Ze++){const lt=Fr+Ze*36;q.beginPath(),q.arc(lt,Yt,20,0,2*Math.PI);const Nt=q.createRadialGradient(lt-20*.3,Yt-20*.3,0,lt,Yt,20);Nt.addColorStop(0,"#FFD700"),Nt.addColorStop(.7,"#FFA500"),Nt.addColorStop(1,"#FF8C00"),q.fillStyle=Nt,q.fill(),q.strokeStyle="#FF8C00",q.lineWidth=2,q.stroke(),q.fillStyle="#B8860B",q.fillRect(lt-2,Yt-8,4,16),An++}}})(Re.x,Re.y),q.fillStyle="#FFD700",q.font='bold 24px "Arial", sans-serif',q.textAlign="center",q.textBaseline="top",q.fillText("50 points",Re.x,Re.y+80+30)),S.length>0){const Vt=Re.x-S.length*45/2,Je=Re.y+80+120;q.font='bold 36px "Arial", sans-serif',q.textAlign="center",q.textBaseline="middle",S.forEach((Gt,On)=>{const wr=Vt+On*45;ye[On]==="correct"?q.fillStyle="#27ae60":ye[On]==="incorrect"?q.fillStyle="#e74c3c":On===Ye?q.fillStyle="#f39c12":q.fillStyle="#7f8c8d",q.fillText(Gt.toUpperCase(),wr,Je)}),Ye<S.length&&(q.fillStyle="#FFD700",q.font='bold 24px "Arial", sans-serif',q.fillText(`Press: ${S[Ye].toUpperCase()}`,Re.x,Je+40));const at=`${Ye}/${S.length}`;q.fillStyle="#ecf0f1",q.font='20px "Arial", sans-serif',q.fillText(at,Re.x,Je+65)}q.fillStyle="#ffffff",q.font='bold 48px "Orbitron", "Courier New", monospace',q.textAlign="center",q.fillText(`Score: ${c}`,oe.width/2,80),q.fillStyle="#ffffff",q.font='16px "Press Start 2P", "Courier New", monospace',q.textAlign="center",S.length>0?q.fillText("Press the highlighted keys in sequence to collect the coin!",oe.width/2,oe.height-50):q.fillText("Get ready to follow the key sequence!",oe.width/2,oe.height-50),P&&(q.fillStyle="#00FF00",q.font='bold 36px "Orbitron", "Courier New", monospace',q.textAlign="center",q.fillText(`+${Wn.REWARDS.PRACTICE_VALUE}`,oe.width/2,oe.height/2-100)),w==="reaching"&&e&&(q.beginPath(),q.arc(le.x,le.y,8,0,2*Math.PI),q.fillStyle="#FFD700",q.fill(),q.strokeStyle="#FFA500",q.lineWidth=2,q.stroke())}},[s,c,m,w,$,k,ne,N,oe,ot,P,S,Ye,ye,le,e]),M.jsx("div",{className:"game-container",children:M.jsx("div",{className:"canvas-container",children:M.jsx("canvas",{ref:A,width:oe.width,height:oe.height,onMouseMove:mt,className:"game-canvas",style:{width:"100vw",height:"100vh",display:"block"}})})})},ZE=()=>{const i=async e=>{try{console.log(`Exporting ${e}...`);const r=await FE(_a(wa,e)),s=[];if(r.forEach(k=>{s.push({documentId:k.id,...k.data()})}),console.log(`Found ${s.length} documents in ${e}`),s.length===0){alert(`No data found in ${e}`);return}const a=new Set;s.forEach(k=>{Object.keys(k).forEach(j=>a.add(j))});const c=Array.from(a),f=[c.join(",")];s.forEach(k=>{const j=c.map($=>{const Z=k[$];return Z==null?"":Array.isArray(Z)?`"${JSON.stringify(Z).replace(/"/g,'""')}"`:typeof Z=="object"?`"${JSON.stringify(Z).replace(/"/g,'""')}"`:`"${String(Z).replace(/"/g,'""')}"`});f.push(j.join(","))});const m=f.join(`
`),y=new Blob([m],{type:"text/csv;charset=utf-8;"}),w=URL.createObjectURL(y),I=document.createElement("a");I.href=w,I.download=`${e}_export_${new Date().toISOString().split("T")[0]}.csv`,I.click(),console.log(` Exported ${s.length} documents to CSV`)}catch(r){console.error(` Error exporting ${e}:`,r),alert(`Export failed: ${r.message}`)}};return M.jsxs("div",{style:{padding:"20px",backgroundColor:"#f5f5f5",borderRadius:"8px",margin:"20px",maxWidth:"400px"},children:[M.jsx("h3",{style:{marginTop:0,color:"#333"},children:"Export Firebase Data to CSV"}),M.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[M.jsx("button",{onClick:()=>i("globalInvigorationTrials"),style:{padding:"12px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:" Export Trials Data"}),M.jsx("button",{onClick:()=>i("globalInvigorationSubjects"),style:{padding:"12px 20px",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:" Export Subjects Data"})]}),M.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"15px",marginBottom:0},children:"Downloads CSV files with all data from your Firebase collections"})]})};function eT(){const[i,e]=Y.useState("consent"),[r,s]=Y.useState(null),[a,c]=Y.useState(null),[f,m]=Y.useState(0),y=async()=>{try{document.documentElement.requestFullscreen?await document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?await document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen?await document.documentElement.msRequestFullscreen():(window.moveTo(0,0),window.resizeTo(screen.width,screen.height))}catch(ne){console.warn("Could not enter fullscreen mode:",ne);try{window.moveTo(0,0),window.resizeTo(screen.width,screen.height)}catch(H){console.warn("Could not maximize window:",H)}}},w=async()=>{await y(),e("survey")},I=async ne=>{s(ne);try{const H=await KE(ne);c(H),console.log("Participant initialized with ID:",H)}catch(H){console.error("Failed to initialize participant data collection:",H)}m(0),e("instructions")},k=()=>{e("game")},j=()=>{e("practice")},$=()=>{m(3),e("instructions")},Z=ne=>{e("complete")};return M.jsxs("div",{className:"app",children:[i==="consent"&&M.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:9999},children:M.jsx("button",{onClick:()=>e("export"),style:{padding:"10px 15px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"bold",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},title:"Export Firebase data to CSV",children:" Export Data"})}),i==="consent"&&M.jsx(Gy,{onConsent:w,onDecline:()=>e("decline")}),i==="survey"&&M.jsx(Yy,{onSubmit:I}),i==="instructions"&&M.jsx(Xy,{onStart:k,onPractice:j,currentPage:f,setCurrentPage:m}),i==="practice"&&M.jsx(JE,{onPracticeComplete:$}),i==="game"&&M.jsx(XE,{participantData:r,participantId:a,onGameComplete:Z}),i==="export"&&M.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",zIndex:1e4,display:"flex",justifyContent:"center",alignItems:"center"},children:M.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto"},children:[M.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[M.jsx("h2",{style:{margin:0},children:"Export Firebase Data"}),M.jsx("button",{onClick:()=>e("consent"),style:{padding:"8px 12px",backgroundColor:"#666",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:" Close"})]}),M.jsx(ZE,{})]})}),i==="complete"&&M.jsxs("div",{className:"complete-message",children:[M.jsx("h1",{children:"Study Complete!"}),M.jsx("p",{children:"Thank you for participating in our research study."})]}),i==="decline"&&M.jsxs("div",{className:"decline-message",children:[M.jsx("h1",{children:"Thank you for your time"}),M.jsx("p",{children:"You have chosen not to participate in this study."})]})]})}const tT=Qy.createRoot(document.getElementById("root"));tT.render(M.jsx(Uy.StrictMode,{children:M.jsx(eT,{})}));
