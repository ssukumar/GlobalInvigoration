(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();function rm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Dc={exports:{}},Ko={},Lc={exports:{}},ze={};var Zd;function jy(){if(Zd)return ze;Zd=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),P=Symbol.iterator;function j(N){return N===null||typeof N!="object"?null:(N=P&&N[P]||N["@@iterator"],typeof N=="function"?N:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,q={};function K(N,z,ie){this.props=N,this.context=z,this.refs=q,this.updater=ie||W}K.prototype.isReactComponent={},K.prototype.setState=function(N,z){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,z,"setState")},K.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function se(){}se.prototype=K.prototype;function Ae(N,z,ie){this.props=N,this.context=z,this.refs=q,this.updater=ie||W}var Ce=Ae.prototype=new se;Ce.constructor=Ae,ee(Ce,K.prototype),Ce.isPureReactComponent=!0;var ke=Array.isArray,We=Object.prototype.hasOwnProperty,Ue={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(N,z,ie){var Ve,Se={},be=null,Be=null;if(z!=null)for(Ve in z.ref!==void 0&&(Be=z.ref),z.key!==void 0&&(be=""+z.key),z)We.call(z,Ve)&&!C.hasOwnProperty(Ve)&&(Se[Ve]=z[Ve]);var Pe=arguments.length-2;if(Pe===1)Se.children=ie;else if(1<Pe){for(var ye=Array(Pe),qe=0;qe<Pe;qe++)ye[qe]=arguments[qe+2];Se.children=ye}if(N&&N.defaultProps)for(Ve in Pe=N.defaultProps,Pe)Se[Ve]===void 0&&(Se[Ve]=Pe[Ve]);return{$$typeof:i,type:N,key:be,ref:Be,props:Se,_owner:Ue.current}}function A(N,z){return{$$typeof:i,type:N.type,key:z,ref:N.ref,props:N.props,_owner:N._owner}}function k(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function V(N){var z={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ie){return z[ie]})}var D=/\/+/g;function I(N,z){return typeof N=="object"&&N!==null&&N.key!=null?V(""+N.key):z.toString(36)}function ot(N,z,ie,Ve,Se){var be=typeof N;(be==="undefined"||be==="boolean")&&(N=null);var Be=!1;if(N===null)Be=!0;else switch(be){case"string":case"number":Be=!0;break;case"object":switch(N.$$typeof){case i:case e:Be=!0}}if(Be)return Be=N,Se=Se(Be),N=Ve===""?"."+I(Be,0):Ve,ke(Se)?(ie="",N!=null&&(ie=N.replace(D,"$&/")+"/"),ot(Se,z,ie,"",function(qe){return qe})):Se!=null&&(k(Se)&&(Se=A(Se,ie+(!Se.key||Be&&Be.key===Se.key?"":(""+Se.key).replace(D,"$&/")+"/")+N)),z.push(Se)),1;if(Be=0,Ve=Ve===""?".":Ve+":",ke(N))for(var Pe=0;Pe<N.length;Pe++){be=N[Pe];var ye=Ve+I(be,Pe);Be+=ot(be,z,ie,ye,Se)}else if(ye=j(N),typeof ye=="function")for(N=ye.call(N),Pe=0;!(be=N.next()).done;)be=be.value,ye=Ve+I(be,Pe++),Be+=ot(be,z,ie,ye,Se);else if(be==="object")throw z=String(N),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return Be}function Ct(N,z,ie){if(N==null)return N;var Ve=[],Se=0;return ot(N,Ve,"","",function(be){return z.call(ie,be,Se++)}),Ve}function kt(N){if(N._status===-1){var z=N._result;z=z(),z.then(function(ie){(N._status===0||N._status===-1)&&(N._status=1,N._result=ie)},function(ie){(N._status===0||N._status===-1)&&(N._status=2,N._result=ie)}),N._status===-1&&(N._status=0,N._result=z)}if(N._status===1)return N._result.default;throw N._result}var ge={current:null},ne={transition:null},ue={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:ne,ReactCurrentOwner:Ue};function oe(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:Ct,forEach:function(N,z,ie){Ct(N,function(){z.apply(this,arguments)},ie)},count:function(N){var z=0;return Ct(N,function(){z++}),z},toArray:function(N){return Ct(N,function(z){return z})||[]},only:function(N){if(!k(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},ze.Component=K,ze.Fragment=r,ze.Profiler=a,ze.PureComponent=Ae,ze.StrictMode=s,ze.Suspense=y,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,ze.act=oe,ze.cloneElement=function(N,z,ie){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var Ve=ee({},N.props),Se=N.key,be=N.ref,Be=N._owner;if(z!=null){if(z.ref!==void 0&&(be=z.ref,Be=Ue.current),z.key!==void 0&&(Se=""+z.key),N.type&&N.type.defaultProps)var Pe=N.type.defaultProps;for(ye in z)We.call(z,ye)&&!C.hasOwnProperty(ye)&&(Ve[ye]=z[ye]===void 0&&Pe!==void 0?Pe[ye]:z[ye])}var ye=arguments.length-2;if(ye===1)Ve.children=ie;else if(1<ye){Pe=Array(ye);for(var qe=0;qe<ye;qe++)Pe[qe]=arguments[qe+2];Ve.children=Pe}return{$$typeof:i,type:N.type,key:Se,ref:be,props:Ve,_owner:Be}},ze.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:c,_context:N},N.Consumer=N},ze.createElement=E,ze.createFactory=function(N){var z=E.bind(null,N);return z.type=N,z},ze.createRef=function(){return{current:null}},ze.forwardRef=function(N){return{$$typeof:m,render:N}},ze.isValidElement=k,ze.lazy=function(N){return{$$typeof:S,_payload:{_status:-1,_result:N},_init:kt}},ze.memo=function(N,z){return{$$typeof:w,type:N,compare:z===void 0?null:z}},ze.startTransition=function(N){var z=ne.transition;ne.transition={};try{N()}finally{ne.transition=z}},ze.unstable_act=oe,ze.useCallback=function(N,z){return ge.current.useCallback(N,z)},ze.useContext=function(N){return ge.current.useContext(N)},ze.useDebugValue=function(){},ze.useDeferredValue=function(N){return ge.current.useDeferredValue(N)},ze.useEffect=function(N,z){return ge.current.useEffect(N,z)},ze.useId=function(){return ge.current.useId()},ze.useImperativeHandle=function(N,z,ie){return ge.current.useImperativeHandle(N,z,ie)},ze.useInsertionEffect=function(N,z){return ge.current.useInsertionEffect(N,z)},ze.useLayoutEffect=function(N,z){return ge.current.useLayoutEffect(N,z)},ze.useMemo=function(N,z){return ge.current.useMemo(N,z)},ze.useReducer=function(N,z,ie){return ge.current.useReducer(N,z,ie)},ze.useRef=function(N){return ge.current.useRef(N)},ze.useState=function(N){return ge.current.useState(N)},ze.useSyncExternalStore=function(N,z,ie){return ge.current.useSyncExternalStore(N,z,ie)},ze.useTransition=function(){return ge.current.useTransition()},ze.version="18.3.1",ze}var ep;function mh(){return ep||(ep=1,Lc.exports=jy()),Lc.exports}var tp;function by(){if(tp)return Ko;tp=1;var i=mh(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(m,y,w){var S,P={},j=null,W=null;w!==void 0&&(j=""+w),y.key!==void 0&&(j=""+y.key),y.ref!==void 0&&(W=y.ref);for(S in y)s.call(y,S)&&!c.hasOwnProperty(S)&&(P[S]=y[S]);if(m&&m.defaultProps)for(S in y=m.defaultProps,y)P[S]===void 0&&(P[S]=y[S]);return{$$typeof:e,type:m,key:j,ref:W,props:P,_owner:a.current}}return Ko.Fragment=r,Ko.jsx=f,Ko.jsxs=f,Ko}var np;function By(){return np||(np=1,Dc.exports=by()),Dc.exports}var M=By(),X=mh();const Uy=rm(X);var kl={},Oc={exports:{}},Mn={},Mc={exports:{}},Fc={};var rp;function zy(){return rp||(rp=1,(function(i){function e(ne,ue){var oe=ne.length;ne.push(ue);e:for(;0<oe;){var N=oe-1>>>1,z=ne[N];if(0<a(z,ue))ne[N]=ue,ne[oe]=z,oe=N;else break e}}function r(ne){return ne.length===0?null:ne[0]}function s(ne){if(ne.length===0)return null;var ue=ne[0],oe=ne.pop();if(oe!==ue){ne[0]=oe;e:for(var N=0,z=ne.length,ie=z>>>1;N<ie;){var Ve=2*(N+1)-1,Se=ne[Ve],be=Ve+1,Be=ne[be];if(0>a(Se,oe))be<z&&0>a(Be,Se)?(ne[N]=Be,ne[be]=oe,N=be):(ne[N]=Se,ne[Ve]=oe,N=Ve);else if(be<z&&0>a(Be,oe))ne[N]=Be,ne[be]=oe,N=be;else break e}}return ue}function a(ne,ue){var oe=ne.sortIndex-ue.sortIndex;return oe!==0?oe:ne.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var y=[],w=[],S=1,P=null,j=3,W=!1,ee=!1,q=!1,K=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,Ae=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ce(ne){for(var ue=r(w);ue!==null;){if(ue.callback===null)s(w);else if(ue.startTime<=ne)s(w),ue.sortIndex=ue.expirationTime,e(y,ue);else break;ue=r(w)}}function ke(ne){if(q=!1,Ce(ne),!ee)if(r(y)!==null)ee=!0,kt(We);else{var ue=r(w);ue!==null&&ge(ke,ue.startTime-ne)}}function We(ne,ue){ee=!1,q&&(q=!1,se(E),E=-1),W=!0;var oe=j;try{for(Ce(ue),P=r(y);P!==null&&(!(P.expirationTime>ue)||ne&&!V());){var N=P.callback;if(typeof N=="function"){P.callback=null,j=P.priorityLevel;var z=N(P.expirationTime<=ue);ue=i.unstable_now(),typeof z=="function"?P.callback=z:P===r(y)&&s(y),Ce(ue)}else s(y);P=r(y)}if(P!==null)var ie=!0;else{var Ve=r(w);Ve!==null&&ge(ke,Ve.startTime-ue),ie=!1}return ie}finally{P=null,j=oe,W=!1}}var Ue=!1,C=null,E=-1,A=5,k=-1;function V(){return!(i.unstable_now()-k<A)}function D(){if(C!==null){var ne=i.unstable_now();k=ne;var ue=!0;try{ue=C(!0,ne)}finally{ue?I():(Ue=!1,C=null)}}else Ue=!1}var I;if(typeof Ae=="function")I=function(){Ae(D)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,Ct=ot.port2;ot.port1.onmessage=D,I=function(){Ct.postMessage(null)}}else I=function(){K(D,0)};function kt(ne){C=ne,Ue||(Ue=!0,I())}function ge(ne,ue){E=K(function(){ne(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ne){ne.callback=null},i.unstable_continueExecution=function(){ee||W||(ee=!0,kt(We))},i.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ne?Math.floor(1e3/ne):5},i.unstable_getCurrentPriorityLevel=function(){return j},i.unstable_getFirstCallbackNode=function(){return r(y)},i.unstable_next=function(ne){switch(j){case 1:case 2:case 3:var ue=3;break;default:ue=j}var oe=j;j=ue;try{return ne()}finally{j=oe}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ne,ue){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var oe=j;j=ne;try{return ue()}finally{j=oe}},i.unstable_scheduleCallback=function(ne,ue,oe){var N=i.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?N+oe:N):oe=N,ne){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=oe+z,ne={id:S++,callback:ue,priorityLevel:ne,startTime:oe,expirationTime:z,sortIndex:-1},oe>N?(ne.sortIndex=oe,e(w,ne),r(y)===null&&ne===r(w)&&(q?(se(E),E=-1):q=!0,ge(ke,oe-N))):(ne.sortIndex=z,e(y,ne),ee||W||(ee=!0,kt(We))),ne},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(ne){var ue=j;return function(){var oe=j;j=ue;try{return ne.apply(this,arguments)}finally{j=oe}}}})(Fc)),Fc}var ip;function $y(){return ip||(ip=1,Mc.exports=zy()),Mc.exports}var sp;function Wy(){if(sp)return Mn;sp=1;var i=mh(),e=$y();function r(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,n){f(t,n),f(t+"Capture",n)}function f(t,n){for(a[t]=n,t=0;t<n.length;t++)s.add(n[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},P={};function j(t){return y.call(P,t)?!0:y.call(S,t)?!1:w.test(t)?P[t]=!0:(S[t]=!0,!1)}function W(t,n,o,u){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ee(t,n,o,u){if(n===null||typeof n>"u"||W(t,n,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function q(t,n,o,u,h,p,v){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=n,this.sanitizeURL=p,this.removeEmptyString=v}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){K[t]=new q(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];K[n]=new q(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){K[t]=new q(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){K[t]=new q(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){K[t]=new q(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){K[t]=new q(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){K[t]=new q(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){K[t]=new q(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){K[t]=new q(t,5,!1,t.toLowerCase(),null,!1,!1)});var se=/[\-:]([a-z])/g;function Ae(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(se,Ae);K[n]=new q(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(se,Ae);K[n]=new q(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(se,Ae);K[n]=new q(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){K[t]=new q(t,1,!1,t.toLowerCase(),null,!1,!1)}),K.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){K[t]=new q(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ce(t,n,o,u){var h=K.hasOwnProperty(n)?K[n]:null;(h!==null?h.type!==0:u||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(ee(n,o,h,u)&&(o=null),u||h===null?j(n)&&(o===null?t.removeAttribute(n):t.setAttribute(n,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(n=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(n):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,n,o):t.setAttribute(n,o))))}var ke=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,We=Symbol.for("react.element"),Ue=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),V=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),Ct=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),ne=Symbol.iterator;function ue(t){return t===null||typeof t!="object"?null:(t=ne&&t[ne]||t["@@iterator"],typeof t=="function"?t:null)}var oe=Object.assign,N;function z(t){if(N===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);N=n&&n[1]||""}return`
`+N+t}var ie=!1;function Ve(t,n){if(!t||ie)return"";ie=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(B){var u=B}Reflect.construct(t,[],n)}else{try{n.call()}catch(B){u=B}t.call(n.prototype)}else{try{throw Error()}catch(B){u=B}t()}}catch(B){if(B&&u&&typeof B.stack=="string"){for(var h=B.stack.split(`
`),p=u.stack.split(`
`),v=h.length-1,T=p.length-1;1<=v&&0<=T&&h[v]!==p[T];)T--;for(;1<=v&&0<=T;v--,T--)if(h[v]!==p[T]){if(v!==1||T!==1)do if(v--,T--,0>T||h[v]!==p[T]){var R=`
`+h[v].replace(" at new "," at ");return t.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",t.displayName)),R}while(1<=v&&0<=T);break}}}finally{ie=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?z(t):""}function Se(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=Ve(t.type,!1),t;case 11:return t=Ve(t.type.render,!1),t;case 1:return t=Ve(t.type,!0),t;default:return""}}function be(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case Ue:return"Portal";case A:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case ot:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case V:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case D:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ct:return n=t.displayName||null,n!==null?n:be(t.type)||"Memo";case kt:n=t._payload,t=t._init;try{return be(t(n))}catch{}}return null}function Be(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(n);case 8:return n===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Pe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ye(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function qe(t){var n=ye(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),u=""+t[n];if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){u=""+v,p.call(this,v)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Pt(t){t._valueTracker||(t._valueTracker=qe(t))}function Tr(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var o=n.getValue(),u="";return t&&(u=ye(t)?t.checked?"true":"false":t.value),t=u,t!==o?(n.setValue(t),!0):!1}function Ie(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function H(t,n){var o=n.checked;return oe({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function wt(t,n){var o=n.defaultValue==null?"":n.defaultValue,u=n.checked!=null?n.checked:n.defaultChecked;o=Pe(n.value!=null?n.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function ct(t,n){n=n.checked,n!=null&&Ce(t,"checked",n,!1)}function Ke(t,n){ct(t,n);var o=Pe(n.value),u=n.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?dt(t,n.type,o):n.hasOwnProperty("defaultValue")&&dt(t,n.type,Pe(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function Ne(t,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var u=n.type;if(!(u!=="submit"&&u!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,o||n===t.value||(t.value=n),t.defaultValue=n}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function dt(t,n,o){(n!=="number"||Ie(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var at=Array.isArray;function Et(t,n,o,u){if(t=t.options,n){n={};for(var h=0;h<o.length;h++)n["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=n.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Pe(o),n=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Dt(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return oe({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gt(t,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(r(92));if(at(o)){if(1<o.length)throw Error(r(93));o=o[0]}n=o}n==null&&(n=""),o=n}t._wrapperState={initialValue:Pe(o)}}function pt(t,n){var o=Pe(n.value),u=Pe(n.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),n.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function Hn(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function Qe(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nt(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?Qe(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mt,lr=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(n,o,u,h)})}:t})(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(mt=mt||document.createElement("div"),mt.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=mt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function kn(t,n){if(n){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=n;return}}t.textContent=n}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fn=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(t){Fn.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),ui[n]=ui[t]})});function br(t,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||ui.hasOwnProperty(t)&&ui[t]?(""+n).trim():n+"px"}function Kn(t,n){t=t.style;for(var o in n)if(n.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=br(o,n[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var ci=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qn(t,n){if(n){if(ci[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function Br(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tn=null;function Ur(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jn=null,Sn=null,nn=null;function hi(t){if(t=No(t)){if(typeof jn!="function")throw Error(r(280));var n=t.stateNode;n&&(n=$a(n),jn(t.stateNode,t.type,n))}}function fn(t){Sn?nn?nn.push(t):nn=[t]:Sn=t}function fi(){if(Sn){var t=Sn,n=nn;if(nn=Sn=null,hi(t),n)for(t=0;t<n.length;t++)hi(n[t])}}function Gn(t,n){return t(n)}function ys(){}var In=!1;function qi(t,n,o){if(In)return t(n,o);In=!0;try{return Gn(t,n,o)}finally{In=!1,(Sn!==null||nn!==null)&&(ys(),fi())}}function Tt(t,n){var o=t.stateNode;if(o===null)return null;var u=$a(o);if(u===null)return null;o=u[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(r(231,n,typeof o));return o}var di=!1;if(m)try{var dn={};Object.defineProperty(dn,"passive",{get:function(){di=!0}}),window.addEventListener("test",dn,dn),window.removeEventListener("test",dn,dn)}catch{di=!1}function zr(t,n,o,u,h,p,v,T,R){var B=Array.prototype.slice.call(arguments,3);try{n.apply(o,B)}catch(G){this.onError(G)}}var Yn=!1,pi=null,St=!1,bn=null,go={onError:function(t){Yn=!0,pi=t}};function mi(t,n,o,u,h,p,v,T,R){Yn=!1,pi=null,zr.apply(go,arguments)}function vs(t,n,o,u,h,p,v,T,R){if(mi.apply(this,arguments),Yn){if(Yn){var B=pi;Yn=!1,pi=null}else throw Error(r(198));St||(St=!0,bn=B)}}function pn(t){var n=t,o=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(o=n.return),t=n.return;while(t)}return n.tag===3?o:null}function Sr(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function Yt(t){if(pn(t)!==t)throw Error(r(188))}function ur(t){var n=t.alternate;if(!n){if(n=pn(t),n===null)throw Error(r(188));return n!==t?null:t}for(var o=t,u=n;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return Yt(h),t;if(p===u)return Yt(h),n;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=h,u=p;else{for(var v=!1,T=h.child;T;){if(T===o){v=!0,o=h,u=p;break}if(T===u){v=!0,u=h,o=p;break}T=T.sibling}if(!v){for(T=p.child;T;){if(T===o){v=!0,o=p,u=h;break}if(T===u){v=!0,u=p,o=h;break}T=T.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?t:n}function tt(t){return t=ur(t),t!==null?Xn(t):null}function Xn(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=Xn(t);if(n!==null)return n;t=t.sibling}return null}var $r=e.unstable_scheduleCallback,gi=e.unstable_cancelCallback,Hi=e.unstable_shouldYield,_s=e.unstable_requestPaint,lt=e.unstable_now,yi=e.unstable_getCurrentPriorityLevel,Ir=e.unstable_ImmediatePriority,Ar=e.unstable_UserBlockingPriority,$=e.unstable_NormalPriority,b=e.unstable_LowPriority,Me=e.unstable_IdlePriority,ce=null,ae=null;function Te(t){if(ae&&typeof ae.onCommitFiberRoot=="function")try{ae.onCommitFiberRoot(ce,t,void 0,(t.current.flags&128)===128)}catch{}}var Fe=Math.clz32?Math.clz32:Lt,je=Math.log,gt=Math.LN2;function Lt(t){return t>>>=0,t===0?32:31-(je(t)/gt|0)|0}var De=64,ht=4194304;function yt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mt(t,n){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,v=o&268435455;if(v!==0){var T=v&~h;T!==0?u=yt(T):(p&=v,p!==0&&(u=yt(p)))}else v=o&~h,v!==0?u=yt(v):p!==0&&(u=yt(p));if(u===0)return 0;if(n!==0&&n!==u&&(n&h)===0&&(h=u&-u,p=n&-n,h>=p||h===16&&(p&4194240)!==0))return n;if((u&4)!==0&&(u|=o&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=u;0<n;)o=31-Fe(n),h=1<<o,u|=t[o],n&=~h;return u}function Bt(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rt(t,n){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var v=31-Fe(p),T=1<<v,R=h[v];R===-1?((T&o)===0||(T&u)!==0)&&(h[v]=Bt(T,n)):R<=n&&(t.expiredLanes|=T),p&=~T}}function Ft(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vi(){var t=De;return De<<=1,(De&4194240)===0&&(De=64),t}function Wr(t){for(var n=[],o=0;31>o;o++)n.push(t);return n}function qr(t,n,o){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Fe(n),t[n]=o}function ut(t,n){var o=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-Fe(o),p=1<<h;n[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Hr(t,n){var o=t.entangledLanes|=n;for(t=t.entanglements;o;){var u=31-Fe(o),h=1<<u;h&n|t[u]&n&&(t[u]|=n),o&=~h}}var $e=0;function _i(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Ta,ws,Sa,Ia,Aa,yo=!1,Rr=[],rn=null,cr=null,hr=null,wi=new Map,Jn=new Map,Cr=[],cu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ra(t,n){switch(t){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":wi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jn.delete(n.pointerId)}}function Pn(t,n,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:n,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},n!==null&&(n=No(n),n!==null&&ws(n)),t):(t.eventSystemFlags|=u,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function hu(t,n,o,u,h){switch(n){case"focusin":return rn=Pn(rn,t,n,o,u,h),!0;case"dragenter":return cr=Pn(cr,t,n,o,u,h),!0;case"mouseover":return hr=Pn(hr,t,n,o,u,h),!0;case"pointerover":var p=h.pointerId;return wi.set(p,Pn(wi.get(p)||null,t,n,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,Jn.set(p,Pn(Jn.get(p)||null,t,n,o,u,h)),!0}return!1}function Ca(t){var n=Xi(t.target);if(n!==null){var o=pn(n);if(o!==null){if(n=o.tag,n===13){if(n=Sr(o),n!==null){t.blockedOn=n,Aa(t.priority,function(){Sa(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kr(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var o=Es(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);Tn=u,o.target.dispatchEvent(u),Tn=null}else return n=No(o),n!==null&&ws(n),t.blockedOn=o,!1;n.shift()}return!0}function Ki(t,n,o){Kr(t)&&o.delete(n)}function ka(){yo=!1,rn!==null&&Kr(rn)&&(rn=null),cr!==null&&Kr(cr)&&(cr=null),hr!==null&&Kr(hr)&&(hr=null),wi.forEach(Ki),Jn.forEach(Ki)}function fr(t,n){t.blockedOn===n&&(t.blockedOn=null,yo||(yo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ka)))}function dr(t){function n(h){return fr(h,t)}if(0<Rr.length){fr(Rr[0],t);for(var o=1;o<Rr.length;o++){var u=Rr[o];u.blockedOn===t&&(u.blockedOn=null)}}for(rn!==null&&fr(rn,t),cr!==null&&fr(cr,t),hr!==null&&fr(hr,t),wi.forEach(n),Jn.forEach(n),o=0;o<Cr.length;o++)u=Cr[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Cr.length&&(o=Cr[0],o.blockedOn===null);)Ca(o),o.blockedOn===null&&Cr.shift()}var Qr=ke.ReactCurrentBatchConfig,Ei=!0;function It(t,n,o,u){var h=$e,p=Qr.transition;Qr.transition=null;try{$e=1,vo(t,n,o,u)}finally{$e=h,Qr.transition=p}}function fu(t,n,o,u){var h=$e,p=Qr.transition;Qr.transition=null;try{$e=4,vo(t,n,o,u)}finally{$e=h,Qr.transition=p}}function vo(t,n,o,u){if(Ei){var h=Es(t,n,o,u);if(h===null)Su(t,n,u,Qi,o),Ra(t,u);else if(hu(h,t,n,o,u))u.stopPropagation();else if(Ra(t,u),n&4&&-1<cu.indexOf(t)){for(;h!==null;){var p=No(h);if(p!==null&&Ta(p),p=Es(t,n,o,u),p===null&&Su(t,n,u,Qi,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Su(t,n,u,null,o)}}var Qi=null;function Es(t,n,o,u){if(Qi=null,t=Ur(u),t=Xi(t),t!==null)if(n=pn(t),n===null)t=null;else if(o=n.tag,o===13){if(t=Sr(n),t!==null)return t;t=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Qi=t,null}function _o(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yi()){case Ir:return 1;case Ar:return 4;case $:case b:return 16;case Me:return 536870912;default:return 16}default:return 16}}var Bn=null,Ts=null,xn=null;function wo(){if(xn)return xn;var t,n=Ts,o=n.length,u,h="value"in Bn?Bn.value:Bn.textContent,p=h.length;for(t=0;t<o&&n[t]===h[t];t++);var v=o-t;for(u=1;u<=v&&n[o-u]===h[p-u];u++);return xn=h.slice(t,1<u?1-u:void 0)}function Ss(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function kr(){return!0}function Eo(){return!1}function sn(t){function n(o,u,h,p,v){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?kr:Eo,this.isPropagationStopped=Eo,this}return oe(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=kr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=kr)},persist:function(){},isPersistent:kr}),n}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Is=sn(pr),Pr=oe({},pr,{view:0,detail:0}),du=sn(Pr),As,Gr,Ti,Gi=oe({},Pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ti&&(Ti&&t.type==="mousemove"?(As=t.screenX-Ti.screenX,Gr=t.screenY-Ti.screenY):Gr=As=0,Ti=t),As)},movementY:function(t){return"movementY"in t?t.movementY:Gr}}),Rs=sn(Gi),To=oe({},Gi,{dataTransfer:0}),Pa=sn(To),Cs=oe({},Pr,{relatedTarget:0}),ks=sn(Cs),xa=oe({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Yr=sn(xa),Va=oe({},pr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Na=sn(Va),Da=oe({},pr,{data:0}),So=sn(Da),Ps={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},An={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},La={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oa(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=La[t])?!!n[t]:!1}function xr(){return Oa}var l=oe({},Pr,{key:function(t){if(t.key){var n=Ps[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ss(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?An[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(t){return t.type==="keypress"?Ss(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ss(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=sn(l),g=oe({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_=sn(g),L=oe({},Pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr}),U=sn(L),re=oe({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),it=sn(re),Wt=oe({},Gi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ge=sn(Wt),Xt=[9,13,27,32],Ut=m&&"CompositionEvent"in window,Zn=null;m&&"documentMode"in document&&(Zn=document.documentMode);var Un=m&&"TextEvent"in window&&!Zn,Yi=m&&(!Ut||Zn&&8<Zn&&11>=Zn),xs=" ",Hh=!1;function Kh(t,n){switch(t){case"keyup":return Xt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vs=!1;function Og(t,n){switch(t){case"compositionend":return Qh(n);case"keypress":return n.which!==32?null:(Hh=!0,xs);case"textInput":return t=n.data,t===xs&&Hh?null:t;default:return null}}function Mg(t,n){if(Vs)return t==="compositionend"||!Ut&&Kh(t,n)?(t=wo(),xn=Ts=Bn=null,Vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Yi&&n.locale!=="ko"?null:n.data;default:return null}}var Fg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Fg[t.type]:n==="textarea"}function Yh(t,n,o,u){fn(u),n=Ba(n,"onChange"),0<n.length&&(o=new Is("onChange","change",null,o,u),t.push({event:o,listeners:n}))}var Io=null,Ao=null;function jg(t){mf(t,0)}function Ma(t){var n=Ms(t);if(Tr(n))return t}function bg(t,n){if(t==="change")return n}var Xh=!1;if(m){var pu;if(m){var mu="oninput"in document;if(!mu){var Jh=document.createElement("div");Jh.setAttribute("oninput","return;"),mu=typeof Jh.oninput=="function"}pu=mu}else pu=!1;Xh=pu&&(!document.documentMode||9<document.documentMode)}function Zh(){Io&&(Io.detachEvent("onpropertychange",ef),Ao=Io=null)}function ef(t){if(t.propertyName==="value"&&Ma(Ao)){var n=[];Yh(n,Ao,t,Ur(t)),qi(jg,n)}}function Bg(t,n,o){t==="focusin"?(Zh(),Io=n,Ao=o,Io.attachEvent("onpropertychange",ef)):t==="focusout"&&Zh()}function Ug(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ma(Ao)}function zg(t,n){if(t==="click")return Ma(n)}function $g(t,n){if(t==="input"||t==="change")return Ma(n)}function Wg(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var mr=typeof Object.is=="function"?Object.is:Wg;function Ro(t,n){if(mr(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var o=Object.keys(t),u=Object.keys(n);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!y.call(n,h)||!mr(t[h],n[h]))return!1}return!0}function tf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nf(t,n){var o=tf(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=n&&u>=n)return{node:o,offset:n-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=tf(o)}}function rf(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?rf(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function sf(){for(var t=window,n=Ie();n instanceof t.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)t=n.contentWindow;else break;n=Ie(t.document)}return n}function gu(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function qg(t){var n=sf(),o=t.focusedElem,u=t.selectionRange;if(n!==o&&o&&o.ownerDocument&&rf(o.ownerDocument.documentElement,o)){if(u!==null&&gu(o)){if(n=u.start,t=u.end,t===void 0&&(t=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(t,o.value.length);else if(t=(n=o.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=nf(o,p);var v=nf(o,u);h&&v&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(n=n.createRange(),n.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(n),t.extend(v.node,v.offset)):(n.setEnd(v.node,v.offset),t.addRange(n)))}}for(n=[],t=o;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)t=n[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Hg=m&&"documentMode"in document&&11>=document.documentMode,Ns=null,yu=null,Co=null,vu=!1;function of(t,n,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;vu||Ns==null||Ns!==Ie(u)||(u=Ns,"selectionStart"in u&&gu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Co&&Ro(Co,u)||(Co=u,u=Ba(yu,"onSelect"),0<u.length&&(n=new Is("onSelect","select",null,n,o),t.push({event:n,listeners:u}),n.target=Ns)))}function Fa(t,n){var o={};return o[t.toLowerCase()]=n.toLowerCase(),o["Webkit"+t]="webkit"+n,o["Moz"+t]="moz"+n,o}var Ds={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionend:Fa("Transition","TransitionEnd")},_u={},af={};m&&(af=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function ja(t){if(_u[t])return _u[t];if(!Ds[t])return t;var n=Ds[t],o;for(o in n)if(n.hasOwnProperty(o)&&o in af)return _u[t]=n[o];return t}var lf=ja("animationend"),uf=ja("animationiteration"),cf=ja("animationstart"),hf=ja("transitionend"),ff=new Map,df="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Si(t,n){ff.set(t,n),c(n,[t])}for(var wu=0;wu<df.length;wu++){var Eu=df[wu],Kg=Eu.toLowerCase(),Qg=Eu[0].toUpperCase()+Eu.slice(1);Si(Kg,"on"+Qg)}Si(lf,"onAnimationEnd"),Si(uf,"onAnimationIteration"),Si(cf,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(hf,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gg=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function pf(t,n,o){var u=t.type||"unknown-event";t.currentTarget=o,vs(u,n,void 0,t),t.currentTarget=null}function mf(t,n){n=(n&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(n)for(var v=u.length-1;0<=v;v--){var T=u[v],R=T.instance,B=T.currentTarget;if(T=T.listener,R!==p&&h.isPropagationStopped())break e;pf(h,T,B),p=R}else for(v=0;v<u.length;v++){if(T=u[v],R=T.instance,B=T.currentTarget,T=T.listener,R!==p&&h.isPropagationStopped())break e;pf(h,T,B),p=R}}}if(St)throw t=bn,St=!1,bn=null,t}function vt(t,n){var o=n[Pu];o===void 0&&(o=n[Pu]=new Set);var u=t+"__bubble";o.has(u)||(gf(n,t,2,!1),o.add(u))}function Tu(t,n,o){var u=0;n&&(u|=4),gf(o,t,u,n)}var ba="_reactListening"+Math.random().toString(36).slice(2);function Po(t){if(!t[ba]){t[ba]=!0,s.forEach(function(o){o!=="selectionchange"&&(Gg.has(o)||Tu(o,!1,t),Tu(o,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[ba]||(n[ba]=!0,Tu("selectionchange",!1,n))}}function gf(t,n,o,u){switch(_o(n)){case 1:var h=It;break;case 4:h=fu;break;default:h=vo}o=h.bind(null,n,o,t),h=void 0,!di||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(n,o,{capture:!0,passive:h}):t.addEventListener(n,o,!0):h!==void 0?t.addEventListener(n,o,{passive:h}):t.addEventListener(n,o,!1)}function Su(t,n,o,u,h){var p=u;if((n&1)===0&&(n&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var T=u.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(v===4)for(v=u.return;v!==null;){var R=v.tag;if((R===3||R===4)&&(R=v.stateNode.containerInfo,R===h||R.nodeType===8&&R.parentNode===h))return;v=v.return}for(;T!==null;){if(v=Xi(T),v===null)return;if(R=v.tag,R===5||R===6){u=p=v;continue e}T=T.parentNode}}u=u.return}qi(function(){var B=p,G=Ur(o),Z=[];e:{var Q=ff.get(t);if(Q!==void 0){var le=Is,fe=t;switch(t){case"keypress":if(Ss(o)===0)break e;case"keydown":case"keyup":le=d;break;case"focusin":fe="focus",le=ks;break;case"focusout":fe="blur",le=ks;break;case"beforeblur":case"afterblur":le=ks;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Rs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Pa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=U;break;case lf:case uf:case cf:le=Yr;break;case hf:le=it;break;case"scroll":le=du;break;case"wheel":le=Ge;break;case"copy":case"cut":case"paste":le=Na;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=_}var de=(n&4)!==0,jt=!de&&t==="scroll",O=de?Q!==null?Q+"Capture":null:Q;de=[];for(var x=B,F;x!==null;){F=x;var te=F.stateNode;if(F.tag===5&&te!==null&&(F=te,O!==null&&(te=Tt(x,O),te!=null&&de.push(xo(x,te,F)))),jt)break;x=x.return}0<de.length&&(Q=new le(Q,fe,null,o,G),Z.push({event:Q,listeners:de}))}}if((n&7)===0){e:{if(Q=t==="mouseover"||t==="pointerover",le=t==="mouseout"||t==="pointerout",Q&&o!==Tn&&(fe=o.relatedTarget||o.fromElement)&&(Xi(fe)||fe[Xr]))break e;if((le||Q)&&(Q=G.window===G?G:(Q=G.ownerDocument)?Q.defaultView||Q.parentWindow:window,le?(fe=o.relatedTarget||o.toElement,le=B,fe=fe?Xi(fe):null,fe!==null&&(jt=pn(fe),fe!==jt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(le=null,fe=B),le!==fe)){if(de=Rs,te="onMouseLeave",O="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(de=_,te="onPointerLeave",O="onPointerEnter",x="pointer"),jt=le==null?Q:Ms(le),F=fe==null?Q:Ms(fe),Q=new de(te,x+"leave",le,o,G),Q.target=jt,Q.relatedTarget=F,te=null,Xi(G)===B&&(de=new de(O,x+"enter",fe,o,G),de.target=F,de.relatedTarget=jt,te=de),jt=te,le&&fe)t:{for(de=le,O=fe,x=0,F=de;F;F=Ls(F))x++;for(F=0,te=O;te;te=Ls(te))F++;for(;0<x-F;)de=Ls(de),x--;for(;0<F-x;)O=Ls(O),F--;for(;x--;){if(de===O||O!==null&&de===O.alternate)break t;de=Ls(de),O=Ls(O)}de=null}else de=null;le!==null&&yf(Z,Q,le,de,!1),fe!==null&&jt!==null&&yf(Z,jt,fe,de,!0)}}e:{if(Q=B?Ms(B):window,le=Q.nodeName&&Q.nodeName.toLowerCase(),le==="select"||le==="input"&&Q.type==="file")var me=bg;else if(Gh(Q))if(Xh)me=$g;else{me=Ug;var _e=Bg}else(le=Q.nodeName)&&le.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(me=zg);if(me&&(me=me(t,B))){Yh(Z,me,o,G);break e}_e&&_e(t,Q,B),t==="focusout"&&(_e=Q._wrapperState)&&_e.controlled&&Q.type==="number"&&dt(Q,"number",Q.value)}switch(_e=B?Ms(B):window,t){case"focusin":(Gh(_e)||_e.contentEditable==="true")&&(Ns=_e,yu=B,Co=null);break;case"focusout":Co=yu=Ns=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,of(Z,o,G);break;case"selectionchange":if(Hg)break;case"keydown":case"keyup":of(Z,o,G)}var we;if(Ut)e:{switch(t){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Vs?Kh(t,o)&&(Re="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Re="onCompositionStart");Re&&(Yi&&o.locale!=="ko"&&(Vs||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Vs&&(we=wo()):(Bn=G,Ts="value"in Bn?Bn.value:Bn.textContent,Vs=!0)),_e=Ba(B,Re),0<_e.length&&(Re=new So(Re,t,null,o,G),Z.push({event:Re,listeners:_e}),we?Re.data=we:(we=Qh(o),we!==null&&(Re.data=we)))),(we=Un?Og(t,o):Mg(t,o))&&(B=Ba(B,"onBeforeInput"),0<B.length&&(G=new So("onBeforeInput","beforeinput",null,o,G),Z.push({event:G,listeners:B}),G.data=we))}mf(Z,n)})}function xo(t,n,o){return{instance:t,listener:n,currentTarget:o}}function Ba(t,n){for(var o=n+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=Tt(t,o),p!=null&&u.unshift(xo(t,p,h)),p=Tt(t,n),p!=null&&u.push(xo(t,p,h))),t=t.return}return u}function Ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yf(t,n,o,u,h){for(var p=n._reactName,v=[];o!==null&&o!==u;){var T=o,R=T.alternate,B=T.stateNode;if(R!==null&&R===u)break;T.tag===5&&B!==null&&(T=B,h?(R=Tt(o,p),R!=null&&v.unshift(xo(o,R,T))):h||(R=Tt(o,p),R!=null&&v.push(xo(o,R,T)))),o=o.return}v.length!==0&&t.push({event:n,listeners:v})}var Yg=/\r\n?/g,Xg=/\u0000|\uFFFD/g;function vf(t){return(typeof t=="string"?t:""+t).replace(Yg,`
`).replace(Xg,"")}function Ua(t,n,o){if(n=vf(n),vf(t)!==n&&o)throw Error(r(425))}function za(){}var Iu=null,Au=null;function Ru(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Cu=typeof setTimeout=="function"?setTimeout:void 0,Jg=typeof clearTimeout=="function"?clearTimeout:void 0,_f=typeof Promise=="function"?Promise:void 0,Zg=typeof queueMicrotask=="function"?queueMicrotask:typeof _f<"u"?function(t){return _f.resolve(null).then(t).catch(ey)}:Cu;function ey(t){setTimeout(function(){throw t})}function ku(t,n){var o=n,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),dr(n);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);dr(n)}function Ii(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function wf(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return t;n--}else o==="/$"&&n++}t=t.previousSibling}return null}var Os=Math.random().toString(36).slice(2),Vr="__reactFiber$"+Os,Vo="__reactProps$"+Os,Xr="__reactContainer$"+Os,Pu="__reactEvents$"+Os,ty="__reactListeners$"+Os,ny="__reactHandles$"+Os;function Xi(t){var n=t[Vr];if(n)return n;for(var o=t.parentNode;o;){if(n=o[Xr]||o[Vr]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(t=wf(t);t!==null;){if(o=t[Vr])return o;t=wf(t)}return n}t=o,o=t.parentNode}return null}function No(t){return t=t[Vr]||t[Xr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ms(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function $a(t){return t[Vo]||null}var xu=[],Fs=-1;function Ai(t){return{current:t}}function _t(t){0>Fs||(t.current=xu[Fs],xu[Fs]=null,Fs--)}function ft(t,n){Fs++,xu[Fs]=t.current,t.current=n}var Ri={},mn=Ai(Ri),Vn=Ai(!1),Ji=Ri;function js(t,n){var o=t.type.contextTypes;if(!o)return Ri;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===n)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=n[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=h),h}function Nn(t){return t=t.childContextTypes,t!=null}function Wa(){_t(Vn),_t(mn)}function Ef(t,n,o){if(mn.current!==Ri)throw Error(r(168));ft(mn,n),ft(Vn,o)}function Tf(t,n,o){var u=t.stateNode;if(n=n.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in n))throw Error(r(108,Be(t)||"Unknown",h));return oe({},o,u)}function qa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ri,Ji=mn.current,ft(mn,t),ft(Vn,Vn.current),!0}function Sf(t,n,o){var u=t.stateNode;if(!u)throw Error(r(169));o?(t=Tf(t,n,Ji),u.__reactInternalMemoizedMergedChildContext=t,_t(Vn),_t(mn),ft(mn,t)):_t(Vn),ft(Vn,o)}var Jr=null,Ha=!1,Vu=!1;function If(t){Jr===null?Jr=[t]:Jr.push(t)}function ry(t){Ha=!0,If(t)}function Ci(){if(!Vu&&Jr!==null){Vu=!0;var t=0,n=$e;try{var o=Jr;for($e=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}Jr=null,Ha=!1}catch(h){throw Jr!==null&&(Jr=Jr.slice(t+1)),$r(Ir,Ci),h}finally{$e=n,Vu=!1}}return null}var bs=[],Bs=0,Ka=null,Qa=0,er=[],tr=0,Zi=null,Zr=1,ei="";function es(t,n){bs[Bs++]=Qa,bs[Bs++]=Ka,Ka=t,Qa=n}function Af(t,n,o){er[tr++]=Zr,er[tr++]=ei,er[tr++]=Zi,Zi=t;var u=Zr;t=ei;var h=32-Fe(u)-1;u&=~(1<<h),o+=1;var p=32-Fe(n)+h;if(30<p){var v=h-h%5;p=(u&(1<<v)-1).toString(32),u>>=v,h-=v,Zr=1<<32-Fe(n)+h|o<<h|u,ei=p+t}else Zr=1<<p|o<<h|u,ei=t}function Nu(t){t.return!==null&&(es(t,1),Af(t,1,0))}function Du(t){for(;t===Ka;)Ka=bs[--Bs],bs[Bs]=null,Qa=bs[--Bs],bs[Bs]=null;for(;t===Zi;)Zi=er[--tr],er[tr]=null,ei=er[--tr],er[tr]=null,Zr=er[--tr],er[tr]=null}var zn=null,$n=null,At=!1,gr=null;function Rf(t,n){var o=sr(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=t,n=t.deletions,n===null?(t.deletions=[o],t.flags|=16):n.push(o)}function Cf(t,n){switch(t.tag){case 5:var o=t.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,zn=t,$n=Ii(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,zn=t,$n=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=Zi!==null?{id:Zr,overflow:ei}:null,t.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=sr(18,null,null,0),o.stateNode=n,o.return=t,t.child=o,zn=t,$n=null,!0):!1;default:return!1}}function Lu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ou(t){if(At){var n=$n;if(n){var o=n;if(!Cf(t,n)){if(Lu(t))throw Error(r(418));n=Ii(o.nextSibling);var u=zn;n&&Cf(t,n)?Rf(u,o):(t.flags=t.flags&-4097|2,At=!1,zn=t)}}else{if(Lu(t))throw Error(r(418));t.flags=t.flags&-4097|2,At=!1,zn=t}}}function kf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zn=t}function Ga(t){if(t!==zn)return!1;if(!At)return kf(t),At=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!Ru(t.type,t.memoizedProps)),n&&(n=$n)){if(Lu(t))throw Pf(),Error(r(418));for(;n;)Rf(t,n),n=Ii(n.nextSibling)}if(kf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(n===0){$n=Ii(t.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}t=t.nextSibling}$n=null}}else $n=zn?Ii(t.stateNode.nextSibling):null;return!0}function Pf(){for(var t=$n;t;)t=Ii(t.nextSibling)}function Us(){$n=zn=null,At=!1}function Mu(t){gr===null?gr=[t]:gr.push(t)}var iy=ke.ReactCurrentBatchConfig;function Do(t,n,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(r(309));var u=o.stateNode}if(!u)throw Error(r(147,t));var h=u,p=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===p?n.ref:(n=function(v){var T=h.refs;v===null?delete T[p]:T[p]=v},n._stringRef=p,n)}if(typeof t!="string")throw Error(r(284));if(!o._owner)throw Error(r(290,t))}return t}function Ya(t,n){throw t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function xf(t){var n=t._init;return n(t._payload)}function Vf(t){function n(O,x){if(t){var F=O.deletions;F===null?(O.deletions=[x],O.flags|=16):F.push(x)}}function o(O,x){if(!t)return null;for(;x!==null;)n(O,x),x=x.sibling;return null}function u(O,x){for(O=new Map;x!==null;)x.key!==null?O.set(x.key,x):O.set(x.index,x),x=x.sibling;return O}function h(O,x){return O=Oi(O,x),O.index=0,O.sibling=null,O}function p(O,x,F){return O.index=F,t?(F=O.alternate,F!==null?(F=F.index,F<x?(O.flags|=2,x):F):(O.flags|=2,x)):(O.flags|=1048576,x)}function v(O){return t&&O.alternate===null&&(O.flags|=2),O}function T(O,x,F,te){return x===null||x.tag!==6?(x=Cc(F,O.mode,te),x.return=O,x):(x=h(x,F),x.return=O,x)}function R(O,x,F,te){var me=F.type;return me===C?G(O,x,F.props.children,te,F.key):x!==null&&(x.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===kt&&xf(me)===x.type)?(te=h(x,F.props),te.ref=Do(O,x,F),te.return=O,te):(te=wl(F.type,F.key,F.props,null,O.mode,te),te.ref=Do(O,x,F),te.return=O,te)}function B(O,x,F,te){return x===null||x.tag!==4||x.stateNode.containerInfo!==F.containerInfo||x.stateNode.implementation!==F.implementation?(x=kc(F,O.mode,te),x.return=O,x):(x=h(x,F.children||[]),x.return=O,x)}function G(O,x,F,te,me){return x===null||x.tag!==7?(x=ls(F,O.mode,te,me),x.return=O,x):(x=h(x,F),x.return=O,x)}function Z(O,x,F){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Cc(""+x,O.mode,F),x.return=O,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case We:return F=wl(x.type,x.key,x.props,null,O.mode,F),F.ref=Do(O,null,x),F.return=O,F;case Ue:return x=kc(x,O.mode,F),x.return=O,x;case kt:var te=x._init;return Z(O,te(x._payload),F)}if(at(x)||ue(x))return x=ls(x,O.mode,F,null),x.return=O,x;Ya(O,x)}return null}function Q(O,x,F,te){var me=x!==null?x.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return me!==null?null:T(O,x,""+F,te);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case We:return F.key===me?R(O,x,F,te):null;case Ue:return F.key===me?B(O,x,F,te):null;case kt:return me=F._init,Q(O,x,me(F._payload),te)}if(at(F)||ue(F))return me!==null?null:G(O,x,F,te,null);Ya(O,F)}return null}function le(O,x,F,te,me){if(typeof te=="string"&&te!==""||typeof te=="number")return O=O.get(F)||null,T(x,O,""+te,me);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case We:return O=O.get(te.key===null?F:te.key)||null,R(x,O,te,me);case Ue:return O=O.get(te.key===null?F:te.key)||null,B(x,O,te,me);case kt:var _e=te._init;return le(O,x,F,_e(te._payload),me)}if(at(te)||ue(te))return O=O.get(F)||null,G(x,O,te,me,null);Ya(x,te)}return null}function fe(O,x,F,te){for(var me=null,_e=null,we=x,Re=x=0,en=null;we!==null&&Re<F.length;Re++){we.index>Re?(en=we,we=null):en=we.sibling;var Ze=Q(O,we,F[Re],te);if(Ze===null){we===null&&(we=en);break}t&&we&&Ze.alternate===null&&n(O,we),x=p(Ze,x,Re),_e===null?me=Ze:_e.sibling=Ze,_e=Ze,we=en}if(Re===F.length)return o(O,we),At&&es(O,Re),me;if(we===null){for(;Re<F.length;Re++)we=Z(O,F[Re],te),we!==null&&(x=p(we,x,Re),_e===null?me=we:_e.sibling=we,_e=we);return At&&es(O,Re),me}for(we=u(O,we);Re<F.length;Re++)en=le(we,O,Re,F[Re],te),en!==null&&(t&&en.alternate!==null&&we.delete(en.key===null?Re:en.key),x=p(en,x,Re),_e===null?me=en:_e.sibling=en,_e=en);return t&&we.forEach(function(Mi){return n(O,Mi)}),At&&es(O,Re),me}function de(O,x,F,te){var me=ue(F);if(typeof me!="function")throw Error(r(150));if(F=me.call(F),F==null)throw Error(r(151));for(var _e=me=null,we=x,Re=x=0,en=null,Ze=F.next();we!==null&&!Ze.done;Re++,Ze=F.next()){we.index>Re?(en=we,we=null):en=we.sibling;var Mi=Q(O,we,Ze.value,te);if(Mi===null){we===null&&(we=en);break}t&&we&&Mi.alternate===null&&n(O,we),x=p(Mi,x,Re),_e===null?me=Mi:_e.sibling=Mi,_e=Mi,we=en}if(Ze.done)return o(O,we),At&&es(O,Re),me;if(we===null){for(;!Ze.done;Re++,Ze=F.next())Ze=Z(O,Ze.value,te),Ze!==null&&(x=p(Ze,x,Re),_e===null?me=Ze:_e.sibling=Ze,_e=Ze);return At&&es(O,Re),me}for(we=u(O,we);!Ze.done;Re++,Ze=F.next())Ze=le(we,O,Re,Ze.value,te),Ze!==null&&(t&&Ze.alternate!==null&&we.delete(Ze.key===null?Re:Ze.key),x=p(Ze,x,Re),_e===null?me=Ze:_e.sibling=Ze,_e=Ze);return t&&we.forEach(function(Fy){return n(O,Fy)}),At&&es(O,Re),me}function jt(O,x,F,te){if(typeof F=="object"&&F!==null&&F.type===C&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case We:e:{for(var me=F.key,_e=x;_e!==null;){if(_e.key===me){if(me=F.type,me===C){if(_e.tag===7){o(O,_e.sibling),x=h(_e,F.props.children),x.return=O,O=x;break e}}else if(_e.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===kt&&xf(me)===_e.type){o(O,_e.sibling),x=h(_e,F.props),x.ref=Do(O,_e,F),x.return=O,O=x;break e}o(O,_e);break}else n(O,_e);_e=_e.sibling}F.type===C?(x=ls(F.props.children,O.mode,te,F.key),x.return=O,O=x):(te=wl(F.type,F.key,F.props,null,O.mode,te),te.ref=Do(O,x,F),te.return=O,O=te)}return v(O);case Ue:e:{for(_e=F.key;x!==null;){if(x.key===_e)if(x.tag===4&&x.stateNode.containerInfo===F.containerInfo&&x.stateNode.implementation===F.implementation){o(O,x.sibling),x=h(x,F.children||[]),x.return=O,O=x;break e}else{o(O,x);break}else n(O,x);x=x.sibling}x=kc(F,O.mode,te),x.return=O,O=x}return v(O);case kt:return _e=F._init,jt(O,x,_e(F._payload),te)}if(at(F))return fe(O,x,F,te);if(ue(F))return de(O,x,F,te);Ya(O,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,x!==null&&x.tag===6?(o(O,x.sibling),x=h(x,F),x.return=O,O=x):(o(O,x),x=Cc(F,O.mode,te),x.return=O,O=x),v(O)):o(O,x)}return jt}var zs=Vf(!0),Nf=Vf(!1),Xa=Ai(null),Ja=null,$s=null,Fu=null;function ju(){Fu=$s=Ja=null}function bu(t){var n=Xa.current;_t(Xa),t._currentValue=n}function Bu(t,n,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,u!==null&&(u.childLanes|=n)):u!==null&&(u.childLanes&n)!==n&&(u.childLanes|=n),t===o)break;t=t.return}}function Ws(t,n){Ja=t,Fu=$s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(Dn=!0),t.firstContext=null)}function nr(t){var n=t._currentValue;if(Fu!==t)if(t={context:t,memoizedValue:n,next:null},$s===null){if(Ja===null)throw Error(r(308));$s=t,Ja.dependencies={lanes:0,firstContext:t}}else $s=$s.next=t;return n}var ts=null;function Uu(t){ts===null?ts=[t]:ts.push(t)}function Df(t,n,o,u){var h=n.interleaved;return h===null?(o.next=o,Uu(n)):(o.next=h.next,h.next=o),n.interleaved=o,ti(t,u)}function ti(t,n){t.lanes|=n;var o=t.alternate;for(o!==null&&(o.lanes|=n),o=t,t=t.return;t!==null;)t.childLanes|=n,o=t.alternate,o!==null&&(o.childLanes|=n),o=t,t=t.return;return o.tag===3?o.stateNode:null}var ki=!1;function zu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lf(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ni(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Pi(t,n,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Xe&2)!==0){var h=u.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),u.pending=n,ti(t,o)}return h=u.interleaved,h===null?(n.next=n,Uu(u)):(n.next=h.next,h.next=n),u.interleaved=n,ti(t,o)}function Za(t,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var u=n.lanes;u&=t.pendingLanes,o|=u,n.lanes=o,Hr(t,o)}}function Of(t,n){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?h=p=n:p=p.next=n}else h=p=n;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=n:t.next=n,o.lastBaseUpdate=n}function el(t,n,o,u){var h=t.updateQueue;ki=!1;var p=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var R=T,B=R.next;R.next=null,v===null?p=B:v.next=B,v=R;var G=t.alternate;G!==null&&(G=G.updateQueue,T=G.lastBaseUpdate,T!==v&&(T===null?G.firstBaseUpdate=B:T.next=B,G.lastBaseUpdate=R))}if(p!==null){var Z=h.baseState;v=0,G=B=R=null,T=p;do{var Q=T.lane,le=T.eventTime;if((u&Q)===Q){G!==null&&(G=G.next={eventTime:le,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var fe=t,de=T;switch(Q=n,le=o,de.tag){case 1:if(fe=de.payload,typeof fe=="function"){Z=fe.call(le,Z,Q);break e}Z=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=de.payload,Q=typeof fe=="function"?fe.call(le,Z,Q):fe,Q==null)break e;Z=oe({},Z,Q);break e;case 2:ki=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,Q=h.effects,Q===null?h.effects=[T]:Q.push(T))}else le={eventTime:le,lane:Q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},G===null?(B=G=le,R=Z):G=G.next=le,v|=Q;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);if(G===null&&(R=Z),h.baseState=R,h.firstBaseUpdate=B,h.lastBaseUpdate=G,n=h.shared.interleaved,n!==null){h=n;do v|=h.lane,h=h.next;while(h!==n)}else p===null&&(h.shared.lanes=0);is|=v,t.lanes=v,t.memoizedState=Z}}function Mf(t,n,o){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var u=t[n],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(r(191,h));h.call(u)}}}var Lo={},Nr=Ai(Lo),Oo=Ai(Lo),Mo=Ai(Lo);function ns(t){if(t===Lo)throw Error(r(174));return t}function $u(t,n){switch(ft(Mo,n),ft(Oo,t),ft(Nr,Lo),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:nt(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=nt(n,t)}_t(Nr),ft(Nr,n)}function qs(){_t(Nr),_t(Oo),_t(Mo)}function Ff(t){ns(Mo.current);var n=ns(Nr.current),o=nt(n,t.type);n!==o&&(ft(Oo,t),ft(Nr,o))}function Wu(t){Oo.current===t&&(_t(Nr),_t(Oo))}var xt=Ai(0);function tl(t){for(var n=t;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var qu=[];function Hu(){for(var t=0;t<qu.length;t++)qu[t]._workInProgressVersionPrimary=null;qu.length=0}var nl=ke.ReactCurrentDispatcher,Ku=ke.ReactCurrentBatchConfig,rs=0,Vt=null,qt=null,Jt=null,rl=!1,Fo=!1,jo=0,sy=0;function gn(){throw Error(r(321))}function Qu(t,n){if(n===null)return!1;for(var o=0;o<n.length&&o<t.length;o++)if(!mr(t[o],n[o]))return!1;return!0}function Gu(t,n,o,u,h,p){if(rs=p,Vt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,nl.current=t===null||t.memoizedState===null?uy:cy,t=o(u,h),Fo){p=0;do{if(Fo=!1,jo=0,25<=p)throw Error(r(301));p+=1,Jt=qt=null,n.updateQueue=null,nl.current=hy,t=o(u,h)}while(Fo)}if(nl.current=ol,n=qt!==null&&qt.next!==null,rs=0,Jt=qt=Vt=null,rl=!1,n)throw Error(r(300));return t}function Yu(){var t=jo!==0;return jo=0,t}function Dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?Vt.memoizedState=Jt=t:Jt=Jt.next=t,Jt}function rr(){if(qt===null){var t=Vt.alternate;t=t!==null?t.memoizedState:null}else t=qt.next;var n=Jt===null?Vt.memoizedState:Jt.next;if(n!==null)Jt=n,qt=t;else{if(t===null)throw Error(r(310));qt=t,t={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Jt===null?Vt.memoizedState=Jt=t:Jt=Jt.next=t}return Jt}function bo(t,n){return typeof n=="function"?n(t):n}function Xu(t){var n=rr(),o=n.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=t;var u=qt,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var v=h.next;h.next=p.next,p.next=v}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var T=v=null,R=null,B=p;do{var G=B.lane;if((rs&G)===G)R!==null&&(R=R.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),u=B.hasEagerState?B.eagerState:t(u,B.action);else{var Z={lane:G,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};R===null?(T=R=Z,v=u):R=R.next=Z,Vt.lanes|=G,is|=G}B=B.next}while(B!==null&&B!==p);R===null?v=u:R.next=T,mr(u,n.memoizedState)||(Dn=!0),n.memoizedState=u,n.baseState=v,n.baseQueue=R,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,Vt.lanes|=p,is|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function Ju(t){var n=rr(),o=n.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=n.memoizedState;if(h!==null){o.pending=null;var v=h=h.next;do p=t(p,v.action),v=v.next;while(v!==h);mr(p,n.memoizedState)||(Dn=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),o.lastRenderedState=p}return[p,u]}function jf(){}function bf(t,n){var o=Vt,u=rr(),h=n(),p=!mr(u.memoizedState,h);if(p&&(u.memoizedState=h,Dn=!0),u=u.queue,Zu(zf.bind(null,o,u,t),[t]),u.getSnapshot!==n||p||Jt!==null&&Jt.memoizedState.tag&1){if(o.flags|=2048,Bo(9,Uf.bind(null,o,u,h,n),void 0,null),Zt===null)throw Error(r(349));(rs&30)!==0||Bf(o,n,h)}return h}function Bf(t,n,o){t.flags|=16384,t={getSnapshot:n,value:o},n=Vt.updateQueue,n===null?(n={lastEffect:null,stores:null},Vt.updateQueue=n,n.stores=[t]):(o=n.stores,o===null?n.stores=[t]:o.push(t))}function Uf(t,n,o,u){n.value=o,n.getSnapshot=u,$f(n)&&Wf(t)}function zf(t,n,o){return o(function(){$f(n)&&Wf(t)})}function $f(t){var n=t.getSnapshot;t=t.value;try{var o=n();return!mr(t,o)}catch{return!0}}function Wf(t){var n=ti(t,1);n!==null&&wr(n,t,1,-1)}function qf(t){var n=Dr();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:t},n.queue=t,t=t.dispatch=ly.bind(null,Vt,t),[n.memoizedState,t]}function Bo(t,n,o,u){return t={tag:t,create:n,destroy:o,deps:u,next:null},n=Vt.updateQueue,n===null?(n={lastEffect:null,stores:null},Vt.updateQueue=n,n.lastEffect=t.next=t):(o=n.lastEffect,o===null?n.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,n.lastEffect=t)),t}function Hf(){return rr().memoizedState}function il(t,n,o,u){var h=Dr();Vt.flags|=t,h.memoizedState=Bo(1|n,o,void 0,u===void 0?null:u)}function sl(t,n,o,u){var h=rr();u=u===void 0?null:u;var p=void 0;if(qt!==null){var v=qt.memoizedState;if(p=v.destroy,u!==null&&Qu(u,v.deps)){h.memoizedState=Bo(n,o,p,u);return}}Vt.flags|=t,h.memoizedState=Bo(1|n,o,p,u)}function Kf(t,n){return il(8390656,8,t,n)}function Zu(t,n){return sl(2048,8,t,n)}function Qf(t,n){return sl(4,2,t,n)}function Gf(t,n){return sl(4,4,t,n)}function Yf(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Xf(t,n,o){return o=o!=null?o.concat([t]):null,sl(4,4,Yf.bind(null,n,t),o)}function ec(){}function Jf(t,n){var o=rr();n=n===void 0?null:n;var u=o.memoizedState;return u!==null&&n!==null&&Qu(n,u[1])?u[0]:(o.memoizedState=[t,n],t)}function Zf(t,n){var o=rr();n=n===void 0?null:n;var u=o.memoizedState;return u!==null&&n!==null&&Qu(n,u[1])?u[0]:(t=t(),o.memoizedState=[t,n],t)}function ed(t,n,o){return(rs&21)===0?(t.baseState&&(t.baseState=!1,Dn=!0),t.memoizedState=o):(mr(o,n)||(o=vi(),Vt.lanes|=o,is|=o,t.baseState=!0),n)}function oy(t,n){var o=$e;$e=o!==0&&4>o?o:4,t(!0);var u=Ku.transition;Ku.transition={};try{t(!1),n()}finally{$e=o,Ku.transition=u}}function td(){return rr().memoizedState}function ay(t,n,o){var u=Di(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},nd(t))rd(n,o);else if(o=Df(t,n,o,u),o!==null){var h=Cn();wr(o,t,u,h),id(o,n,u)}}function ly(t,n,o){var u=Di(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(nd(t))rd(n,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var v=n.lastRenderedState,T=p(v,o);if(h.hasEagerState=!0,h.eagerState=T,mr(T,v)){var R=n.interleaved;R===null?(h.next=h,Uu(n)):(h.next=R.next,R.next=h),n.interleaved=h;return}}catch{}finally{}o=Df(t,n,h,u),o!==null&&(h=Cn(),wr(o,t,u,h),id(o,n,u))}}function nd(t){var n=t.alternate;return t===Vt||n!==null&&n===Vt}function rd(t,n){Fo=rl=!0;var o=t.pending;o===null?n.next=n:(n.next=o.next,o.next=n),t.pending=n}function id(t,n,o){if((o&4194240)!==0){var u=n.lanes;u&=t.pendingLanes,o|=u,n.lanes=o,Hr(t,o)}}var ol={readContext:nr,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useInsertionEffect:gn,useLayoutEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useMutableSource:gn,useSyncExternalStore:gn,useId:gn,unstable_isNewReconciler:!1},uy={readContext:nr,useCallback:function(t,n){return Dr().memoizedState=[t,n===void 0?null:n],t},useContext:nr,useEffect:Kf,useImperativeHandle:function(t,n,o){return o=o!=null?o.concat([t]):null,il(4194308,4,Yf.bind(null,n,t),o)},useLayoutEffect:function(t,n){return il(4194308,4,t,n)},useInsertionEffect:function(t,n){return il(4,2,t,n)},useMemo:function(t,n){var o=Dr();return n=n===void 0?null:n,t=t(),o.memoizedState=[t,n],t},useReducer:function(t,n,o){var u=Dr();return n=o!==void 0?o(n):n,u.memoizedState=u.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},u.queue=t,t=t.dispatch=ay.bind(null,Vt,t),[u.memoizedState,t]},useRef:function(t){var n=Dr();return t={current:t},n.memoizedState=t},useState:qf,useDebugValue:ec,useDeferredValue:function(t){return Dr().memoizedState=t},useTransition:function(){var t=qf(!1),n=t[0];return t=oy.bind(null,t[1]),Dr().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,o){var u=Vt,h=Dr();if(At){if(o===void 0)throw Error(r(407));o=o()}else{if(o=n(),Zt===null)throw Error(r(349));(rs&30)!==0||Bf(u,n,o)}h.memoizedState=o;var p={value:o,getSnapshot:n};return h.queue=p,Kf(zf.bind(null,u,p,t),[t]),u.flags|=2048,Bo(9,Uf.bind(null,u,p,o,n),void 0,null),o},useId:function(){var t=Dr(),n=Zt.identifierPrefix;if(At){var o=ei,u=Zr;o=(u&~(1<<32-Fe(u)-1)).toString(32)+o,n=":"+n+"R"+o,o=jo++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=sy++,n=":"+n+"r"+o.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},cy={readContext:nr,useCallback:Jf,useContext:nr,useEffect:Zu,useImperativeHandle:Xf,useInsertionEffect:Qf,useLayoutEffect:Gf,useMemo:Zf,useReducer:Xu,useRef:Hf,useState:function(){return Xu(bo)},useDebugValue:ec,useDeferredValue:function(t){var n=rr();return ed(n,qt.memoizedState,t)},useTransition:function(){var t=Xu(bo)[0],n=rr().memoizedState;return[t,n]},useMutableSource:jf,useSyncExternalStore:bf,useId:td,unstable_isNewReconciler:!1},hy={readContext:nr,useCallback:Jf,useContext:nr,useEffect:Zu,useImperativeHandle:Xf,useInsertionEffect:Qf,useLayoutEffect:Gf,useMemo:Zf,useReducer:Ju,useRef:Hf,useState:function(){return Ju(bo)},useDebugValue:ec,useDeferredValue:function(t){var n=rr();return qt===null?n.memoizedState=t:ed(n,qt.memoizedState,t)},useTransition:function(){var t=Ju(bo)[0],n=rr().memoizedState;return[t,n]},useMutableSource:jf,useSyncExternalStore:bf,useId:td,unstable_isNewReconciler:!1};function yr(t,n){if(t&&t.defaultProps){n=oe({},n),t=t.defaultProps;for(var o in t)n[o]===void 0&&(n[o]=t[o]);return n}return n}function tc(t,n,o,u){n=t.memoizedState,o=o(u,n),o=o==null?n:oe({},n,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var al={isMounted:function(t){return(t=t._reactInternals)?pn(t)===t:!1},enqueueSetState:function(t,n,o){t=t._reactInternals;var u=Cn(),h=Di(t),p=ni(u,h);p.payload=n,o!=null&&(p.callback=o),n=Pi(t,p,h),n!==null&&(wr(n,t,h,u),Za(n,t,h))},enqueueReplaceState:function(t,n,o){t=t._reactInternals;var u=Cn(),h=Di(t),p=ni(u,h);p.tag=1,p.payload=n,o!=null&&(p.callback=o),n=Pi(t,p,h),n!==null&&(wr(n,t,h,u),Za(n,t,h))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var o=Cn(),u=Di(t),h=ni(o,u);h.tag=2,n!=null&&(h.callback=n),n=Pi(t,h,u),n!==null&&(wr(n,t,u,o),Za(n,t,u))}};function sd(t,n,o,u,h,p,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,v):n.prototype&&n.prototype.isPureReactComponent?!Ro(o,u)||!Ro(h,p):!0}function od(t,n,o){var u=!1,h=Ri,p=n.contextType;return typeof p=="object"&&p!==null?p=nr(p):(h=Nn(n)?Ji:mn.current,u=n.contextTypes,p=(u=u!=null)?js(t,h):Ri),n=new n(o,p),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=al,t.stateNode=n,n._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),n}function ad(t,n,o,u){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,u),n.state!==t&&al.enqueueReplaceState(n,n.state,null)}function nc(t,n,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},zu(t);var p=n.contextType;typeof p=="object"&&p!==null?h.context=nr(p):(p=Nn(n)?Ji:mn.current,h.context=js(t,p)),h.state=t.memoizedState,p=n.getDerivedStateFromProps,typeof p=="function"&&(tc(t,n,p,o),h.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(n=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),n!==h.state&&al.enqueueReplaceState(h,h.state,null),el(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Hs(t,n){try{var o="",u=n;do o+=Se(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:n,stack:h,digest:null}}function rc(t,n,o){return{value:t,source:null,stack:o??null,digest:n??null}}function ic(t,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var fy=typeof WeakMap=="function"?WeakMap:Map;function ld(t,n,o){o=ni(-1,o),o.tag=3,o.payload={element:null};var u=n.value;return o.callback=function(){pl||(pl=!0,_c=u),ic(t,n)},o}function ud(t,n,o){o=ni(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=n.value;o.payload=function(){return u(h)},o.callback=function(){ic(t,n)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){ic(t,n),typeof u!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var v=n.stack;this.componentDidCatch(n.value,{componentStack:v!==null?v:""})}),o}function cd(t,n,o){var u=t.pingCache;if(u===null){u=t.pingCache=new fy;var h=new Set;u.set(n,h)}else h=u.get(n),h===void 0&&(h=new Set,u.set(n,h));h.has(o)||(h.add(o),t=Ry.bind(null,t,n,o),n.then(t,t))}function hd(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function fd(t,n,o,u,h){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=ni(-1,1),n.tag=2,Pi(o,n,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var dy=ke.ReactCurrentOwner,Dn=!1;function Rn(t,n,o,u){n.child=t===null?Nf(n,null,o,u):zs(n,t.child,o,u)}function dd(t,n,o,u,h){o=o.render;var p=n.ref;return Ws(n,h),u=Gu(t,n,o,u,p,h),o=Yu(),t!==null&&!Dn?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~h,ri(t,n,h)):(At&&o&&Nu(n),n.flags|=1,Rn(t,n,u,h),n.child)}function pd(t,n,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Rc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=p,md(t,n,p,u,h)):(t=wl(o.type,null,u,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(p=t.child,(t.lanes&h)===0){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:Ro,o(v,u)&&t.ref===n.ref)return ri(t,n,h)}return n.flags|=1,t=Oi(p,u),t.ref=n.ref,t.return=n,n.child=t}function md(t,n,o,u,h){if(t!==null){var p=t.memoizedProps;if(Ro(p,u)&&t.ref===n.ref)if(Dn=!1,n.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Dn=!0);else return n.lanes=t.lanes,ri(t,n,h)}return sc(t,n,o,u,h)}function gd(t,n,o){var u=n.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(Qs,Wn),Wn|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,ft(Qs,Wn),Wn|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,ft(Qs,Wn),Wn|=u}else p!==null?(u=p.baseLanes|o,n.memoizedState=null):u=o,ft(Qs,Wn),Wn|=u;return Rn(t,n,h,o),n.child}function yd(t,n){var o=n.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function sc(t,n,o,u,h){var p=Nn(o)?Ji:mn.current;return p=js(n,p),Ws(n,h),o=Gu(t,n,o,u,p,h),u=Yu(),t!==null&&!Dn?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~h,ri(t,n,h)):(At&&u&&Nu(n),n.flags|=1,Rn(t,n,o,h),n.child)}function vd(t,n,o,u,h){if(Nn(o)){var p=!0;qa(n)}else p=!1;if(Ws(n,h),n.stateNode===null)ul(t,n),od(n,o,u),nc(n,o,u,h),u=!0;else if(t===null){var v=n.stateNode,T=n.memoizedProps;v.props=T;var R=v.context,B=o.contextType;typeof B=="object"&&B!==null?B=nr(B):(B=Nn(o)?Ji:mn.current,B=js(n,B));var G=o.getDerivedStateFromProps,Z=typeof G=="function"||typeof v.getSnapshotBeforeUpdate=="function";Z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==u||R!==B)&&ad(n,v,u,B),ki=!1;var Q=n.memoizedState;v.state=Q,el(n,u,v,h),R=n.memoizedState,T!==u||Q!==R||Vn.current||ki?(typeof G=="function"&&(tc(n,o,G,u),R=n.memoizedState),(T=ki||sd(n,o,T,u,Q,R,B))?(Z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(n.flags|=4194308)):(typeof v.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=u,n.memoizedState=R),v.props=u,v.state=R,v.context=B,u=T):(typeof v.componentDidMount=="function"&&(n.flags|=4194308),u=!1)}else{v=n.stateNode,Lf(t,n),T=n.memoizedProps,B=n.type===n.elementType?T:yr(n.type,T),v.props=B,Z=n.pendingProps,Q=v.context,R=o.contextType,typeof R=="object"&&R!==null?R=nr(R):(R=Nn(o)?Ji:mn.current,R=js(n,R));var le=o.getDerivedStateFromProps;(G=typeof le=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==Z||Q!==R)&&ad(n,v,u,R),ki=!1,Q=n.memoizedState,v.state=Q,el(n,u,v,h);var fe=n.memoizedState;T!==Z||Q!==fe||Vn.current||ki?(typeof le=="function"&&(tc(n,o,le,u),fe=n.memoizedState),(B=ki||sd(n,o,B,u,Q,fe,R)||!1)?(G||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,fe,R),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,fe,R)),typeof v.componentDidUpdate=="function"&&(n.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===t.memoizedProps&&Q===t.memoizedState||(n.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&Q===t.memoizedState||(n.flags|=1024),n.memoizedProps=u,n.memoizedState=fe),v.props=u,v.state=fe,v.context=R,u=B):(typeof v.componentDidUpdate!="function"||T===t.memoizedProps&&Q===t.memoizedState||(n.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&Q===t.memoizedState||(n.flags|=1024),u=!1)}return oc(t,n,o,u,p,h)}function oc(t,n,o,u,h,p){yd(t,n);var v=(n.flags&128)!==0;if(!u&&!v)return h&&Sf(n,o,!1),ri(t,n,p);u=n.stateNode,dy.current=n;var T=v&&typeof o.getDerivedStateFromError!="function"?null:u.render();return n.flags|=1,t!==null&&v?(n.child=zs(n,t.child,null,p),n.child=zs(n,null,T,p)):Rn(t,n,T,p),n.memoizedState=u.state,h&&Sf(n,o,!0),n.child}function _d(t){var n=t.stateNode;n.pendingContext?Ef(t,n.pendingContext,n.pendingContext!==n.context):n.context&&Ef(t,n.context,!1),$u(t,n.containerInfo)}function wd(t,n,o,u,h){return Us(),Mu(h),n.flags|=256,Rn(t,n,o,u),n.child}var ac={dehydrated:null,treeContext:null,retryLane:0};function lc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ed(t,n,o){var u=n.pendingProps,h=xt.current,p=!1,v=(n.flags&128)!==0,T;if((T=v)||(T=t!==null&&t.memoizedState===null?!1:(h&2)!==0),T?(p=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),ft(xt,h&1),t===null)return Ou(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(v=u.children,t=u.fallback,p?(u=n.mode,p=n.child,v={mode:"hidden",children:v},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=El(v,u,0,null),t=ls(t,u,o,null),p.return=n,t.return=n,p.sibling=t,n.child=p,n.child.memoizedState=lc(o),n.memoizedState=ac,t):uc(n,v));if(h=t.memoizedState,h!==null&&(T=h.dehydrated,T!==null))return py(t,n,v,u,T,h,o);if(p){p=u.fallback,v=n.mode,h=t.child,T=h.sibling;var R={mode:"hidden",children:u.children};return(v&1)===0&&n.child!==h?(u=n.child,u.childLanes=0,u.pendingProps=R,n.deletions=null):(u=Oi(h,R),u.subtreeFlags=h.subtreeFlags&14680064),T!==null?p=Oi(T,p):(p=ls(p,v,o,null),p.flags|=2),p.return=n,u.return=n,u.sibling=p,n.child=u,u=p,p=n.child,v=t.child.memoizedState,v=v===null?lc(o):{baseLanes:v.baseLanes|o,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=t.childLanes&~o,n.memoizedState=ac,u}return p=t.child,t=p.sibling,u=Oi(p,{mode:"visible",children:u.children}),(n.mode&1)===0&&(u.lanes=o),u.return=n,u.sibling=null,t!==null&&(o=n.deletions,o===null?(n.deletions=[t],n.flags|=16):o.push(t)),n.child=u,n.memoizedState=null,u}function uc(t,n){return n=El({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function ll(t,n,o,u){return u!==null&&Mu(u),zs(n,t.child,null,o),t=uc(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function py(t,n,o,u,h,p,v){if(o)return n.flags&256?(n.flags&=-257,u=rc(Error(r(422))),ll(t,n,v,u)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(p=u.fallback,h=n.mode,u=El({mode:"visible",children:u.children},h,0,null),p=ls(p,h,v,null),p.flags|=2,u.return=n,p.return=n,u.sibling=p,n.child=u,(n.mode&1)!==0&&zs(n,t.child,null,v),n.child.memoizedState=lc(v),n.memoizedState=ac,p);if((n.mode&1)===0)return ll(t,n,v,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var T=u.dgst;return u=T,p=Error(r(419)),u=rc(p,u,void 0),ll(t,n,v,u)}if(T=(v&t.childLanes)!==0,Dn||T){if(u=Zt,u!==null){switch(v&-v){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|v))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,ti(t,h),wr(u,t,h,-1))}return Ac(),u=rc(Error(r(421))),ll(t,n,v,u)}return h.data==="$?"?(n.flags|=128,n.child=t.child,n=Cy.bind(null,t),h._reactRetry=n,null):(t=p.treeContext,$n=Ii(h.nextSibling),zn=n,At=!0,gr=null,t!==null&&(er[tr++]=Zr,er[tr++]=ei,er[tr++]=Zi,Zr=t.id,ei=t.overflow,Zi=n),n=uc(n,u.children),n.flags|=4096,n)}function Td(t,n,o){t.lanes|=n;var u=t.alternate;u!==null&&(u.lanes|=n),Bu(t.return,n,o)}function cc(t,n,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function Sd(t,n,o){var u=n.pendingProps,h=u.revealOrder,p=u.tail;if(Rn(t,n,u.children,o),u=xt.current,(u&2)!==0)u=u&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Td(t,o,n);else if(t.tag===19)Td(t,o,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(ft(xt,u),(n.mode&1)===0)n.memoizedState=null;else switch(h){case"forwards":for(o=n.child,h=null;o!==null;)t=o.alternate,t!==null&&tl(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=n.child,n.child=null):(h=o.sibling,o.sibling=null),cc(n,!1,h,o,p);break;case"backwards":for(o=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&tl(t)===null){n.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}cc(n,!0,o,null,p);break;case"together":cc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function ul(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function ri(t,n,o){if(t!==null&&(n.dependencies=t.dependencies),is|=n.lanes,(o&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,o=Oi(t,t.pendingProps),n.child=o,o.return=n;t.sibling!==null;)t=t.sibling,o=o.sibling=Oi(t,t.pendingProps),o.return=n;o.sibling=null}return n.child}function my(t,n,o){switch(n.tag){case 3:_d(n),Us();break;case 5:Ff(n);break;case 1:Nn(n.type)&&qa(n);break;case 4:$u(n,n.stateNode.containerInfo);break;case 10:var u=n.type._context,h=n.memoizedProps.value;ft(Xa,u._currentValue),u._currentValue=h;break;case 13:if(u=n.memoizedState,u!==null)return u.dehydrated!==null?(ft(xt,xt.current&1),n.flags|=128,null):(o&n.child.childLanes)!==0?Ed(t,n,o):(ft(xt,xt.current&1),t=ri(t,n,o),t!==null?t.sibling:null);ft(xt,xt.current&1);break;case 19:if(u=(o&n.childLanes)!==0,(t.flags&128)!==0){if(u)return Sd(t,n,o);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ft(xt,xt.current),u)break;return null;case 22:case 23:return n.lanes=0,gd(t,n,o)}return ri(t,n,o)}var Id,hc,Ad,Rd;Id=function(t,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},hc=function(){},Ad=function(t,n,o,u){var h=t.memoizedProps;if(h!==u){t=n.stateNode,ns(Nr.current);var p=null;switch(o){case"input":h=H(t,h),u=H(t,u),p=[];break;case"select":h=oe({},h,{value:void 0}),u=oe({},u,{value:void 0}),p=[];break;case"textarea":h=Dt(t,h),u=Dt(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=za)}Qn(o,u);var v;o=null;for(B in h)if(!u.hasOwnProperty(B)&&h.hasOwnProperty(B)&&h[B]!=null)if(B==="style"){var T=h[B];for(v in T)T.hasOwnProperty(v)&&(o||(o={}),o[v]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(a.hasOwnProperty(B)?p||(p=[]):(p=p||[]).push(B,null));for(B in u){var R=u[B];if(T=h?.[B],u.hasOwnProperty(B)&&R!==T&&(R!=null||T!=null))if(B==="style")if(T){for(v in T)!T.hasOwnProperty(v)||R&&R.hasOwnProperty(v)||(o||(o={}),o[v]="");for(v in R)R.hasOwnProperty(v)&&T[v]!==R[v]&&(o||(o={}),o[v]=R[v])}else o||(p||(p=[]),p.push(B,o)),o=R;else B==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,T=T?T.__html:void 0,R!=null&&T!==R&&(p=p||[]).push(B,R)):B==="children"?typeof R!="string"&&typeof R!="number"||(p=p||[]).push(B,""+R):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(a.hasOwnProperty(B)?(R!=null&&B==="onScroll"&&vt("scroll",t),p||T===R||(p=[])):(p=p||[]).push(B,R))}o&&(p=p||[]).push("style",o);var B=p;(n.updateQueue=B)&&(n.flags|=4)}},Rd=function(t,n,o,u){o!==u&&(n.flags|=4)};function Uo(t,n){if(!At)switch(t.tailMode){case"hidden":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function yn(t){var n=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(n)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,n}function gy(t,n,o){var u=n.pendingProps;switch(Du(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(n),null;case 1:return Nn(n.type)&&Wa(),yn(n),null;case 3:return u=n.stateNode,qs(),_t(Vn),_t(mn),Hu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Ga(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gr!==null&&(Tc(gr),gr=null))),hc(t,n),yn(n),null;case 5:Wu(n);var h=ns(Mo.current);if(o=n.type,t!==null&&n.stateNode!=null)Ad(t,n,o,u,h),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!u){if(n.stateNode===null)throw Error(r(166));return yn(n),null}if(t=ns(Nr.current),Ga(n)){u=n.stateNode,o=n.type;var p=n.memoizedProps;switch(u[Vr]=n,u[Vo]=p,t=(n.mode&1)!==0,o){case"dialog":vt("cancel",u),vt("close",u);break;case"iframe":case"object":case"embed":vt("load",u);break;case"video":case"audio":for(h=0;h<ko.length;h++)vt(ko[h],u);break;case"source":vt("error",u);break;case"img":case"image":case"link":vt("error",u),vt("load",u);break;case"details":vt("toggle",u);break;case"input":wt(u,p),vt("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},vt("invalid",u);break;case"textarea":Gt(u,p),vt("invalid",u)}Qn(o,p),h=null;for(var v in p)if(p.hasOwnProperty(v)){var T=p[v];v==="children"?typeof T=="string"?u.textContent!==T&&(p.suppressHydrationWarning!==!0&&Ua(u.textContent,T,t),h=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&Ua(u.textContent,T,t),h=["children",""+T]):a.hasOwnProperty(v)&&T!=null&&v==="onScroll"&&vt("scroll",u)}switch(o){case"input":Pt(u),Ne(u,p,!0);break;case"textarea":Pt(u),Hn(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=za)}u=h,n.updateQueue=u,u!==null&&(n.flags|=4)}else{v=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Qe(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=v.createElement(o,{is:u.is}):(t=v.createElement(o),o==="select"&&(v=t,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):t=v.createElementNS(t,o),t[Vr]=n,t[Vo]=u,Id(t,n,!1,!1),n.stateNode=t;e:{switch(v=Br(o,u),o){case"dialog":vt("cancel",t),vt("close",t),h=u;break;case"iframe":case"object":case"embed":vt("load",t),h=u;break;case"video":case"audio":for(h=0;h<ko.length;h++)vt(ko[h],t);h=u;break;case"source":vt("error",t),h=u;break;case"img":case"image":case"link":vt("error",t),vt("load",t),h=u;break;case"details":vt("toggle",t),h=u;break;case"input":wt(t,u),h=H(t,u),vt("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=oe({},u,{value:void 0}),vt("invalid",t);break;case"textarea":Gt(t,u),h=Dt(t,u),vt("invalid",t);break;default:h=u}Qn(o,h),T=h;for(p in T)if(T.hasOwnProperty(p)){var R=T[p];p==="style"?Kn(t,R):p==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&lr(t,R)):p==="children"?typeof R=="string"?(o!=="textarea"||R!=="")&&kn(t,R):typeof R=="number"&&kn(t,""+R):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?R!=null&&p==="onScroll"&&vt("scroll",t):R!=null&&Ce(t,p,R,v))}switch(o){case"input":Pt(t),Ne(t,u,!1);break;case"textarea":Pt(t),Hn(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Pe(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?Et(t,!!u.multiple,p,!1):u.defaultValue!=null&&Et(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=za)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return yn(n),null;case 6:if(t&&n.stateNode!=null)Rd(t,n,t.memoizedProps,u);else{if(typeof u!="string"&&n.stateNode===null)throw Error(r(166));if(o=ns(Mo.current),ns(Nr.current),Ga(n)){if(u=n.stateNode,o=n.memoizedProps,u[Vr]=n,(p=u.nodeValue!==o)&&(t=zn,t!==null))switch(t.tag){case 3:Ua(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ua(u.nodeValue,o,(t.mode&1)!==0)}p&&(n.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[Vr]=n,n.stateNode=u}return yn(n),null;case 13:if(_t(xt),u=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(At&&$n!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Pf(),Us(),n.flags|=98560,p=!1;else if(p=Ga(n),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(r(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Vr]=n}else Us(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;yn(n),p=!1}else gr!==null&&(Tc(gr),gr=null),p=!0;if(!p)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=o,n):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(xt.current&1)!==0?Ht===0&&(Ht=3):Ac())),n.updateQueue!==null&&(n.flags|=4),yn(n),null);case 4:return qs(),hc(t,n),t===null&&Po(n.stateNode.containerInfo),yn(n),null;case 10:return bu(n.type._context),yn(n),null;case 17:return Nn(n.type)&&Wa(),yn(n),null;case 19:if(_t(xt),p=n.memoizedState,p===null)return yn(n),null;if(u=(n.flags&128)!==0,v=p.rendering,v===null)if(u)Uo(p,!1);else{if(Ht!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(v=tl(t),v!==null){for(n.flags|=128,Uo(p,!1),u=v.updateQueue,u!==null&&(n.updateQueue=u,n.flags|=4),n.subtreeFlags=0,u=o,o=n.child;o!==null;)p=o,t=u,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,t=v.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return ft(xt,xt.current&1|2),n.child}t=t.sibling}p.tail!==null&&lt()>Gs&&(n.flags|=128,u=!0,Uo(p,!1),n.lanes=4194304)}else{if(!u)if(t=tl(v),t!==null){if(n.flags|=128,u=!0,o=t.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),Uo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!At)return yn(n),null}else 2*lt()-p.renderingStartTime>Gs&&o!==1073741824&&(n.flags|=128,u=!0,Uo(p,!1),n.lanes=4194304);p.isBackwards?(v.sibling=n.child,n.child=v):(o=p.last,o!==null?o.sibling=v:n.child=v,p.last=v)}return p.tail!==null?(n=p.tail,p.rendering=n,p.tail=n.sibling,p.renderingStartTime=lt(),n.sibling=null,o=xt.current,ft(xt,u?o&1|2:o&1),n):(yn(n),null);case 22:case 23:return Ic(),u=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(n.flags|=8192),u&&(n.mode&1)!==0?(Wn&1073741824)!==0&&(yn(n),n.subtreeFlags&6&&(n.flags|=8192)):yn(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function yy(t,n){switch(Du(n),n.tag){case 1:return Nn(n.type)&&Wa(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return qs(),_t(Vn),_t(mn),Hu(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return Wu(n),null;case 13:if(_t(xt),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Us()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return _t(xt),null;case 4:return qs(),null;case 10:return bu(n.type._context),null;case 22:case 23:return Ic(),null;case 24:return null;default:return null}}var cl=!1,vn=!1,vy=typeof WeakSet=="function"?WeakSet:Set,he=null;function Ks(t,n){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){Ot(t,n,u)}else o.current=null}function fc(t,n,o){try{o()}catch(u){Ot(t,n,u)}}var Cd=!1;function _y(t,n){if(Iu=Ei,t=sf(),gu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,T=-1,R=-1,B=0,G=0,Z=t,Q=null;t:for(;;){for(var le;Z!==o||h!==0&&Z.nodeType!==3||(T=v+h),Z!==p||u!==0&&Z.nodeType!==3||(R=v+u),Z.nodeType===3&&(v+=Z.nodeValue.length),(le=Z.firstChild)!==null;)Q=Z,Z=le;for(;;){if(Z===t)break t;if(Q===o&&++B===h&&(T=v),Q===p&&++G===u&&(R=v),(le=Z.nextSibling)!==null)break;Z=Q,Q=Z.parentNode}Z=le}o=T===-1||R===-1?null:{start:T,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(Au={focusedElem:t,selectionRange:o},Ei=!1,he=n;he!==null;)if(n=he,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,he=t;else for(;he!==null;){n=he;try{var fe=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var de=fe.memoizedProps,jt=fe.memoizedState,O=n.stateNode,x=O.getSnapshotBeforeUpdate(n.elementType===n.type?de:yr(n.type,de),jt);O.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var F=n.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(te){Ot(n,n.return,te)}if(t=n.sibling,t!==null){t.return=n.return,he=t;break}he=n.return}return fe=Cd,Cd=!1,fe}function zo(t,n,o){var u=n.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&fc(n,o,p)}h=h.next}while(h!==u)}}function hl(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==n)}}function dc(t){var n=t.ref;if(n!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof n=="function"?n(t):n.current=t}}function kd(t){var n=t.alternate;n!==null&&(t.alternate=null,kd(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[Vr],delete n[Vo],delete n[Pu],delete n[ty],delete n[ny])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Pd(t){return t.tag===5||t.tag===3||t.tag===4}function xd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pc(t,n,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(t,n):o.insertBefore(t,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(t,o)):(n=o,n.appendChild(t)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=za));else if(u!==4&&(t=t.child,t!==null))for(pc(t,n,o),t=t.sibling;t!==null;)pc(t,n,o),t=t.sibling}function mc(t,n,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?o.insertBefore(t,n):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(mc(t,n,o),t=t.sibling;t!==null;)mc(t,n,o),t=t.sibling}var on=null,vr=!1;function xi(t,n,o){for(o=o.child;o!==null;)Vd(t,n,o),o=o.sibling}function Vd(t,n,o){if(ae&&typeof ae.onCommitFiberUnmount=="function")try{ae.onCommitFiberUnmount(ce,o)}catch{}switch(o.tag){case 5:vn||Ks(o,n);case 6:var u=on,h=vr;on=null,xi(t,n,o),on=u,vr=h,on!==null&&(vr?(t=on,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):on.removeChild(o.stateNode));break;case 18:on!==null&&(vr?(t=on,o=o.stateNode,t.nodeType===8?ku(t.parentNode,o):t.nodeType===1&&ku(t,o),dr(t)):ku(on,o.stateNode));break;case 4:u=on,h=vr,on=o.stateNode.containerInfo,vr=!0,xi(t,n,o),on=u,vr=h;break;case 0:case 11:case 14:case 15:if(!vn&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&fc(o,n,v),h=h.next}while(h!==u)}xi(t,n,o);break;case 1:if(!vn&&(Ks(o,n),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){Ot(o,n,T)}xi(t,n,o);break;case 21:xi(t,n,o);break;case 22:o.mode&1?(vn=(u=vn)||o.memoizedState!==null,xi(t,n,o),vn=u):xi(t,n,o);break;default:xi(t,n,o)}}function Nd(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new vy),n.forEach(function(u){var h=ky.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function _r(t,n){var o=n.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,v=n,T=v;e:for(;T!==null;){switch(T.tag){case 5:on=T.stateNode,vr=!1;break e;case 3:on=T.stateNode.containerInfo,vr=!0;break e;case 4:on=T.stateNode.containerInfo,vr=!0;break e}T=T.return}if(on===null)throw Error(r(160));Vd(p,v,h),on=null,vr=!1;var R=h.alternate;R!==null&&(R.return=null),h.return=null}catch(B){Ot(h,n,B)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Dd(n,t),n=n.sibling}function Dd(t,n){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_r(n,t),Lr(t),u&4){try{zo(3,t,t.return),hl(3,t)}catch(de){Ot(t,t.return,de)}try{zo(5,t,t.return)}catch(de){Ot(t,t.return,de)}}break;case 1:_r(n,t),Lr(t),u&512&&o!==null&&Ks(o,o.return);break;case 5:if(_r(n,t),Lr(t),u&512&&o!==null&&Ks(o,o.return),t.flags&32){var h=t.stateNode;try{kn(h,"")}catch(de){Ot(t,t.return,de)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,v=o!==null?o.memoizedProps:p,T=t.type,R=t.updateQueue;if(t.updateQueue=null,R!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&ct(h,p),Br(T,v);var B=Br(T,p);for(v=0;v<R.length;v+=2){var G=R[v],Z=R[v+1];G==="style"?Kn(h,Z):G==="dangerouslySetInnerHTML"?lr(h,Z):G==="children"?kn(h,Z):Ce(h,G,Z,B)}switch(T){case"input":Ke(h,p);break;case"textarea":pt(h,p);break;case"select":var Q=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var le=p.value;le!=null?Et(h,!!p.multiple,le,!1):Q!==!!p.multiple&&(p.defaultValue!=null?Et(h,!!p.multiple,p.defaultValue,!0):Et(h,!!p.multiple,p.multiple?[]:"",!1))}h[Vo]=p}catch(de){Ot(t,t.return,de)}}break;case 6:if(_r(n,t),Lr(t),u&4){if(t.stateNode===null)throw Error(r(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(de){Ot(t,t.return,de)}}break;case 3:if(_r(n,t),Lr(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{dr(n.containerInfo)}catch(de){Ot(t,t.return,de)}break;case 4:_r(n,t),Lr(t);break;case 13:_r(n,t),Lr(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(vc=lt())),u&4&&Nd(t);break;case 22:if(G=o!==null&&o.memoizedState!==null,t.mode&1?(vn=(B=vn)||G,_r(n,t),vn=B):_r(n,t),Lr(t),u&8192){if(B=t.memoizedState!==null,(t.stateNode.isHidden=B)&&!G&&(t.mode&1)!==0)for(he=t,G=t.child;G!==null;){for(Z=he=G;he!==null;){switch(Q=he,le=Q.child,Q.tag){case 0:case 11:case 14:case 15:zo(4,Q,Q.return);break;case 1:Ks(Q,Q.return);var fe=Q.stateNode;if(typeof fe.componentWillUnmount=="function"){u=Q,o=Q.return;try{n=u,fe.props=n.memoizedProps,fe.state=n.memoizedState,fe.componentWillUnmount()}catch(de){Ot(u,o,de)}}break;case 5:Ks(Q,Q.return);break;case 22:if(Q.memoizedState!==null){Md(Z);continue}}le!==null?(le.return=Q,he=le):Md(Z)}G=G.sibling}e:for(G=null,Z=t;;){if(Z.tag===5){if(G===null){G=Z;try{h=Z.stateNode,B?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=Z.stateNode,R=Z.memoizedProps.style,v=R!=null&&R.hasOwnProperty("display")?R.display:null,T.style.display=br("display",v))}catch(de){Ot(t,t.return,de)}}}else if(Z.tag===6){if(G===null)try{Z.stateNode.nodeValue=B?"":Z.memoizedProps}catch(de){Ot(t,t.return,de)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===t)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===t)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===t)break e;G===Z&&(G=null),Z=Z.return}G===Z&&(G=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:_r(n,t),Lr(t),u&4&&Nd(t);break;case 21:break;default:_r(n,t),Lr(t)}}function Lr(t){var n=t.flags;if(n&2){try{e:{for(var o=t.return;o!==null;){if(Pd(o)){var u=o;break e}o=o.return}throw Error(r(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(kn(h,""),u.flags&=-33);var p=xd(t);mc(t,p,h);break;case 3:case 4:var v=u.stateNode.containerInfo,T=xd(t);pc(t,T,v);break;default:throw Error(r(161))}}catch(R){Ot(t,t.return,R)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function wy(t,n,o){he=t,Ld(t)}function Ld(t,n,o){for(var u=(t.mode&1)!==0;he!==null;){var h=he,p=h.child;if(h.tag===22&&u){var v=h.memoizedState!==null||cl;if(!v){var T=h.alternate,R=T!==null&&T.memoizedState!==null||vn;T=cl;var B=vn;if(cl=v,(vn=R)&&!B)for(he=h;he!==null;)v=he,R=v.child,v.tag===22&&v.memoizedState!==null?Fd(h):R!==null?(R.return=v,he=R):Fd(h);for(;p!==null;)he=p,Ld(p),p=p.sibling;he=h,cl=T,vn=B}Od(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,he=p):Od(t)}}function Od(t){for(;he!==null;){var n=he;if((n.flags&8772)!==0){var o=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:vn||hl(5,n);break;case 1:var u=n.stateNode;if(n.flags&4&&!vn)if(o===null)u.componentDidMount();else{var h=n.elementType===n.type?o.memoizedProps:yr(n.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=n.updateQueue;p!==null&&Mf(n,p,u);break;case 3:var v=n.updateQueue;if(v!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}Mf(n,v,o)}break;case 5:var T=n.stateNode;if(o===null&&n.flags&4){o=T;var R=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&o.focus();break;case"img":R.src&&(o.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var B=n.alternate;if(B!==null){var G=B.memoizedState;if(G!==null){var Z=G.dehydrated;Z!==null&&dr(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}vn||n.flags&512&&dc(n)}catch(Q){Ot(n,n.return,Q)}}if(n===t){he=null;break}if(o=n.sibling,o!==null){o.return=n.return,he=o;break}he=n.return}}function Md(t){for(;he!==null;){var n=he;if(n===t){he=null;break}var o=n.sibling;if(o!==null){o.return=n.return,he=o;break}he=n.return}}function Fd(t){for(;he!==null;){var n=he;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{hl(4,n)}catch(R){Ot(n,o,R)}break;case 1:var u=n.stateNode;if(typeof u.componentDidMount=="function"){var h=n.return;try{u.componentDidMount()}catch(R){Ot(n,h,R)}}var p=n.return;try{dc(n)}catch(R){Ot(n,p,R)}break;case 5:var v=n.return;try{dc(n)}catch(R){Ot(n,v,R)}}}catch(R){Ot(n,n.return,R)}if(n===t){he=null;break}var T=n.sibling;if(T!==null){T.return=n.return,he=T;break}he=n.return}}var Ey=Math.ceil,fl=ke.ReactCurrentDispatcher,gc=ke.ReactCurrentOwner,ir=ke.ReactCurrentBatchConfig,Xe=0,Zt=null,zt=null,an=0,Wn=0,Qs=Ai(0),Ht=0,$o=null,is=0,dl=0,yc=0,Wo=null,Ln=null,vc=0,Gs=1/0,ii=null,pl=!1,_c=null,Vi=null,ml=!1,Ni=null,gl=0,qo=0,wc=null,yl=-1,vl=0;function Cn(){return(Xe&6)!==0?lt():yl!==-1?yl:yl=lt()}function Di(t){return(t.mode&1)===0?1:(Xe&2)!==0&&an!==0?an&-an:iy.transition!==null?(vl===0&&(vl=vi()),vl):(t=$e,t!==0||(t=window.event,t=t===void 0?16:_o(t.type)),t)}function wr(t,n,o,u){if(50<qo)throw qo=0,wc=null,Error(r(185));qr(t,o,u),((Xe&2)===0||t!==Zt)&&(t===Zt&&((Xe&2)===0&&(dl|=o),Ht===4&&Li(t,an)),On(t,u),o===1&&Xe===0&&(n.mode&1)===0&&(Gs=lt()+500,Ha&&Ci()))}function On(t,n){var o=t.callbackNode;rt(t,n);var u=Mt(t,t===Zt?an:0);if(u===0)o!==null&&gi(o),t.callbackNode=null,t.callbackPriority=0;else if(n=u&-u,t.callbackPriority!==n){if(o!=null&&gi(o),n===1)t.tag===0?ry(bd.bind(null,t)):If(bd.bind(null,t)),Zg(function(){(Xe&6)===0&&Ci()}),o=null;else{switch(_i(u)){case 1:o=Ir;break;case 4:o=Ar;break;case 16:o=$;break;case 536870912:o=Me;break;default:o=$}o=Kd(o,jd.bind(null,t))}t.callbackPriority=n,t.callbackNode=o}}function jd(t,n){if(yl=-1,vl=0,(Xe&6)!==0)throw Error(r(327));var o=t.callbackNode;if(Ys()&&t.callbackNode!==o)return null;var u=Mt(t,t===Zt?an:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||n)n=_l(t,u);else{n=u;var h=Xe;Xe|=2;var p=Ud();(Zt!==t||an!==n)&&(ii=null,Gs=lt()+500,os(t,n));do try{Iy();break}catch(T){Bd(t,T)}while(!0);ju(),fl.current=p,Xe=h,zt!==null?n=0:(Zt=null,an=0,n=Ht)}if(n!==0){if(n===2&&(h=Ft(t),h!==0&&(u=h,n=Ec(t,h))),n===1)throw o=$o,os(t,0),Li(t,u),On(t,lt()),o;if(n===6)Li(t,u);else{if(h=t.current.alternate,(u&30)===0&&!Ty(h)&&(n=_l(t,u),n===2&&(p=Ft(t),p!==0&&(u=p,n=Ec(t,p))),n===1))throw o=$o,os(t,0),Li(t,u),On(t,lt()),o;switch(t.finishedWork=h,t.finishedLanes=u,n){case 0:case 1:throw Error(r(345));case 2:as(t,Ln,ii);break;case 3:if(Li(t,u),(u&130023424)===u&&(n=vc+500-lt(),10<n)){if(Mt(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Cn(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Cu(as.bind(null,t,Ln,ii),n);break}as(t,Ln,ii);break;case 4:if(Li(t,u),(u&4194240)===u)break;for(n=t.eventTimes,h=-1;0<u;){var v=31-Fe(u);p=1<<v,v=n[v],v>h&&(h=v),u&=~p}if(u=h,u=lt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Ey(u/1960))-u,10<u){t.timeoutHandle=Cu(as.bind(null,t,Ln,ii),u);break}as(t,Ln,ii);break;case 5:as(t,Ln,ii);break;default:throw Error(r(329))}}}return On(t,lt()),t.callbackNode===o?jd.bind(null,t):null}function Ec(t,n){var o=Wo;return t.current.memoizedState.isDehydrated&&(os(t,n).flags|=256),t=_l(t,n),t!==2&&(n=Ln,Ln=o,n!==null&&Tc(n)),t}function Tc(t){Ln===null?Ln=t:Ln.push.apply(Ln,t)}function Ty(t){for(var n=t;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!mr(p(),h))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Li(t,n){for(n&=~yc,n&=~dl,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var o=31-Fe(n),u=1<<o;t[o]=-1,n&=~u}}function bd(t){if((Xe&6)!==0)throw Error(r(327));Ys();var n=Mt(t,0);if((n&1)===0)return On(t,lt()),null;var o=_l(t,n);if(t.tag!==0&&o===2){var u=Ft(t);u!==0&&(n=u,o=Ec(t,u))}if(o===1)throw o=$o,os(t,0),Li(t,n),On(t,lt()),o;if(o===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,as(t,Ln,ii),On(t,lt()),null}function Sc(t,n){var o=Xe;Xe|=1;try{return t(n)}finally{Xe=o,Xe===0&&(Gs=lt()+500,Ha&&Ci())}}function ss(t){Ni!==null&&Ni.tag===0&&(Xe&6)===0&&Ys();var n=Xe;Xe|=1;var o=ir.transition,u=$e;try{if(ir.transition=null,$e=1,t)return t()}finally{$e=u,ir.transition=o,Xe=n,(Xe&6)===0&&Ci()}}function Ic(){Wn=Qs.current,_t(Qs)}function os(t,n){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Jg(o)),zt!==null)for(o=zt.return;o!==null;){var u=o;switch(Du(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Wa();break;case 3:qs(),_t(Vn),_t(mn),Hu();break;case 5:Wu(u);break;case 4:qs();break;case 13:_t(xt);break;case 19:_t(xt);break;case 10:bu(u.type._context);break;case 22:case 23:Ic()}o=o.return}if(Zt=t,zt=t=Oi(t.current,null),an=Wn=n,Ht=0,$o=null,yc=dl=is=0,Ln=Wo=null,ts!==null){for(n=0;n<ts.length;n++)if(o=ts[n],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var v=p.next;p.next=h,u.next=v}o.pending=u}ts=null}return t}function Bd(t,n){do{var o=zt;try{if(ju(),nl.current=ol,rl){for(var u=Vt.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}rl=!1}if(rs=0,Jt=qt=Vt=null,Fo=!1,jo=0,gc.current=null,o===null||o.return===null){Ht=1,$o=n,zt=null;break}e:{var p=t,v=o.return,T=o,R=n;if(n=an,T.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var B=R,G=T,Z=G.tag;if((G.mode&1)===0&&(Z===0||Z===11||Z===15)){var Q=G.alternate;Q?(G.updateQueue=Q.updateQueue,G.memoizedState=Q.memoizedState,G.lanes=Q.lanes):(G.updateQueue=null,G.memoizedState=null)}var le=hd(v);if(le!==null){le.flags&=-257,fd(le,v,T,p,n),le.mode&1&&cd(p,B,n),n=le,R=B;var fe=n.updateQueue;if(fe===null){var de=new Set;de.add(R),n.updateQueue=de}else fe.add(R);break e}else{if((n&1)===0){cd(p,B,n),Ac();break e}R=Error(r(426))}}else if(At&&T.mode&1){var jt=hd(v);if(jt!==null){(jt.flags&65536)===0&&(jt.flags|=256),fd(jt,v,T,p,n),Mu(Hs(R,T));break e}}p=R=Hs(R,T),Ht!==4&&(Ht=2),Wo===null?Wo=[p]:Wo.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,n&=-n,p.lanes|=n;var O=ld(p,R,n);Of(p,O);break e;case 1:T=R;var x=p.type,F=p.stateNode;if((p.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Vi===null||!Vi.has(F)))){p.flags|=65536,n&=-n,p.lanes|=n;var te=ud(p,T,n);Of(p,te);break e}}p=p.return}while(p!==null)}$d(o)}catch(me){n=me,zt===o&&o!==null&&(zt=o=o.return);continue}break}while(!0)}function Ud(){var t=fl.current;return fl.current=ol,t===null?ol:t}function Ac(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Zt===null||(is&268435455)===0&&(dl&268435455)===0||Li(Zt,an)}function _l(t,n){var o=Xe;Xe|=2;var u=Ud();(Zt!==t||an!==n)&&(ii=null,os(t,n));do try{Sy();break}catch(h){Bd(t,h)}while(!0);if(ju(),Xe=o,fl.current=u,zt!==null)throw Error(r(261));return Zt=null,an=0,Ht}function Sy(){for(;zt!==null;)zd(zt)}function Iy(){for(;zt!==null&&!Hi();)zd(zt)}function zd(t){var n=Hd(t.alternate,t,Wn);t.memoizedProps=t.pendingProps,n===null?$d(t):zt=n,gc.current=null}function $d(t){var n=t;do{var o=n.alternate;if(t=n.return,(n.flags&32768)===0){if(o=gy(o,n,Wn),o!==null){zt=o;return}}else{if(o=yy(o,n),o!==null){o.flags&=32767,zt=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ht=6,zt=null;return}}if(n=n.sibling,n!==null){zt=n;return}zt=n=t}while(n!==null);Ht===0&&(Ht=5)}function as(t,n,o){var u=$e,h=ir.transition;try{ir.transition=null,$e=1,Ay(t,n,o,u)}finally{ir.transition=h,$e=u}return null}function Ay(t,n,o,u){do Ys();while(Ni!==null);if((Xe&6)!==0)throw Error(r(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(ut(t,p),t===Zt&&(zt=Zt=null,an=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||ml||(ml=!0,Kd($,function(){return Ys(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=ir.transition,ir.transition=null;var v=$e;$e=1;var T=Xe;Xe|=4,gc.current=null,_y(t,o),Dd(o,t),qg(Au),Ei=!!Iu,Au=Iu=null,t.current=o,wy(o),_s(),Xe=T,$e=v,ir.transition=p}else t.current=o;if(ml&&(ml=!1,Ni=t,gl=h),p=t.pendingLanes,p===0&&(Vi=null),Te(o.stateNode),On(t,lt()),n!==null)for(u=t.onRecoverableError,o=0;o<n.length;o++)h=n[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(pl)throw pl=!1,t=_c,_c=null,t;return(gl&1)!==0&&t.tag!==0&&Ys(),p=t.pendingLanes,(p&1)!==0?t===wc?qo++:(qo=0,wc=t):qo=0,Ci(),null}function Ys(){if(Ni!==null){var t=_i(gl),n=ir.transition,o=$e;try{if(ir.transition=null,$e=16>t?16:t,Ni===null)var u=!1;else{if(t=Ni,Ni=null,gl=0,(Xe&6)!==0)throw Error(r(331));var h=Xe;for(Xe|=4,he=t.current;he!==null;){var p=he,v=p.child;if((he.flags&16)!==0){var T=p.deletions;if(T!==null){for(var R=0;R<T.length;R++){var B=T[R];for(he=B;he!==null;){var G=he;switch(G.tag){case 0:case 11:case 15:zo(8,G,p)}var Z=G.child;if(Z!==null)Z.return=G,he=Z;else for(;he!==null;){G=he;var Q=G.sibling,le=G.return;if(kd(G),G===B){he=null;break}if(Q!==null){Q.return=le,he=Q;break}he=le}}}var fe=p.alternate;if(fe!==null){var de=fe.child;if(de!==null){fe.child=null;do{var jt=de.sibling;de.sibling=null,de=jt}while(de!==null)}}he=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,he=v;else e:for(;he!==null;){if(p=he,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:zo(9,p,p.return)}var O=p.sibling;if(O!==null){O.return=p.return,he=O;break e}he=p.return}}var x=t.current;for(he=x;he!==null;){v=he;var F=v.child;if((v.subtreeFlags&2064)!==0&&F!==null)F.return=v,he=F;else e:for(v=x;he!==null;){if(T=he,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:hl(9,T)}}catch(me){Ot(T,T.return,me)}if(T===v){he=null;break e}var te=T.sibling;if(te!==null){te.return=T.return,he=te;break e}he=T.return}}if(Xe=h,Ci(),ae&&typeof ae.onPostCommitFiberRoot=="function")try{ae.onPostCommitFiberRoot(ce,t)}catch{}u=!0}return u}finally{$e=o,ir.transition=n}}return!1}function Wd(t,n,o){n=Hs(o,n),n=ld(t,n,1),t=Pi(t,n,1),n=Cn(),t!==null&&(qr(t,1,n),On(t,n))}function Ot(t,n,o){if(t.tag===3)Wd(t,t,o);else for(;n!==null;){if(n.tag===3){Wd(n,t,o);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Vi===null||!Vi.has(u))){t=Hs(o,t),t=ud(n,t,1),n=Pi(n,t,1),t=Cn(),n!==null&&(qr(n,1,t),On(n,t));break}}n=n.return}}function Ry(t,n,o){var u=t.pingCache;u!==null&&u.delete(n),n=Cn(),t.pingedLanes|=t.suspendedLanes&o,Zt===t&&(an&o)===o&&(Ht===4||Ht===3&&(an&130023424)===an&&500>lt()-vc?os(t,0):yc|=o),On(t,n)}function qd(t,n){n===0&&((t.mode&1)===0?n=1:(n=ht,ht<<=1,(ht&130023424)===0&&(ht=4194304)));var o=Cn();t=ti(t,n),t!==null&&(qr(t,n,o),On(t,o))}function Cy(t){var n=t.memoizedState,o=0;n!==null&&(o=n.retryLane),qd(t,o)}function ky(t,n){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(n),qd(t,o)}var Hd;Hd=function(t,n,o){if(t!==null)if(t.memoizedProps!==n.pendingProps||Vn.current)Dn=!0;else{if((t.lanes&o)===0&&(n.flags&128)===0)return Dn=!1,my(t,n,o);Dn=(t.flags&131072)!==0}else Dn=!1,At&&(n.flags&1048576)!==0&&Af(n,Qa,n.index);switch(n.lanes=0,n.tag){case 2:var u=n.type;ul(t,n),t=n.pendingProps;var h=js(n,mn.current);Ws(n,o),h=Gu(null,n,u,t,h,o);var p=Yu();return n.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Nn(u)?(p=!0,qa(n)):p=!1,n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,zu(n),h.updater=al,n.stateNode=h,h._reactInternals=n,nc(n,u,t,o),n=oc(null,n,u,!0,p,o)):(n.tag=0,At&&p&&Nu(n),Rn(null,n,h,o),n=n.child),n;case 16:u=n.elementType;e:{switch(ul(t,n),t=n.pendingProps,h=u._init,u=h(u._payload),n.type=u,h=n.tag=xy(u),t=yr(u,t),h){case 0:n=sc(null,n,u,t,o);break e;case 1:n=vd(null,n,u,t,o);break e;case 11:n=dd(null,n,u,t,o);break e;case 14:n=pd(null,n,u,yr(u.type,t),o);break e}throw Error(r(306,u,""))}return n;case 0:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:yr(u,h),sc(t,n,u,h,o);case 1:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:yr(u,h),vd(t,n,u,h,o);case 3:e:{if(_d(n),t===null)throw Error(r(387));u=n.pendingProps,p=n.memoizedState,h=p.element,Lf(t,n),el(n,u,null,o);var v=n.memoizedState;if(u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){h=Hs(Error(r(423)),n),n=wd(t,n,u,o,h);break e}else if(u!==h){h=Hs(Error(r(424)),n),n=wd(t,n,u,o,h);break e}else for($n=Ii(n.stateNode.containerInfo.firstChild),zn=n,At=!0,gr=null,o=Nf(n,null,u,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Us(),u===h){n=ri(t,n,o);break e}Rn(t,n,u,o)}n=n.child}return n;case 5:return Ff(n),t===null&&Ou(n),u=n.type,h=n.pendingProps,p=t!==null?t.memoizedProps:null,v=h.children,Ru(u,h)?v=null:p!==null&&Ru(u,p)&&(n.flags|=32),yd(t,n),Rn(t,n,v,o),n.child;case 6:return t===null&&Ou(n),null;case 13:return Ed(t,n,o);case 4:return $u(n,n.stateNode.containerInfo),u=n.pendingProps,t===null?n.child=zs(n,null,u,o):Rn(t,n,u,o),n.child;case 11:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:yr(u,h),dd(t,n,u,h,o);case 7:return Rn(t,n,n.pendingProps,o),n.child;case 8:return Rn(t,n,n.pendingProps.children,o),n.child;case 12:return Rn(t,n,n.pendingProps.children,o),n.child;case 10:e:{if(u=n.type._context,h=n.pendingProps,p=n.memoizedProps,v=h.value,ft(Xa,u._currentValue),u._currentValue=v,p!==null)if(mr(p.value,v)){if(p.children===h.children&&!Vn.current){n=ri(t,n,o);break e}}else for(p=n.child,p!==null&&(p.return=n);p!==null;){var T=p.dependencies;if(T!==null){v=p.child;for(var R=T.firstContext;R!==null;){if(R.context===u){if(p.tag===1){R=ni(-1,o&-o),R.tag=2;var B=p.updateQueue;if(B!==null){B=B.shared;var G=B.pending;G===null?R.next=R:(R.next=G.next,G.next=R),B.pending=R}}p.lanes|=o,R=p.alternate,R!==null&&(R.lanes|=o),Bu(p.return,o,n),T.lanes|=o;break}R=R.next}}else if(p.tag===10)v=p.type===n.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(r(341));v.lanes|=o,T=v.alternate,T!==null&&(T.lanes|=o),Bu(v,o,n),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===n){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}Rn(t,n,h.children,o),n=n.child}return n;case 9:return h=n.type,u=n.pendingProps.children,Ws(n,o),h=nr(h),u=u(h),n.flags|=1,Rn(t,n,u,o),n.child;case 14:return u=n.type,h=yr(u,n.pendingProps),h=yr(u.type,h),pd(t,n,u,h,o);case 15:return md(t,n,n.type,n.pendingProps,o);case 17:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:yr(u,h),ul(t,n),n.tag=1,Nn(u)?(t=!0,qa(n)):t=!1,Ws(n,o),od(n,u,h),nc(n,u,h,o),oc(null,n,u,!0,t,o);case 19:return Sd(t,n,o);case 22:return gd(t,n,o)}throw Error(r(156,n.tag))};function Kd(t,n){return $r(t,n)}function Py(t,n,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(t,n,o,u){return new Py(t,n,o,u)}function Rc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xy(t){if(typeof t=="function")return Rc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D)return 11;if(t===Ct)return 14}return 2}function Oi(t,n){var o=t.alternate;return o===null?(o=sr(t.tag,n,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=n,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,n=t.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function wl(t,n,o,u,h,p){var v=2;if(u=t,typeof t=="function")Rc(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case C:return ls(o.children,h,p,n);case E:v=8,h|=8;break;case A:return t=sr(12,o,n,h|2),t.elementType=A,t.lanes=p,t;case I:return t=sr(13,o,n,h),t.elementType=I,t.lanes=p,t;case ot:return t=sr(19,o,n,h),t.elementType=ot,t.lanes=p,t;case ge:return El(o,h,p,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:v=10;break e;case V:v=9;break e;case D:v=11;break e;case Ct:v=14;break e;case kt:v=16,u=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return n=sr(v,o,n,h),n.elementType=t,n.type=u,n.lanes=p,n}function ls(t,n,o,u){return t=sr(7,t,u,n),t.lanes=o,t}function El(t,n,o,u){return t=sr(22,t,u,n),t.elementType=ge,t.lanes=o,t.stateNode={isHidden:!1},t}function Cc(t,n,o){return t=sr(6,t,null,n),t.lanes=o,t}function kc(t,n,o){return n=sr(4,t.children!==null?t.children:[],t.key,n),n.lanes=o,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function Vy(t,n,o,u,h){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wr(0),this.expirationTimes=Wr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Pc(t,n,o,u,h,p,v,T,R){return t=new Vy(t,n,o,T,R),n===1?(n=1,p===!0&&(n|=8)):n=0,p=sr(3,null,null,n),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},zu(p),t}function Ny(t,n,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ue,key:u==null?null:""+u,children:t,containerInfo:n,implementation:o}}function Qd(t){if(!t)return Ri;t=t._reactInternals;e:{if(pn(t)!==t||t.tag!==1)throw Error(r(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Nn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(t.tag===1){var o=t.type;if(Nn(o))return Tf(t,o,n)}return n}function Gd(t,n,o,u,h,p,v,T,R){return t=Pc(o,u,!0,t,h,p,v,T,R),t.context=Qd(null),o=t.current,u=Cn(),h=Di(o),p=ni(u,h),p.callback=n??null,Pi(o,p,h),t.current.lanes=h,qr(t,h,u),On(t,u),t}function Tl(t,n,o,u){var h=n.current,p=Cn(),v=Di(h);return o=Qd(o),n.context===null?n.context=o:n.pendingContext=o,n=ni(p,v),n.payload={element:t},u=u===void 0?null:u,u!==null&&(n.callback=u),t=Pi(h,n,v),t!==null&&(wr(t,h,v,p),Za(t,h,v)),v}function Sl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Yd(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<n?o:n}}function xc(t,n){Yd(t,n),(t=t.alternate)&&Yd(t,n)}function Dy(){return null}var Xd=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vc(t){this._internalRoot=t}Il.prototype.render=Vc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));Tl(t,n,null,null)},Il.prototype.unmount=Vc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;ss(function(){Tl(null,t,null,null)}),n[Xr]=null}};function Il(t){this._internalRoot=t}Il.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ia();t={blockedOn:null,target:t,priority:n};for(var o=0;o<Cr.length&&n!==0&&n<Cr[o].priority;o++);Cr.splice(o,0,t),o===0&&Ca(t)}};function Nc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Al(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jd(){}function Ly(t,n,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var B=Sl(v);p.call(B)}}var v=Gd(n,u,t,0,null,!1,!1,"",Jd);return t._reactRootContainer=v,t[Xr]=v.current,Po(t.nodeType===8?t.parentNode:t),ss(),v}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var T=u;u=function(){var B=Sl(R);T.call(B)}}var R=Pc(t,0,!1,null,null,!1,!1,"",Jd);return t._reactRootContainer=R,t[Xr]=R.current,Po(t.nodeType===8?t.parentNode:t),ss(function(){Tl(n,R,o,u)}),R}function Rl(t,n,o,u,h){var p=o._reactRootContainer;if(p){var v=p;if(typeof h=="function"){var T=h;h=function(){var R=Sl(v);T.call(R)}}Tl(n,v,t,h)}else v=Ly(o,n,t,h,u);return Sl(v)}Ta=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var o=yt(n.pendingLanes);o!==0&&(Hr(n,o|1),On(n,lt()),(Xe&6)===0&&(Gs=lt()+500,Ci()))}break;case 13:ss(function(){var u=ti(t,1);if(u!==null){var h=Cn();wr(u,t,1,h)}}),xc(t,1)}},ws=function(t){if(t.tag===13){var n=ti(t,134217728);if(n!==null){var o=Cn();wr(n,t,134217728,o)}xc(t,134217728)}},Sa=function(t){if(t.tag===13){var n=Di(t),o=ti(t,n);if(o!==null){var u=Cn();wr(o,t,n,u)}xc(t,n)}},Ia=function(){return $e},Aa=function(t,n){var o=$e;try{return $e=t,n()}finally{$e=o}},jn=function(t,n,o){switch(n){case"input":if(Ke(t,o),n=o.name,o.type==="radio"&&n!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var u=o[n];if(u!==t&&u.form===t.form){var h=$a(u);if(!h)throw Error(r(90));Tr(u),Ke(u,h)}}}break;case"textarea":pt(t,o);break;case"select":n=o.value,n!=null&&Et(t,!!o.multiple,n,!1)}},Gn=Sc,ys=ss;var Oy={usingClientEntryPoint:!1,Events:[No,Ms,$a,fn,fi,Sc]},Ho={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},My={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ke.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tt(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||Dy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{ce=Cl.inject(My),ae=Cl}catch{}}return Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oy,Mn.createPortal=function(t,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nc(n))throw Error(r(200));return Ny(t,n,null,o)},Mn.createRoot=function(t,n){if(!Nc(t))throw Error(r(299));var o=!1,u="",h=Xd;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),n=Pc(t,1,!1,null,null,o,!1,u,h),t[Xr]=n.current,Po(t.nodeType===8?t.parentNode:t),new Vc(n)},Mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=tt(n),t=t===null?null:t.stateNode,t},Mn.flushSync=function(t){return ss(t)},Mn.hydrate=function(t,n,o){if(!Al(n))throw Error(r(200));return Rl(null,t,n,!0,o)},Mn.hydrateRoot=function(t,n,o){if(!Nc(t))throw Error(r(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",v=Xd;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),n=Gd(n,null,t,1,o??null,h,!1,p,v),t[Xr]=n.current,Po(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,h]:n.mutableSourceEagerHydrationData.push(o,h);return new Il(n)},Mn.render=function(t,n,o){if(!Al(n))throw Error(r(200));return Rl(null,t,n,!1,o)},Mn.unmountComponentAtNode=function(t){if(!Al(t))throw Error(r(40));return t._reactRootContainer?(ss(function(){Rl(null,null,t,!1,function(){t._reactRootContainer=null,t[Xr]=null})}),!0):!1},Mn.unstable_batchedUpdates=Sc,Mn.unstable_renderSubtreeIntoContainer=function(t,n,o,u){if(!Al(o))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return Rl(t,n,o,!1,u)},Mn.version="18.3.1-next-f1338f8080-20240426",Mn}var op;function qy(){if(op)return Oc.exports;op=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Oc.exports=Wy(),Oc.exports}var ap;function Hy(){if(ap)return kl;ap=1;var i=qy();return kl.createRoot=i.createRoot,kl.hydrateRoot=i.hydrateRoot,kl}var Ky=Hy();const Qy=rm(Ky),Gy=({onConsent:i,onDecline:e})=>M.jsxs("div",{className:"consent-container",children:[M.jsx("h1",{children:M.jsx("b",{children:M.jsx("u",{children:"Welcome"})})}),M.jsx("h2",{children:"but first, we need your consent to proceed..."}),M.jsx("hr",{}),M.jsxs("div",{className:"legal well",children:[M.jsx("p",{children:'We would like to invite you to take part in the following study named "Swipe and Type Study"'}),M.jsxs("p",{children:["This will take approximately 50 minutes, and you will be compensated $20 upon completion.",M.jsx("br",{}),"Please understand that we ",M.jsx("em",{children:"reserve the right to not compensate entries"})," that fail to follow instructions."]}),M.jsx("div",{className:"consent-form",children:M.jsx("iframe",{frameBorder:"1",src:"https://drive.google.com/file/d/1_jkO8vZMrpOrZMgEhpZuFgGcBjGE72Yg/preview",title:"Consent Form"})})]}),M.jsx("h4",{children:'If you agree and consent to these terms, please click "I Agree" to continue.'}),M.jsxs("div",{className:"button-container",children:[M.jsx("button",{className:"btn btn-danger",onClick:e,children:"I do NOT consent"}),M.jsx("button",{className:"btn btn-primary",onClick:i,children:"I Agree"})]})]});function Yy({onSubmit:i}){const[e,r]=X.useState({workerId:"",name:"",age:"",gender:"",handedness:"",mouseDpi:"",repeat:"",ethnicity:"",race:""}),s=c=>{const{name:f,value:m}=c.target;r(y=>({...y,[f]:m}))},a=async c=>{c.preventDefault();try{i(e)}catch(f){console.error("Error handling form submission:",f)}};return M.jsxs("div",{className:"survey-container",children:[M.jsx("h1",{children:"Participant Information"}),M.jsxs("form",{onSubmit:a,children:[M.jsxs("div",{children:[M.jsx("label",{children:"Worker ID: "}),M.jsx("input",{type:"text",required:!0,name:"workerId",value:e.workerId,onChange:s})]}),M.jsxs("div",{children:[M.jsx("label",{children:"Name: "}),M.jsx("input",{type:"text",required:!0,name:"name",value:e.name,onChange:s})]}),M.jsxs("div",{children:[M.jsx("label",{children:"Age: "}),M.jsx("input",{type:"number",required:!0,name:"age",value:e.age,onChange:s})]}),M.jsxs("div",{children:[M.jsx("label",{children:"Gender: "}),M.jsxs("select",{required:!0,name:"gender",value:e.gender,onChange:s,children:[M.jsx("option",{value:"",children:"Select an option"}),M.jsx("option",{value:"male",children:"Male"}),M.jsx("option",{value:"female",children:"Female"}),M.jsx("option",{value:"other",children:"Other"})]})]}),M.jsxs("div",{children:[M.jsx("label",{children:"Handedness: "}),M.jsxs("select",{required:!0,name:"handedness",value:e.handedness,onChange:s,children:[M.jsx("option",{value:"",children:"Select an option"}),M.jsx("option",{value:"right",children:"Right Handed"}),M.jsx("option",{value:"left",children:"Left Handed"})]})]}),M.jsxs("div",{children:[M.jsx("label",{children:"Mouse DPI (optional): "}),M.jsx("input",{type:"number",name:"mouseDpi",value:e.mouseDpi,onChange:s,placeholder:"e.g., 800, 1200, 1600"})]}),M.jsxs("div",{children:[M.jsx("label",{children:"Have you done our experiments before? "}),M.jsxs("select",{required:!0,name:"repeat",value:e.repeat,onChange:s,children:[M.jsx("option",{value:"",children:"Select an option"}),M.jsx("option",{value:"yes",children:"Yes"}),M.jsx("option",{value:"no",children:"No"}),M.jsx("option",{value:"idk",children:"I don't remember"})]})]}),M.jsx("h2",{children:"Optional Information"}),M.jsxs("div",{children:[M.jsx("label",{children:"Ethnicity: "}),M.jsxs("select",{name:"ethnicity",value:e.ethnicity,onChange:s,children:[M.jsx("option",{value:"",children:"Select an option"}),M.jsx("option",{value:"hispanic",children:"Hispanic/Latinx"}),M.jsx("option",{value:"other",children:"Other"})]})]}),M.jsxs("div",{children:[M.jsx("label",{children:"Race: "}),M.jsxs("select",{name:"race",value:e.race,onChange:s,children:[M.jsx("option",{value:"",children:"Select an option"}),M.jsx("option",{value:"white",children:"White"}),M.jsx("option",{value:"black",children:"Black"}),M.jsx("option",{value:"asian",children:"Asian"}),M.jsx("option",{value:"native",children:"Native American"}),M.jsx("option",{value:"other",children:"Other"})]})]}),M.jsx("button",{type:"submit",className:"submit-button",children:"Submit"})]})]})}const Xy=({onStart:i,onPractice:e,currentPage:r=0,setCurrentPage:s})=>{const[a,c]=X.useState(0),f=r!==void 0?r:a,m=s||c,y=[{title:"Welcome to the Swipe-and-Type Study!",content:M.jsxs("div",{className:"instructions-content",children:[M.jsx("h2",{children:"Game Overview "}),M.jsx("p",{children:"In this game you will help a character move forward by taking alternating left and right steps. To make a step you will swipe your cursor left and right between two bars on the sides of the screen. Occasionally you will be given an opportunity to collect a reward by typing a short key sequence."})]})},{title:"Swiping to Move Forward",content:M.jsxs("div",{className:"instructions-content",children:[M.jsx("h2",{children:"Help the explorer take steps to move forward"}),M.jsx("p",{children:"Imagine you are guiding an explorer walking on a road. Each time the explorer takes a left step and a right step, they move one step forward. To make a left step, swipe your cursor to the left bar; to make a right step, swipe to the right bar. Make sure to alternate these swipes makes the explorer advance."}),M.jsx("h3",{children:"How your swipes map to steps"}),M.jsxs("ul",{children:[M.jsxs("li",{children:["Swipe to the ",M.jsx("strong",{children:"left bar"})," to take a left step."]}),M.jsxs("li",{children:["Swipe to the ",M.jsx("strong",{children:"right bar"})," to take a right step."]}),M.jsx("li",{children:"Left then right (or right then left) counts as forward movement."})]}),M.jsx("h3",{children:"Remember"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Keep moving back and forth at a steady pace; do not stop or stay on one side for too long."}),M.jsxs("li",{children:["If you slow down too much, a ",M.jsx("strong",{children:"Move Faster!"})," warning will appear."]}),M.jsx("li",{children:"You have to swipe all the way to the bar to register a step; the bar will disappear once reached."})]}),M.jsx("div",{className:"screenshot-placeholder",role:"img","aria-label":"Movement video",children:M.jsxs("video",{className:"instruction-screenshot",controls:!0,width:"100%",children:[M.jsx("source",{src:"/videos/movement-demo.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})})]})},{title:"Opportunities to Collect Rewards",content:M.jsxs("div",{className:"instructions-content",children:[M.jsx("h2",{children:"When Rewards Appear"}),M.jsx("p",{children:"Once you have started moving, after a delay, a small cue and a countdown will tell you a reward is coming. You will be cued regarding the value of the reward once it's imminent. When the reward is ready to be collected, a short key sequence will be shown."}),M.jsx("h3",{children:"How to collect a reward"}),M.jsxs("ol",{children:[M.jsxs("li",{children:["Watch the screen for the key sequence (letters will appear like: ",M.jsx("strong",{children:"A S D F"}),")."]}),M.jsxs("li",{children:["Type the keys in the exact order shown, using the keys ",M.jsx("strong",{children:"A, S, D, F"}),"."]}),M.jsx("li",{children:"If you complete the full sequence correctly, you receive the reward (points)"})]}),M.jsx("p",{children:"The reward counts toward your score. Practice keeping a steady movement so you can be ready when a reward appears."}),M.jsx("div",{className:"screenshot-placeholder",role:"img","aria-label":"Reward video",children:M.jsxs("video",{className:"instruction-screenshot",controls:!0,width:"100%",children:[M.jsx("source",{src:"/videos/reward-demo.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})})]})},{title:"Ready to Begin?",content:M.jsxs("div",{className:"instructions-content",children:[M.jsx("h2",{children:"In summary..."}),M.jsx("p",{children:"Swipe left and right between the bars to take alternating steps and move the explorer forward. When a reward appears, type the displayed key sequence exactly to collect it."}),M.jsxs("div",{className:"final-reminder",children:[M.jsx("h3",{children:"Quick Checklist"}),M.jsxs("ol",{children:[M.jsx("li",{children:"Keep swiping between the left and right bars at a steady pace."}),M.jsx("li",{children:"When a reward cue appears, type the shown key sequence (A, S, D, F) in order."}),M.jsx("li",{children:"Complete the practice round if available to get comfortable with movement and typing."})]})]})]})}],w=()=>{f<y.length-1&&m(f+1)},S=()=>{f>0&&m(f-1)},P=f===y.length-1,j=f===0;return M.jsx("div",{className:"instructions-container",children:M.jsxs("div",{className:"instructions",children:[M.jsx("h1",{children:y[f].title}),M.jsxs("div",{className:"page-indicator",children:["Page ",f+1," of ",y.length]}),y[f].content,M.jsxs("div",{className:"navigation-container",children:[!P&&M.jsxs("div",{className:"page-navigation",children:[M.jsx("button",{onClick:S,className:"nav-button prev-button",disabled:j,children:" Previous"}),M.jsx("button",{onClick:w,className:"nav-button next-button",children:"Next "})]}),P&&M.jsxs("div",{className:"button-container",children:[M.jsx("button",{onClick:S,className:"nav-button prev-button",children:" Previous"}),M.jsx("button",{onClick:e,className:"practice-button",children:"Practice"}),M.jsx("button",{onClick:i,className:"start-button",children:"Start Game"})]})]})]})})};var lp={};const im=function(i){const e=[];let r=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},Jy=function(i){const e=[];let r=0,s=0;for(;r<i.length;){const a=i[r++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[r++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[r++],f=i[r++],m=i[r++],y=((a&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=i[r++],f=i[r++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},sm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],f=a+1<i.length,m=f?i[a+1]:0,y=a+2<i.length,w=y?i[a+2]:0,S=c>>2,P=(c&3)<<4|m>>4;let j=(m&15)<<2|w>>6,W=w&63;y||(W=64,f||(j=64)),s.push(r[S],r[P],r[j],r[W])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(im(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Jy(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=r[i.charAt(a++)],m=a<i.length?r[i.charAt(a)]:0;++a;const w=a<i.length?r[i.charAt(a)]:64;++a;const P=a<i.length?r[i.charAt(a)]:64;if(++a,c==null||m==null||w==null||P==null)throw new Zy;const j=c<<2|m>>4;if(s.push(j),w!==64){const W=m<<4&240|w>>2;if(s.push(W),P!==64){const ee=w<<6&192|P;s.push(ee)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Zy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ev=function(i){const e=im(i);return sm.encodeByteArray(e,!0)},Bl=function(i){return ev(i).replace(/\./g,"")},tv=function(i){try{return sm.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const rv=()=>nv().__FIREBASE_DEFAULTS__,iv=()=>{if(typeof process>"u"||typeof lp>"u")return;const i=lp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},sv=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&tv(i[1]);return e&&JSON.parse(e)},gh=()=>{try{return rv()||iv()||sv()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},ov=i=>{var e,r;return(r=(e=gh())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[i]},av=i=>{const e=ov(i);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),s]:[e.substring(0,r),s]},om=()=>{var i;return(i=gh())===null||i===void 0?void 0:i.config};class lv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,s)=>{r?this.reject(r):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,s))}}}function uv(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Bl(JSON.stringify(r)),Bl(JSON.stringify(f)),""].join(".")}function cv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hv(){var i;const e=(i=gh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fv(){return!hv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dv(){try{return typeof indexedDB=="object"}catch{return!1}}function pv(){return new Promise((i,e)=>{try{let r=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(r){e(r)}})}const mv="FirebaseError";class co extends Error{constructor(e,r,s){super(r),this.code=e,this.customData=s,this.name=mv,Object.setPrototypeOf(this,co.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,am.prototype.create)}}class am{constructor(e,r,s){this.service=e,this.serviceName=r,this.errors=s}create(e,...r){const s=r[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?gv(c,s):"Error",m=`${this.serviceName}: ${f} (${a}).`;return new co(a,m,s)}}function gv(i,e){return i.replace(yv,(r,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const yv=/\{\$([^}]+)}/g;function Kc(i,e){if(i===e)return!0;const r=Object.keys(i),s=Object.keys(e);for(const a of r){if(!s.includes(a))return!1;const c=i[a],f=e[a];if(up(c)&&up(f)){if(!Kc(c,f))return!1}else if(c!==f)return!1}for(const a of s)if(!r.includes(a))return!1;return!0}function up(i){return i!==null&&typeof i=="object"}function ia(i){return i&&i._delegate?i._delegate:i}class sa{constructor(e,r,s){this.name=e,this.instanceFactory=r,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const us="[DEFAULT]";class vv{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const s=new lv;if(this.instancesDeferred.set(r,s),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const s=this.normalizeInstanceIdentifier(e?.identifier),a=(r=e?.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wv(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[r,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:r});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&f.resolve(a)}return a}onInit(e,r){var s;const a=this.normalizeInstanceIdentifier(r),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const f=this.instances.get(a);return f&&e(f,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,r){const s=this.onInitCallbacks.get(r);if(s)for(const a of s)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:_v(e),options:r}),this.instances.set(e,s),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _v(i){return i===us?void 0:i}function wv(i){return i.instantiationMode==="EAGER"}class Ev{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new vv(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}var Je;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Je||(Je={}));const Tv={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},Sv=Je.INFO,Iv={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},Av=(i,e,...r)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=Iv[e];if(a)console[a](`[${s}]  ${i.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lm{constructor(e){this.name=e,this._logLevel=Sv,this._logHandler=Av,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const Rv=(i,e)=>e.some(r=>i instanceof r);let cp,hp;function Cv(){return cp||(cp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kv(){return hp||(hp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const um=new WeakMap,Qc=new WeakMap,cm=new WeakMap,jc=new WeakMap,yh=new WeakMap;function Pv(i){const e=new Promise((r,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{r(ji(i.result)),a()},f=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(r=>{r instanceof IDBCursor&&um.set(r,i)}).catch(()=>{}),yh.set(e,i),e}function xv(i){if(Qc.has(i))return;const e=new Promise((r,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{r(),a()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});Qc.set(i,e)}let Gc={get(i,e,r){if(i instanceof IDBTransaction){if(e==="done")return Qc.get(i);if(e==="objectStoreNames")return i.objectStoreNames||cm.get(i);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ji(i[e])},set(i,e,r){return i[e]=r,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Vv(i){Gc=i(Gc)}function Nv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const s=i.call(bc(this),e,...r);return cm.set(s,e.sort?e.sort():[e]),ji(s)}:kv().includes(i)?function(...e){return i.apply(bc(this),e),ji(um.get(this))}:function(...e){return ji(i.apply(bc(this),e))}}function Dv(i){return typeof i=="function"?Nv(i):(i instanceof IDBTransaction&&xv(i),Rv(i,Cv())?new Proxy(i,Gc):i)}function ji(i){if(i instanceof IDBRequest)return Pv(i);if(jc.has(i))return jc.get(i);const e=Dv(i);return e!==i&&(jc.set(i,e),yh.set(e,i)),e}const bc=i=>yh.get(i);function Lv(i,e,{blocked:r,upgrade:s,blocking:a,terminated:c}={}){const f=indexedDB.open(i,e),m=ji(f);return s&&f.addEventListener("upgradeneeded",y=>{s(ji(f.result),y.oldVersion,y.newVersion,ji(f.transaction),y)}),r&&f.addEventListener("blocked",y=>r(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",w=>a(w.oldVersion,w.newVersion,w))}).catch(()=>{}),m}const Ov=["get","getKey","getAll","getAllKeys","count"],Mv=["put","add","delete","clear"],Bc=new Map;function fp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Bc.get(e))return Bc.get(e);const r=e.replace(/FromIndex$/,""),s=e!==r,a=Mv.includes(r);if(!(r in(s?IDBIndex:IDBObjectStore).prototype)||!(a||Ov.includes(r)))return;const c=async function(f,...m){const y=this.transaction(f,a?"readwrite":"readonly");let w=y.store;return s&&(w=w.index(m.shift())),(await Promise.all([w[r](...m),a&&y.done]))[0]};return Bc.set(e,c),c}Vv(i=>({...i,get:(e,r,s)=>fp(e,r)||i.get(e,r,s),has:(e,r)=>!!fp(e,r)||i.has(e,r)}));class Fv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(jv(r)){const s=r.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(r=>r).join(" ")}}function jv(i){const e=i.getComponent();return e?.type==="VERSION"}const Yc="@firebase/app",dp="0.10.13";const oi=new lm("@firebase/app"),bv="@firebase/app-compat",Bv="@firebase/analytics-compat",Uv="@firebase/analytics",zv="@firebase/app-check-compat",$v="@firebase/app-check",Wv="@firebase/auth",qv="@firebase/auth-compat",Hv="@firebase/database",Kv="@firebase/data-connect",Qv="@firebase/database-compat",Gv="@firebase/functions",Yv="@firebase/functions-compat",Xv="@firebase/installations",Jv="@firebase/installations-compat",Zv="@firebase/messaging",e_="@firebase/messaging-compat",t_="@firebase/performance",n_="@firebase/performance-compat",r_="@firebase/remote-config",i_="@firebase/remote-config-compat",s_="@firebase/storage",o_="@firebase/storage-compat",a_="@firebase/firestore",l_="@firebase/vertexai-preview",u_="@firebase/firestore-compat",c_="firebase",h_="10.14.1";const Xc="[DEFAULT]",f_={[Yc]:"fire-core",[bv]:"fire-core-compat",[Uv]:"fire-analytics",[Bv]:"fire-analytics-compat",[$v]:"fire-app-check",[zv]:"fire-app-check-compat",[Wv]:"fire-auth",[qv]:"fire-auth-compat",[Hv]:"fire-rtdb",[Kv]:"fire-data-connect",[Qv]:"fire-rtdb-compat",[Gv]:"fire-fn",[Yv]:"fire-fn-compat",[Xv]:"fire-iid",[Jv]:"fire-iid-compat",[Zv]:"fire-fcm",[e_]:"fire-fcm-compat",[t_]:"fire-perf",[n_]:"fire-perf-compat",[r_]:"fire-rc",[i_]:"fire-rc-compat",[s_]:"fire-gcs",[o_]:"fire-gcs-compat",[a_]:"fire-fst",[u_]:"fire-fst-compat",[l_]:"fire-vertex","fire-js":"fire-js",[c_]:"fire-js-all"};const Ul=new Map,d_=new Map,Jc=new Map;function pp(i,e){try{i.container.addComponent(e)}catch(r){oi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,r)}}function zl(i){const e=i.name;if(Jc.has(e))return oi.debug(`There were multiple attempts to register component ${e}.`),!1;Jc.set(e,i);for(const r of Ul.values())pp(r,i);for(const r of d_.values())pp(r,i);return!0}function p_(i,e){const r=i.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),i.container.getProvider(e)}const m_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new am("app","Firebase",m_);class g_{constructor(e,r,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}const y_=h_;function hm(i,e={}){let r=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Xc,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw bi.create("bad-app-name",{appName:String(a)});if(r||(r=om()),!r)throw bi.create("no-options");const c=Ul.get(a);if(c){if(Kc(r,c.options)&&Kc(s,c.config))return c;throw bi.create("duplicate-app",{appName:a})}const f=new Ev(a);for(const y of Jc.values())f.addComponent(y);const m=new g_(r,s,f);return Ul.set(a,m),m}function v_(i=Xc){const e=Ul.get(i);if(!e&&i===Xc&&om())return hm();if(!e)throw bi.create("no-app",{appName:i});return e}function to(i,e,r){var s;let a=(s=f_[i])!==null&&s!==void 0?s:i;r&&(a+=`-${r}`);const c=a.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oi.warn(m.join(" "));return}zl(new sa(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const __="firebase-heartbeat-database",w_=1,oa="firebase-heartbeat-store";let Uc=null;function fm(){return Uc||(Uc=Lv(__,w_,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(oa)}catch(r){console.warn(r)}}}}).catch(i=>{throw bi.create("idb-open",{originalErrorMessage:i.message})})),Uc}async function E_(i){try{const r=(await fm()).transaction(oa),s=await r.objectStore(oa).get(dm(i));return await r.done,s}catch(e){if(e instanceof co)oi.warn(e.message);else{const r=bi.create("idb-get",{originalErrorMessage:e?.message});oi.warn(r.message)}}}async function mp(i,e){try{const s=(await fm()).transaction(oa,"readwrite");await s.objectStore(oa).put(e,dm(i)),await s.done}catch(r){if(r instanceof co)oi.warn(r.message);else{const s=bi.create("idb-set",{originalErrorMessage:r?.message});oi.warn(s.message)}}}function dm(i){return`${i.name}!${i.options.appId}`}const T_=1024,S_=720*60*60*1e3;class I_{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new R_(r),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=gp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const m=new Date(f.date).valueOf();return Date.now()-m<=S_}),this._storage.overwrite(this._heartbeatsCache))}catch(s){oi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=gp(),{heartbeatsToSend:s,unsentEntries:a}=A_(this._heartbeatsCache.heartbeats),c=Bl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(r){return oi.warn(r),""}}}function gp(){return new Date().toISOString().substring(0,10)}function A_(i,e=T_){const r=[];let s=i.slice();for(const a of i){const c=r.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),yp(r)>e){c.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),yp(r)>e){r.pop();break}s=s.slice(1)}return{heartbeatsToSend:r,unsentEntries:s}}class R_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dv()?pv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await E_(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return mp(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return mp(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function yp(i){return Bl(JSON.stringify({version:2,heartbeats:i})).length}function C_(i){zl(new sa("platform-logger",e=>new Fv(e),"PRIVATE")),zl(new sa("heartbeat",e=>new I_(e),"PRIVATE")),to(Yc,dp,i),to(Yc,dp,"esm2017"),to("fire-js","")}C_("");var k_="firebase",P_="10.14.1";to(k_,P_,"app");var vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var hs,pm;(function(){var i;function e(C,E){function A(){}A.prototype=E.prototype,C.D=E.prototype,C.prototype=new A,C.prototype.constructor=C,C.C=function(k,V,D){for(var I=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)I[ot-2]=arguments[ot];return E.prototype[V].apply(k,I)}}function r(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,r),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,E,A){A||(A=0);var k=Array(16);if(typeof E=="string")for(var V=0;16>V;++V)k[V]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(V=0;16>V;++V)k[V]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=C.g[0],A=C.g[1],V=C.g[2];var D=C.g[3],I=E+(D^A&(V^D))+k[0]+3614090360&4294967295;E=A+(I<<7&4294967295|I>>>25),I=D+(V^E&(A^V))+k[1]+3905402710&4294967295,D=E+(I<<12&4294967295|I>>>20),I=V+(A^D&(E^A))+k[2]+606105819&4294967295,V=D+(I<<17&4294967295|I>>>15),I=A+(E^V&(D^E))+k[3]+3250441966&4294967295,A=V+(I<<22&4294967295|I>>>10),I=E+(D^A&(V^D))+k[4]+4118548399&4294967295,E=A+(I<<7&4294967295|I>>>25),I=D+(V^E&(A^V))+k[5]+1200080426&4294967295,D=E+(I<<12&4294967295|I>>>20),I=V+(A^D&(E^A))+k[6]+2821735955&4294967295,V=D+(I<<17&4294967295|I>>>15),I=A+(E^V&(D^E))+k[7]+4249261313&4294967295,A=V+(I<<22&4294967295|I>>>10),I=E+(D^A&(V^D))+k[8]+1770035416&4294967295,E=A+(I<<7&4294967295|I>>>25),I=D+(V^E&(A^V))+k[9]+2336552879&4294967295,D=E+(I<<12&4294967295|I>>>20),I=V+(A^D&(E^A))+k[10]+4294925233&4294967295,V=D+(I<<17&4294967295|I>>>15),I=A+(E^V&(D^E))+k[11]+2304563134&4294967295,A=V+(I<<22&4294967295|I>>>10),I=E+(D^A&(V^D))+k[12]+1804603682&4294967295,E=A+(I<<7&4294967295|I>>>25),I=D+(V^E&(A^V))+k[13]+4254626195&4294967295,D=E+(I<<12&4294967295|I>>>20),I=V+(A^D&(E^A))+k[14]+2792965006&4294967295,V=D+(I<<17&4294967295|I>>>15),I=A+(E^V&(D^E))+k[15]+1236535329&4294967295,A=V+(I<<22&4294967295|I>>>10),I=E+(V^D&(A^V))+k[1]+4129170786&4294967295,E=A+(I<<5&4294967295|I>>>27),I=D+(A^V&(E^A))+k[6]+3225465664&4294967295,D=E+(I<<9&4294967295|I>>>23),I=V+(E^A&(D^E))+k[11]+643717713&4294967295,V=D+(I<<14&4294967295|I>>>18),I=A+(D^E&(V^D))+k[0]+3921069994&4294967295,A=V+(I<<20&4294967295|I>>>12),I=E+(V^D&(A^V))+k[5]+3593408605&4294967295,E=A+(I<<5&4294967295|I>>>27),I=D+(A^V&(E^A))+k[10]+38016083&4294967295,D=E+(I<<9&4294967295|I>>>23),I=V+(E^A&(D^E))+k[15]+3634488961&4294967295,V=D+(I<<14&4294967295|I>>>18),I=A+(D^E&(V^D))+k[4]+3889429448&4294967295,A=V+(I<<20&4294967295|I>>>12),I=E+(V^D&(A^V))+k[9]+568446438&4294967295,E=A+(I<<5&4294967295|I>>>27),I=D+(A^V&(E^A))+k[14]+3275163606&4294967295,D=E+(I<<9&4294967295|I>>>23),I=V+(E^A&(D^E))+k[3]+4107603335&4294967295,V=D+(I<<14&4294967295|I>>>18),I=A+(D^E&(V^D))+k[8]+1163531501&4294967295,A=V+(I<<20&4294967295|I>>>12),I=E+(V^D&(A^V))+k[13]+2850285829&4294967295,E=A+(I<<5&4294967295|I>>>27),I=D+(A^V&(E^A))+k[2]+4243563512&4294967295,D=E+(I<<9&4294967295|I>>>23),I=V+(E^A&(D^E))+k[7]+1735328473&4294967295,V=D+(I<<14&4294967295|I>>>18),I=A+(D^E&(V^D))+k[12]+2368359562&4294967295,A=V+(I<<20&4294967295|I>>>12),I=E+(A^V^D)+k[5]+4294588738&4294967295,E=A+(I<<4&4294967295|I>>>28),I=D+(E^A^V)+k[8]+2272392833&4294967295,D=E+(I<<11&4294967295|I>>>21),I=V+(D^E^A)+k[11]+1839030562&4294967295,V=D+(I<<16&4294967295|I>>>16),I=A+(V^D^E)+k[14]+4259657740&4294967295,A=V+(I<<23&4294967295|I>>>9),I=E+(A^V^D)+k[1]+2763975236&4294967295,E=A+(I<<4&4294967295|I>>>28),I=D+(E^A^V)+k[4]+1272893353&4294967295,D=E+(I<<11&4294967295|I>>>21),I=V+(D^E^A)+k[7]+4139469664&4294967295,V=D+(I<<16&4294967295|I>>>16),I=A+(V^D^E)+k[10]+3200236656&4294967295,A=V+(I<<23&4294967295|I>>>9),I=E+(A^V^D)+k[13]+681279174&4294967295,E=A+(I<<4&4294967295|I>>>28),I=D+(E^A^V)+k[0]+3936430074&4294967295,D=E+(I<<11&4294967295|I>>>21),I=V+(D^E^A)+k[3]+3572445317&4294967295,V=D+(I<<16&4294967295|I>>>16),I=A+(V^D^E)+k[6]+76029189&4294967295,A=V+(I<<23&4294967295|I>>>9),I=E+(A^V^D)+k[9]+3654602809&4294967295,E=A+(I<<4&4294967295|I>>>28),I=D+(E^A^V)+k[12]+3873151461&4294967295,D=E+(I<<11&4294967295|I>>>21),I=V+(D^E^A)+k[15]+530742520&4294967295,V=D+(I<<16&4294967295|I>>>16),I=A+(V^D^E)+k[2]+3299628645&4294967295,A=V+(I<<23&4294967295|I>>>9),I=E+(V^(A|~D))+k[0]+4096336452&4294967295,E=A+(I<<6&4294967295|I>>>26),I=D+(A^(E|~V))+k[7]+1126891415&4294967295,D=E+(I<<10&4294967295|I>>>22),I=V+(E^(D|~A))+k[14]+2878612391&4294967295,V=D+(I<<15&4294967295|I>>>17),I=A+(D^(V|~E))+k[5]+4237533241&4294967295,A=V+(I<<21&4294967295|I>>>11),I=E+(V^(A|~D))+k[12]+1700485571&4294967295,E=A+(I<<6&4294967295|I>>>26),I=D+(A^(E|~V))+k[3]+2399980690&4294967295,D=E+(I<<10&4294967295|I>>>22),I=V+(E^(D|~A))+k[10]+4293915773&4294967295,V=D+(I<<15&4294967295|I>>>17),I=A+(D^(V|~E))+k[1]+2240044497&4294967295,A=V+(I<<21&4294967295|I>>>11),I=E+(V^(A|~D))+k[8]+1873313359&4294967295,E=A+(I<<6&4294967295|I>>>26),I=D+(A^(E|~V))+k[15]+4264355552&4294967295,D=E+(I<<10&4294967295|I>>>22),I=V+(E^(D|~A))+k[6]+2734768916&4294967295,V=D+(I<<15&4294967295|I>>>17),I=A+(D^(V|~E))+k[13]+1309151649&4294967295,A=V+(I<<21&4294967295|I>>>11),I=E+(V^(A|~D))+k[4]+4149444226&4294967295,E=A+(I<<6&4294967295|I>>>26),I=D+(A^(E|~V))+k[11]+3174756917&4294967295,D=E+(I<<10&4294967295|I>>>22),I=V+(E^(D|~A))+k[2]+718787259&4294967295,V=D+(I<<15&4294967295|I>>>17),I=A+(D^(V|~E))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(V+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+V&4294967295,C.g[3]=C.g[3]+D&4294967295}s.prototype.u=function(C,E){E===void 0&&(E=C.length);for(var A=E-this.blockSize,k=this.B,V=this.h,D=0;D<E;){if(V==0)for(;D<=A;)a(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<E;)if(k[V++]=C.charCodeAt(D++),V==this.blockSize){a(this,k),V=0;break}}else for(;D<E;)if(k[V++]=C[D++],V==this.blockSize){a(this,k),V=0;break}}this.h=V,this.o+=E},s.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var A=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=A&255,A/=256;for(this.u(C),C=Array(16),E=A=0;4>E;++E)for(var k=0;32>k;k+=8)C[A++]=this.g[E]>>>k&255;return C};function c(C,E){var A=m;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=E(C)}function f(C,E){this.h=E;for(var A=[],k=!0,V=C.length-1;0<=V;V--){var D=C[V]|0;k&&D==E||(A[V]=D,k=!1)}this.g=A}var m={};function y(C){return-128<=C&&128>C?c(C,function(E){return new f([E|0],0>E?-1:0)}):new f([C|0],0>C?-1:0)}function w(C){if(isNaN(C)||!isFinite(C))return P;if(0>C)return K(w(-C));for(var E=[],A=1,k=0;C>=A;k++)E[k]=C/A|0,A*=4294967296;return new f(E,0)}function S(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return K(S(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=w(Math.pow(E,8)),k=P,V=0;V<C.length;V+=8){var D=Math.min(8,C.length-V),I=parseInt(C.substring(V,V+D),E);8>D?(D=w(Math.pow(E,D)),k=k.j(D).add(w(I))):(k=k.j(A),k=k.add(w(I)))}return k}var P=y(0),j=y(1),W=y(16777216);i=f.prototype,i.m=function(){if(q(this))return-K(this).m();for(var C=0,E=1,A=0;A<this.g.length;A++){var k=this.i(A);C+=(0<=k?k:4294967296+k)*E,E*=4294967296}return C},i.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(ee(this))return"0";if(q(this))return"-"+K(this).toString(C);for(var E=w(Math.pow(C,6)),A=this,k="";;){var V=ke(A,E).g;A=se(A,V.j(E));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(C);if(A=V,ee(A))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},i.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function ee(C){if(C.h!=0)return!1;for(var E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function q(C){return C.h==-1}i.l=function(C){return C=se(this,C),q(C)?-1:ee(C)?0:1};function K(C){for(var E=C.g.length,A=[],k=0;k<E;k++)A[k]=~C.g[k];return new f(A,~C.h).add(j)}i.abs=function(){return q(this)?K(this):this},i.add=function(C){for(var E=Math.max(this.g.length,C.g.length),A=[],k=0,V=0;V<=E;V++){var D=k+(this.i(V)&65535)+(C.i(V)&65535),I=(D>>>16)+(this.i(V)>>>16)+(C.i(V)>>>16);k=I>>>16,D&=65535,I&=65535,A[V]=I<<16|D}return new f(A,A[A.length-1]&-2147483648?-1:0)};function se(C,E){return C.add(K(E))}i.j=function(C){if(ee(this)||ee(C))return P;if(q(this))return q(C)?K(this).j(K(C)):K(K(this).j(C));if(q(C))return K(this.j(K(C)));if(0>this.l(W)&&0>C.l(W))return w(this.m()*C.m());for(var E=this.g.length+C.g.length,A=[],k=0;k<2*E;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var V=0;V<C.g.length;V++){var D=this.i(k)>>>16,I=this.i(k)&65535,ot=C.i(V)>>>16,Ct=C.i(V)&65535;A[2*k+2*V]+=I*Ct,Ae(A,2*k+2*V),A[2*k+2*V+1]+=D*Ct,Ae(A,2*k+2*V+1),A[2*k+2*V+1]+=I*ot,Ae(A,2*k+2*V+1),A[2*k+2*V+2]+=D*ot,Ae(A,2*k+2*V+2)}for(k=0;k<E;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=E;k<2*E;k++)A[k]=0;return new f(A,0)};function Ae(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function Ce(C,E){this.g=C,this.h=E}function ke(C,E){if(ee(E))throw Error("division by zero");if(ee(C))return new Ce(P,P);if(q(C))return E=ke(K(C),E),new Ce(K(E.g),K(E.h));if(q(E))return E=ke(C,K(E)),new Ce(K(E.g),E.h);if(30<C.g.length){if(q(C)||q(E))throw Error("slowDivide_ only works with positive integers.");for(var A=j,k=E;0>=k.l(C);)A=We(A),k=We(k);var V=Ue(A,1),D=Ue(k,1);for(k=Ue(k,2),A=Ue(A,2);!ee(k);){var I=D.add(k);0>=I.l(C)&&(V=V.add(A),D=I),k=Ue(k,1),A=Ue(A,1)}return E=se(C,V.j(E)),new Ce(V,E)}for(V=P;0<=C.l(E);){for(A=Math.max(1,Math.floor(C.m()/E.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=w(A),I=D.j(E);q(I)||0<I.l(C);)A-=k,D=w(A),I=D.j(E);ee(D)&&(D=j),V=V.add(D),C=se(C,I)}return new Ce(V,C)}i.A=function(C){return ke(this,C).h},i.and=function(C){for(var E=Math.max(this.g.length,C.g.length),A=[],k=0;k<E;k++)A[k]=this.i(k)&C.i(k);return new f(A,this.h&C.h)},i.or=function(C){for(var E=Math.max(this.g.length,C.g.length),A=[],k=0;k<E;k++)A[k]=this.i(k)|C.i(k);return new f(A,this.h|C.h)},i.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),A=[],k=0;k<E;k++)A[k]=this.i(k)^C.i(k);return new f(A,this.h^C.h)};function We(C){for(var E=C.g.length+1,A=[],k=0;k<E;k++)A[k]=C.i(k)<<1|C.i(k-1)>>>31;return new f(A,C.h)}function Ue(C,E){var A=E>>5;E%=32;for(var k=C.g.length-A,V=[],D=0;D<k;D++)V[D]=0<E?C.i(D+A)>>>E|C.i(D+A+1)<<32-E:C.i(D+A);return new f(V,C.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,pm=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=w,f.fromString=S,hs=f}).apply(typeof vp<"u"?vp:typeof self<"u"?self:typeof window<"u"?window:{});var Pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mm,Go,gm,Ll,Zc,ym,vm,_m;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,g){return l==Array.prototype||l==Object.prototype||(l[d]=g.value),l};function r(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pl=="object"&&Pl];for(var d=0;d<l.length;++d){var g=l[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=r(this);function a(l,d){if(d)e:{var g=s;l=l.split(".");for(var _=0;_<l.length-1;_++){var L=l[_];if(!(L in g))break e;g=g[L]}l=l[l.length-1],_=g[l],d=d(_),d!=_&&d!=null&&e(g,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var g=0,_=!1,L={next:function(){if(!_&&g<l.length){var U=g++;return{value:d(U,l[U]),done:!1}}return _=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}a("Array.prototype.values",function(l){return l||function(){return c(this,function(d,g){return g})}});var f=f||{},m=this||self;function y(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function w(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function S(l,d,g){return l.call.apply(l.bind,arguments)}function P(l,d,g){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,_),l.apply(d,L)}}return function(){return l.apply(d,arguments)}}function j(l,d,g){return j=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:P,j.apply(null,arguments)}function W(l,d){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function ee(l,d){function g(){}g.prototype=d.prototype,l.aa=d.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(_,L,U){for(var re=Array(arguments.length-2),it=2;it<arguments.length;it++)re[it-2]=arguments[it];return d.prototype[L].apply(_,re)}}function q(l){const d=l.length;if(0<d){const g=Array(d);for(let _=0;_<d;_++)g[_]=l[_];return g}return[]}function K(l,d){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(y(_)){const L=l.length||0,U=_.length||0;l.length=L+U;for(let re=0;re<U;re++)l[L+re]=_[re]}else l.push(_)}}class se{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Ae(l){return/^[\s\xa0]*$/.test(l)}function Ce(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function ke(l){return ke[" "](l),l}ke[" "]=function(){};var We=Ce().indexOf("Gecko")!=-1&&!(Ce().toLowerCase().indexOf("webkit")!=-1&&Ce().indexOf("Edge")==-1)&&!(Ce().indexOf("Trident")!=-1||Ce().indexOf("MSIE")!=-1)&&Ce().indexOf("Edge")==-1;function Ue(l,d,g){for(const _ in l)d.call(g,l[_],_,l)}function C(l,d){for(const g in l)d.call(void 0,l[g],g,l)}function E(l){const d={};for(const g in l)d[g]=l[g];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,d){let g,_;for(let L=1;L<arguments.length;L++){_=arguments[L];for(g in _)l[g]=_[g];for(let U=0;U<A.length;U++)g=A[U],Object.prototype.hasOwnProperty.call(_,g)&&(l[g]=_[g])}}function V(l){var d=1;l=l.split(":");const g=[];for(;0<d&&l.length;)g.push(l.shift()),d--;return l.length&&g.push(l.join(":")),g}function D(l){m.setTimeout(()=>{throw l},0)}function I(){var l=ue;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class ot{constructor(){this.h=this.g=null}add(d,g){const _=Ct.get();_.set(d,g),this.h?this.h.next=_:this.g=_,this.h=_}}var Ct=new se(()=>new kt,l=>l.reset());class kt{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,ne=!1,ue=new ot,oe=()=>{const l=m.Promise.resolve(void 0);ge=()=>{l.then(N)}};var N=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(g){D(g)}var d=Ct;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}ne=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var Ve=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};m.addEventListener("test",g,d),m.removeEventListener("test",g,d)}catch{}return l})();function Se(l,d){if(ie.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(We){e:{try{ke(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else g=="mouseover"?d=l.fromElement:g=="mouseout"&&(d=l.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:be[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Se.aa.h.call(this)}}ee(Se,ie);var be={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),Pe=0;function ye(l,d,g,_,L){this.listener=l,this.proxy=null,this.src=d,this.type=g,this.capture=!!_,this.ha=L,this.key=++Pe,this.da=this.fa=!1}function qe(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Pt(l){this.src=l,this.g={},this.h=0}Pt.prototype.add=function(l,d,g,_,L){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var re=Ie(l,d,_,L);return-1<re?(d=l[re],g||(d.fa=!1)):(d=new ye(d,this.src,U,!!_,L),d.fa=g,l.push(d)),d};function Tr(l,d){var g=d.type;if(g in l.g){var _=l.g[g],L=Array.prototype.indexOf.call(_,d,void 0),U;(U=0<=L)&&Array.prototype.splice.call(_,L,1),U&&(qe(d),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Ie(l,d,g,_){for(var L=0;L<l.length;++L){var U=l[L];if(!U.da&&U.listener==d&&U.capture==!!g&&U.ha==_)return L}return-1}var H="closure_lm_"+(1e6*Math.random()|0),wt={};function ct(l,d,g,_,L){if(Array.isArray(d)){for(var U=0;U<d.length;U++)ct(l,d[U],g,_,L);return null}return g=Hn(g),l&&l[Be]?l.K(d,g,w(_)?!!_.capture:!1,L):Ke(l,d,g,!1,_,L)}function Ke(l,d,g,_,L,U){if(!d)throw Error("Invalid event type");var re=w(L)?!!L.capture:!!L,it=Gt(l);if(it||(l[H]=it=new Pt(l)),g=it.add(d,g,_,re,U),g.proxy)return g;if(_=Ne(),g.proxy=_,_.src=l,_.listener=g,l.addEventListener)Ve||(L=re),L===void 0&&(L=!1),l.addEventListener(d.toString(),_,L);else if(l.attachEvent)l.attachEvent(Et(d.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Ne(){function l(g){return d.call(l.src,l.listener,g)}const d=Dt;return l}function dt(l,d,g,_,L){if(Array.isArray(d))for(var U=0;U<d.length;U++)dt(l,d[U],g,_,L);else _=w(_)?!!_.capture:!!_,g=Hn(g),l&&l[Be]?(l=l.i,d=String(d).toString(),d in l.g&&(U=l.g[d],g=Ie(U,g,_,L),-1<g&&(qe(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete l.g[d],l.h--)))):l&&(l=Gt(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Ie(d,g,_,L)),(g=-1<l?d[l]:null)&&at(g))}function at(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Be])Tr(d.i,l);else{var g=l.type,_=l.proxy;d.removeEventListener?d.removeEventListener(g,_,l.capture):d.detachEvent?d.detachEvent(Et(g),_):d.addListener&&d.removeListener&&d.removeListener(_),(g=Gt(d))?(Tr(g,l),g.h==0&&(g.src=null,d[H]=null)):qe(l)}}}function Et(l){return l in wt?wt[l]:wt[l]="on"+l}function Dt(l,d){if(l.da)l=!0;else{d=new Se(d,this);var g=l.listener,_=l.ha||l.src;l.fa&&at(l),l=g.call(_,d)}return l}function Gt(l){return l=l[H],l instanceof Pt?l:null}var pt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hn(l){return typeof l=="function"?l:(l[pt]||(l[pt]=function(d){return l.handleEvent(d)}),l[pt])}function Qe(){z.call(this),this.i=new Pt(this),this.M=this,this.F=null}ee(Qe,z),Qe.prototype[Be]=!0,Qe.prototype.removeEventListener=function(l,d,g,_){dt(this,l,d,g,_)};function nt(l,d){var g,_=l.F;if(_)for(g=[];_;_=_.F)g.push(_);if(l=l.M,_=d.type||d,typeof d=="string")d=new ie(d,l);else if(d instanceof ie)d.target=d.target||l;else{var L=d;d=new ie(_,l),k(d,L)}if(L=!0,g)for(var U=g.length-1;0<=U;U--){var re=d.g=g[U];L=mt(re,_,!0,d)&&L}if(re=d.g=l,L=mt(re,_,!0,d)&&L,L=mt(re,_,!1,d)&&L,g)for(U=0;U<g.length;U++)re=d.g=g[U],L=mt(re,_,!1,d)&&L}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var g=l.g[d],_=0;_<g.length;_++)qe(g[_]);delete l.g[d],l.h--}}this.F=null},Qe.prototype.K=function(l,d,g,_){return this.i.add(String(l),d,!1,g,_)},Qe.prototype.L=function(l,d,g,_){return this.i.add(String(l),d,!0,g,_)};function mt(l,d,g,_){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,U=0;U<d.length;++U){var re=d[U];if(re&&!re.da&&re.capture==g){var it=re.listener,Wt=re.ha||re.src;re.fa&&Tr(l.i,re),L=it.call(Wt,_)!==!1&&L}}return L&&!_.defaultPrevented}function lr(l,d,g){if(typeof l=="function")g&&(l=j(l,g));else if(l&&typeof l.handleEvent=="function")l=j(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:m.setTimeout(l,d||0)}function kn(l){l.g=lr(()=>{l.g=null,l.i&&(l.i=!1,kn(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ui extends z{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:kn(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fn(l){z.call(this),this.h=l,this.g={}}ee(Fn,z);var br=[];function Kn(l){Ue(l.g,function(d,g){this.g.hasOwnProperty(g)&&at(d)},l),l.g={}}Fn.prototype.N=function(){Fn.aa.N.call(this),Kn(this)},Fn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ci=m.JSON.stringify,Qn=m.JSON.parse,Br=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function Tn(){}Tn.prototype.h=null;function Ur(l){return l.h||(l.h=l.i())}function jn(){}var Sn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nn(){ie.call(this,"d")}ee(nn,ie);function hi(){ie.call(this,"c")}ee(hi,ie);var fn={},fi=null;function Gn(){return fi=fi||new Qe}fn.La="serverreachability";function ys(l){ie.call(this,fn.La,l)}ee(ys,ie);function In(l){const d=Gn();nt(d,new ys(d))}fn.STAT_EVENT="statevent";function qi(l,d){ie.call(this,fn.STAT_EVENT,l),this.stat=d}ee(qi,ie);function Tt(l){const d=Gn();nt(d,new qi(d,l))}fn.Ma="timingevent";function di(l,d){ie.call(this,fn.Ma,l),this.size=d}ee(di,ie);function dn(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},d)}function zr(){this.g=!0}zr.prototype.xa=function(){this.g=!1};function Yn(l,d,g,_,L,U){l.info(function(){if(l.g)if(U)for(var re="",it=U.split("&"),Wt=0;Wt<it.length;Wt++){var Ge=it[Wt].split("=");if(1<Ge.length){var Xt=Ge[0];Ge=Ge[1];var Ut=Xt.split("_");re=2<=Ut.length&&Ut[1]=="type"?re+(Xt+"="+Ge+"&"):re+(Xt+"=redacted&")}}else re=null;else re=U;return"XMLHTTP REQ ("+_+") [attempt "+L+"]: "+d+`
`+g+`
`+re})}function pi(l,d,g,_,L,U,re){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+L+"]: "+d+`
`+g+`
`+U+" "+re})}function St(l,d,g,_){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+go(l,g)+(_?" "+_:"")})}function bn(l,d){l.info(function(){return"TIMEOUT: "+d})}zr.prototype.info=function(){};function go(l,d){if(!l.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var _=g[l];if(!(2>_.length)){var L=_[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var re=1;re<L.length;re++)L[re]=""}}}}return ci(g)}catch{return d}}var mi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pn;function Sr(){}ee(Sr,Tn),Sr.prototype.g=function(){return new XMLHttpRequest},Sr.prototype.i=function(){return{}},pn=new Sr;function Yt(l,d,g,_){this.j=l,this.i=d,this.l=g,this.R=_||1,this.U=new Fn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ur}function ur(){this.i=null,this.g="",this.h=!1}var tt={},Xn={};function $r(l,d,g){l.L=1,l.v=Hr(Ft(d)),l.m=g,l.P=!0,gi(l,null)}function gi(l,d){l.F=Date.now(),lt(l),l.A=Ft(l.v);var g=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),wi(g.i,"t",_),l.C=0,g=l.j.J,l.h=new ur,l.g=Da(l.j,g?d:null,!l.m),0<l.O&&(l.M=new ui(j(l.Y,l,l.g),l.O)),d=l.U,g=l.g,_=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(br[0]=L.toString()),L=br);for(var U=0;U<L.length;U++){var re=ct(g,L[U],_||d.handleEvent,!1,d.h||d);if(!re)break;d.g[re.key]=re}d=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),In(),Yn(l.i,l.u,l.A,l.l,l.R,l.m)}Yt.prototype.ca=function(l){l=l.target;const d=this.M;d&&xn(l)==3?d.j():this.Y(l)},Yt.prototype.Y=function(l){try{if(l==this.g)e:{const Ut=xn(this.g);var d=this.g.Ba();const Zn=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||wo(this.g)))){this.J||Ut!=4||d==7||(d==8||0>=Zn?In(3):In(2)),Ir(this);var g=this.g.Z();this.X=g;t:if(Hi(this)){var _=wo(this.g);l="";var L=_.length,U=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$(this),Ar(this);var re="";break t}this.h.i=new m.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,l+=this.h.i.decode(_[d],{stream:!(U&&d==L-1)});_.length=0,this.h.g+=l,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=g==200,pi(this.i,this.u,this.A,this.l,this.R,Ut,g),this.o){if(this.T&&!this.K){t:{if(this.g){var it,Wt=this.g;if((it=Wt.g?Wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ae(it)){var Ge=it;break t}}Ge=null}if(g=Ge)St(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,b(this,g);else{this.o=!1,this.s=3,Tt(12),$(this),Ar(this);break e}}if(this.P){g=!0;let Un;for(;!this.J&&this.C<re.length;)if(Un=_s(this,re),Un==Xn){Ut==4&&(this.s=4,Tt(14),g=!1),St(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==tt){this.s=4,Tt(15),St(this.i,this.l,re,"[Invalid Chunk]"),g=!1;break}else St(this.i,this.l,Un,null),b(this,Un);if(Hi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||re.length!=0||this.h.h||(this.s=1,Tt(16),g=!1),this.o=this.o&&g,!g)St(this.i,this.l,re,"[Invalid Chunked Response]"),$(this),Ar(this);else if(0<re.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),To(Xt),Xt.M=!0,Tt(11))}}else St(this.i,this.l,re,null),b(this,re);Ut==4&&$(this),this.o&&!this.J&&(Ut==4?ks(this.j,this):(this.o=!1,lt(this)))}else Ss(this.g),g==400&&0<re.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),$(this),Ar(this)}}}catch{}finally{}};function Hi(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function _s(l,d){var g=l.C,_=d.indexOf(`
`,g);return _==-1?Xn:(g=Number(d.substring(g,_)),isNaN(g)?tt:(_+=1,_+g>d.length?Xn:(d=d.slice(_,_+g),l.C=_+g,d)))}Yt.prototype.cancel=function(){this.J=!0,$(this)};function lt(l){l.S=Date.now()+l.I,yi(l,l.I)}function yi(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=dn(j(l.ba,l),d)}function Ir(l){l.B&&(m.clearTimeout(l.B),l.B=null)}Yt.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(bn(this.i,this.A),this.L!=2&&(In(),Tt(17)),$(this),this.s=2,Ar(this)):yi(this,this.S-l)};function Ar(l){l.j.G==0||l.J||ks(l.j,l)}function $(l){Ir(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,Kn(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function b(l,d){try{var g=l.j;if(g.G!=0&&(g.g==l||Fe(g.h,l))){if(!l.K&&Fe(g.h,l)&&g.G==3){try{var _=g.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var L=_;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Cs(g),pr(g);else break e;Rs(g),Tt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=dn(j(g.Za,g),6e3));if(1>=Te(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Yr(g,11)}else if((l.K||g.g==l)&&Cs(g),!Ae(d))for(L=g.Da.g.parse(d),d=0;d<L.length;d++){let Ge=L[d];if(g.T=Ge[0],Ge=Ge[1],g.G==2)if(Ge[0]=="c"){g.K=Ge[1],g.ia=Ge[2];const Xt=Ge[3];Xt!=null&&(g.la=Xt,g.j.info("VER="+g.la));const Ut=Ge[4];Ut!=null&&(g.Aa=Ut,g.j.info("SVER="+g.Aa));const Zn=Ge[5];Zn!=null&&typeof Zn=="number"&&0<Zn&&(_=1.5*Zn,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Un=l.g;if(Un){const Yi=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yi){var U=_.h;U.g||Yi.indexOf("spdy")==-1&&Yi.indexOf("quic")==-1&&Yi.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(je(U,U.h),U.h=null))}if(_.D){const xs=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;xs&&(_.ya=xs,ut(_.I,_.D,xs))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var re=l;if(_.qa=Na(_,_.J?_.ia:null,_.W),re.K){gt(_.h,re);var it=re,Wt=_.L;Wt&&(it.I=Wt),it.B&&(Ir(it),lt(it)),_.g=re}else Gi(_);0<g.i.length&&Pr(g)}else Ge[0]!="stop"&&Ge[0]!="close"||Yr(g,7);else g.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Yr(g,7):sn(g):Ge[0]!="noop"&&g.l&&g.l.ta(Ge),g.v=0)}}In(4)}catch{}}var Me=class{constructor(l,d){this.g=l,this.map=d}};function ce(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ae(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Te(l){return l.h?1:l.g?l.g.size:0}function Fe(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function je(l,d){l.g?l.g.add(d):l.h=d}function gt(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}ce.prototype.cancel=function(){if(this.i=Lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Lt(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const g of l.g.values())d=d.concat(g.D);return d}return q(l.i)}function De(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(y(l)){for(var d=[],g=l.length,_=0;_<g;_++)d.push(l[_]);return d}d=[],g=0;for(_ in l)d[g++]=l[_];return d}function ht(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(y(l)||typeof l=="string"){var d=[];l=l.length;for(var g=0;g<l;g++)d.push(g);return d}d=[],g=0;for(const _ in l)d[g++]=_;return d}}}function yt(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(y(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var g=ht(l),_=De(l),L=_.length,U=0;U<L;U++)d.call(void 0,_[U],g&&g[U],l)}var Mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bt(l,d){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var _=l[g].indexOf("="),L=null;if(0<=_){var U=l[g].substring(0,_);L=l[g].substring(_+1)}else U=l[g];d(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function rt(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof rt){this.h=l.h,vi(this,l.j),this.o=l.o,this.g=l.g,Wr(this,l.s),this.l=l.l;var d=l.i,g=new Rr;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),qr(this,g),this.m=l.m}else l&&(d=String(l).match(Mt))?(this.h=!1,vi(this,d[1]||"",!0),this.o=$e(d[2]||""),this.g=$e(d[3]||"",!0),Wr(this,d[4]),this.l=$e(d[5]||"",!0),qr(this,d[6]||"",!0),this.m=$e(d[7]||"")):(this.h=!1,this.i=new Rr(null,this.h))}rt.prototype.toString=function(){var l=[],d=this.j;d&&l.push(_i(d,ws,!0),":");var g=this.g;return(g||d=="file")&&(l.push("//"),(d=this.o)&&l.push(_i(d,ws,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(_i(g,g.charAt(0)=="/"?Ia:Sa,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",_i(g,yo)),l.join("")};function Ft(l){return new rt(l)}function vi(l,d,g){l.j=g?$e(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Wr(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function qr(l,d,g){d instanceof Rr?(l.i=d,Cr(l.i,l.h)):(g||(d=_i(d,Aa)),l.i=new Rr(d,l.h))}function ut(l,d,g){l.i.set(d,g)}function Hr(l){return ut(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function $e(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function _i(l,d,g){return typeof l=="string"?(l=encodeURI(l).replace(d,Ta),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ta(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ws=/[#\/\?@]/g,Sa=/[#\?:]/g,Ia=/[#\?]/g,Aa=/[#\?@]/g,yo=/#/g;function Rr(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function rn(l){l.g||(l.g=new Map,l.h=0,l.i&&Bt(l.i,function(d,g){l.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}i=Rr.prototype,i.add=function(l,d){rn(this),this.i=null,l=Jn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(d),this.h+=1,this};function cr(l,d){rn(l),d=Jn(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function hr(l,d){return rn(l),d=Jn(l,d),l.g.has(d)}i.forEach=function(l,d){rn(this),this.g.forEach(function(g,_){g.forEach(function(L){l.call(d,L,_,this)},this)},this)},i.na=function(){rn(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let _=0;_<d.length;_++){const L=l[_];for(let U=0;U<L.length;U++)g.push(d[_])}return g},i.V=function(l){rn(this);let d=[];if(typeof l=="string")hr(this,l)&&(d=d.concat(this.g.get(Jn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)d=d.concat(l[g])}return d},i.set=function(l,d){return rn(this),this.i=null,l=Jn(this,l),hr(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function wi(l,d,g){cr(l,d),0<g.length&&(l.i=null,l.g.set(Jn(l,d),q(g)),l.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var _=d[g];const U=encodeURIComponent(String(_)),re=this.V(_);for(_=0;_<re.length;_++){var L=U;re[_]!==""&&(L+="="+encodeURIComponent(String(re[_]))),l.push(L)}}return this.i=l.join("&")};function Jn(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Cr(l,d){d&&!l.j&&(rn(l),l.i=null,l.g.forEach(function(g,_){var L=_.toLowerCase();_!=L&&(cr(this,_),wi(this,L,g))},l)),l.j=d}function cu(l,d){const g=new zr;if(m.Image){const _=new Image;_.onload=W(Pn,g,"TestLoadImage: loaded",!0,d,_),_.onerror=W(Pn,g,"TestLoadImage: error",!1,d,_),_.onabort=W(Pn,g,"TestLoadImage: abort",!1,d,_),_.ontimeout=W(Pn,g,"TestLoadImage: timeout",!1,d,_),m.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else d(!1)}function Ra(l,d){const g=new zr,_=new AbortController,L=setTimeout(()=>{_.abort(),Pn(g,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:_.signal}).then(U=>{clearTimeout(L),U.ok?Pn(g,"TestPingServer: ok",!0,d):Pn(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Pn(g,"TestPingServer: error",!1,d)})}function Pn(l,d,g,_,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),_(g)}catch{}}function hu(){this.g=new Br}function Ca(l,d,g){const _=g||"";try{yt(l,function(L,U){let re=L;w(L)&&(re=ci(L)),d.push(_+U+"="+encodeURIComponent(re))})}catch(L){throw d.push(_+"type="+encodeURIComponent("_badmap")),L}}function Kr(l){this.l=l.Ub||null,this.j=l.eb||!1}ee(Kr,Tn),Kr.prototype.g=function(){return new Ki(this.l,this.j)},Kr.prototype.i=(function(l){return function(){return l}})({});function Ki(l,d){Qe.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}ee(Ki,Qe),i=Ki.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,dr(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||m).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fr(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,dr(this)),this.g&&(this.readyState=3,dr(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ka(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ka(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?fr(this):dr(this),this.readyState==3&&ka(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,fr(this))},i.Qa=function(l){this.g&&(this.response=l,fr(this))},i.ga=function(){this.g&&fr(this)};function fr(l){l.readyState=4,l.l=null,l.j=null,l.v=null,dr(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=d.next();return l.join(`\r
`)};function dr(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Qr(l){let d="";return Ue(l,function(g,_){d+=_,d+=":",d+=g,d+=`\r
`}),d}function Ei(l,d,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=Qr(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):ut(l,d,g))}function It(l){Qe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}ee(It,Qe);var fu=/^https?$/i,vo=["POST","PUT"];i=It.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pn.g(),this.v=this.o?Ur(this.o):Ur(pn),this.g.onreadystatechange=j(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(U){Qi(this,U);return}if(l=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var L in _)g.set(L,_[L]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const U of _.keys())g.set(U,_.get(U));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),L=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(vo,d,void 0))||_||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,re]of g)this.g.setRequestHeader(U,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ts(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){Qi(this,U)}};function Qi(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Es(l),Bn(l)}function Es(l){l.A||(l.A=!0,nt(l,"complete"),nt(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,nt(this,"complete"),nt(this,"abort"),Bn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bn(this,!0)),It.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?_o(this):this.bb())},i.bb=function(){_o(this)};function _o(l){if(l.h&&typeof f<"u"&&(!l.v[1]||xn(l)!=4||l.Z()!=2)){if(l.u&&xn(l)==4)lr(l.Ea,0,l);else if(nt(l,"readystatechange"),xn(l)==4){l.h=!1;try{const re=l.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var _;if(_=re===0){var L=String(l.D).match(Mt)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),_=!fu.test(L?L.toLowerCase():"")}g=_}if(g)nt(l,"complete"),nt(l,"success");else{l.m=6;try{var U=2<xn(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",Es(l)}}finally{Bn(l)}}}}function Bn(l,d){if(l.g){Ts(l);const g=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||nt(l,"ready");try{g.onreadystatechange=_}catch{}}}function Ts(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function xn(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),Qn(d)}};function wo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Ss(l){const d={};l=(l.g&&2<=xn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(Ae(l[_]))continue;var g=V(l[_]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=d[L]||[];d[L]=U,U.push(g)}C(d,function(_){return _.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kr(l,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||d}function Eo(l){this.Aa=0,this.i=[],this.j=new zr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kr("baseRetryDelayMs",5e3,l),this.cb=kr("retryDelaySeedMs",1e4,l),this.Wa=kr("forwardChannelMaxRetries",2,l),this.wa=kr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new ce(l&&l.concurrentRequestLimit),this.Da=new hu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Eo.prototype,i.la=8,i.G=1,i.connect=function(l,d,g,_){Tt(0),this.W=l,this.H=d||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Na(this,null,this.W),Pr(this)};function sn(l){if(Is(l),l.G==3){var d=l.U++,g=Ft(l.I);if(ut(g,"SID",l.K),ut(g,"RID",d),ut(g,"TYPE","terminate"),Gr(l,g),d=new Yt(l,l.j,d),d.L=2,d.v=Hr(Ft(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=d.v,g=!0),g||(d.g=Da(d.j,null),d.g.ea(d.v)),d.F=Date.now(),lt(d)}Va(l)}function pr(l){l.g&&(To(l),l.g.cancel(),l.g=null)}function Is(l){pr(l),l.u&&(m.clearTimeout(l.u),l.u=null),Cs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function Pr(l){if(!ae(l.h)&&!l.s){l.s=!0;var d=l.Ga;ge||oe(),ne||(ge(),ne=!0),ue.add(d,l),l.B=0}}function du(l,d){return Te(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=dn(j(l.Ga,l,d),xa(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Yt(this,this.j,l);let U=this.o;if(this.S&&(U?(U=E(U),k(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Ti(this,L,d),g=Ft(this.I),ut(g,"RID",l),ut(g,"CVER",22),this.D&&ut(g,"X-HTTP-Session-Id",this.D),Gr(this,g),U&&(this.O?d="headers="+encodeURIComponent(String(Qr(U)))+"&"+d:this.m&&Ei(g,this.m,U)),je(this.h,L),this.Ua&&ut(g,"TYPE","init"),this.P?(ut(g,"$req",d),ut(g,"SID","null"),L.T=!0,$r(L,g,null)):$r(L,g,d),this.G=2}}else this.G==3&&(l?As(this,l):this.i.length==0||ae(this.h)||As(this))};function As(l,d){var g;d?g=d.l:g=l.U++;const _=Ft(l.I);ut(_,"SID",l.K),ut(_,"RID",g),ut(_,"AID",l.T),Gr(l,_),l.m&&l.o&&Ei(_,l.m,l.o),g=new Yt(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Ti(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),je(l.h,g),$r(g,_,d)}function Gr(l,d){l.H&&Ue(l.H,function(g,_){ut(d,_,g)}),l.l&&yt({},function(g,_){ut(d,_,g)})}function Ti(l,d,g){g=Math.min(l.i.length,g);var _=l.l?j(l.l.Na,l.l,l):null;e:{var L=l.i;let U=-1;for(;;){const re=["count="+g];U==-1?0<g?(U=L[0].g,re.push("ofs="+U)):U=0:re.push("ofs="+U);let it=!0;for(let Wt=0;Wt<g;Wt++){let Ge=L[Wt].g;const Xt=L[Wt].map;if(Ge-=U,0>Ge)U=Math.max(0,L[Wt].g-100),it=!1;else try{Ca(Xt,re,"req"+Ge+"_")}catch{_&&_(Xt)}}if(it){_=re.join("&");break e}}}return l=l.i.splice(0,g),d.D=l,_}function Gi(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;ge||oe(),ne||(ge(),ne=!0),ue.add(d,l),l.v=0}}function Rs(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=dn(j(l.Fa,l),xa(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Pa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=dn(j(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),pr(this),Pa(this))};function To(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function Pa(l){l.g=new Yt(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Ft(l.qa);ut(d,"RID","rpc"),ut(d,"SID",l.K),ut(d,"AID",l.T),ut(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&ut(d,"TO",l.ja),ut(d,"TYPE","xmlhttp"),Gr(l,d),l.m&&l.o&&Ei(d,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Hr(Ft(d)),g.m=null,g.P=!0,gi(g,l)}i.Za=function(){this.C!=null&&(this.C=null,pr(this),Rs(this),Tt(19))};function Cs(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function ks(l,d){var g=null;if(l.g==d){Cs(l),To(l),l.g=null;var _=2}else if(Fe(l.h,d))g=d.D,gt(l.h,d),_=1;else return;if(l.G!=0){if(d.o)if(_==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var L=l.B;_=Gn(),nt(_,new di(_,g)),Pr(l)}else Gi(l);else if(L=d.s,L==3||L==0&&0<d.X||!(_==1&&du(l,d)||_==2&&Rs(l)))switch(g&&0<g.length&&(d=l.h,d.i=d.i.concat(g)),L){case 1:Yr(l,5);break;case 4:Yr(l,10);break;case 3:Yr(l,6);break;default:Yr(l,2)}}}function xa(l,d){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*d}function Yr(l,d){if(l.j.info("Error code "+d),d==2){var g=j(l.fb,l),_=l.Xa;const L=!_;_=new rt(_||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||vi(_,"https"),Hr(_),L?cu(_.toString(),g):Ra(_.toString(),g)}else Tt(2);l.G=0,l.l&&l.l.sa(d),Va(l),Is(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Va(l){if(l.G=0,l.ka=[],l.l){const d=Lt(l.h);(d.length!=0||l.i.length!=0)&&(K(l.ka,d),K(l.ka,l.i),l.h.i.length=0,q(l.i),l.i.length=0),l.l.ra()}}function Na(l,d,g){var _=g instanceof rt?Ft(g):new rt(g);if(_.g!="")d&&(_.g=d+"."+_.g),Wr(_,_.s);else{var L=m.location;_=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var U=new rt(null);_&&vi(U,_),d&&(U.g=d),L&&Wr(U,L),g&&(U.l=g),_=U}return g=l.D,d=l.ya,g&&d&&ut(_,g,d),ut(_,"VER",l.la),Gr(l,_),_}function Da(l,d,g){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new It(new Kr({eb:g})):new It(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function So(){}i=So.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ps(){}Ps.prototype.g=function(l,d){return new An(l,d)};function An(l,d){Qe.call(this),this.g=new Eo(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!Ae(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Ae(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new xr(this)}ee(An,Qe),An.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){sn(this.g)},An.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=ci(l),l=g);d.i.push(new Me(d.Ya++,l)),d.G==3&&Pr(d)},An.prototype.N=function(){this.g.l=null,delete this.j,sn(this.g),delete this.g,An.aa.N.call(this)};function La(l){nn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const g in d){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}ee(La,nn);function Oa(){hi.call(this),this.status=1}ee(Oa,hi);function xr(l){this.g=l}ee(xr,So),xr.prototype.ua=function(){nt(this.g,"a")},xr.prototype.ta=function(l){nt(this.g,new La(l))},xr.prototype.sa=function(l){nt(this.g,new Oa)},xr.prototype.ra=function(){nt(this.g,"b")},Ps.prototype.createWebChannel=Ps.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,_m=function(){return new Ps},vm=function(){return Gn()},ym=fn,Zc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mi.NO_ERROR=0,mi.TIMEOUT=8,mi.HTTP_ERROR=6,Ll=mi,vs.COMPLETE="complete",gm=vs,jn.EventType=Sn,Sn.OPEN="a",Sn.CLOSE="b",Sn.ERROR="c",Sn.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,Go=jn,It.prototype.listenOnce=It.prototype.L,It.prototype.getLastError=It.prototype.Ka,It.prototype.getLastErrorCode=It.prototype.Ba,It.prototype.getStatus=It.prototype.Z,It.prototype.getResponseJson=It.prototype.Oa,It.prototype.getResponseText=It.prototype.oa,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Ha,mm=It}).apply(typeof Pl<"u"?Pl:typeof self<"u"?self:typeof window<"u"?window:{});const _p="@firebase/firestore";class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");let ho="10.14.0";const fs=new lm("@firebase/firestore");function Qo(){return fs.logLevel}function pe(i,...e){if(fs.logLevel<=Je.DEBUG){const r=e.map(vh);fs.debug(`Firestore (${ho}): ${i}`,...r)}}function ai(i,...e){if(fs.logLevel<=Je.ERROR){const r=e.map(vh);fs.error(`Firestore (${ho}): ${i}`,...r)}}function ro(i,...e){if(fs.logLevel<=Je.WARN){const r=e.map(vh);fs.warn(`Firestore (${ho}): ${i}`,...r)}}function vh(i){if(typeof i=="string")return i;try{return(function(r){return JSON.stringify(r)})(i)}catch{return i}}function xe(i="Unexpected state"){const e=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: `+i;throw ai(e),new Error(e)}function st(i,e){i||xe()}function Oe(i,e){return i}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends co{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bi{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}class wm{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(wn.UNAUTHENTICATED)))}shutdown(){}}class V_{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class N_{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){st(this.o===void 0);let s=this.i;const a=y=>this.i!==s?(s=this.i,r(y)):Promise.resolve();let c=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Bi,e.enqueueRetryable((()=>a(this.currentUser)))};const f=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await a(this.currentUser)}))},m=y=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Bi)}}),0),f()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((s=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(st(typeof s.accessToken=="string"),new wm(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string"),new wn(e)}}class D_{constructor(e,r,s){this.l=e,this.h=r,this.P=s,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class L_{constructor(e,r,s){this.l=e,this.h=r,this.P=s}getToken(){return Promise.resolve(new D_(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(wn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class O_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M_{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){st(this.o===void 0);const s=c=>{c.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.R;return this.R=c.token,pe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?r(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const a=c=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(st(typeof r.token=="string"),this.R=r.token,new O_(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function F_(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let s=0;s<i;s++)r[s]=Math.floor(256*Math.random());return r}class Em{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=F_(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<r&&(s+=e.charAt(a[c]%e.length))}return s}}function et(i,e){return i<e?-1:i>e?1:0}function io(i,e,r){return i.length===e.length&&i.every(((s,a)=>r(s,e[a])))}class Qt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ve(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ve(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ve(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qt.fromMillis(Date.now())}static fromDate(e){return Qt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*r));return new Qt(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Qt(0,0))}static max(){return new Le(new Qt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class aa{constructor(e,r,s){r===void 0?r=0:r>e.length&&xe(),s===void 0?s=e.length-r:s>e.length-r&&xe(),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return aa.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof aa?e.forEach((s=>{r.push(s)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let a=0;a<s;a++){const c=e.get(a),f=r.get(a);if(c<f)return-1;if(c>f)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Rt extends aa{construct(e,r,s){return new Rt(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new ve(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter((a=>a.length>0)))}return new Rt(r)}static emptyPath(){return new Rt([])}}const j_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends aa{construct(e,r,s){return new un(e,r,s)}static isValidIdentifier(e){return j_.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new un(["__name__"])}static fromServerFormat(e){const r=[];let s="",a=0;const c=()=>{if(s.length===0)throw new ve(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let f=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new ve(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ve(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,a+=2}else m==="`"?(f=!f,a++):m!=="."||f?(s+=m,a++):(c(),a++)}if(c(),f)throw new ve(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(r)}static emptyPath(){return new un([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(Rt.fromString(e))}static fromName(e){return new Ee(Rt.fromString(e).popFirst(5))}static empty(){return new Ee(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Rt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new Rt(e.slice()))}}function b_(i,e){const r=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=Le.fromTimestamp(s===1e9?new Qt(r+1,0):new Qt(r,s));return new zi(a,Ee.empty(),e)}function B_(i){return new zi(i.readTime,i.key,-1)}class zi{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new zi(Le.min(),Ee.empty(),-1)}static max(){return new zi(Le.max(),Ee.empty(),-1)}}function U_(i,e){let r=i.readTime.compareTo(e.readTime);return r!==0?r:(r=Ee.comparator(i.documentKey,e.documentKey),r!==0?r:et(i.largestBatchId,e.largestBatchId))}const z_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function pa(i){if(i.code!==J.FAILED_PRECONDITION||i.message!==z_)throw i;pe("LocalStore","Unexpectedly lost primary lease")}class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Y(((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(r,c).next(s,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Y?r:Y.resolve(r)}catch(r){return Y.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Y.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Y.reject(r)}static resolve(e){return new Y(((r,s)=>{r(e)}))}static reject(e){return new Y(((r,s)=>{s(e)}))}static waitFor(e){return new Y(((r,s)=>{let a=0,c=0,f=!1;e.forEach((m=>{++a,m.next((()=>{++c,f&&c===a&&r()}),(y=>s(y)))})),f=!0,c===a&&r()}))}static or(e){let r=Y.resolve(!1);for(const s of e)r=r.next((a=>a?Y.resolve(a):s()));return r}static forEach(e,r){const s=[];return e.forEach(((a,c)=>{s.push(r.call(this,a,c))})),this.waitFor(s)}static mapArray(e,r){return new Y(((s,a)=>{const c=e.length,f=new Array(c);let m=0;for(let y=0;y<c;y++){const w=y;r(e[w]).next((S=>{f[w]=S,++m,m===c&&s(f)}),(S=>a(S)))}}))}static doWhile(e,r){return new Y(((s,a)=>{const c=()=>{e()===!0?r().next((()=>{c()}),a):s()};c()}))}}function W_(i){const e=i.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function ma(i){return i.name==="IndexedDbTransactionError"}class _h{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=s=>this.ie(s),this.se=s=>r.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_h.oe=-1;function Jl(i){return i==null}function $l(i){return i===0&&1/i==-1/0}function q_(i){return typeof i=="number"&&Number.isInteger(i)&&!$l(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function wp(i){let e=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&e++;return e}function fo(i,e){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&e(r,i[r])}function Tm(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Nt{constructor(e,r){this.comparator=e,this.root=r||ln.EMPTY}insert(e,r){return new Nt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return r+s.left.size;a<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,s)=>(e(r,s),!1)))}toString(){const e=[];return this.inorderTraversal(((r,s)=>(e.push(`${r}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xl(this.root,e,this.comparator,!1)}getReverseIterator(){return new xl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xl(this.root,e,this.comparator,!0)}}class xl{constructor(e,r,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=r?s(e.key,r):1,r&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,r,s,a,c){this.key=e,this.value=r,this.color=s??ln.RED,this.left=a??ln.EMPTY,this.right=c??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,a,c){return new ln(e??this.key,r??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,r,s),null):c===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return ln.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,r,s,a,c){return this}insert(e,r,s){return new ln(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cn{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,s)=>(e(r),!1)))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let s;for(s=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Ep(this.data.getIterator())}getIteratorFrom(e){return new Ep(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((s=>{r=r.add(s)})),r}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new cn(this.comparator);return r.data=e,r}}class Ep{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Er{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new Er([])}unionWith(e){let r=new cn(un.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new Er(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return io(this.fields,e.fields,((r,s)=>r.isEqual(s)))}}class Sm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Sm("Invalid base64 string: "+c):c}})(e);return new hn(r)}static fromUint8Array(e){const r=(function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c})(e);return new hn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const s=new Uint8Array(r.length);for(let a=0;a<r.length;a++)s[a]=r.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const H_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(i){if(st(!!i),typeof i=="string"){let e=0;const r=H_.exec(i);if(st(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:bt(i.seconds),nanos:bt(i.nanos)}}function bt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ds(i){return typeof i=="string"?hn.fromBase64String(i):hn.fromUint8Array(i)}function wh(i){var e,r;return((r=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Eh(i){const e=i.mapValue.fields.__previous_value__;return wh(e)?Eh(e):e}function la(i){const e=$i(i.mapValue.fields.__local_write_time__.timestampValue);return new Qt(e.seconds,e.nanos)}class K_{constructor(e,r,s,a,c,f,m,y,w){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=w}}class ua{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new ua("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ua&&e.projectId===this.projectId&&e.database===this.database}}const Vl={mapValue:{}};function ps(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?wh(i)?4:G_(i)?9007199254740991:Q_(i)?10:11:xe()}function Fr(i,e){if(i===e)return!0;const r=ps(i);if(r!==ps(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return la(i).isEqual(la(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=$i(a.timestampValue),m=$i(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,c){return ds(a.bytesValue).isEqual(ds(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,c){return bt(a.geoPointValue.latitude)===bt(c.geoPointValue.latitude)&&bt(a.geoPointValue.longitude)===bt(c.geoPointValue.longitude)})(i,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return bt(a.integerValue)===bt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=bt(a.doubleValue),m=bt(c.doubleValue);return f===m?$l(f)===$l(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return io(i.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:case 11:return(function(a,c){const f=a.mapValue.fields||{},m=c.mapValue.fields||{};if(wp(f)!==wp(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!Fr(f[y],m[y])))return!1;return!0})(i,e);default:return xe()}}function ca(i,e){return(i.values||[]).find((r=>Fr(r,e)))!==void 0}function so(i,e){if(i===e)return 0;const r=ps(i),s=ps(e);if(r!==s)return et(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return et(i.booleanValue,e.booleanValue);case 2:return(function(c,f){const m=bt(c.integerValue||c.doubleValue),y=bt(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(i,e);case 3:return Tp(i.timestampValue,e.timestampValue);case 4:return Tp(la(i),la(e));case 5:return et(i.stringValue,e.stringValue);case 6:return(function(c,f){const m=ds(c),y=ds(f);return m.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(c,f){const m=c.split("/"),y=f.split("/");for(let w=0;w<m.length&&w<y.length;w++){const S=et(m[w],y[w]);if(S!==0)return S}return et(m.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,f){const m=et(bt(c.latitude),bt(f.latitude));return m!==0?m:et(bt(c.longitude),bt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Sp(i.arrayValue,e.arrayValue);case 10:return(function(c,f){var m,y,w,S;const P=c.fields||{},j=f.fields||{},W=(m=P.value)===null||m===void 0?void 0:m.arrayValue,ee=(y=j.value)===null||y===void 0?void 0:y.arrayValue,q=et(((w=W?.values)===null||w===void 0?void 0:w.length)||0,((S=ee?.values)===null||S===void 0?void 0:S.length)||0);return q!==0?q:Sp(W,ee)})(i.mapValue,e.mapValue);case 11:return(function(c,f){if(c===Vl.mapValue&&f===Vl.mapValue)return 0;if(c===Vl.mapValue)return 1;if(f===Vl.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),w=f.fields||{},S=Object.keys(w);y.sort(),S.sort();for(let P=0;P<y.length&&P<S.length;++P){const j=et(y[P],S[P]);if(j!==0)return j;const W=so(m[y[P]],w[S[P]]);if(W!==0)return W}return et(y.length,S.length)})(i.mapValue,e.mapValue);default:throw xe()}}function Tp(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return et(i,e);const r=$i(i),s=$i(e),a=et(r.seconds,s.seconds);return a!==0?a:et(r.nanos,s.nanos)}function Sp(i,e){const r=i.values||[],s=e.values||[];for(let a=0;a<r.length&&a<s.length;++a){const c=so(r[a],s[a]);if(c)return c}return et(r.length,s.length)}function oo(i){return eh(i)}function eh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(r){const s=$i(r);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(r){return ds(r).toBase64()})(i.bytesValue):"referenceValue"in i?(function(r){return Ee.fromName(r).toString()})(i.referenceValue):"geoPointValue"in i?(function(r){return`geo(${r.latitude},${r.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(r){let s="[",a=!0;for(const c of r.values||[])a?a=!1:s+=",",s+=eh(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(r){const s=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const f of s)c?c=!1:a+=",",a+=`${f}:${eh(r.fields[f])}`;return a+"}"})(i.mapValue):xe()}function th(i){return!!i&&"integerValue"in i}function Th(i){return!!i&&"arrayValue"in i}function Ip(i){return!!i&&"nullValue"in i}function Ap(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ol(i){return!!i&&"mapValue"in i}function Q_(i){var e,r;return((r=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Jo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return fo(i.mapValue.fields,((r,s)=>e.mapValue.fields[r]=Jo(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Jo(i.arrayValue.values[r]);return e}return Object.assign({},i)}function G_(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!Ol(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jo(r)}setAll(e){let r=un.emptyPath(),s={},a=[];e.forEach(((f,m)=>{if(!r.isImmediateParentOf(m)){const y=this.getFieldsMap(r);this.applyChanges(y,s,a),s={},a=[],r=m.popLast()}f?s[m.lastSegment()]=Jo(f):a.push(m.lastSegment())}));const c=this.getFieldsMap(r);this.applyChanges(c,s,a)}delete(e){const r=this.field(e.popLast());Ol(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=r.mapValue.fields[e.get(s)];Ol(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,s){fo(r,((a,c)=>e[a]=c));for(const a of s)delete e[a]}clone(){return new or(Jo(this.value))}}function Im(i){const e=[];return fo(i.fields,((r,s)=>{const a=new un([r]);if(Ol(s)){const c=Im(s.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)})),new Er(e)}class En{constructor(e,r,s,a,c,f,m){this.key=e,this.documentType=r,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new En(e,0,Le.min(),Le.min(),Le.min(),or.empty(),0)}static newFoundDocument(e,r,s,a){return new En(e,1,r,Le.min(),s,a,0)}static newNoDocument(e,r){return new En(e,2,r,Le.min(),Le.min(),or.empty(),0)}static newUnknownDocument(e,r){return new En(e,3,r,Le.min(),Le.min(),or.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wl{constructor(e,r){this.position=e,this.inclusive=r}}function Rp(i,e,r){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],f=i.position[a];if(c.field.isKeyField()?s=Ee.comparator(Ee.fromName(f.referenceValue),r.key):s=so(f,r.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Cp(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!Fr(i.position[r],e.position[r]))return!1;return!0}class ql{constructor(e,r="asc"){this.field=e,this.dir=r}}function Y_(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Am{}class Kt extends Am{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,s):new J_(e,r,s):r==="array-contains"?new t0(e,s):r==="in"?new n0(e,s):r==="not-in"?new r0(e,s):r==="array-contains-any"?new i0(e,s):new Kt(e,r,s)}static createKeyFieldInFilter(e,r,s){return r==="in"?new Z_(e,s):new e0(e,s)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(so(r,this.value)):r!==null&&ps(this.value)===ps(r)&&this.matchesComparison(so(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jr extends Am{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new jr(e,r)}matches(e){return Rm(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Rm(i){return i.op==="and"}function Cm(i){return X_(i)&&Rm(i)}function X_(i){for(const e of i.filters)if(e instanceof jr)return!1;return!0}function nh(i){if(i instanceof Kt)return i.field.canonicalString()+i.op.toString()+oo(i.value);if(Cm(i))return i.filters.map((e=>nh(e))).join(",");{const e=i.filters.map((r=>nh(r))).join(",");return`${i.op}(${e})`}}function km(i,e){return i instanceof Kt?(function(s,a){return a instanceof Kt&&s.op===a.op&&s.field.isEqual(a.field)&&Fr(s.value,a.value)})(i,e):i instanceof jr?(function(s,a){return a instanceof jr&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((c,f,m)=>c&&km(f,a.filters[m])),!0):!1})(i,e):void xe()}function Pm(i){return i instanceof Kt?(function(r){return`${r.field.canonicalString()} ${r.op} ${oo(r.value)}`})(i):i instanceof jr?(function(r){return r.op.toString()+" {"+r.getFilters().map(Pm).join(" ,")+"}"})(i):"Filter"}class J_ extends Kt{constructor(e,r,s){super(e,r,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const r=Ee.comparator(e.key,this.key);return this.matchesComparison(r)}}class Z_ extends Kt{constructor(e,r){super(e,"in",r),this.keys=xm("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class e0 extends Kt{constructor(e,r){super(e,"not-in",r),this.keys=xm("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function xm(i,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((s=>Ee.fromName(s.referenceValue)))}class t0 extends Kt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Th(r)&&ca(r.arrayValue,this.value)}}class n0 extends Kt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ca(this.value.arrayValue,r)}}class r0 extends Kt{constructor(e,r){super(e,"not-in",r)}matches(e){if(ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!ca(this.value.arrayValue,r)}}class i0 extends Kt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Th(r)||!r.arrayValue.values)&&r.arrayValue.values.some((s=>ca(this.value.arrayValue,s)))}}class s0{constructor(e,r=null,s=[],a=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=m,this.ue=null}}function kp(i,e=null,r=[],s=[],a=null,c=null,f=null){return new s0(i,e,r,s,a,c,f)}function Sh(i){const e=Oe(i);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((s=>nh(s))).join(","),r+="|ob:",r+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Jl(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((s=>oo(s))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((s=>oo(s))).join(",")),e.ue=r}return e.ue}function Ih(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<i.orderBy.length;r++)if(!Y_(i.orderBy[r],e.orderBy[r]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let r=0;r<i.filters.length;r++)if(!km(i.filters[r],e.filters[r]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Cp(i.startAt,e.startAt)&&Cp(i.endAt,e.endAt)}function rh(i){return Ee.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Zl{constructor(e,r=null,s=[],a=[],c=null,f="F",m=null,y=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function o0(i,e,r,s,a,c,f,m){return new Zl(i,e,r,s,a,c,f,m)}function Vm(i){return new Zl(i)}function Pp(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function a0(i){return i.collectionGroup!==null}function Zo(i){const e=Oe(i);if(e.ce===null){e.ce=[];const r=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),r.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new cn(un.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((w=>{w.isInequality()&&(m=m.add(w.field))}))})),m})(e).forEach((c=>{r.has(c.canonicalString())||c.isKeyField()||e.ce.push(new ql(c,s))})),r.has(un.keyField().canonicalString())||e.ce.push(new ql(un.keyField(),s))}return e.ce}function Or(i){const e=Oe(i);return e.le||(e.le=l0(e,Zo(i))),e.le}function l0(i,e){if(i.limitType==="F")return kp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new ql(a.field,c)}));const r=i.endAt?new Wl(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Wl(i.startAt.position,i.startAt.inclusive):null;return kp(i.path,i.collectionGroup,e,i.filters,i.limit,r,s)}}function ih(i,e,r){return new Zl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,r,i.startAt,i.endAt)}function eu(i,e){return Ih(Or(i),Or(e))&&i.limitType===e.limitType}function Nm(i){return`${Sh(Or(i))}|lt:${i.limitType}`}function Xs(i){return`Query(target=${(function(r){let s=r.path.canonicalString();return r.collectionGroup!==null&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map((a=>Pm(a))).join(", ")}]`),Jl(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map((a=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(a))).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map((a=>oo(a))).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map((a=>oo(a))).join(",")),`Target(${s})`})(Or(i))}; limitType=${i.limitType})`}function tu(i,e){return e.isFoundDocument()&&(function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ee.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,a){for(const c of Zo(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0})(i,e)&&(function(s,a){return!(s.startAt&&!(function(f,m,y){const w=Rp(f,m,y);return f.inclusive?w<=0:w<0})(s.startAt,Zo(s),a)||s.endAt&&!(function(f,m,y){const w=Rp(f,m,y);return f.inclusive?w>=0:w>0})(s.endAt,Zo(s),a))})(i,e)}function u0(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Dm(i){return(e,r)=>{let s=!1;for(const a of Zo(i)){const c=c0(a,e,r);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function c0(i,e,r){const s=i.field.isKeyField()?Ee.comparator(e.key,r.key):(function(c,f,m){const y=f.data.field(c),w=m.data.field(c);return y!==null&&w!==null?so(y,w):xe()})(i.field,e,r);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return xe()}}class po{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,r){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,r]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[r]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,((r,s)=>{for(const[a,c]of s)e(a,c)}))}isEmpty(){return Tm(this.inner)}size(){return this.innerSize}}const h0=new Nt(Ee.comparator);function li(){return h0}const Lm=new Nt(Ee.comparator);function Yo(...i){let e=Lm;for(const r of i)e=e.insert(r.key,r);return e}function Om(i){let e=Lm;return i.forEach(((r,s)=>e=e.insert(r,s.overlayedDocument))),e}function cs(){return ea()}function Mm(){return ea()}function ea(){return new po((i=>i.toString()),((i,e)=>i.isEqual(e)))}const f0=new Nt(Ee.comparator),d0=new cn(Ee.comparator);function He(...i){let e=d0;for(const r of i)e=e.add(r);return e}const p0=new cn(et);function m0(){return p0}function Ah(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$l(e)?"-0":e}}function Fm(i){return{integerValue:""+i}}function g0(i,e){return q_(e)?Fm(e):Ah(i,e)}class nu{constructor(){this._=void 0}}function y0(i,e,r){return i instanceof Hl?(function(a,c){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&wh(c)&&(c=Eh(c)),c&&(f.fields.__previous_value__=c),{mapValue:f}})(r,e):i instanceof ha?bm(i,e):i instanceof fa?Bm(i,e):(function(a,c){const f=jm(a,c),m=xp(f)+xp(a.Pe);return th(f)&&th(a.Pe)?Fm(m):Ah(a.serializer,m)})(i,e)}function v0(i,e,r){return i instanceof ha?bm(i,e):i instanceof fa?Bm(i,e):r}function jm(i,e){return i instanceof Kl?(function(s){return th(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Hl extends nu{}class ha extends nu{constructor(e){super(),this.elements=e}}function bm(i,e){const r=Um(e);for(const s of i.elements)r.some((a=>Fr(a,s)))||r.push(s);return{arrayValue:{values:r}}}class fa extends nu{constructor(e){super(),this.elements=e}}function Bm(i,e){let r=Um(e);for(const s of i.elements)r=r.filter((a=>!Fr(a,s)));return{arrayValue:{values:r}}}class Kl extends nu{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function xp(i){return bt(i.integerValue||i.doubleValue)}function Um(i){return Th(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function _0(i,e){return i.field.isEqual(e.field)&&(function(s,a){return s instanceof ha&&a instanceof ha||s instanceof fa&&a instanceof fa?io(s.elements,a.elements,Fr):s instanceof Kl&&a instanceof Kl?Fr(s.Pe,a.Pe):s instanceof Hl&&a instanceof Hl})(i.transform,e.transform)}class w0{constructor(e,r){this.version=e,this.transformResults=r}}class si{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new si}static exists(e){return new si(void 0,e)}static updateTime(e){return new si(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ml(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class ru{}function zm(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Wm(i.key,si.none()):new ga(i.key,i.data,si.none());{const r=i.data,s=or.empty();let a=new cn(un.comparator);for(let c of e.fields)if(!a.has(c)){let f=r.field(c);f===null&&c.length>1&&(c=c.popLast(),f=r.field(c)),f===null?s.delete(c):s.set(c,f),a=a.add(c)}return new ms(i.key,s,new Er(a.toArray()),si.none())}}function E0(i,e,r){i instanceof ga?(function(a,c,f){const m=a.value.clone(),y=Np(a.fieldTransforms,c,f.transformResults);m.setAll(y),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,r):i instanceof ms?(function(a,c,f){if(!Ml(a.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Np(a.fieldTransforms,c,f.transformResults),y=c.data;y.setAll($m(a)),y.setAll(m),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(i,e,r):(function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,r)}function ta(i,e,r,s){return i instanceof ga?(function(c,f,m,y){if(!Ml(c.precondition,f))return m;const w=c.value.clone(),S=Dp(c.fieldTransforms,y,f);return w.setAll(S),f.convertToFoundDocument(f.version,w).setHasLocalMutations(),null})(i,e,r,s):i instanceof ms?(function(c,f,m,y){if(!Ml(c.precondition,f))return m;const w=Dp(c.fieldTransforms,y,f),S=f.data;return S.setAll($m(c)),S.setAll(w),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((P=>P.field)))})(i,e,r,s):(function(c,f,m){return Ml(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,r)}function T0(i,e){let r=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=jm(s.transform,a||null);c!=null&&(r===null&&(r=or.empty()),r.set(s.field,c))}return r||null}function Vp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&io(s,a,((c,f)=>_0(c,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ga extends ru{constructor(e,r,s,a=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ms extends ru{constructor(e,r,s,a,c=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function $m(i){const e=new Map;return i.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const s=i.data.field(r);e.set(r,s)}})),e}function Np(i,e,r){const s=new Map;st(i.length===r.length);for(let a=0;a<r.length;a++){const c=i[a],f=c.transform,m=e.data.field(c.field);s.set(c.field,v0(f,m,r[a]))}return s}function Dp(i,e,r){const s=new Map;for(const a of i){const c=a.transform,f=r.data.field(a.field);s.set(a.field,y0(c,f,e))}return s}class Wm extends ru{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S0 extends ru{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class I0{constructor(e,r,s,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&E0(c,e,s[a])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=ta(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=ta(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=Mm();return this.mutations.forEach((a=>{const c=e.get(a.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=r.has(a.key)?null:m;const y=zm(f,m);y!==null&&s.set(a.key,y),f.isValidDocument()||f.convertToNoDocument(Le.min())})),s}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),He())}isEqual(e){return this.batchId===e.batchId&&io(this.mutations,e.mutations,((r,s)=>Vp(r,s)))&&io(this.baseMutations,e.baseMutations,((r,s)=>Vp(r,s)))}}class Rh{constructor(e,r,s,a){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=a}static from(e,r,s){st(e.mutations.length===s.length);let a=(function(){return f0})();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new Rh(e,r,s,a)}}class A0{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class R0{constructor(e,r){this.count=e,this.unchangedNames=r}}var $t,Ye;function C0(i){switch(i){default:return xe();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function qm(i){if(i===void 0)return ai("GRPC error has no .code"),J.UNKNOWN;switch(i){case $t.OK:return J.OK;case $t.CANCELLED:return J.CANCELLED;case $t.UNKNOWN:return J.UNKNOWN;case $t.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case $t.INTERNAL:return J.INTERNAL;case $t.UNAVAILABLE:return J.UNAVAILABLE;case $t.UNAUTHENTICATED:return J.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case $t.NOT_FOUND:return J.NOT_FOUND;case $t.ALREADY_EXISTS:return J.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return J.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case $t.ABORTED:return J.ABORTED;case $t.OUT_OF_RANGE:return J.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return J.UNIMPLEMENTED;case $t.DATA_LOSS:return J.DATA_LOSS;default:return xe()}}(Ye=$t||($t={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function k0(){return new TextEncoder}const P0=new hs([4294967295,4294967295],0);function Lp(i){const e=k0().encode(i),r=new pm;return r.update(e),new Uint8Array(r.digest())}function Op(i){const e=new DataView(i.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new hs([r,s],0),new hs([a,c],0)]}class Ch{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new Xo(`Invalid padding: ${r}`);if(s<0)throw new Xo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Xo(`Invalid hash count: ${s}`);if(e.length===0&&r!==0)throw new Xo(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=hs.fromNumber(this.Ie)}Ee(e,r,s){let a=e.add(r.multiply(hs.fromNumber(s)));return a.compare(P0)===1&&(a=new hs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Lp(e),[s,a]=Op(r);for(let c=0;c<this.hashCount;c++){const f=this.Ee(s,a,c);if(!this.de(f))return!1}return!0}static create(e,r,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Ch(c,a,r);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.Ie===0)return;const r=Lp(e),[s,a]=Op(r);for(let c=0;c<this.hashCount;c++){const f=this.Ee(s,a,c);this.Ae(f)}}Ae(e){const r=Math.floor(e/8),s=e%8;this.bitmap[r]|=1<<s}}class Xo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class iu{constructor(e,r,s,a,c){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const a=new Map;return a.set(e,ya.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new iu(Le.min(),a,new Nt(et),li(),He())}}class ya{constructor(e,r,s,a,c){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new ya(s,r,He(),He(),He())}}class Fl{constructor(e,r,s,a){this.Re=e,this.removedTargetIds=r,this.key=s,this.Ve=a}}class Hm{constructor(e,r){this.targetId=e,this.me=r}}class Km{constructor(e,r,s=hn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=a}}class Mp{constructor(){this.fe=0,this.ge=jp(),this.pe=hn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=He(),r=He(),s=He();return this.ge.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:s=s.add(a);break;default:xe()}})),new ya(this.pe,this.ye,e,r,s)}Ce(){this.we=!1,this.ge=jp()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,st(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class x0{constructor(e){this.Le=e,this.Be=new Map,this.ke=li(),this.qe=Fp(),this.Qe=new Nt(et)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const s=this.Ge(r);switch(e.state){case 0:this.ze(r)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),s.De(e.resumeToken));break;default:xe()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((s,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,s=e.me.count,a=this.Je(r);if(a){const c=a.target;if(rh(c))if(s===0){const f=new Ee(c.path);this.Ue(r,f,En.newNoDocument(f,Le.min()))}else st(s===1);else{const f=this.Ye(r);if(f!==s){const m=this.Ze(e),y=m?this.Xe(m,e,f):1;if(y!==0){this.je(r);const w=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,w)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=r;let f,m;try{f=ds(s).toUint8Array()}catch(y){if(y instanceof Sm)return ro("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Ch(f,a,c)}catch(y){return ro(y instanceof Xo?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.Ie===0?null:m}Xe(e,r,s){return r.me.count===s-this.nt(e,r.targetId)?0:2}nt(e,r){const s=this.Le.getRemoteKeysForTarget(r);let a=0;return s.forEach((c=>{const f=this.Le.tt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.Ue(r,c,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((c,f)=>{const m=this.Je(f);if(m){if(c.current&&rh(m.target)){const y=new Ee(m.target.path);this.ke.get(y)!==null||this.it(f,y)||this.Ue(f,y,En.newNoDocument(y,e))}c.be&&(r.set(f,c.ve()),c.Ce())}}));let s=He();this.qe.forEach(((c,f)=>{let m=!0;f.forEachWhile((y=>{const w=this.Je(y);return!w||w.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.ke.forEach(((c,f)=>f.setReadTime(e)));const a=new iu(e,r,this.Qe,this.ke,s);return this.ke=li(),this.qe=Fp(),this.Qe=new Nt(et),a}$e(e,r){if(!this.ze(e))return;const s=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,s),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,s){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),s&&(this.ke=this.ke.insert(r,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Mp,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new cn(et),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||pe("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Mp),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Fp(){return new Nt(Ee.comparator)}function jp(){return new Nt(Ee.comparator)}const V0={asc:"ASCENDING",desc:"DESCENDING"},N0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D0={and:"AND",or:"OR"};class L0{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function sh(i,e){return i.useProto3Json||Jl(e)?e:{value:e}}function Ql(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qm(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function O0(i,e){return Ql(i,e.toTimestamp())}function Mr(i){return st(!!i),Le.fromTimestamp((function(r){const s=$i(r);return new Qt(s.seconds,s.nanos)})(i))}function kh(i,e){return oh(i,e).canonicalString()}function oh(i,e){const r=(function(a){return new Rt(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?r:r.child(e)}function Gm(i){const e=Rt.fromString(i);return st(eg(e)),e}function ah(i,e){return kh(i.databaseId,e.path)}function zc(i,e){const r=Gm(e);if(r.get(1)!==i.databaseId.projectId)throw new ve(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new ve(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new Ee(Xm(r))}function Ym(i,e){return kh(i.databaseId,e)}function M0(i){const e=Gm(i);return e.length===4?Rt.emptyPath():Xm(e)}function lh(i){return new Rt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Xm(i){return st(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function bp(i,e,r){return{name:ah(i,e),fields:r.value.mapValue.fields}}function F0(i,e){let r;if("targetChange"in e){e.targetChange;const s=(function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:xe()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(w,S){return w.useProto3Json?(st(S===void 0||typeof S=="string"),hn.fromBase64String(S||"")):(st(S===void 0||S instanceof Buffer||S instanceof Uint8Array),hn.fromUint8Array(S||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(w){const S=w.code===void 0?J.UNKNOWN:qm(w.code);return new ve(S,w.message||"")})(f);r=new Km(s,a,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=zc(i,s.document.name),c=Mr(s.document.updateTime),f=s.document.createTime?Mr(s.document.createTime):Le.min(),m=new or({mapValue:{fields:s.document.fields}}),y=En.newFoundDocument(a,c,f,m),w=s.targetIds||[],S=s.removedTargetIds||[];r=new Fl(w,S,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=zc(i,s.document),c=s.readTime?Mr(s.readTime):Le.min(),f=En.newNoDocument(a,c),m=s.removedTargetIds||[];r=new Fl([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=zc(i,s.document),c=s.removedTargetIds||[];r=new Fl([],c,a,null)}else{if(!("filter"in e))return xe();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,f=new R0(a,c),m=s.targetId;r=new Hm(m,f)}}return r}function j0(i,e){let r;if(e instanceof ga)r={update:bp(i,e.key,e.value)};else if(e instanceof Wm)r={delete:ah(i,e.key)};else if(e instanceof ms)r={update:bp(i,e.key,e.data),updateMask:K0(e.fieldMask)};else{if(!(e instanceof S0))return xe();r={verify:ah(i,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((s=>(function(c,f){const m=f.transform;if(m instanceof Hl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ha)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof fa)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Kl)return{fieldPath:f.field.canonicalString(),increment:m.Pe};throw xe()})(0,s)))),e.precondition.isNone||(r.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:O0(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:xe()})(i,e.precondition)),r}function b0(i,e){return i&&i.length>0?(st(e!==void 0),i.map((r=>(function(a,c){let f=a.updateTime?Mr(a.updateTime):Mr(c);return f.isEqual(Le.min())&&(f=Mr(c)),new w0(f,a.transformResults||[])})(r,e)))):[]}function B0(i,e){return{documents:[Ym(i,e.path)]}}function U0(i,e){const r={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=Ym(i,a);const c=(function(w){if(w.length!==0)return Zm(jr.create(w,"and"))})(e.filters);c&&(r.structuredQuery.where=c);const f=(function(w){if(w.length!==0)return w.map((S=>(function(j){return{field:Js(j.field),direction:W0(j.dir)}})(S)))})(e.orderBy);f&&(r.structuredQuery.orderBy=f);const m=sh(i,e.limit);return m!==null&&(r.structuredQuery.limit=m),e.startAt&&(r.structuredQuery.startAt=(function(w){return{before:w.inclusive,values:w.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(w){return{before:!w.inclusive,values:w.position}})(e.endAt)),{_t:r,parent:a}}function z0(i){let e=M0(i.parent);const r=i.structuredQuery,s=r.from?r.from.length:0;let a=null;if(s>0){st(s===1);const S=r.from[0];S.allDescendants?a=S.collectionId:e=e.child(S.collectionId)}let c=[];r.where&&(c=(function(P){const j=Jm(P);return j instanceof jr&&Cm(j)?j.getFilters():[j]})(r.where));let f=[];r.orderBy&&(f=(function(P){return P.map((j=>(function(ee){return new ql(Zs(ee.field),(function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ee.direction))})(j)))})(r.orderBy));let m=null;r.limit&&(m=(function(P){let j;return j=typeof P=="object"?P.value:P,Jl(j)?null:j})(r.limit));let y=null;r.startAt&&(y=(function(P){const j=!!P.before,W=P.values||[];return new Wl(W,j)})(r.startAt));let w=null;return r.endAt&&(w=(function(P){const j=!P.before,W=P.values||[];return new Wl(W,j)})(r.endAt)),o0(e,a,f,c,m,"F",y,w)}function $0(i,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Jm(i){return i.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=Zs(r.unaryFilter.field);return Kt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Zs(r.unaryFilter.field);return Kt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Zs(r.unaryFilter.field);return Kt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Zs(r.unaryFilter.field);return Kt.create(f,"!=",{nullValue:"NULL_VALUE"});default:return xe()}})(i):i.fieldFilter!==void 0?(function(r){return Kt.create(Zs(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}})(r.fieldFilter.op),r.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(r){return jr.create(r.compositeFilter.filters.map((s=>Jm(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return xe()}})(r.compositeFilter.op))})(i):xe()}function W0(i){return V0[i]}function q0(i){return N0[i]}function H0(i){return D0[i]}function Js(i){return{fieldPath:i.canonicalString()}}function Zs(i){return un.fromServerFormat(i.fieldPath)}function Zm(i){return i instanceof Kt?(function(r){if(r.op==="=="){if(Ap(r.value))return{unaryFilter:{field:Js(r.field),op:"IS_NAN"}};if(Ip(r.value))return{unaryFilter:{field:Js(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Ap(r.value))return{unaryFilter:{field:Js(r.field),op:"IS_NOT_NAN"}};if(Ip(r.value))return{unaryFilter:{field:Js(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Js(r.field),op:q0(r.op),value:r.value}}})(i):i instanceof jr?(function(r){const s=r.getFilters().map((a=>Zm(a)));return s.length===1?s[0]:{compositeFilter:{op:H0(r.op),filters:s}}})(i):xe()}function K0(i){const e=[];return i.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function eg(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Fi{constructor(e,r,s,a,c=Le.min(),f=Le.min(),m=hn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Q0{constructor(e){this.ct=e}}function G0(i){const e=z0({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ih(e,e.limit,"L"):e}class Y0{constructor(){this.un=new X0}addToCollectionParentIndex(e,r){return this.un.add(r),Y.resolve()}getCollectionParents(e,r){return Y.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Y.resolve()}deleteFieldIndex(e,r){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,r){return Y.resolve()}getDocumentsMatchingTarget(e,r){return Y.resolve(null)}getIndexType(e,r){return Y.resolve(0)}getFieldIndexes(e,r){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,r){return Y.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,r){return Y.resolve(zi.min())}updateCollectionGroup(e,r,s){return Y.resolve()}updateIndexEntries(e,r){return Y.resolve()}}class X0{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),a=this.index[r]||new cn(Rt.comparator),c=!a.has(s);return this.index[r]=a.add(s),c}has(e){const r=e.lastSegment(),s=e.popLast(),a=this.index[r];return a&&a.has(s)}getEntries(e){return(this.index[e]||new cn(Rt.comparator)).toArray()}}class ao{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ao(0)}static kn(){return new ao(-1)}}class J0{constructor(){this.changes=new po((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return s!==void 0?Y.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Z0{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class ew{constructor(e,r,s,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(s!==null&&ta(s.mutation,a,Er.empty(),Qt.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((s=>this.getLocalViewOfDocuments(e,s,He()).next((()=>s))))}getLocalViewOfDocuments(e,r,s=He()){const a=cs();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,s).next((c=>{let f=Yo();return c.forEach(((m,y)=>{f=f.insert(m,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,r){const s=cs();return this.populateOverlays(e,s,r).next((()=>this.computeViews(e,r,s,He())))}populateOverlays(e,r,s){const a=[];return s.forEach((c=>{r.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((f,m)=>{r.set(f,m)}))}))}computeViews(e,r,s,a){let c=li();const f=ea(),m=(function(){return ea()})();return r.forEach(((y,w)=>{const S=s.get(w.key);a.has(w.key)&&(S===void 0||S.mutation instanceof ms)?c=c.insert(w.key,w):S!==void 0?(f.set(w.key,S.mutation.getFieldMask()),ta(S.mutation,w,S.mutation.getFieldMask(),Qt.now())):f.set(w.key,Er.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((w,S)=>f.set(w,S))),r.forEach(((w,S)=>{var P;return m.set(w,new Z0(S,(P=f.get(w))!==null&&P!==void 0?P:null))})),m)))}recalculateAndSaveOverlays(e,r){const s=ea();let a=new Nt(((f,m)=>f-m)),c=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((f=>{for(const m of f)m.keys().forEach((y=>{const w=r.get(y);if(w===null)return;let S=s.get(y)||Er.empty();S=m.applyToLocalView(w,S),s.set(y,S);const P=(a.get(m.batchId)||He()).add(y);a=a.insert(m.batchId,P)}))})).next((()=>{const f=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),w=y.key,S=y.value,P=Mm();S.forEach((j=>{if(!c.has(j)){const W=zm(r.get(j),s.get(j));W!==null&&P.set(j,W),c=c.add(j)}})),f.push(this.documentOverlayCache.saveOverlays(e,w,P))}return Y.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,r,s,a){return(function(f){return Ee.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):a0(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,a):this.getDocumentsMatchingCollectionQuery(e,r,s,a)}getNextDocuments(e,r,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,a).next((c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,a-c.size):Y.resolve(cs());let m=-1,y=c;return f.next((w=>Y.forEach(w,((S,P)=>(m<P.largestBatchId&&(m=P.largestBatchId),c.get(S)?Y.resolve():this.remoteDocumentCache.getEntry(e,S).next((j=>{y=y.insert(S,j)}))))).next((()=>this.populateOverlays(e,w,c))).next((()=>this.computeViews(e,y,w,He()))).next((S=>({batchId:m,changes:Om(S)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ee(r)).next((s=>{let a=Yo();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,s,a){const c=r.collectionGroup;let f=Yo();return this.indexManager.getCollectionParents(e,c).next((m=>Y.forEach(m,(y=>{const w=(function(P,j){return new Zl(j,null,P.explicitOrderBy.slice(),P.filters.slice(),P.limit,P.limitType,P.startAt,P.endAt)})(r,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,w,s,a).next((S=>{S.forEach(((P,j)=>{f=f.insert(P,j)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,r,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,c,a)))).next((f=>{c.forEach(((y,w)=>{const S=w.getKey();f.get(S)===null&&(f=f.insert(S,En.newInvalidDocument(S)))}));let m=Yo();return f.forEach(((y,w)=>{const S=c.get(y);S!==void 0&&ta(S.mutation,w,Er.empty(),Qt.now()),tu(r,w)&&(m=m.insert(y,w))})),m}))}}class tw{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Y.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:Mr(a.createTime)}})(r)),Y.resolve()}getNamedQuery(e,r){return Y.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:G0(a.bundledQuery),readTime:Mr(a.readTime)}})(r)),Y.resolve()}}class nw{constructor(){this.overlays=new Nt(Ee.comparator),this.Ir=new Map}getOverlay(e,r){return Y.resolve(this.overlays.get(r))}getOverlays(e,r){const s=cs();return Y.forEach(r,(a=>this.getOverlay(e,a).next((c=>{c!==null&&s.set(a,c)})))).next((()=>s))}saveOverlays(e,r,s){return s.forEach(((a,c)=>{this.ht(e,r,c)})),Y.resolve()}removeOverlaysForBatchId(e,r,s){const a=this.Ir.get(s);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Ir.delete(s)),Y.resolve()}getOverlaysForCollection(e,r,s){const a=cs(),c=r.length+1,f=new Ee(r.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,w=y.getKey();if(!r.isPrefixOf(w.path))break;w.path.length===c&&y.largestBatchId>s&&a.set(y.getKey(),y)}return Y.resolve(a)}getOverlaysForCollectionGroup(e,r,s,a){let c=new Nt(((w,S)=>w-S));const f=this.overlays.getIterator();for(;f.hasNext();){const w=f.getNext().value;if(w.getKey().getCollectionGroup()===r&&w.largestBatchId>s){let S=c.get(w.largestBatchId);S===null&&(S=cs(),c=c.insert(w.largestBatchId,S)),S.set(w.getKey(),w)}}const m=cs(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((w,S)=>m.set(w,S))),!(m.size()>=a)););return Y.resolve(m)}ht(e,r,s){const a=this.overlays.get(s.key);if(a!==null){const f=this.Ir.get(a.largestBatchId).delete(s.key);this.Ir.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new A0(r,s));let c=this.Ir.get(r);c===void 0&&(c=He(),this.Ir.set(r,c)),this.Ir.set(r,c.add(s.key))}}class rw{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Y.resolve()}}class Ph{constructor(){this.Tr=new cn(tn.Er),this.dr=new cn(tn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const s=new tn(e,r);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,r){e.forEach((s=>this.addReference(s,r)))}removeReference(e,r){this.Vr(new tn(e,r))}mr(e,r){e.forEach((s=>this.removeReference(s,r)))}gr(e){const r=new Ee(new Rt([])),s=new tn(r,e),a=new tn(r,e+1),c=[];return this.dr.forEachInRange([s,a],(f=>{this.Vr(f),c.push(f.key)})),c}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Ee(new Rt([])),s=new tn(r,e),a=new tn(r,e+1);let c=He();return this.dr.forEachInRange([s,a],(f=>{c=c.add(f.key)})),c}containsKey(e){const r=new tn(e,0),s=this.Tr.firstAfterOrEqual(r);return s!==null&&e.isEqual(s.key)}}class tn{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Ee.comparator(e.key,r.key)||et(e.wr,r.wr)}static Ar(e,r){return et(e.wr,r.wr)||Ee.comparator(e.key,r.key)}}class iw{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new cn(tn.Er)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,s,a){const c=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new I0(c,r,s,a);this.mutationQueue.push(f);for(const m of a)this.br=this.br.add(new tn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return Y.resolve(f)}lookupMutationBatch(e,r){return Y.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const s=r+1,a=this.vr(s),c=a<0?0:a;return Y.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new tn(r,0),a=new tn(r,Number.POSITIVE_INFINITY),c=[];return this.br.forEachInRange([s,a],(f=>{const m=this.Dr(f.wr);c.push(m)})),Y.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new cn(et);return r.forEach((a=>{const c=new tn(a,0),f=new tn(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([c,f],(m=>{s=s.add(m.wr)}))})),Y.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,a=s.length+1;let c=s;Ee.isDocumentKey(c)||(c=c.child(""));const f=new tn(new Ee(c),0);let m=new cn(et);return this.br.forEachWhile((y=>{const w=y.key.path;return!!s.isPrefixOf(w)&&(w.length===a&&(m=m.add(y.wr)),!0)}),f),Y.resolve(this.Cr(m))}Cr(e){const r=[];return e.forEach((s=>{const a=this.Dr(s);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){st(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return Y.forEach(r.mutations,(a=>{const c=new tn(a.key,r.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=s}))}On(e){}containsKey(e,r){const s=new tn(r,0),a=this.br.firstAfterOrEqual(s);return Y.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class sw{constructor(e){this.Mr=e,this.docs=(function(){return new Nt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,a=this.docs.get(s),c=a?a.size:0,f=this.Mr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return Y.resolve(s?s.document.mutableCopy():En.newInvalidDocument(r))}getEntries(e,r){let s=li();return r.forEach((a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():En.newInvalidDocument(a))})),Y.resolve(s)}getDocumentsMatchingQuery(e,r,s,a){let c=li();const f=r.path,m=new Ee(f.child("")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:w,value:{document:S}}=y.getNext();if(!f.isPrefixOf(w.path))break;w.path.length>f.length+1||U_(B_(S),s)<=0||(a.has(S.key)||tu(r,S))&&(c=c.insert(S.key,S.mutableCopy()))}return Y.resolve(c)}getAllFromCollectionGroup(e,r,s,a){xe()}Or(e,r){return Y.forEach(this.docs,(s=>r(s)))}newChangeBuffer(e){return new ow(this)}getSize(e){return Y.resolve(this.size)}}class ow extends J0{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(s)})),Y.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}class aw{constructor(e){this.persistence=e,this.Nr=new po((r=>Sh(r)),Ih),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ph,this.targetCount=0,this.kr=ao.Bn()}forEachTarget(e,r){return this.Nr.forEach(((s,a)=>r(a))),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Lr&&(this.Lr=r),Y.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new ao(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Y.resolve()}updateTargetData(e,r){return this.Kn(r),Y.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,r,s){let a=0;const c=[];return this.Nr.forEach(((f,m)=>{m.sequenceNumber<=r&&s.get(m.targetId)===null&&(this.Nr.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),Y.waitFor(c).next((()=>a))}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,r){const s=this.Nr.get(r)||null;return Y.resolve(s)}addMatchingKeys(e,r,s){return this.Br.Rr(r,s),Y.resolve()}removeMatchingKeys(e,r,s){this.Br.mr(r,s);const a=this.persistence.referenceDelegate,c=[];return a&&r.forEach((f=>{c.push(a.markPotentiallyOrphaned(e,f))})),Y.waitFor(c)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Y.resolve()}getMatchingKeysForTargetId(e,r){const s=this.Br.yr(r);return Y.resolve(s)}containsKey(e,r){return Y.resolve(this.Br.containsKey(r))}}class lw{constructor(e,r){this.qr={},this.overlays={},this.Qr=new _h(0),this.Kr=!1,this.Kr=!0,this.$r=new rw,this.referenceDelegate=e(this),this.Ur=new aw(this),this.indexManager=new Y0,this.remoteDocumentCache=(function(a){return new sw(a)})((s=>this.referenceDelegate.Wr(s))),this.serializer=new Q0(r),this.Gr=new tw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new nw,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.qr[e.toKey()];return s||(s=new iw(r,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,s){pe("MemoryPersistence","Starting transaction:",e);const a=new uw(this.Qr.next());return this.referenceDelegate.zr(),s(a).next((c=>this.referenceDelegate.jr(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Hr(e,r){return Y.or(Object.values(this.qr).map((s=>()=>s.containsKey(e,r))))}}class uw extends $_{constructor(e){super(),this.currentSequenceNumber=e}}class xh{constructor(e){this.persistence=e,this.Jr=new Ph,this.Yr=null}static Zr(e){return new xh(e)}get Xr(){if(this.Yr)return this.Yr;throw xe()}addReference(e,r,s){return this.Jr.addReference(s,r),this.Xr.delete(s.toString()),Y.resolve()}removeReference(e,r,s){return this.Jr.removeReference(s,r),this.Xr.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Y.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((c=>this.Xr.add(c.toString())))})).next((()=>s.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Xr,(s=>{const a=Ee.fromPath(s);return this.ei(e,a).next((c=>{c||r.removeEntry(a,Le.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((s=>{s?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Y.or([()=>Y.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Vh{constructor(e,r,s,a){this.targetId=e,this.fromCache=r,this.$i=s,this.Ui=a}static Wi(e,r){let s=He(),a=He();for(const c of r.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Vh(e,r.fromCache,s,a)}}class cw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class hw{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return fv()?8:W_(cv())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,s,a){const c={result:null};return this.Yi(e,r).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.Zi(e,r,a,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new cw;return this.Xi(e,r,f).next((m=>{if(c.result=m,this.zi)return this.es(e,r,f,m.size)}))})).next((()=>c.result))}es(e,r,s,a){return s.documentReadCount<this.ji?(Qo()<=Je.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Xs(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Y.resolve()):(Qo()<=Je.DEBUG&&pe("QueryEngine","Query:",Xs(r),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Hi*a?(Qo()<=Je.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Xs(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Or(r))):Y.resolve())}Yi(e,r){if(Pp(r))return Y.resolve(null);let s=Or(r);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=ih(r,null,"F"),s=Or(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const f=He(...c);return this.Ji.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((y=>{const w=this.ts(r,m);return this.ns(r,w,f,y.readTime)?this.Yi(e,ih(r,null,"F")):this.rs(e,w,r,y)}))))})))))}Zi(e,r,s,a){return Pp(r)||a.isEqual(Le.min())?Y.resolve(null):this.Ji.getDocuments(e,s).next((c=>{const f=this.ts(r,c);return this.ns(r,f,s,a)?Y.resolve(null):(Qo()<=Je.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Xs(r)),this.rs(e,f,r,b_(a,-1)).next((m=>m)))}))}ts(e,r){let s=new cn(Dm(e));return r.forEach(((a,c)=>{tu(e,c)&&(s=s.add(c))})),s}ns(e,r,s,a){if(e.limit===null)return!1;if(s.size!==r.size)return!0;const c=e.limitType==="F"?r.last():r.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Xi(e,r,s){return Qo()<=Je.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Xs(r)),this.Ji.getDocumentsMatchingQuery(e,r,zi.min(),s)}rs(e,r,s,a){return this.Ji.getDocumentsMatchingQuery(e,s,a).next((c=>(r.forEach((f=>{c=c.insert(f.key,f)})),c)))}}class fw{constructor(e,r,s,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Nt(et),this._s=new po((c=>Sh(c)),Ih),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ew(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function dw(i,e,r,s){return new fw(i,e,r,s)}async function tg(i,e){const r=Oe(i);return await r.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return r.mutationQueue.getAllMutationBatches(s).next((c=>(a=c,r.ls(e),r.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],m=[];let y=He();for(const w of a){f.push(w.batchId);for(const S of w.mutations)y=y.add(S.key)}for(const w of c){m.push(w.batchId);for(const S of w.mutations)y=y.add(S.key)}return r.localDocuments.getDocuments(s,y).next((w=>({hs:w,removedBatchIds:f,addedBatchIds:m})))}))}))}function pw(i,e){const r=Oe(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),c=r.cs.newChangeBuffer({trackRemovals:!0});return(function(m,y,w,S){const P=w.batch,j=P.keys();let W=Y.resolve();return j.forEach((ee=>{W=W.next((()=>S.getEntry(y,ee))).next((q=>{const K=w.docVersions.get(ee);st(K!==null),q.version.compareTo(K)<0&&(P.applyToRemoteDocument(q,w),q.isValidDocument()&&(q.setReadTime(w.commitVersion),S.addEntry(q)))}))})),W.next((()=>m.mutationQueue.removeMutationBatch(y,P)))})(r,s,e,c).next((()=>c.apply(s))).next((()=>r.mutationQueue.performConsistencyCheck(s))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let y=He();for(let w=0;w<m.mutationResults.length;++w)m.mutationResults[w].transformResults.length>0&&(y=y.add(m.batch.mutations[w].key));return y})(e)))).next((()=>r.localDocuments.getDocuments(s,a)))}))}function ng(i){const e=Oe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function mw(i,e){const r=Oe(i),s=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const m=[];e.targetChanges.forEach(((S,P)=>{const j=a.get(P);if(!j)return;m.push(r.Ur.removeMatchingKeys(c,S.removedDocuments,P).next((()=>r.Ur.addMatchingKeys(c,S.addedDocuments,P))));let W=j.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(P)!==null?W=W.withResumeToken(hn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):S.resumeToken.approximateByteSize()>0&&(W=W.withResumeToken(S.resumeToken,s)),a=a.insert(P,W),(function(q,K,se){return q.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(j,W,S)&&m.push(r.Ur.updateTargetData(c,W))}));let y=li(),w=He();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&m.push(r.persistence.referenceDelegate.updateLimboDocument(c,S))})),m.push(gw(c,f,e.documentUpdates).next((S=>{y=S.Ps,w=S.Is}))),!s.isEqual(Le.min())){const S=r.Ur.getLastRemoteSnapshotVersion(c).next((P=>r.Ur.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(S)}return Y.waitFor(m).next((()=>f.apply(c))).next((()=>r.localDocuments.getLocalViewOfDocuments(c,y,w))).next((()=>y))})).then((c=>(r.os=a,c)))}function gw(i,e,r){let s=He(),a=He();return r.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let f=li();return r.forEach(((m,y)=>{const w=c.get(m);y.isFoundDocument()!==w.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual(Le.min())?(e.removeEntry(m,y.readTime),f=f.insert(m,y)):!w.isValidDocument()||y.version.compareTo(w.version)>0||y.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(y),f=f.insert(m,y)):pe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",w.version," Watch version:",y.version)})),{Ps:f,Is:a}}))}function yw(i,e){const r=Oe(i);return r.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function vw(i,e){const r=Oe(i);return r.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return r.Ur.getTargetData(s,e).next((c=>c?(a=c,Y.resolve(a)):r.Ur.allocateTargetId(s).next((f=>(a=new Fi(e,f,"TargetPurposeListen",s.currentSequenceNumber),r.Ur.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=r.os.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(s.targetId,s),r._s.set(e,s.targetId)),s}))}async function uh(i,e,r){const s=Oe(i),a=s.os.get(e),c=r?"readwrite":"readwrite-primary";try{r||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!ma(f))throw f;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.os=s.os.remove(e),s._s.delete(a.target)}function Bp(i,e,r){const s=Oe(i);let a=Le.min(),c=He();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,w,S){const P=Oe(y),j=P._s.get(S);return j!==void 0?Y.resolve(P.os.get(j)):P.Ur.getTargetData(w,S)})(s,f,Or(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(f,m.targetId).next((y=>{c=y}))})).next((()=>s.ss.getDocumentsMatchingQuery(f,e,r?a:Le.min(),r?c:He()))).next((m=>(_w(s,u0(e),m),{documents:m,Ts:c})))))}function _w(i,e,r){let s=i.us.get(e)||Le.min();r.forEach(((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.us.set(e,s)}class Up{constructor(){this.activeTargetIds=m0()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ww{constructor(){this.so=new Up,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,s){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Up,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ew{_o(e){}shutdown(){}}class zp{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Nl=null;function $c(){return Nl===null?Nl=(function(){return 268435456+Math.round(2147483648*Math.random())})():Nl++,"0x"+Nl.toString(16)}const Tw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sw{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const _n="WebChannelConnection";class Iw extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+r.host,this.vo=`projects/${a}/databases/${c}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}get Fo(){return!1}Mo(r,s,a,c,f){const m=$c(),y=this.xo(r,s.toUriEncodedString());pe("RestConnection",`Sending RPC '${r}' ${m}:`,y,a);const w={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(w,c,f),this.No(r,y,w,a).then((S=>(pe("RestConnection",`Received RPC '${r}' ${m}: `,S),S)),(S=>{throw ro("RestConnection",`RPC '${r}' ${m} failed with error: `,S,"url: ",y,"request:",a),S}))}Lo(r,s,a,c,f,m){return this.Mo(r,s,a,c,f)}Oo(r,s,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ho})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((c,f)=>r[f]=c)),a&&a.headers.forEach(((c,f)=>r[f]=c))}xo(r,s){const a=Tw[r];return`${this.Do}/v1/${s}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,s,a){const c=$c();return new Promise(((f,m)=>{const y=new mm;y.setWithCredentials(!0),y.listenOnce(gm.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Ll.NO_ERROR:const S=y.getResponseJson();pe(_n,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(S)),f(S);break;case Ll.TIMEOUT:pe(_n,`RPC '${e}' ${c} timed out`),m(new ve(J.DEADLINE_EXCEEDED,"Request time out"));break;case Ll.HTTP_ERROR:const P=y.getStatus();if(pe(_n,`RPC '${e}' ${c} failed with status:`,P,"response text:",y.getResponseText()),P>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const W=j?.error;if(W&&W.status&&W.message){const ee=(function(K){const se=K.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(se)>=0?se:J.UNKNOWN})(W.status);m(new ve(ee,W.message))}else m(new ve(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new ve(J.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{pe(_n,`RPC '${e}' ${c} completed.`)}}));const w=JSON.stringify(a);pe(_n,`RPC '${e}' ${c} sending request:`,a),y.send(r,"POST",w,s,15)}))}Bo(e,r,s){const a=$c(),c=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=_m(),m=vm(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(y.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Oo(y.initMessageHeaders,r,s),y.encodeInitMessageHeaders=!0;const S=c.join("");pe(_n,`Creating RPC '${e}' stream ${a}: ${S}`,y);const P=f.createWebChannel(S,y);let j=!1,W=!1;const ee=new Sw({Io:K=>{W?pe(_n,`Not sending because RPC '${e}' stream ${a} is closed:`,K):(j||(pe(_n,`Opening RPC '${e}' stream ${a} transport.`),P.open(),j=!0),pe(_n,`RPC '${e}' stream ${a} sending:`,K),P.send(K))},To:()=>P.close()}),q=(K,se,Ae)=>{K.listen(se,(Ce=>{try{Ae(Ce)}catch(ke){setTimeout((()=>{throw ke}),0)}}))};return q(P,Go.EventType.OPEN,(()=>{W||(pe(_n,`RPC '${e}' stream ${a} transport opened.`),ee.yo())})),q(P,Go.EventType.CLOSE,(()=>{W||(W=!0,pe(_n,`RPC '${e}' stream ${a} transport closed`),ee.So())})),q(P,Go.EventType.ERROR,(K=>{W||(W=!0,ro(_n,`RPC '${e}' stream ${a} transport errored:`,K),ee.So(new ve(J.UNAVAILABLE,"The operation could not be completed")))})),q(P,Go.EventType.MESSAGE,(K=>{var se;if(!W){const Ae=K.data[0];st(!!Ae);const Ce=Ae,ke=Ce.error||((se=Ce[0])===null||se===void 0?void 0:se.error);if(ke){pe(_n,`RPC '${e}' stream ${a} received error:`,ke);const We=ke.status;let Ue=(function(A){const k=$t[A];if(k!==void 0)return qm(k)})(We),C=ke.message;Ue===void 0&&(Ue=J.INTERNAL,C="Unknown error status: "+We+" with message "+ke.message),W=!0,ee.So(new ve(Ue,C)),P.close()}else pe(_n,`RPC '${e}' stream ${a} received:`,Ae),ee.bo(Ae)}})),q(m,ym.STAT_EVENT,(K=>{K.stat===Zc.PROXY?pe(_n,`RPC '${e}' stream ${a} detected buffering proxy`):K.stat===Zc.NOPROXY&&pe(_n,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{ee.wo()}),0),ee}}function Wc(){return typeof document<"u"?document:null}function su(i){return new L0(i,!0)}class rg{constructor(e,r,s=1e3,a=1.5,c=6e4){this.ui=e,this.timerId=r,this.ko=s,this.qo=a,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-s);a>0&&pe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class ig{constructor(e,r,s,a,c,f,m,y){this.ui=e,this.Ho=s,this.Jo=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new rg(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===J.RESOURCE_EXHAUSTED?(ai(r.toString()),ai("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.Yo===r&&this.P_(s,a)}),(s=>{e((()=>{const a=new ve(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(a)}))}))}P_(e,r){const s=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{s((()=>this.listener.Eo()))})),this.stream.Ro((()=>{s((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{s((()=>this.I_(a)))})),this.stream.onMessage((a=>{s((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Aw extends ig{constructor(e,r,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,a,f),this.serializer=c}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=F0(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Le.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Le.min():f.readTime?Mr(f.readTime):Le.min()})(e);return this.listener.d_(r,s)}A_(e){const r={};r.database=lh(this.serializer),r.addTarget=(function(c,f){let m;const y=f.target;if(m=rh(y)?{documents:B0(c,y)}:{query:U0(c,y)._t},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=Qm(c,f.resumeToken);const w=sh(c,f.expectedCount);w!==null&&(m.expectedCount=w)}else if(f.snapshotVersion.compareTo(Le.min())>0){m.readTime=Ql(c,f.snapshotVersion.toTimestamp());const w=sh(c,f.expectedCount);w!==null&&(m.expectedCount=w)}return m})(this.serializer,e);const s=$0(this.serializer,e);s&&(r.labels=s),this.a_(r)}R_(e){const r={};r.database=lh(this.serializer),r.removeTarget=e,this.a_(r)}}class Rw extends ig{constructor(e,r,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,a,f),this.serializer=c}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return st(!!e.streamToken),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){st(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=b0(e.writeResults,e.commitTime),s=Mr(e.commitTime);return this.listener.g_(s,r)}p_(){const e={};e.database=lh(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((s=>j0(this.serializer,s)))};this.a_(r)}}class Cw extends class{}{constructor(e,r,s,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new ve(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Mo(e,oh(r,s),a,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(J.UNKNOWN,c.toString())}))}Lo(e,r,s,a,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Lo(e,oh(r,s),a,f,m,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ve(J.UNKNOWN,f.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class kw{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ai(r),this.D_=!1):pe("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class Pw{constructor(e,r,s,a,c){this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=c,this.k_._o((f=>{s.enqueueAndForget((async()=>{gs(this)&&(pe("RemoteStore","Restarting streams for network reachability change."),await(async function(y){const w=Oe(y);w.L_.add(4),await va(w),w.q_.set("Unknown"),w.L_.delete(4),await ou(w)})(this))}))})),this.q_=new kw(s,a)}}async function ou(i){if(gs(i))for(const e of i.B_)await e(!0)}async function va(i){for(const e of i.B_)await e(!1)}function sg(i,e){const r=Oe(i);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Oh(r)?Lh(r):mo(r).r_()&&Dh(r,e))}function Nh(i,e){const r=Oe(i),s=mo(r);r.N_.delete(e),s.r_()&&og(r,e),r.N_.size===0&&(s.r_()?s.o_():gs(r)&&r.q_.set("Unknown"))}function Dh(i,e){if(i.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const r=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}mo(i).A_(e)}function og(i,e){i.Q_.xe(e),mo(i).R_(e)}function Lh(i){i.Q_=new x0({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>i.N_.get(e)||null,tt:()=>i.datastore.serializer.databaseId}),mo(i).start(),i.q_.v_()}function Oh(i){return gs(i)&&!mo(i).n_()&&i.N_.size>0}function gs(i){return Oe(i).L_.size===0}function ag(i){i.Q_=void 0}async function xw(i){i.q_.set("Online")}async function Vw(i){i.N_.forEach(((e,r)=>{Dh(i,e)}))}async function Nw(i,e){ag(i),Oh(i)?(i.q_.M_(e),Lh(i)):i.q_.set("Unknown")}async function Dw(i,e,r){if(i.q_.set("Online"),e instanceof Km&&e.state===2&&e.cause)try{await(async function(a,c){const f=c.cause;for(const m of c.targetIds)a.N_.has(m)&&(await a.remoteSyncer.rejectListen(m,f),a.N_.delete(m),a.Q_.removeTarget(m))})(i,e)}catch(s){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Gl(i,s)}else if(e instanceof Fl?i.Q_.Ke(e):e instanceof Hm?i.Q_.He(e):i.Q_.We(e),!r.isEqual(Le.min()))try{const s=await ng(i.localStore);r.compareTo(s)>=0&&await(function(c,f){const m=c.Q_.rt(f);return m.targetChanges.forEach(((y,w)=>{if(y.resumeToken.approximateByteSize()>0){const S=c.N_.get(w);S&&c.N_.set(w,S.withResumeToken(y.resumeToken,f))}})),m.targetMismatches.forEach(((y,w)=>{const S=c.N_.get(y);if(!S)return;c.N_.set(y,S.withResumeToken(hn.EMPTY_BYTE_STRING,S.snapshotVersion)),og(c,y);const P=new Fi(S.target,y,w,S.sequenceNumber);Dh(c,P)})),c.remoteSyncer.applyRemoteEvent(m)})(i,r)}catch(s){pe("RemoteStore","Failed to raise snapshot:",s),await Gl(i,s)}}async function Gl(i,e,r){if(!ma(e))throw e;i.L_.add(1),await va(i),i.q_.set("Offline"),r||(r=()=>ng(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{pe("RemoteStore","Retrying IndexedDB access"),await r(),i.L_.delete(1),await ou(i)}))}function lg(i,e){return e().catch((r=>Gl(i,r,e)))}async function au(i){const e=Oe(i),r=Wi(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Lw(e);)try{const a=await yw(e.localStore,s);if(a===null){e.O_.length===0&&r.o_();break}s=a.batchId,Ow(e,a)}catch(a){await Gl(e,a)}ug(e)&&cg(e)}function Lw(i){return gs(i)&&i.O_.length<10}function Ow(i,e){i.O_.push(e);const r=Wi(i);r.r_()&&r.V_&&r.m_(e.mutations)}function ug(i){return gs(i)&&!Wi(i).n_()&&i.O_.length>0}function cg(i){Wi(i).start()}async function Mw(i){Wi(i).p_()}async function Fw(i){const e=Wi(i);for(const r of i.O_)e.m_(r.mutations)}async function jw(i,e,r){const s=i.O_.shift(),a=Rh.from(s,e,r);await lg(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await au(i)}async function bw(i,e){e&&Wi(i).V_&&await(async function(s,a){if((function(f){return C0(f)&&f!==J.ABORTED})(a.code)){const c=s.O_.shift();Wi(s).s_(),await lg(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a))),await au(s)}})(i,e),ug(i)&&cg(i)}async function $p(i,e){const r=Oe(i);r.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const s=gs(r);r.L_.add(3),await va(r),s&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await ou(r)}async function Bw(i,e){const r=Oe(i);e?(r.L_.delete(2),await ou(r)):e||(r.L_.add(2),await va(r),r.q_.set("Unknown"))}function mo(i){return i.K_||(i.K_=(function(r,s,a){const c=Oe(r);return c.w_(),new Aw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Eo:xw.bind(null,i),Ro:Vw.bind(null,i),mo:Nw.bind(null,i),d_:Dw.bind(null,i)}),i.B_.push((async e=>{e?(i.K_.s_(),Oh(i)?Lh(i):i.q_.set("Unknown")):(await i.K_.stop(),ag(i))}))),i.K_}function Wi(i){return i.U_||(i.U_=(function(r,s,a){const c=Oe(r);return c.w_(),new Rw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Mw.bind(null,i),mo:bw.bind(null,i),f_:Fw.bind(null,i),g_:jw.bind(null,i)}),i.B_.push((async e=>{e?(i.U_.s_(),await au(i)):(await i.U_.stop(),i.O_.length>0&&(pe("RemoteStore",`Stopping write stream with ${i.O_.length} pending writes`),i.O_=[]))}))),i.U_}class Mh{constructor(e,r,s,a,c){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,a,c){const f=Date.now()+s,m=new Mh(e,r,f,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fh(i,e){if(ai("AsyncQueue",`${e}: ${i}`),ma(i))return new ve(J.UNAVAILABLE,`${e}: ${i}`);throw i}class no{constructor(e){this.comparator=e?(r,s)=>e(r,s)||Ee.comparator(r.key,s.key):(r,s)=>Ee.comparator(r.key,s.key),this.keyedMap=Yo(),this.sortedSet=new Nt(this.comparator)}static emptySet(e){return new no(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,s)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof no)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const s=new no;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}class Wp{constructor(){this.W_=new Nt(Ee.comparator)}track(e){const r=e.doc.key,s=this.W_.get(r);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(r,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(r,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(r):e.type===1&&s.type===2?this.W_=this.W_.insert(r,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):xe():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,s)=>{e.push(s)})),e}}class lo{constructor(e,r,s,a,c,f,m,y,w){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=w}static fromInitialDocuments(e,r,s,a,c){const f=[];return r.forEach((m=>{f.push({type:0,doc:m})})),new lo(e,r,no.emptySet(r),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==s[a].type||!r[a].doc.isEqual(s[a].doc))return!1;return!0}}class Uw{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class zw{constructor(){this.queries=qp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,s){const a=Oe(r),c=a.queries;a.queries=qp(),c.forEach(((f,m)=>{for(const y of m.j_)y.onError(s)}))})(this,new ve(J.ABORTED,"Firestore shutting down"))}}function qp(){return new po((i=>Nm(i)),eu)}async function $w(i,e){const r=Oe(i);let s=3;const a=e.query;let c=r.queries.get(a);c?!c.H_()&&e.J_()&&(s=2):(c=new Uw,s=e.J_()?0:1);try{switch(s){case 0:c.z_=await r.onListen(a,!0);break;case 1:c.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(f){const m=Fh(f,`Initialization of query '${Xs(e.query)}' failed`);return void e.onError(m)}r.queries.set(a,c),c.j_.push(e),e.Z_(r.onlineState),c.z_&&e.X_(c.z_)&&jh(r)}async function Ww(i,e){const r=Oe(i),s=e.query;let a=3;const c=r.queries.get(s);if(c){const f=c.j_.indexOf(e);f>=0&&(c.j_.splice(f,1),c.j_.length===0?a=e.J_()?0:1:!c.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}}function qw(i,e){const r=Oe(i);let s=!1;for(const a of e){const c=a.query,f=r.queries.get(c);if(f){for(const m of f.j_)m.X_(a)&&(s=!0);f.z_=a}}s&&jh(r)}function Hw(i,e,r){const s=Oe(i),a=s.queries.get(e);if(a)for(const c of a.j_)c.onError(r);s.queries.delete(e)}function jh(i){i.Y_.forEach((e=>{e.next()}))}var ch,Hp;(Hp=ch||(ch={})).ea="default",Hp.Cache="cache";class Kw{constructor(e,r,s){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new lo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const s=r!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ch.Cache}}class hg{constructor(e){this.key=e}}class fg{constructor(e){this.key=e}}class Qw{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=He(),this.mutatedKeys=He(),this.Aa=Dm(e),this.Ra=new no(this.Aa)}get Va(){return this.Ta}ma(e,r){const s=r?r.fa:new Wp,a=r?r.Ra:this.Ra;let c=r?r.mutatedKeys:this.mutatedKeys,f=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,w=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((S,P)=>{const j=a.get(S),W=tu(this.query,P)?P:null,ee=!!j&&this.mutatedKeys.has(j.key),q=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let K=!1;j&&W?j.data.isEqual(W.data)?ee!==q&&(s.track({type:3,doc:W}),K=!0):this.ga(j,W)||(s.track({type:2,doc:W}),K=!0,(y&&this.Aa(W,y)>0||w&&this.Aa(W,w)<0)&&(m=!0)):!j&&W?(s.track({type:0,doc:W}),K=!0):j&&!W&&(s.track({type:1,doc:j}),K=!0,(y||w)&&(m=!0)),K&&(W?(f=f.add(W),c=q?c.add(S):c.delete(S)):(f=f.delete(S),c=c.delete(S)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{Ra:f,fa:s,ns:m,mutatedKeys:c}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,a){const c=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const f=e.fa.G_();f.sort(((S,P)=>(function(W,ee){const q=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return q(W)-q(ee)})(S.type,P.type)||this.Aa(S.doc,P.doc))),this.pa(s),a=a!=null&&a;const m=r&&!a?this.ya():[],y=this.da.size===0&&this.current&&!a?1:0,w=y!==this.Ea;return this.Ea=y,f.length!==0||w?{snapshot:new lo(this.query,e.Ra,c,f,e.mutatedKeys,y===0,w,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Wp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=He(),this.Ra.forEach((s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))}));const r=[];return e.forEach((s=>{this.da.has(s)||r.push(new fg(s))})),this.da.forEach((s=>{e.has(s)||r.push(new hg(s))})),r}ba(e){this.Ta=e.Ts,this.da=He();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return lo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Gw{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class Yw{constructor(e){this.key=e,this.va=!1}}class Xw{constructor(e,r,s,a,c,f){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Ca={},this.Fa=new po((m=>Nm(m)),eu),this.Ma=new Map,this.xa=new Set,this.Oa=new Nt(Ee.comparator),this.Na=new Map,this.La=new Ph,this.Ba={},this.ka=new Map,this.qa=ao.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Jw(i,e,r=!0){const s=vg(i);let a;const c=s.Fa.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Da()):a=await dg(s,e,r,!0),a}async function Zw(i,e){const r=vg(i);await dg(r,e,!0,!1)}async function dg(i,e,r,s){const a=await vw(i.localStore,Or(e)),c=a.targetId,f=i.sharedClientState.addLocalQueryTarget(c,r);let m;return s&&(m=await eE(i,e,c,f==="current",a.resumeToken)),i.isPrimaryClient&&r&&sg(i.remoteStore,a),m}async function eE(i,e,r,s,a){i.Ka=(P,j,W)=>(async function(q,K,se,Ae){let Ce=K.view.ma(se);Ce.ns&&(Ce=await Bp(q.localStore,K.query,!1).then((({documents:C})=>K.view.ma(C,Ce))));const ke=Ae&&Ae.targetChanges.get(K.targetId),We=Ae&&Ae.targetMismatches.get(K.targetId)!=null,Ue=K.view.applyChanges(Ce,q.isPrimaryClient,ke,We);return Qp(q,K.targetId,Ue.wa),Ue.snapshot})(i,P,j,W);const c=await Bp(i.localStore,e,!0),f=new Qw(e,c.Ts),m=f.ma(c.documents),y=ya.createSynthesizedTargetChangeForCurrentChange(r,s&&i.onlineState!=="Offline",a),w=f.applyChanges(m,i.isPrimaryClient,y);Qp(i,r,w.wa);const S=new Gw(e,r,f);return i.Fa.set(e,S),i.Ma.has(r)?i.Ma.get(r).push(e):i.Ma.set(r,[e]),w.snapshot}async function tE(i,e,r){const s=Oe(i),a=s.Fa.get(e),c=s.Ma.get(a.targetId);if(c.length>1)return s.Ma.set(a.targetId,c.filter((f=>!eu(f,e)))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await uh(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),r&&Nh(s.remoteStore,a.targetId),hh(s,a.targetId)})).catch(pa)):(hh(s,a.targetId),await uh(s.localStore,a.targetId,!0))}async function nE(i,e){const r=Oe(i),s=r.Fa.get(e),a=r.Ma.get(s.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),Nh(r.remoteStore,s.targetId))}async function rE(i,e,r){const s=cE(i);try{const a=await(function(f,m){const y=Oe(f),w=Qt.now(),S=m.reduce(((W,ee)=>W.add(ee.key)),He());let P,j;return y.persistence.runTransaction("Locally write mutations","readwrite",(W=>{let ee=li(),q=He();return y.cs.getEntries(W,S).next((K=>{ee=K,ee.forEach(((se,Ae)=>{Ae.isValidDocument()||(q=q.add(se))}))})).next((()=>y.localDocuments.getOverlayedDocuments(W,ee))).next((K=>{P=K;const se=[];for(const Ae of m){const Ce=T0(Ae,P.get(Ae.key).overlayedDocument);Ce!=null&&se.push(new ms(Ae.key,Ce,Im(Ce.value.mapValue),si.exists(!0)))}return y.mutationQueue.addMutationBatch(W,w,se,m)})).next((K=>{j=K;const se=K.applyToLocalDocumentSet(P,q);return y.documentOverlayCache.saveOverlays(W,K.batchId,se)}))})).then((()=>({batchId:j.batchId,changes:Om(P)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(f,m,y){let w=f.Ba[f.currentUser.toKey()];w||(w=new Nt(et)),w=w.insert(m,y),f.Ba[f.currentUser.toKey()]=w})(s,a.batchId,r),await _a(s,a.changes),await au(s.remoteStore)}catch(a){const c=Fh(a,"Failed to persist write");r.reject(c)}}async function pg(i,e){const r=Oe(i);try{const s=await mw(r.localStore,e);e.targetChanges.forEach(((a,c)=>{const f=r.Na.get(c);f&&(st(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.va=!0:a.modifiedDocuments.size>0?st(f.va):a.removedDocuments.size>0&&(st(f.va),f.va=!1))})),await _a(r,s,e)}catch(s){await pa(s)}}function Kp(i,e,r){const s=Oe(i);if(s.isPrimaryClient&&r===0||!s.isPrimaryClient&&r===1){const a=[];s.Fa.forEach(((c,f)=>{const m=f.view.Z_(e);m.snapshot&&a.push(m.snapshot)})),(function(f,m){const y=Oe(f);y.onlineState=m;let w=!1;y.queries.forEach(((S,P)=>{for(const j of P.j_)j.Z_(m)&&(w=!0)})),w&&jh(y)})(s.eventManager,e),a.length&&s.Ca.d_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function iE(i,e,r){const s=Oe(i);s.sharedClientState.updateQueryState(e,"rejected",r);const a=s.Na.get(e),c=a&&a.key;if(c){let f=new Nt(Ee.comparator);f=f.insert(c,En.newNoDocument(c,Le.min()));const m=He().add(c),y=new iu(Le.min(),new Map,new Nt(et),f,m);await pg(s,y),s.Oa=s.Oa.remove(c),s.Na.delete(e),bh(s)}else await uh(s.localStore,e,!1).then((()=>hh(s,e,r))).catch(pa)}async function sE(i,e){const r=Oe(i),s=e.batch.batchId;try{const a=await pw(r.localStore,e);gg(r,s,null),mg(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),await _a(r,a)}catch(a){await pa(a)}}async function oE(i,e,r){const s=Oe(i);try{const a=await(function(f,m){const y=Oe(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(w=>{let S;return y.mutationQueue.lookupMutationBatch(w,m).next((P=>(st(P!==null),S=P.keys(),y.mutationQueue.removeMutationBatch(w,P)))).next((()=>y.mutationQueue.performConsistencyCheck(w))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(w,S,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,S))).next((()=>y.localDocuments.getDocuments(w,S)))}))})(s.localStore,e);gg(s,e,r),mg(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),await _a(s,a)}catch(a){await pa(a)}}function mg(i,e){(i.ka.get(e)||[]).forEach((r=>{r.resolve()})),i.ka.delete(e)}function gg(i,e,r){const s=Oe(i);let a=s.Ba[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(r?c.reject(r):c.resolve(),a=a.remove(e)),s.Ba[s.currentUser.toKey()]=a}}function hh(i,e,r=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Ma.get(e))i.Fa.delete(s),r&&i.Ca.$a(s,r);i.Ma.delete(e),i.isPrimaryClient&&i.La.gr(e).forEach((s=>{i.La.containsKey(s)||yg(i,s)}))}function yg(i,e){i.xa.delete(e.path.canonicalString());const r=i.Oa.get(e);r!==null&&(Nh(i.remoteStore,r),i.Oa=i.Oa.remove(e),i.Na.delete(r),bh(i))}function Qp(i,e,r){for(const s of r)s instanceof hg?(i.La.addReference(s.key,e),aE(i,s)):s instanceof fg?(pe("SyncEngine","Document no longer in limbo: "+s.key),i.La.removeReference(s.key,e),i.La.containsKey(s.key)||yg(i,s.key)):xe()}function aE(i,e){const r=e.key,s=r.path.canonicalString();i.Oa.get(r)||i.xa.has(s)||(pe("SyncEngine","New document in limbo: "+r),i.xa.add(s),bh(i))}function bh(i){for(;i.xa.size>0&&i.Oa.size<i.maxConcurrentLimboResolutions;){const e=i.xa.values().next().value;i.xa.delete(e);const r=new Ee(Rt.fromString(e)),s=i.qa.next();i.Na.set(s,new Yw(r)),i.Oa=i.Oa.insert(r,s),sg(i.remoteStore,new Fi(Or(Vm(r.path)),s,"TargetPurposeLimboResolution",_h.oe))}}async function _a(i,e,r){const s=Oe(i),a=[],c=[],f=[];s.Fa.isEmpty()||(s.Fa.forEach(((m,y)=>{f.push(s.Ka(y,e,r).then((w=>{var S;if((w||r)&&s.isPrimaryClient){const P=w?!w.fromCache:(S=r?.targetChanges.get(y.targetId))===null||S===void 0?void 0:S.current;s.sharedClientState.updateQueryState(y.targetId,P?"current":"not-current")}if(w){a.push(w);const P=Vh.Wi(y.targetId,w);c.push(P)}})))})),await Promise.all(f),s.Ca.d_(a),await(async function(y,w){const S=Oe(y);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(P=>Y.forEach(w,(j=>Y.forEach(j.$i,(W=>S.persistence.referenceDelegate.addReference(P,j.targetId,W))).next((()=>Y.forEach(j.Ui,(W=>S.persistence.referenceDelegate.removeReference(P,j.targetId,W)))))))))}catch(P){if(!ma(P))throw P;pe("LocalStore","Failed to update sequence numbers: "+P)}for(const P of w){const j=P.targetId;if(!P.fromCache){const W=S.os.get(j),ee=W.snapshotVersion,q=W.withLastLimboFreeSnapshotVersion(ee);S.os=S.os.insert(j,q)}}})(s.localStore,c))}async function lE(i,e){const r=Oe(i);if(!r.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const s=await tg(r.localStore,e);r.currentUser=e,(function(c,f){c.ka.forEach((m=>{m.forEach((y=>{y.reject(new ve(J.CANCELLED,f))}))})),c.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await _a(r,s.hs)}}function uE(i,e){const r=Oe(i),s=r.Na.get(e);if(s&&s.va)return He().add(s.key);{let a=He();const c=r.Ma.get(e);if(!c)return a;for(const f of c){const m=r.Fa.get(f);a=a.unionWith(m.view.Va)}return a}}function vg(i){const e=Oe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=pg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iE.bind(null,e),e.Ca.d_=qw.bind(null,e.eventManager),e.Ca.$a=Hw.bind(null,e.eventManager),e}function cE(i){const e=Oe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oE.bind(null,e),e}class Yl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=su(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return dw(this.persistence,new hw,e.initialUser,this.serializer)}Ga(e){return new lw(xh.Zr,this.serializer)}Wa(e){return new ww}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yl.provider={build:()=>new Yl};class fh{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Kp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=lE.bind(null,this.syncEngine),await Bw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new zw})()}createDatastore(e){const r=su(e.databaseInfo.databaseId),s=(function(c){return new Iw(c)})(e.databaseInfo);return(function(c,f,m,y){return new Cw(c,f,m,y)})(e.authCredentials,e.appCheckCredentials,s,r)}createRemoteStore(e){return(function(s,a,c,f,m){return new Pw(s,a,c,f,m)})(this.localStore,this.datastore,e.asyncQueue,(r=>Kp(this.syncEngine,r,0)),(function(){return zp.D()?new zp:new Ew})())}createSyncEngine(e,r){return(function(a,c,f,m,y,w,S){const P=new Xw(a,c,f,m,y,w);return S&&(P.Qa=!0),P})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const c=Oe(a);pe("RemoteStore","RemoteStore shutting down."),c.L_.add(5),await va(c),c.k_.shutdown(),c.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}fh.provider={build:()=>new fh};class hE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ai("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}class fE{constructor(e,r,s,a,c){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=a,this.user=wn.UNAUTHENTICATED,this.clientId=Em.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{pe("FirestoreClient","Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(pe("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const s=Fh(r,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function qc(i,e){i.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const r=i.configuration;await e.initialize(r);let s=r.initialUser;i.setCredentialChangeListener((async a=>{s.isEqual(a)||(await tg(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Gp(i,e){i.asyncQueue.verifyOperationInProgress();const r=await dE(i);pe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,i.configuration),i.setCredentialChangeListener((s=>$p(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,a)=>$p(e.remoteStore,a))),i._onlineComponents=e}async function dE(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{await qc(i,i._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===J.FAILED_PRECONDITION||a.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;ro("Error using user provided cache. Falling back to memory cache: "+r),await qc(i,new Yl)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),await qc(i,new Yl);return i._offlineComponents}async function _g(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),await Gp(i,i._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),await Gp(i,new fh))),i._onlineComponents}function pE(i){return _g(i).then((e=>e.syncEngine))}async function mE(i){const e=await _g(i),r=e.eventManager;return r.onListen=Jw.bind(null,e.syncEngine),r.onUnlisten=tE.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Zw.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=nE.bind(null,e.syncEngine),r}function gE(i,e,r={}){const s=new Bi;return i.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,y,w){const S=new hE({next:j=>{S.Za(),f.enqueueAndForget((()=>Ww(c,P))),j.fromCache&&y.source==="server"?w.reject(new ve(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(j)},error:j=>w.reject(j)}),P=new Kw(m,S,{includeMetadataChanges:!0,_a:!0});return $w(c,P)})(await mE(i),i.asyncQueue,e,r,s))),s.promise}function wg(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const Yp=new Map;function Eg(i,e,r){if(!r)throw new ve(J.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function yE(i,e,r,s){if(e===!0&&s===!0)throw new ve(J.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function Xp(i){if(!Ee.isDocumentKey(i))throw new ve(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Jp(i){if(Ee.isDocumentKey(i))throw new ve(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Bh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":xe()}function da(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ve(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Bh(i);throw new ve(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return i}class Zp{constructor(e){var r,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wg((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ve(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ve(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ve(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lu{constructor(e,r,s,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zp(e),e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new x_;switch(s.type){case"firstParty":return new L_(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ve(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const s=Yp.get(r);s&&(pe("ComponentProvider","Removing Datastore"),Yp.delete(r),s.terminate())})(this),Promise.resolve()}}function vE(i,e,r,s={}){var a;const c=(i=da(i,lu))._getSettings(),f=`${e}:${r}`;if(c.host!=="firestore.googleapis.com"&&c.host!==f&&ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:f,ssl:!1})),s.mockUserToken){let m,y;if(typeof s.mockUserToken=="string")m=s.mockUserToken,y=wn.MOCK_USER;else{m=uv(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new ve(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new wn(w)}i._authCredentials=new V_(new wm(m,y))}}class uu{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new uu(this.firestore,e,this._query)}}class ar{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ui(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ar(this.firestore,e,this._key)}}class Ui extends uu{constructor(e,r,s){super(e,r,Vm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new Ee(e))}withConverter(e){return new Ui(this.firestore,e,this._path)}}function wa(i,e,...r){if(i=ia(i),Eg("collection","path",e),i instanceof lu){const s=Rt.fromString(e,...r);return Jp(s),new Ui(i,null,s)}{if(!(i instanceof ar||i instanceof Ui))throw new ve(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Rt.fromString(e,...r));return Jp(s),new Ui(i.firestore,null,s)}}function Tg(i,e,...r){if(i=ia(i),arguments.length===1&&(e=Em.newId()),Eg("doc","path",e),i instanceof lu){const s=Rt.fromString(e,...r);return Xp(s),new ar(i,null,new Ee(s))}{if(!(i instanceof ar||i instanceof Ui))throw new ve(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Rt.fromString(e,...r));return Xp(s),new ar(i.firestore,i instanceof Ui?i.converter:null,new Ee(s))}}class em{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new rg(this,"async_queue_retry"),this.Vu=()=>{const s=Wc();s&&pe("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const r=Wc();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Wc();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new Bi;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ma(e))throw e;pe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((s=>{this.Eu=s,this.du=!1;const a=(function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m})(s);throw ai("INTERNAL UNHANDLED ERROR: ",a),s})).then((s=>(this.du=!1,s))))));return this.mu=r,r}enqueueAfterDelay(e,r,s){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=Mh.createAndSchedule(this,e,r,s,(c=>this.yu(c)));return this.Tu.push(a),a}fu(){this.Eu&&xe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,s)=>r.targetTimeMs-s.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}class Uh extends lu{constructor(e,r,s,a){super(e,r,s,a),this.type="firestore",this._queue=new em,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new em(e),this._firestoreClient=void 0,await e}}}function _E(i,e){const r=typeof i=="object"?i:v_(),s=typeof i=="string"?i:"(default)",a=p_(r,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=av("firestore");c&&vE(a,...c)}return a}function Sg(i){if(i._terminated)throw new ve(J.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||wE(i),i._firestoreClient}function wE(i){var e,r,s;const a=i._freezeSettings(),c=(function(m,y,w,S){return new K_(m,y,w,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,wg(S.experimentalLongPollingOptions),S.useFetchStreams)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new fE(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&(function(m){const y=m?._online.build();return{_offline:m?._offline.build(y),_online:y}})(i._componentsProvider))}class uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uo(hn.fromBase64String(e))}catch(r){throw new ve(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new uo(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zh{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ve(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ig{constructor(e){this._methodName=e}}class $h{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ve(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ve(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}}class Wh{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0})(this._values,e._values)}}const EE=/^__.*__$/;class TE{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return this.fieldMask!==null?new ms(e,this.data,this.fieldMask,r,this.fieldTransforms):new ga(e,this.data,r,this.fieldTransforms)}}function Ag(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class qh{constructor(e,r,s,a,c,f){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new qh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const s=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:s,xu:!1});return a.Ou(e),a}Nu(e){var r;const s=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:s,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Ag(this.Cu)&&EE.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class SE{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||su(e)}Qu(e,r,s,a=!1){return new qh({Cu:e,methodName:r,qu:s,path:un.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function IE(i){const e=i._freezeSettings(),r=su(i._databaseId);return new SE(i._databaseId,!!e.ignoreUndefinedProperties,r)}function AE(i,e,r,s,a,c={}){const f=i.Qu(c.merge||c.mergeFields?2:0,e,r,a);Pg("Data must be an object, but it was:",f,s);const m=Cg(s,f);let y,w;if(c.merge)y=new Er(f.fieldMask),w=f.fieldTransforms;else if(c.mergeFields){const S=[];for(const P of c.mergeFields){const j=RE(e,P,r);if(!f.contains(j))throw new ve(J.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);kE(S,j)||S.push(j)}y=new Er(S),w=f.fieldTransforms.filter((P=>y.covers(P.field)))}else y=null,w=f.fieldTransforms;return new TE(new or(m),y,w)}function Rg(i,e){if(kg(i=ia(i)))return Pg("Unsupported field value:",e,i),Cg(i,e);if(i instanceof Ig)return(function(s,a){if(!Ag(a.Cu))throw a.Bu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(s,a){const c=[];let f=0;for(const m of s){let y=Rg(m,a.Lu(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}})(i,e)}return(function(s,a){if((s=ia(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return g0(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Qt.fromDate(s);return{timestampValue:Ql(a.serializer,c)}}if(s instanceof Qt){const c=new Qt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ql(a.serializer,c)}}if(s instanceof $h)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof uo)return{bytesValue:Qm(a.serializer,s._byteString)};if(s instanceof ar){const c=a.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw a.Bu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:kh(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Wh)return(function(f,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw m.Bu("VectorValues must only contain numeric values.");return Ah(m.serializer,y)}))}}}}}})(s,a);throw a.Bu(`Unsupported field value: ${Bh(s)}`)})(i,e)}function Cg(i,e){const r={};return Tm(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fo(i,((s,a)=>{const c=Rg(a,e.Mu(s));c!=null&&(r[s]=c)})),{mapValue:{fields:r}}}function kg(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Qt||i instanceof $h||i instanceof uo||i instanceof ar||i instanceof Ig||i instanceof Wh)}function Pg(i,e,r){if(!kg(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const s=Bh(r);throw s==="an object"?e.Bu(i+" a custom object"):e.Bu(i+" "+s)}}function RE(i,e,r){if((e=ia(e))instanceof zh)return e._internalPath;if(typeof e=="string")return xg(i,e);throw Xl("Field path arguments must be of type string or ",i,!1,void 0,r)}const CE=new RegExp("[~\\*/\\[\\]]");function xg(i,e,r){if(e.search(CE)>=0)throw Xl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new zh(...e.split("."))._internalPath}catch{throw Xl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function Xl(i,e,r,s,a){const c=s&&!s.isEmpty(),f=a!==void 0;let m=`Function ${e}() called with invalid data`;r&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${s}`),f&&(y+=` in document ${a}`),y+=")"),new ve(J.INVALID_ARGUMENT,m+i+y)}function kE(i,e){return i.some((r=>r.isEqual(e)))}class Vg{constructor(e,r,s,a,c){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ar(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Ng("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class PE extends Vg{data(){return super.data()}}function Ng(i,e){return typeof e=="string"?xg(i,e):e instanceof zh?e._internalPath:e._delegate._internalPath}function xE(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ve(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VE{convertValue(e,r="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return fo(e,((a,c)=>{s[a]=this.convertValue(c,r)})),s}convertVectorValue(e){var r,s,a;const c=(a=(s=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map((f=>bt(f.doubleValue)));return new Wh(c)}convertGeoPoint(e){return new $h(bt(e.latitude),bt(e.longitude))}convertArray(e,r){return(e.values||[]).map((s=>this.convertValue(s,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const s=Eh(e);return s==null?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(la(e));default:return null}}convertTimestamp(e){const r=$i(e);return new Qt(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=Rt.fromString(e);st(eg(s));const a=new ua(s.get(1),s.get(3)),c=new Ee(s.popFirst(5));return a.isEqual(r)||ai(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),c}}function NE(i,e,r){let s;return s=i?i.toFirestore(e):e,s}class Dl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DE extends Vg{constructor(e,r,s,a,c,f){super(e,r,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new jl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(Ng("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class jl extends DE{data(e={}){return super.data(e)}}class LE{constructor(e,r,s,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Dl(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((s=>{e.call(r,new jl(this._firestore,this._userDataWriter,s.key,s,new Dl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ve(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map((m=>{const y=new jl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Dl(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const y=new jl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Dl(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let w=-1,S=-1;return m.type!==0&&(w=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),S=f.indexOf(m.doc.key)),{type:OE(m.type),doc:y,oldIndex:w,newIndex:S}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function OE(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}class ME extends VE{constructor(e){super(),this.firestore=e}convertBytes(e){return new uo(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,r)}}function FE(i){i=da(i,uu);const e=da(i.firestore,Uh),r=Sg(e),s=new ME(e);return xE(i._query),gE(r,i._query).then((a=>new LE(e,s,i,a)))}function Dg(i,e,r){i=da(i,ar);const s=da(i.firestore,Uh),a=NE(i.converter,e);return jE(s,[AE(IE(s),"setDoc",i._key,a,i.converter!==null,r).toMutation(i._key,si.none())])}function jE(i,e){return(function(s,a){const c=new Bi;return s.asyncQueue.enqueueAndForget((async()=>rE(await pE(s),a,c))),c.promise})(Sg(i),e)}(function(e,r=!0){(function(a){ho=a})(y_),zl(new sa("firestore",((s,{instanceIdentifier:a,options:c})=>{const f=s.getProvider("app").getImmediate(),m=new Uh(new N_(s.getProvider("auth-internal")),new M_(s.getProvider("app-check-internal")),(function(w,S){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new ve(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ua(w.options.projectId,S)})(f,a),f);return c=Object.assign({useFetchStreams:r},c),m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),to(_p,"4.7.3",e),to(_p,"4.7.3","esm2017")})();const bE={apiKey:"AIzaSyDM0aI8K004dIFGPuHM6JB6q27V8MYsgmg,",authDomain:"global-invigoration-1e80c.firebaseapp.com",databaseURL:"https://global-invigoration-1e80c-default-rtdb.firebaseio.com",projectId:"global-invigoration-1e80c",storageBucket:"global-invigoration-1e80c.firebasestorage.app",messagingSenderId:"157354882430",appId:"1:157354882430:web:e99a9a5ad30edaca466f2f",measurementId:"G-YN57YHMV80"},BE=hm(bE),Ea=_E(BE),UE=wa(Ea,"globalInvigorationSubjects");wa(Ea,"globalInvigorationTrials");wa(Ea,"globalInvigorationGames");const zE=async i=>{try{const e=i.id;if(!e)throw new Error("Subject ID is required");const r=Tg(UE,e);return await Dg(r,{...i,id:e,timestamp:new Date().toISOString()})}catch(e){throw console.error("Error saving subject data: ",e),e}},$E=i=>i?.workerId||"UNK",WE=()=>({timestamp:new Date().toISOString(),userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,screenWidth:window.screen.width,screenHeight:window.screen.height,screenColorDepth:window.screen.colorDepth,windowWidth:window.innerWidth,windowHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,hasTouch:"ontouchstart"in window,maxTouchPoints:navigator.maxTouchPoints||0,browser:qE(),os:HE()}),qE=()=>{const i=navigator.userAgent;return i.includes("Chrome")?"Chrome":i.includes("Firefox")?"Firefox":i.includes("Safari")?"Safari":i.includes("Edge")?"Edge":"Unknown"},HE=()=>{const i=navigator.userAgent;return i.includes("Windows")?"Windows":i.includes("Mac")?"macOS":i.includes("Linux")?"Linux":i.includes("Android")?"Android":i.includes("iOS")?"iOS":"Unknown"},KE=async i=>{const e=$E(i),r=WE(),s={id:e,...i,systemInfo:r,sessionStart:new Date().toISOString(),experimentVersion:"1.0",status:"active"};try{return await zE(s),e}catch(a){throw console.error("Failed to initialize participant:",a),a}},tm=async(i,e,r)=>{try{const s=wa(Ea,"globalInvigorationTrials"),a=Tg(s,r);return await Dg(a,e)}catch(s){throw console.error("Error saving participant trial:",s),s}},qn={BLOCKS:{POOR:{baseRounds:5},RICH:{baseRounds:5},ORDER:["poor","rich","rich","poor"]},ROUND_DURATIONS:{REACHING_PHASE:{mean:20,standardDeviation:2,min:15,max:25}},REWARDS:{PRACTICE_VALUE:30,ARRAYS:{POOR:[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,60,60,60,60,60,60,60,60,60,100,100,100,100,100,100],RICH:[10,10,10,10,10,10,60,60,60,60,60,60,60,60,60,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100]}},KEYS:{VALID_KEYS:["a","s","d","f"],SEQUENCE_LENGTH:10}},QE=i=>{const e=i==="poor"?qn.BLOCKS.POOR.baseRounds:qn.BLOCKS.RICH.baseRounds;return e},na=()=>{const i=qn.ROUND_DURATIONS.REACHING_PHASE,e=Math.random(),r=Math.random(),s=Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*r);let a=i.mean+s*i.standardDeviation;return a=Math.max(i.min,Math.min(i.max,a)),Math.round(a*10)/10},bl=()=>{const i=qn.KEYS.VALID_KEYS.slice(),e=qn.KEYS.SEQUENCE_LENGTH,r=[];let s=ra(i),a=0;for(let c=0;c<e;c++){a>=s.length&&(s=ra(i),a=0);const f=s[a];if(c>0&&f===r[c-1]){let m=!1;for(let y=a+1;y<s.length;y++)if(s[y]!==r[c-1]){[s[a],s[y]]=[s[y],s[a]],m=!0;break}m||(s=ra(i),a=0,i.length>1&&s[a]===r[c-1]&&(a=1))}r.push(s[a]),a++}return r},ra=i=>{const e=[...i];for(let r=e.length-1;r>0;r--){const s=Math.floor(Math.random()*(r+1));[e[r],e[s]]=[e[s],e[r]]}return e},Hc={},nm=i=>{const e=qn.REWARDS.ARRAYS[i.toUpperCase()];return e?ra(e):(console.warn(`Unknown environment: ${i}, defaulting to POOR rewards`),ra(qn.REWARDS.ARRAYS.POOR))},GE=i=>{const e=eo(i);if(!e)return console.warn(`Invalid block index: ${i}`),nm("poor");const r=`block_${i}`;if(Hc[r])return Hc[r];const s=nm(e);return Hc[r]=s,s},dh=qn.BLOCKS.ORDER,eo=i=>i<0||i>=dh.length?null:dh[i],Lg=i=>{const e=eo(i);return e?QE(e):(console.warn(`Invalid block index: ${i}`),0)},ph=i=>{const e=i+1;return e<dh.length?e:null},YE=(i,e)=>{const r=Lg(i);return e<=r?"continue":ph(i)!==null?"break":"end"},XE=({participantData:i,participantId:e,onGameComplete:r})=>{const[s,a]=X.useState(!1),[c,f]=X.useState(8),[m,y]=X.useState(0),[w,S]=X.useState(null),[P,j]=X.useState("reaching"),[W,ee]=X.useState(!1),[q,K]=X.useState(0),[se,Ae]=X.useState({width:window.innerWidth,height:window.innerHeight}),[Ce,ke]=X.useState(!1),[We,Ue]=X.useState(0),C=X.useRef(null),E=X.useRef(!1),A=X.useRef(null),k=X.useRef(Date.now()),V=X.useRef({x:null,y:null}),D=X.useRef(null),[I,ot]=X.useState(!0),[Ct,kt]=X.useState(!0),[ge,ne]=X.useState([]),[ue,oe]=X.useState(0),[N,z]=X.useState([]),[ie,Ve]=X.useState(0),[Se,be]=X.useState(null),[Be,Pe]=X.useState(null),[ye,qe]=X.useState(1),[Pt,Tr]=X.useState(0),[Ie,H]=X.useState(0),[wt,ct]=X.useState(!1),[Ke,Ne]=X.useState(""),[dt]=X.useState("key"),[at]=X.useState(Date.now()),[Et,Dt]=X.useState([]),[Gt,pt]=X.useState([]),[Hn,Qe]=X.useState([]),[nt,mt]=X.useState([]),[lr,kn]=X.useState(null),[ui,Fn]=X.useState(null),[br,Kn]=X.useState([]),[ci,Qn]=X.useState([]),[Br,Tn]=X.useState([]),[Ur,jn]=X.useState([]),[Sn,nn]=X.useState([]),[hi,fn]=X.useState(1),[fi,Gn]=X.useState(null),[ys,In]=X.useState(1),[qi,Tt]=X.useState(0),[di,dn]=X.useState([]),[zr,Yn]=X.useState([]);X.useRef(!1);const pi=X.useRef(!1),St=($,b,Me=null)=>{const ce=Array.isArray($)?$.slice(0,b):[];for(;ce.length<b;)ce.push(Me);return ce},bn=($,b)=>Array.from({length:b},()=>$),go=($,b,Me)=>{let ce,ae;const{leftBar:Te,rightBar:Fe}=$r(),je=Te.x+Te.width,gt=Fe.x;if($>=Te.x&&$<=je?(ce="ASW",ae="L"):$>=gt&&$<=Fe.x+Fe.width?(ce="ATW",ae="R"):(Ce?ce="WS":ce="RO",ae="N"),fi&&fi!==ae&&ae!=="N"){const De=hi+1;fn(De),Fn(ae),mi(De-1,ae,lr,{gameStateArray:Et.slice(),eventArray:Gt.slice(),posXArray:Hn.slice(),posYArray:nt.slice(),timestampArray:Br.slice()}),Dt([]),pt([]),Qe([]),mt([]),kn(ae),Fn(null),Kn([]),Qn([]),Tn([]),jn([]),nn([]),fn(De),In(1),dn([]),Yn([])}Gn(ae),Dt(De=>[...De,ce]);let Lt="None";c<=3&&(Lt="RC"),pt(De=>[...De,Lt]),Qe(De=>[...De,$]),mt(De=>[...De,b]),Tn(De=>[...De,Me]),!lr&&ae!=="N"&&kn(ae)},mi=async($,b,Me,ce)=>{if(!ce||ce.gameStateArray.length===0)return;const ae=Math.max(ce.gameStateArray?.length||0,ce.eventArray?.length||0,ce.posXArray?.length||0,ce.posYArray?.length||0,ce.timestampArray?.length||0),Te=St(ce.gameStateArray,ae,null),Fe=St(ce.eventArray,ae,"None"),je=St(ce.posXArray,ae,null),gt=St(ce.posYArray,ae,null),Lt=St(ce.timestampArray,ae,null),De=bn(null,ae),ht=bn(null,ae),yt=bn(null,ae),Mt=bn(null,ae),Bt={participantId:e,sessionStartTime:at,reachNumber:$,environment:Se,round:ye,block:ie+1,startWall:Me,endWall:b,gameStateArray:Te,eventArray:Fe,posXArray:je,posYArray:gt,reachTimestampArray:Lt,keytapNumberArray:De,keytapValueArray:ht,keyupTimestampArray:yt,validityArray:Mt,currScore:m,rewardValue:null};try{const rt=ie+1,Ft=`${e}_block${rt}_round${ye}_reach${$}`;await tm(e,Bt,Ft),console.log(`Reach ${$} data saved successfully`)}catch(rt){console.error(`Failed to save reach ${$} data:`,rt)}},vs=async()=>{if(br.length===0)return;const $=Math.max(br.length,ci.length,Br.length,Ur.length,Sn.length),b=St(br,$,null),Me=St(ci,$,null),ce=St(Br,$,null),ae=St(Ur,$,null),Te=St(Sn,$,null),Fe=St(di,$,null),je=St(zr,$,null),gt=bn(null,$),Lt=bn(null,$),De=bn(null,$),ht={participantId:e,sessionStartTime:at,environment:Se,round:ye,block:ie+1,rewardValue:Pt,keytapNumberArray:b,keytapValueArray:Me,keyPressTimestampArray:ce,keyupTimestampArray:ae,validityArray:Te,gameStateArray:Fe,eventArray:je,posXArray:gt,posYArray:Lt,reachTimestampArray:De,startWall:null,endWall:null,reachNumber:null,currScore:m};try{const yt=ie+1,Mt=`${e}_block${yt}_round${ye}`;await tm(e,ht,Mt),console.log(`Round ${ye} data saved successfully`)}catch(yt){console.error(`Failed to save round ${ye} data:`,yt)}},pn=se.width*.1,Sr=se.height,Yt={x:0,y:0,width:pn,height:Sr},ur={x:se.width-pn,y:0,width:pn,height:Sr},tt={x:Math.max(se.width/2,400),y:Math.max(se.height/2-120,120)},Xn=Math.max(Math.min(se.width,se.height)*.12,30),$r=()=>({leftBar:Yt,rightBar:ur,coinPosition:tt,coinRadius:Xn}),gi=($,b,Me=!1)=>{if(b===0)return $.beginPath(),$.arc(tt.x,tt.y,Te,0,2*Math.PI),$.fillStyle=Me?"#dcdcdc":"#f0f0f0",$.fill(),$.strokeStyle=Me?"#bfbfbf":"#c0c0c0",$.lineWidth=4,$.stroke(),$.fillStyle="#888888",$.font=`bold ${Te*.4}px Arial`,$.textAlign="center",$.textBaseline="middle",$.fillText("0",tt.x,tt.y-Te*.7),0;let ce,ae;if(b===10)ce=1,ae=1;else if(b===60)ce=6,ae=3;else if(b===100)ce=10,ae=4;else return 0;const Te=Math.max(28,Math.floor(Math.min(se.width,se.height)*.035)),Fe=Te*1.8;let je=0;for(let Lt=0;Lt<ae;Lt++){const De=Lt+1,ht=tt.y+Lt*Fe*.8,yt=tt.x-(De-1)*Fe/2;for(let Mt=0;Mt<De&&je<ce;Mt++){const Bt=yt+Mt*Fe;if($.beginPath(),$.arc(Bt,ht,Te,0,2*Math.PI),Me){const rt=$.createRadialGradient(Bt-Te*.3,ht-Te*.3,0,Bt,ht,Te);rt.addColorStop(0,"#e6e6e6"),rt.addColorStop(.7,"#bfbfbf"),rt.addColorStop(1,"#9a9a9a"),$.fillStyle=rt,$.fill(),$.strokeStyle="#7f7f7f",$.lineWidth=2,$.stroke(),$.fillStyle="#8c8c8c";const Ft=Te*.12;$.fillRect(Bt-Ft/2,ht-Te*.55,Ft,Te*1.1)}else{const rt=$.createRadialGradient(Bt-Te*.3,ht-Te*.3,0,Bt,ht,Te);rt.addColorStop(0,"#FFD700"),rt.addColorStop(.7,"#FFA500"),rt.addColorStop(1,"#FF8C00"),$.fillStyle=rt,$.fill(),$.strokeStyle="#FF8C00",$.lineWidth=2,$.stroke(),$.fillStyle="#B8860B",$.fillRect(Bt-Te*.1,ht-Te*.4,Te*.2,Te*.8)}je++}}const gt=ae*Fe*.8;return Me||($.fillStyle="#FFD700",$.font='bold 32px "Arial", sans-serif',$.textAlign="center",$.textBaseline="top",$.fillText(`${b} points`,tt.x,tt.y+gt+30)),gt};X.useEffect(()=>{const $=()=>{const Me={width:window.innerWidth,height:window.innerHeight};Ae(Me)},b={width:window.innerWidth,height:window.innerHeight};return Ae(b),window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)},[]);const Hi=$=>{if(!s||P!=="coin"||!W)return;const b=$.key.toLowerCase();if(!["a","s","d","f"].includes(b)||ge.length===0||ue>=ge.length)return;const ce=Date.now(),ae=ge[ue],Te=b===ae,Fe=[...N];if(Fe[ue]=Te?"correct":"incorrect",z(Fe),Kn(je=>[...je,ue+1]),Qn(je=>[...je,b]),Tn(je=>[...je,ce]),nn(je=>[...je,Te?"correct":"incorrect"]),dn(je=>[...je,"SO"]),Yn(je=>[...je,"RR"]),Te){const je=ue+1;if(je<ge.length)oe(je);else{y(De=>De+Pt),K(De=>De+1),ct(!0),Ne(`+${Pt}!`),dn(De=>[...De,"SC"]),Yn(De=>[...De,"RREC"]),setTimeout(()=>{ct(!1)},1e3),S(null),ke(!1),A.current&&clearTimeout(A.current),j("reaching"),ee(!1),oe(0),z(new Array(ge.length).fill("pending")),vs();const gt=ye+1;qe(gt);const Lt=YE(ie,gt);if(Lt==="break"){const De=ph(ie);Pe(De),j("break")}else if(Lt==="end")a(!1),E.current=!0,r?.();else{const De=na(),ht=bl();f(De),ne(ht),z(new Array(ht.length).fill("pending")),yi(ie,gt)}}}else ct(!0),Ne("Wrong key!"),setTimeout(()=>{ct(!1)},1e3)},_s=$=>{if(!s||P!=="coin"||!W)return;const b=$.key.toLowerCase();if(!["a","s","d","f"].includes(b)||ge.length===0||ue>=ge.length)return;const ce=Date.now();jn(ae=>[...ae,ce])};X.useEffect(()=>{if(!s||P!=="reaching")return;const $=setInterval(()=>{f(b=>b<=1?(j("coin"),ee(!0),Tr(Ie),oe(0),z(new Array(ge.length).fill("pending")),Kn([]),Qn([]),Tn([]),jn([]),nn([]),In(1),0):b-1)},1e3);return()=>clearInterval($)},[s,P,ye,Se,ge.length]),X.useEffect(()=>{P==="coin"&&ge.length>0&&(console.log("Starting reward tracking for sequence:",ge),console.log("Reward tracking started successfully"))},[ge,P,Se,ye,Pt]),X.useEffect(()=>{if(s&&(window.addEventListener("keydown",Hi),window.addEventListener("keyup",_s)),P==="break"){const $=b=>{b.key===" "&&Ar()};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)}return()=>{window.removeEventListener("keydown",Hi),window.removeEventListener("keyup",_s)}},[s,P,W,ge,ue,N,Se,Pt,e,i,at,r]),X.useEffect(()=>{P==="reaching"&&(Dt([]),pt([]),Qe([]),mt([]),kn(null),Fn(null),Kn([]),Qn([]),Tn([]),jn([]),nn([]),fn(1),Gn(null),In(1),dn([]),Yn([]),Tt(0),pi.current=!1,console.log("Data collection arrays reset for new trial"))},[P,Se,ye,Pt]),X.useEffect(()=>{const $=b=>{!s||P!=="coin"||!W||ge.length===0||b.key.toLowerCase()};return window.addEventListener("keyup",$),()=>window.removeEventListener("keyup",$)},[s,P,W,ge]);const lt=$=>{if(!s||P!=="reaching")return;const Me=C.current.getBoundingClientRect(),ce=$.clientX-Me.left,ae=$.clientY-Me.top,{leftBar:Te,rightBar:Fe}=$r(),je=V.current;if(je.x!==null&&je.y!==null){const Bt=ce-je.x,rt=ae-je.y,Ft=Math.sqrt(Bt*Bt+rt*rt);Ft>0&&(Ct&&Bt>0||I&&Bt<0)&&Ue($e=>($e+Ft*.28)%35)}V.current={x:ce,y:ae};const gt=Date.now();gt-qi>=33&&(go(ce,ae,gt),Tt(gt));const De=ce>=Te.x&&ce<=Te.x+Te.width&&ae>=Te.y&&ae<=Te.y+Te.height,ht=ce>=Fe.x&&ce<=Fe.x+Fe.width&&ae>=Fe.y&&ae<=Fe.y+Fe.height,yt=De?"left":ht?"right":null,Mt=D.current;yt!==Mt&&(yt==="left"?(ot(!1),kt(!0),w!=="left"&&(S("left"),k.current=Date.now(),ke(!1),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{ke(!0)},2e3))):yt==="right"&&(kt(!1),ot(!0),w!=="right"&&(S("right"),k.current=Date.now(),ke(!1),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{ke(!0)},2e3))),D.current=yt)},yi=($,b)=>{const Me=GE($),ce=(b-1)%Me.length,ae=Me[ce];H(ae);const Te=eo($);console.log(`Block ${$} (${Te}), Round ${b} reward value set to: ${ae}`)},Ir=()=>{const b=eo(0);a(!0),y(0),Ve(0),be(b),qe(1),Pe(null),j("reaching"),ee(!1),S(null),ke(!1),E.current=!1,Dt([]),pt([]),Qe([]),mt([]),kn(null),Fn(null),Kn([]),Qn([]),Tn([]),jn([]),nn([]),fn(1),Gn(null),In(1);const Me=na(),ce=bl();f(Me),ne(ce),z(new Array(ce.length).fill("pending")),yi(0,1),console.log("Game started with:",{initialBlockIndex:0,initialEnvironment:b,roundDuration:Me,sequence:ce})};X.useEffect(()=>{if(e)Ir();else{const $=setTimeout(()=>{Ir()},100);return()=>clearTimeout($)}},[e]),X.useEffect(()=>()=>{A.current&&clearTimeout(A.current)},[]),X.useEffect(()=>{const $=C.current;$&&($.classList.remove("cursor-visible","cursor-hidden"),P==="coin"?$.classList.add("cursor-hidden"):$.classList.add("cursor-visible"))},[P]),X.useEffect(()=>{const $=C.current;$&&$.classList.add("cursor-visible")},[]),X.useEffect(()=>{const $=C.current;if(!$)return;const b=$.getContext("2d");if(b.clearRect(0,0,se.width,se.height),b.fillStyle="#000000",b.fillRect(0,0,se.width,se.height),P==="reaching"){I&&(b.beginPath(),b.rect(Yt.x,Yt.y,Yt.width,Yt.height),b.fillStyle=w==="left"?"#27ae60":"#3498db",b.fill(),b.strokeStyle="#2980b9",b.lineWidth=3,b.stroke()),Ct&&(b.beginPath(),b.rect(ur.x,ur.y,ur.width,ur.height),b.fillStyle=w==="right"?"#27ae60":"#3498db",b.fill(),b.strokeStyle="#2980b9",b.lineWidth=3,b.stroke());const ae=se.width/2,Te=20,Fe=15;if(b.strokeStyle="#FFD700",b.lineWidth=3,b.setLineDash([Te,Fe]),b.lineDashOffset=-We,b.beginPath(),b.moveTo(ae,-se.height),b.lineTo(ae,se.height*2),b.stroke(),b.setLineDash([]),c<=3){const je=Ie,gt=gi(b,je,!0),Lt=Math.max(0,Math.ceil(c)),De=`${je} points`,ht=`in ${Lt}...`,yt=32;b.fillStyle="#FFD700",b.strokeStyle="rgba(0,0,0,0.6)",b.font=`bold ${yt}px "Arial", sans-serif`,b.textAlign="center",b.textBaseline="top",b.lineWidth=6;const Mt=tt.y+gt+30;b.strokeText(De,tt.x,Mt),b.fillText(De,tt.x,Mt);const Bt=yt;b.font=`bold ${Bt}px "Arial", sans-serif`;const rt=Mt+yt+6;b.strokeText(ht,tt.x,rt),b.fillText(ht,tt.x,rt)}b.fillStyle="#ffffff",b.font='bold 64px "Orbitron", "Courier New", monospace',b.textAlign="center",b.fillText(`Score: ${m}`,se.width/2,100),Ce&&(b.fillStyle="#FF6B6B",b.font='bold 20px "Orbitron", "Courier New", monospace',b.textAlign="center",b.fillText("Move Faster!",se.width/2,se.height-100)),wt&&(b.fillStyle="#00FF00",b.font='bold 36px "Orbitron", "Courier New", monospace',b.textAlign="center",b.fillText(Ke,se.width/2,se.height/2-100))}else if(P==="coin"){if(b.fillStyle="#ffffff",b.font='bold 64px "Orbitron", "Courier New", monospace',b.textAlign="center",b.fillText(`Score: ${m}`,se.width/2,100),W)if(Pt===0){b.beginPath(),b.arc(tt.x,tt.y,Xn,0,2*Math.PI),b.fillStyle="#f0f0f0",b.fill(),b.strokeStyle="#c0c0c0",b.lineWidth=4,b.stroke();const Me="0",ce=Xn*.4;b.font=`bold ${ce}px "Orbitron", "Courier New", monospace`,b.textAlign="center",b.textBaseline="middle";const ae=tt.x,Te=tt.y-Xn*.7;b.fillStyle="rgba(0, 0, 0, 0.4)",b.fillText(Me,ae+1,Te+1),b.fillStyle="#888888",b.fillText(Me,ae,Te)}else{const Me=gi(b,Pt);if(ge.length>0){const ce=tt.x-ge.length*40/2;let ae;Pt===10?ae=tt.y+Me+120:ae=tt.y+Me+80,ge.forEach((Fe,je)=>{const gt=ce+je*48;N[je]==="correct"?b.fillStyle="#27ae60":N[je]==="incorrect"?b.fillStyle="#e74c3c":je===ue?b.fillStyle="#f39c12":b.fillStyle="#7f8c8d",b.font='bold 48px "Arial", sans-serif',b.fillText(Fe.toUpperCase(),gt,ae)}),b.fillStyle="#FFD700",b.font='bold 32px "Arial", sans-serif',b.textAlign="center",ge.length>0&&ue<ge.length&&b.fillText(`Press: ${ge[ue].toUpperCase()}`,tt.x,ae+48);const Te=`${ue}/${ge.length}`;b.fillStyle="#ecf0f1",b.font='28px "Arial", sans-serif',b.textAlign="center",b.fillText(Te,tt.x,ae+78)}}}else if(P==="break"){b.fillStyle="#000000",b.fillRect(0,0,se.width,se.height),b.fillStyle="#ffffff",b.font='bold 48px "Orbitron", "Courier New", monospace',b.textAlign="center",b.fillText(`Score: ${m}`,se.width/2,80);const Me=ie+1;if(b.fillStyle="#FFFFFF",b.font='bold 32px "Orbitron", "Courier New", monospace',b.textAlign="center",b.fillText(`Block ${Me} Complete!`,se.width/2,se.height/2-100),b.font='20px "Orbitron", "Courier New", monospace',b.fillText("Take a short break.",se.width/2,se.height/2-40),Be!==null){const ce=Be+1;eo(Be),b.fillText(`Press SPACE to continue to Block ${ce}`,se.width/2,se.height/2+40)}b.font='bold 24px "Orbitron", "Courier New", monospace',b.fillText(`Current Score: ${m}`,se.width/2,se.height/2+100)}},[c,m,w,P,W,se,Ce,wt,ge,ue,N,Se,Pt,Ke,s,ye,Yt,ur,tt,Xn,pn,We]),X.useEffect(()=>{if(!s||P==="break"||P!=="reaching")return;const $=ph(ie),b=Lg(ie);$===null&&ye>b&&!E.current&&(console.log(`GAME COMPLETE - Last block finished (block ${ie}, round ${ye})`),a(!1),ee(!1),ne([]),z([]),E.current=!0,r?.())},[ie,ye,s,P,E,r]),X.useEffect(()=>{console.log("State changed:",{currentEnvironment:Se,environmentRound:ye,gamePhase:P,gameActive:s})},[Se,ye,P,s]);const Ar=()=>{if(Be===null){console.warn("No next block available");return}const $=Be,b=eo($);Ve($),be(b),Pe(null),qe(1),j("reaching"),ee(!1),S(null),ke(!1),Dt([]),pt([]),Qe([]),mt([]),kn(null),Fn(null),Kn([]),Qn([]),Tn([]),jn([]),nn([]),fn(1),Gn(null),In(1);const Me=na(),ce=bl();f(Me),ne(ce),z(new Array(ce.length).fill("pending")),yi($,1),console.log("Switched to block:",{nextBlockIndex:$,nextEnvironment:b,roundDuration:Me,sequence:ce})};return M.jsx("div",{className:"game-container",children:M.jsx("div",{className:"canvas-container",children:M.jsx("canvas",{ref:C,width:se.width,height:se.height,onMouseMove:lt,className:"game-canvas",style:{width:"100vw",height:"100vh",display:"block",backgroundColor:"#000000"}})})})},JE=({onPracticeComplete:i})=>{const[e,r]=X.useState(!1),[s,a]=X.useState(0),[c,f]=X.useState(0),[m,y]=X.useState("reaching"),[w,S]=X.useState(!1),[P,j]=X.useState(1),[W,ee]=X.useState(0),[q,K]=X.useState({width:window.innerWidth,height:window.innerHeight}),[se,Ae]=X.useState(!1),[Ce,ke]=X.useState(!1),[We,Ue]=X.useState([]),[C,E]=X.useState(0),[A,k]=X.useState([]),[V,D]=X.useState({x:0,y:0}),[I,ot]=X.useState(!0),[Ct,kt]=X.useState(!0),ge=X.useRef(null),ne=X.useRef(!1),ue=X.useRef({x:null,y:null}),[oe,N]=X.useState(0),z=X.useRef(null),ie=X.useRef(null),Ve=2,Se=.28,be=q.width*.1,Be=q.height,Pe={x:0,y:0,width:be,height:Be},ye={x:q.width-be,y:0,width:be,height:Be},qe={x:q.width/2,y:q.height/2-120},Pt=(Ie,H,wt=!1)=>{let ct,Ke;ct=3,Ke=2;const Ne=Math.max(28,Math.floor(Math.min(q.width,q.height)*.035)),dt=Ne*1.8;let at=0;for(let Dt=0;Dt<Ke;Dt++){const Gt=Dt+1,pt=qe.y+Dt*dt*.8,Hn=qe.x-(Gt-1)*dt/2;for(let Qe=0;Qe<Gt&&at<ct;Qe++){const nt=Hn+Qe*dt;if(Ie.beginPath(),Ie.arc(nt,pt,Ne,0,2*Math.PI),wt){const mt=Ie.createRadialGradient(nt-Ne*.3,pt-Ne*.3,0,nt,pt,Ne);mt.addColorStop(0,"#e6e6e6"),mt.addColorStop(.7,"#bfbfbf"),mt.addColorStop(1,"#9a9a9a"),Ie.fillStyle=mt,Ie.fill(),Ie.strokeStyle="#7f7f7f",Ie.lineWidth=2,Ie.stroke(),Ie.fillStyle="#8c8c8c";const lr=Ne*.12;Ie.fillRect(nt-lr/2,pt-Ne*.55,lr,Ne*1.1)}else{const mt=Ie.createRadialGradient(nt-Ne*.3,pt-Ne*.3,0,nt,pt,Ne);mt.addColorStop(0,"#FFD700"),mt.addColorStop(.7,"#FFA500"),mt.addColorStop(1,"#FF8C00"),Ie.fillStyle=mt,Ie.fill(),Ie.strokeStyle="#FF8C00",Ie.lineWidth=2,Ie.stroke(),Ie.fillStyle="#B8860B",Ie.fillRect(nt-Ne*.1,pt-Ne*.4,Ne*.2,Ne*.8)}at++}}const Et=Ke*dt*.8;return wt||(Ie.fillStyle="#FFD700",Ie.font='bold 32px "Arial", sans-serif',Ie.textAlign="center",Ie.textBaseline="top",Ie.fillText(`${H} points`,qe.x,qe.y+Et+30)),Et};X.useEffect(()=>{const Ie=()=>{K({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",Ie),()=>window.removeEventListener("resize",Ie)},[]),X.useEffect(()=>{if(e&&m==="reaching"){const Ie=setInterval(()=>{a(H=>{if(H<=1){y("keypress"),S(!0);const wt=bl();return Ue(wt),E(0),k(new Array(wt.length).fill("pending")),0}return H-1})},1e3);return()=>clearInterval(Ie)}},[e,m]),X.useEffect(()=>{const Ie=H=>{if(!e||m!=="keypress"||!w||We.length===0)return;const wt=H.key.toLowerCase(),ct=We[C];wt===ct?(k(Ke=>{const Ne=[...Ke];return Ne[C]="correct",Ne}),E(Ke=>{const Ne=Ke+1;return Ne>=We.length?(f(dt=>dt+qn.REWARDS.PRACTICE_VALUE),ke(!0),setTimeout(()=>ke(!1),2e3),ee(dt=>dt+1),P>=Ve?(r(!1),Ue([]),k([]),ne.current||(ne.current=!0,setTimeout(()=>i(),2e3))):(j(dt=>dt+1),y("reaching"),a(na()),S(!1),ot(!0),kt(!0),z.current=null,Ue([]),k([])),0):Ne})):(k(Ke=>{const Ne=[...Ke];return Ne[C]="incorrect",Ne}),setTimeout(()=>{k(Ke=>{const Ne=[...Ke];return Ne[C]==="incorrect"&&(Ne[C]="pending"),Ne})},500))};return window.addEventListener("keydown",Ie),()=>window.removeEventListener("keydown",Ie)},[e,m,w,P,Ve,c,i,We,C]);const Tr=Ie=>{if(!e||m!=="reaching")return;const wt=ge.current.getBoundingClientRect(),ct=Ie.clientX-wt.left,Ke=Ie.clientY-wt.top;D({x:ct,y:Ke});const Ne=ct>=Pe.x&&ct<=Pe.x+Pe.width&&Ke>=Pe.y&&Ke<=Pe.y+Pe.height,dt=ct>=ye.x&&ct<=ye.x+ye.width&&Ke>=ye.y&&Ke<=ye.y+ye.height;Ne&&z.current!=="left"?(ot(!1),kt(!0),z.current="left",Ae(!1),ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>Ae(!0),2e3)):dt&&z.current!=="right"?(ot(!0),kt(!1),z.current="right",Ae(!1),ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>Ae(!0),2e3)):!Ne&&!dt&&z.current!==null&&(z.current=null,Ae(!1),ie.current&&clearTimeout(ie.current));const at=ue.current;if(at.x!==null&&at.y!==null){const Et=ct-at.x,Dt=Ke-at.y,Gt=Math.sqrt(Et*Et+Dt*Dt);Gt>0&&(Ct&&Et>0||I&&Et<0)&&N(Qe=>(Qe+Gt*Se)%35)}ue.current={x:ct,y:Ke}};return X.useEffect(()=>{r(!0),y("reaching"),a(na())},[]),X.useEffect(()=>()=>{ie.current&&clearTimeout(ie.current)},[]),X.useEffect(()=>{const Ie=ge.current;if(!Ie)return;const H=Ie.getContext("2d");if(H.clearRect(0,0,q.width,q.height),H.fillStyle="#000000",H.fillRect(0,0,q.width,q.height),m==="reaching"){I&&(H.beginPath(),H.rect(Pe.x,Pe.y,Pe.width,Pe.height),H.fillStyle="#3498db",H.fill(),H.strokeStyle="#2980b9",H.lineWidth=3,H.stroke()),Ct&&(H.beginPath(),H.rect(ye.x,ye.y,ye.width,ye.height),H.fillStyle="#3498db",H.fill(),H.strokeStyle="#2980b9",H.lineWidth=3,H.stroke());const wt=q.width/2,ct=20,Ke=15;if(H.strokeStyle="#FFD700",H.lineWidth=3,H.setLineDash([ct,Ke]),H.lineDashOffset=-oe,H.beginPath(),H.moveTo(wt,-q.height),H.lineTo(wt,q.height*2),H.stroke(),H.setLineDash([]),s<=3){const Ne=qn.REWARDS.PRACTICE_VALUE,dt=Pt(H,Ne,!0),at=Math.max(0,Math.ceil(s)),Et=`${Ne} points`,Dt=`in ${at}...`,Gt=32;H.fillStyle="#FFD700",H.strokeStyle="rgba(0,0,0,0.6)",H.font=`bold ${Gt}px "Arial", sans-serif`,H.textAlign="center",H.textBaseline="top",H.lineWidth=6;const pt=qe.y+dt+30;H.strokeText(Et,qe.x,pt),H.fillText(Et,qe.x,pt);const Hn=Gt;H.font=`bold ${Hn}px "Arial", sans-serif`;const Qe=pt+Gt+6;H.strokeText(Dt,qe.x,Qe),H.fillText(Dt,qe.x,Qe)}H.beginPath(),H.arc(V.x,V.y,16,0,2*Math.PI),H.fillStyle="#FFD700",H.fill(),H.strokeStyle="#FFA500",H.lineWidth=2,H.stroke(),H.fillStyle="#ffffff",H.font='bold 64px "Orbitron", "Courier New", monospace',H.textAlign="center",H.fillText(`Score: ${c}`,q.width/2,90),H.fillStyle="#ffffff",H.font='16px "Press Start 2P", "Courier New", monospace',H.textAlign="center",H.fillText("Move your cursor back and forth between the bars!",q.width/2,q.height-50),se&&(H.fillStyle="#FF6B6B",H.font='bold 20px "Orbitron", "Courier New", monospace',H.textAlign="center",H.fillText("Move Faster!",q.width/2,q.height-100)),Ce&&(H.fillStyle="#00FF00",H.font='bold 36px "Orbitron", "Courier New", monospace',H.textAlign="center",H.fillText(`+${qn.REWARDS.PRACTICE_VALUE}`,q.width/2,q.height/2-100))}else if(m==="keypress"){if(w&&Pt(H,qn.REWARDS.PRACTICE_VALUE,!1),We.length>0){const ct=qe.x-We.length*50/2,Ke=qe.y+200;H.font='bold 48px "Arial", sans-serif',H.textAlign="center",H.textBaseline="middle",We.forEach((dt,at)=>{const Et=ct+at*50;A[at]==="correct"?H.fillStyle="#27ae60":A[at]==="incorrect"?H.fillStyle="#e74c3c":at===C?H.fillStyle="#f39c12":H.fillStyle="#7f8c8d",H.fillText(dt.toUpperCase(),Et,Ke)}),C<We.length&&(H.fillStyle="#FFD700",H.font='bold 24px "Arial", sans-serif',H.fillText(`Press: ${We[C].toUpperCase()}`,qe.x,Ke+50));const Ne=`${C}/${We.length}`;H.fillStyle="#ecf0f1",H.font='20px "Arial", sans-serif',H.fillText(Ne,qe.x,Ke+75)}H.fillStyle="#ffffff",H.font='bold 64px "Orbitron", "Courier New", monospace',H.textAlign="center",H.fillText(`Score: ${c}`,q.width/2,90),H.fillStyle="#ffffff",H.font='16px "Press Start 2P", "Courier New", monospace',H.textAlign="center",H.fillText("Press the highlighted keys in sequence to collect the coin!",q.width/2,q.height-50),Ce&&(H.fillStyle="#00FF00",H.font='bold 36px "Orbitron", "Courier New", monospace',H.textAlign="center",H.fillText(`+${qn.REWARDS.PRACTICE_VALUE}`,q.width/2,q.height/2-100))}},[s,c,m,w,q,se,Ce,We,C,A,V,e,I,Ct]),M.jsx("div",{className:"game-container",children:M.jsx("div",{className:"canvas-container",children:M.jsx("canvas",{ref:ge,width:q.width,height:q.height,onMouseMove:Tr,className:"game-canvas",style:{width:"100vw",height:"100vh",display:"block"}})})})},ZE=()=>{const i=async e=>{try{console.log(`Exporting ${e}...`);const r=await FE(wa(Ea,e)),s=[];if(r.forEach(P=>{s.push({documentId:P.id,...P.data()})}),console.log(`Found ${s.length} documents in ${e}`),s.length===0){alert(`No data found in ${e}`);return}const a=new Set;s.forEach(P=>{Object.keys(P).forEach(j=>a.add(j))});const c=Array.from(a),f=[c.join(",")];s.forEach(P=>{const j=c.map(W=>{const ee=P[W];return ee==null?"":Array.isArray(ee)?`"${JSON.stringify(ee).replace(/"/g,'""')}"`:typeof ee=="object"?`"${JSON.stringify(ee).replace(/"/g,'""')}"`:`"${String(ee).replace(/"/g,'""')}"`});f.push(j.join(","))});const m=f.join(`
`),y=new Blob([m],{type:"text/csv;charset=utf-8;"}),w=URL.createObjectURL(y),S=document.createElement("a");S.href=w,S.download=`${e}_export_${new Date().toISOString().split("T")[0]}.csv`,S.click(),console.log(` Exported ${s.length} documents to CSV`)}catch(r){console.error(` Error exporting ${e}:`,r),alert(`Export failed: ${r.message}`)}};return M.jsxs("div",{style:{padding:"20px",backgroundColor:"#f5f5f5",borderRadius:"8px",margin:"20px",maxWidth:"400px"},children:[M.jsx("h3",{style:{marginTop:0,color:"#333"},children:"Export Firebase Data to CSV"}),M.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[M.jsx("button",{onClick:()=>i("globalInvigorationTrials"),style:{padding:"12px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:" Export Trials Data"}),M.jsx("button",{onClick:()=>i("globalInvigorationSubjects"),style:{padding:"12px 20px",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:" Export Subjects Data"})]}),M.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"15px",marginBottom:0},children:"Downloads CSV files with all data from your Firebase collections"})]})};function eT(){const[i,e]=X.useState("consent"),[r,s]=X.useState(null),[a,c]=X.useState(null),[f,m]=X.useState(0),y=async()=>{try{document.documentElement.requestFullscreen?await document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?await document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen?await document.documentElement.msRequestFullscreen():(window.moveTo(0,0),window.resizeTo(screen.width,screen.height))}catch(q){console.warn("Could not enter fullscreen mode:",q);try{window.moveTo(0,0),window.resizeTo(screen.width,screen.height)}catch(K){console.warn("Could not maximize window:",K)}}},w=async()=>{await y(),e("survey")},S=async q=>{s(q);try{const K=await KE(q);c(K),console.log("Participant initialized with ID:",K)}catch(K){console.error("Failed to initialize participant data collection:",K)}m(0),e("instructions")},P=()=>{e("game")},j=()=>{e("practice")},W=()=>{m(3),e("instructions")},ee=q=>{e("complete")};return M.jsxs("div",{className:"app",children:[i==="consent"&&M.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:9999},children:M.jsx("button",{onClick:()=>e("export"),style:{padding:"10px 15px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"bold",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},title:"Export Firebase data to CSV",children:" Export Data"})}),i==="consent"&&M.jsx(Gy,{onConsent:w,onDecline:()=>e("decline")}),i==="survey"&&M.jsx(Yy,{onSubmit:S}),i==="instructions"&&M.jsx(Xy,{onStart:P,onPractice:j,currentPage:f,setCurrentPage:m}),i==="practice"&&M.jsx(JE,{onPracticeComplete:W}),i==="game"&&M.jsx(XE,{participantData:r,participantId:a,onGameComplete:ee}),i==="export"&&M.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",zIndex:1e4,display:"flex",justifyContent:"center",alignItems:"center"},children:M.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto"},children:[M.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[M.jsx("h2",{style:{margin:0},children:"Export Firebase Data"}),M.jsx("button",{onClick:()=>e("consent"),style:{padding:"8px 12px",backgroundColor:"#666",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:" Close"})]}),M.jsx(ZE,{})]})}),i==="complete"&&M.jsxs("div",{className:"complete-message",children:[M.jsx("h1",{children:"Study Complete!"}),M.jsx("p",{children:"Thank you for participating in our research study."})]}),i==="decline"&&M.jsxs("div",{className:"decline-message",children:[M.jsx("h1",{children:"Thank you for your time"}),M.jsx("p",{children:"You have chosen not to participate in this study."})]})]})}const tT=Qy.createRoot(document.getElementById("root"));tT.render(M.jsx(Uy.StrictMode,{children:M.jsx(eT,{})}));
